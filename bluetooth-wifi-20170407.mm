<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1435227071941" ID="ID_1914482746" MODIFIED="1476355501935" TEXT="android audio&#x548c;&#x84dd;&#x7259;&#x7cfb;&#x7edf;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1435283368268" ID="ID_730311801" MODIFIED="1486606944950" POSITION="right" TEXT="&#x84dd;&#x7259;&#x7cfb;&#x7edf;">
<node CREATED="1435283379593" FOLDED="true" ID="ID_1626245250" MODIFIED="1488696520904" TEXT="1.&#x84dd;&#x7259;&#x7cfb;&#x7edf;&#x7684;&#x6280;&#x672f;&#x7279;&#x70b9;">
<node CREATED="1435283390623" ID="ID_1455215123" MODIFIED="1484548753161" TEXT="&#x80fd;&#x540c;&#x65f6;&#x4f20;&#x9001;&#x8bed;&#x97f3;&#x548c;&#x6570;&#x636e;">
<node CREATED="1435283523043" ID="ID_524587688" MODIFIED="1435283531162" TEXT="&#x652f;&#x6301;&#x7535;&#x8def;&#x4ea4;&#x6362;&#x548c;&#x8bed;&#x97f3;&#x4ea4;&#x6362;"/>
<node CREATED="1435283542724" ID="ID_1125731300" MODIFIED="1484548753162">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23450;&#20041;&#20102;2&#20013;&#38142;&#36335;&#31867;&#22411;&#65306;
    </p>
    <p>
      SCO&#65288;&#38754;&#21521;&#36830;&#25509;&#30340;&#21516;&#27493;&#38142;&#36335;&#65289;ACL&#65288;&#38754;&#21521;&#26080;&#36830;&#25509;&#30340;&#24322;&#27493;&#38142;&#36335;&#65289;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435283624515" ID="ID_866210455" MODIFIED="1469204163927">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SCO&#25903;&#25345;&#35821;&#38899;&#21644;&#25968;&#25454;&#20256;&#36865;&#65292;&#35821;&#38899;&#32534;&#30721;&#20026;PCM&#25110;&#32773;&#26159;CVSD
    </p>
    <p>
      <font color="#ff0099">SCO&#38142;&#36335;&#30001;&#20027;&#21333;&#20803;&#24314;&#31435;&#65292;&#20027;&#21333;&#20803;&#36890;&#36807;LMP&#21327;&#35758;&#21457;&#36865;SCO&#35774;&#32622;</font>
    </p>
    <p>
      &#28040;&#24687;&#32473;&#20174;&#21333;&#20803;&#20174;&#32780;&#24314;&#31435;&#25968;&#25454;&#38142;&#36335;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435283659814" ID="ID_334085389" MODIFIED="1435311360715">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ACL&#25903;&#25345;&#23545;&#31216;&#21644;&#38750;&#23545;&#31216;&#20004;&#31181;&#24103;&#26684;&#24335;
    </p>
    <p>
      &#20027;&#20174;&#21333;&#20803;&#20043;&#38388;&#21482;&#33021;&#23384;&#22312;&#19968;&#26465;ACL&#38142;&#36335;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1435283780485" ID="ID_602037987" MODIFIED="1484548753163" TEXT="&#x5de5;&#x4f5c;&#x5728;&#x5168;&#x7403;&#x901a;&#x7528;&#x7684;&#x9891;&#x6bb5;">
<node CREATED="1435283798116" ID="ID_1030437502" MODIFIED="1435283804529" TEXT="2.4GHz"/>
<node CREATED="1435283806924" ID="ID_550180614" MODIFIED="1435283824117" TEXT="&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x8df3;&#x9891;&#x4fdd;&#x8bc1;&#x901a;&#x4fe1;&#x7684;&#x7a33;&#x5b9a;&#x6027;"/>
</node>
<node CREATED="1435285480273" ID="ID_494586323" MODIFIED="1435285493439" TEXT="&#x4f4e;&#x6210;&#x672c;&#x4f4e;&#x529f;&#x8017;&#x548c;&#x4f4e;&#x8f90;&#x5c04;"/>
<node CREATED="1435285769655" ID="ID_330547750" MODIFIED="1484548753164" TEXT="&#x7f51;&#x7edc;&#x7279;&#x6027;">
<node CREATED="1435285797052" ID="ID_1788372143" MODIFIED="1435285805056" TEXT="&#x70b9;&#x5bf9;&#x591a;&#x70b9;&#x7684;&#x901a;&#x4fe1;&#x6a21;&#x5f0f;"/>
<node CREATED="1435285807686" ID="ID_1633164674" MODIFIED="1435285821839" TEXT="&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x53ef;&#x4ee5;&#x540c;&#x65f6;&#x8ddf;7&#x4e2a;&#x8bbe;&#x5907;&#x901a;&#x4fe1;"/>
</node>
</node>
<node CREATED="1435304525881" ID="ID_32762988" MODIFIED="1435304569531">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#34013;&#29273;&#31995;&#32479;&#30340;&#20449;&#21495;&#35843;&#21046;&#26041;&#24335;
    </p>
    <p>
      GFSK&#65292;&#39640;&#26031;&#39057;&#31227;&#38190;&#25511;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435312162088" ID="ID_314668397" MODIFIED="1488696603714" TEXT="3.&#x57fa;&#x5e26;&#x5206;&#x7ec4;">
<node CREATED="1435312199400" ID="ID_624566601" MODIFIED="1484548753183">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25509;&#20837;&#30721;access code&#65288;&#20998;&#32452;&#33267;&#23569;&#21253;&#21547;&#25509;&#20837;&#30721;&#65289;&#65306;
    </p>
    <p>
      &#24341;&#23548;&#30721;(&#30452;&#27969;&#20559;&#32622;&#34917;&#20607;)&#65292;&#21516;&#27493;&#23383;(&#26469;&#33258;24&#20301;&#22320;&#22336;&#30340;64&#20301;&#20195;&#30721;&#23383;)&#21644;
    </p>
    <p>
      &#23614;&#30721;(&#29992;&#20110;&#25193;&#23637;&#30452;&#27969;&#34917;&#20607;)
    </p>
  </body>
</html></richcontent>
<node CREATED="1435312326192" ID="ID_1877725295" MODIFIED="1435312347540" TEXT="&#x4fe1;&#x9053;&#x63a5;&#x5165;&#x7801;(CAC)"/>
<node CREATED="1435312357217" ID="ID_1899399227" MODIFIED="1435312368836" TEXT="&#x8bbe;&#x5907;&#x63a5;&#x5165;&#x7801;(DAC)"/>
<node CREATED="1435312382687" ID="ID_1251834403" MODIFIED="1484548753185" TEXT="&#x67e5;&#x8be2;&#x63a5;&#x5165;&#x7801;(IAC)">
<node CREATED="1435312414585" ID="ID_1960572240" MODIFIED="1435312475002">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19987;&#29992;&#26597;&#35810;&#25509;&#20837;&#30721;&#65306;
    </p>
    <p>
      &#21457;&#29616;&#19987;&#29992;&#35774;&#22791;&#32452;&#20869;&#30340;&#34013;&#29273;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435312429729" ID="ID_542089171" MODIFIED="1435312488983">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#29992;&#26597;&#35810;&#25509;&#20837;&#30721;
    </p>
    <p>
      &#35206;&#30422;&#33539;&#22260;&#20869;&#30340;&#34013;&#29273;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1435312219634" ID="ID_424035929" MODIFIED="1484548753185" TEXT="&#x5206;&#x7ec4;&#x5934;">
<node CREATED="1435312680367" ID="ID_1716836009" MODIFIED="1435312703315" TEXT="AM_ADDR(3bit)&#x7528;&#x4e8e;&#x8bc6;&#x522b;&#x4ece;&#x8bbe;&#x5907;"/>
<node CREATED="1435312729912" ID="ID_1260696848" MODIFIED="1484548753186" TEXT="TYPE(4)&#x8868;&#x793a;&#x5206;&#x7ec4;&#x7c7b;&#x578b;">
<node CREATED="1435313500369" FOLDED="true" ID="ID_713519213" MODIFIED="1484548753959" TEXT="&#x516c;&#x5171;&#x5206;&#x7ec4;">
<node CREATED="1435313559094" ID="ID_1718138815" MODIFIED="1435313634065">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ID&#20998;&#32452;
    </p>
    <p>
      &#35774;&#22791;&#30340;&#23547;&#21628;&#65292;&#26597;&#35810;&#65292;&#21709;&#24212;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435313568089" ID="ID_1380915811" MODIFIED="1435313666377">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NULL&#20998;&#32452;
    </p>
    <p>
      &#36820;&#22238;&#21457;&#36865;&#26041;FLOW,ARQN&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435313578512" ID="ID_1886223372" MODIFIED="1435313581583" TEXT="POLL&#x5206;&#x7ec4;"/>
<node CREATED="1435313589408" ID="ID_800603740" MODIFIED="1435313702400">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FHS&#20998;&#32452;
    </p>
    <p>
      &#25351;&#31034;&#34013;&#29273;&#35774;&#22791;&#22320;&#22336;&#21644;&#26102;&#38047;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1435313512393" ID="ID_364652543" MODIFIED="1435313515791" TEXT="SCO&#x5206;&#x7ec4;"/>
<node CREATED="1435313523112" ID="ID_1165439912" MODIFIED="1435313530965" TEXT="eSCO&#x5206;&#x7ec4;"/>
<node CREATED="1435313537536" ID="ID_963520" MODIFIED="1435313540368" TEXT="ACL&#x5206;&#x7ec4;"/>
</node>
<node CREATED="1435312761085" ID="ID_200783920" MODIFIED="1435312789446" TEXT="FLOW(1)&#x6d41;&#x91cf;&#x63a7;&#x5236;&#x6807;&#x5fd7;&#xff0c;&#x7528;&#x4e8e;&#x6682;&#x505c;ACL&#x67d0;&#x4e9b;&#x5206;&#x7ec4;&#x7684;&#x53d1;&#x9001;"/>
<node CREATED="1435312834891" ID="ID_866263525" MODIFIED="1435312876564" TEXT="ARQN(1)&#x786e;&#x8ba4;&#x6307;&#x793a;"/>
<node CREATED="1435312879229" ID="ID_1939549661" MODIFIED="1435312912629" TEXT="SEQN(1)&#x5e8f;&#x5217;&#x7f16;&#x53f7;&#xff0c;&#x7528;&#x4e8e;&#x9632;&#x6b62;&#x91cd;&#x53d1;"/>
<node CREATED="1435312929173" ID="ID_1232284052" MODIFIED="1435312948382" TEXT="HEC(8)&#x5206;&#x7ec4;&#x5934;&#x9519;&#x8bef;&#x6821;&#x9a8c;"/>
</node>
<node CREATED="1435312230712" ID="ID_751037173" MODIFIED="1484548753188" TEXT="&#x6709;&#x6548;&#x8f7d;&#x8377;(payload)">
<node CREATED="1435313895269" ID="ID_1070925239" MODIFIED="1435313903401" TEXT="&#x540c;&#x6b65;&#x8bed;&#x97f3;&#x6709;&#x6548;&#x8f7d;&#x8377;"/>
<node CREATED="1435313906005" ID="ID_923205164" MODIFIED="1435313911998" TEXT="&#x5f02;&#x6b65;&#x6570;&#x636e;&#x6709;&#x6548;&#x8f7d;&#x8377;"/>
</node>
</node>
<node CREATED="1435314016090" FOLDED="true" ID="ID_66543754" MODIFIED="1488696602519" TEXT="4.&#x903b;&#x8f91;&#x4fe1;&#x9053;">
<node CREATED="1435314051348" ID="ID_73309116" MODIFIED="1435314064930" TEXT="&#x94fe;&#x8def;&#x63a7;&#x5236;&#x5668;&#xff08;LC&#xff09;&#x63a7;&#x5236;&#x4fe1;&#x9053;"/>
<node CREATED="1435314073703" ID="ID_1961653524" MODIFIED="1435314086352" TEXT="&#x94fe;&#x8def;&#x7ba1;&#x7406;&#x5668;&#xff08;LM&#xff09;&#x63a7;&#x5236;&#x4fe1;&#x9053;"/>
<node CREATED="1435314096548" ID="ID_28546604" MODIFIED="1435314100980" TEXT="UA&#x7528;&#x6237;&#x4fe1;&#x9053;"/>
<node CREATED="1435314107123" ID="ID_1889539590" MODIFIED="1435314112240" TEXT="UI&#x7528;&#x6237;&#x4fe1;&#x9053;"/>
<node CREATED="1435314118546" ID="ID_1236022195" MODIFIED="1435314122821" TEXT="US&#x7528;&#x6237;&#x4fe1;&#x9053;"/>
</node>
<node CREATED="1435544302851" FOLDED="true" ID="ID_231037700" MODIFIED="1488696600487" TEXT="5.&#x6742;&#x9879;">
<node CREATED="1435544328968" ID="ID_1772152985" MODIFIED="1435544355995">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20027;&#20174;&#35774;&#22791;&#30340;&#23450;&#26102;&#21516;&#27493;&#65306;
    </p>
    <p>
      &#20351;&#29992;&#20027;&#35774;&#22791;&#30340;&#23450;&#26102;&#22120;&#36827;&#34892;&#21516;&#27493;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435544398968" ID="ID_30048289" MODIFIED="1435544424332">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36830;&#25509;&#29366;&#24577;&#19979;&#65306;
    </p>
    <p>
      &#25910;&#21457;&#26426;&#20132;&#26367;&#36827;&#34892;&#25509;&#25910;&#21644;&#21457;&#36865;&#30340;&#25805;&#20316;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435544534887" ID="ID_1671533569" MODIFIED="1435544562269">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20174;&#20445;&#25345;&#27169;&#24335;&#36820;&#22238;&#65306;
    </p>
    <p>
      &#20174;&#21333;&#20803;&#24517;&#39035;&#20808;&#20390;&#21548;&#20027;&#21333;&#20803;&#25165;&#21487;&#20197;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435544608260" ID="ID_1034275612" MODIFIED="1435544615751" TEXT="&#x4f11;&#x7720;&#x4e0e;&#x547c;&#x5438;&#x6a21;&#x5f0f;&#x5524;&#x9192;"/>
</node>
<node CREATED="1435545233979" FOLDED="true" ID="ID_1474628889" MODIFIED="1488696582986" TEXT="6.&#x5904;&#x4e8e;&#x8fde;&#x63a5;&#x72b6;&#x6001;&#x7684;&#x51e0;&#x79cd;&#x6a21;&#x5f0f;">
<node COLOR="#ff0066" CREATED="1435545256563" ID="ID_1815966675" MODIFIED="1435545516548" TEXT="1.&#x6fc0;&#x6d3b;&#x6a21;&#x5f0f;"/>
<node COLOR="#ff0066" CREATED="1435545414938" ID="ID_414009783" MODIFIED="1435545522058">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#21628;&#21560;&#27169;&#24335;&#65306;
    </p>
    <p>
      &#22312;ACL&#38142;&#36335;&#27169;&#24335;&#19979;&#38754;&#65292;&#20174;&#35774;&#22791;&#21482;&#33021;&#22312;&#20027;&#21040;&#20174;&#30340;ACL&#26102;&#38553;&#36827;&#34892;&#30417;&#21548;
    </p>
    <p>
      &#20027;&#35774;&#22791;&#21482;&#33021;&#22312;&#29305;&#23450;&#30340;&#26102;&#38553;&#21521;&#26576;&#20010;&#20174;&#35774;&#22791;&#21457;&#36865;&#25968;&#25454;
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#ff3399" CREATED="1435545554261" ID="ID_1067436736" MODIFIED="1435545758875" TEXT="3.&#x4fdd;&#x6301;&#x6a21;&#x5f0f;"/>
<node COLOR="#ff0033" CREATED="1435545636024" ID="ID_932699538" MODIFIED="1484548753193" TEXT="4.&#x4f11;&#x7720;&#x6a21;&#x5f0f;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1435545653794" ID="ID_739274588" MODIFIED="1435545659570" TEXT="&#x4fdd;&#x6301;&#x4fe1;&#x9053;&#x540c;&#x6b65;"/>
<node CREATED="1435545667480" ID="ID_1024338475" MODIFIED="1435545677882" TEXT="&#x653e;&#x5f03;&#x6d3b;&#x52a8;&#x6210;&#x5458;&#x5730;&#x5740;"/>
<node CREATED="1435545686059" ID="ID_1839707240" MODIFIED="1435545750242">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;8&#20301;&#30340;&#20241;&#30496;&#25104;&#21592;&#22320;&#22336;&#65306;
    </p>
    <p>
      &#29992;&#20110;&#21306;&#21035;&#22788;&#20110;&#20241;&#30496;&#30340;&#21508;&#20010;&#20174;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435545710035" ID="ID_523259174" MODIFIED="1435545719663" TEXT="&#x4f7f;&#x7528;8&#x4f4d;&#x7684;&#x63a5;&#x5165;&#x8bf7;&#x6c42;&#x5730;&#x5740;"/>
</node>
</node>
<node CREATED="1435569797090" FOLDED="true" ID="ID_1167292037" MODIFIED="1488696598079" TEXT="&#x7b2c;&#x4e03;&#x7ae0;&#xff1a;&#x9002;&#x914d;&#x534f;&#x8bae;">
<node CREATED="1435569819787" ID="ID_172779642" MODIFIED="1435569825861" TEXT="&#x4e32;&#x53e3;&#x4eff;&#x771f;&#x534f;&#x8bae;"/>
<node CREATED="1435569836360" ID="ID_1933801717" MODIFIED="1435569842861" TEXT="&#x84dd;&#x7259;&#x7535;&#x8bdd;&#x63a7;&#x5236;&#x534f;&#x8bae;"/>
<node CREATED="1435570028762" ID="ID_623533424" MODIFIED="1435570064945" TEXT="&#x5b9e;&#x73b0;&#x4e0e;IrDA&#x5b9e;&#x73b0;&#x4e92;&#x64cd;&#x4f5c;&#x7684;IrOBEX&#x534f;&#x8bae;"/>
<node CREATED="1435570072202" ID="ID_1869573346" MODIFIED="1435570075728" TEXT="&#x97f3;&#x9891;&#x534f;&#x8bae;"/>
<node CREATED="1435570081818" ID="ID_1806657095" MODIFIED="1435570087248" TEXT="&#x7f51;&#x7edc;&#x5c01;&#x88c5;&#x534f;&#x8bae;"/>
<node CREATED="1435570093602" ID="ID_1396392962" MODIFIED="1435570101052" TEXT="&#x97f3;&#x89c6;&#x9891;&#x5206;&#x53d1;&#x4f20;&#x8f93;&#x534f;&#x8bae;"/>
<node CREATED="1435570111915" ID="ID_1111815465" MODIFIED="1435570122630" TEXT="&#x97f3;&#x9891;&#x89c6;&#x9891;&#x63a7;&#x5236;&#x4f20;&#x8f93;&#x534f;&#x8bae;"/>
</node>
<node COLOR="#ff0000" CREATED="1435570821133" ID="ID_1950263057" MODIFIED="1486630142300" TEXT="&#x6e90;&#x4ee3;&#x7801;&#x7cfb;&#x7edf;">
<node CREATED="1435570906336" ID="ID_1248696394" MODIFIED="1484548753194" TEXT="BlueZ&#x9002;&#x914d;&#x5668;">
<node CREATED="1435570923467" ID="ID_1372408986" MODIFIED="1484548753195" TEXT="&#x7528;&#x6237;&#x7a7a;&#x95f4;">
<node CREATED="1435571040859" ID="ID_826660951" MODIFIED="1435571056375" TEXT="&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x63a5;&#x53e3;"/>
<node CREATED="1435571061623" ID="ID_550932491" MODIFIED="1435571082258" TEXT="&#x5de5;&#x5177;&#x96c6;"/>
</node>
<node CREATED="1435570931609" ID="ID_1244165983" MODIFIED="1484548753195" TEXT="&#x5185;&#x6838;&#x7a7a;&#x95f4;">
<node CREATED="1435571545952" ID="ID_358523185" MODIFIED="1486636972196" TEXT="&#x6838;&#x5fc3;&#x534f;&#x8bae;kernel/net/bluetooth">
<node CREATED="1435572175496" ID="ID_1033449236" MODIFIED="1435572756052">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      L2CAP&#65306;
    </p>
    <p>
      &#21521;&#19978;&#23618;&#25552;&#20379;&#38754;&#21521;&#36830;&#25509;&#30340;&#25110;&#32773;&#26080;&#36830;&#25509;&#30340;&#25968;&#25454;&#26381;&#21153;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435571602183" ID="ID_1588409029" MODIFIED="1435572856685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">HCI </font>
    </p>
    <p>
      <font color="rgb(51, 51, 51)" face="Arial" size="3">HCI&#26159;&#20301;&#20110;&#34013;&#29273;&#31995;&#32479;&#30340;L2CAP&#65288;&#36923;&#36753;&#38142;&#36335;&#25511;&#21046;&#19982;&#36866;&#37197;&#21327;&#35758;&#65289;&#23618;&#21644; </font>
    </p>
    <p>
      <font color="rgb(51, 51, 51)" face="Arial" size="3">LMP&#65288;&#38142;&#36335;&#31649;&#29702;&#21327;&#35758;&#65289;&#23618;&#20043;&#38388;&#30340;&#19968;&#23618;&#21327;&#35758;&#12290;HCI&#20026;&#19978;&#23618;&#21327;&#35758;&#25552;&#20379;&#20102;&#36827;&#20837;LM&#30340;&#32479;&#19968;&#25509;&#21475;&#21644;&#36827;&#20837;&#22522;&#24102;&#30340;&#32479;&#19968;&#26041;&#24335;&#12290;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435573124596" ID="ID_1498239528" MODIFIED="1435573325915">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HID&#23450;&#20041;&#20102;&#34013;&#29273;&#22312;&#20154;&#26426;&#25509;&#21475;&#35774;&#22791;&#20013;&#30340;&#21327;&#35758;&#65292;&#29305;&#24449;&#21644;&#20351;&#29992;&#35268;&#31243;&#12290;&#20856;&#22411;&#30340;&#24212;&#29992;&#21253;&#25324;
    </p>
    <p>
      &#34013;&#29273;&#40736;&#26631;&#65292;&#34013;&#29273;&#38190;&#30424;&#31561;&#31561;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435573668514" ID="ID_284404332" MODIFIED="1435573677941" TEXT="RFCOMM&#x534f;&#x8bae;"/>
<node CREATED="1435573805035" ID="ID_230684584" MODIFIED="1435573810957" TEXT="SCO&#x534f;&#x8bae;"/>
<node CREATED="1435576243979" ID="ID_1620278316" MODIFIED="1435576251696" TEXT="SDP&#x670d;&#x52a1;&#x53d1;&#x73b0;&#x534f;&#x8bae;"/>
<node CREATED="1435576398402" ID="ID_1931389820" MODIFIED="1435576424635" TEXT="BNEP&#x84dd;&#x7259;&#x7f51;&#x7edc;&#x5c01;&#x88c5;&#x534f;&#x8bae;&#xff0c;&#x53ef;&#x4ee5;&#x5728;&#x5176;&#x4e0a;&#x8fd0;&#x884c;&#x5176;&#x4ed6;&#x7684;&#x5982;tcp,ip&#x534f;&#x8bae;"/>
</node>
<node CREATED="1435571554933" ID="ID_946856986" MODIFIED="1486696901761" TEXT="&#x9a71;&#x52a8;&#x7a0b;&#x5e8f;kernel/driver/bluetooth">
<node CREATED="1435578536546" ID="ID_547135958" MODIFIED="1435578538398" TEXT="&#x5305;&#x542b;Linuxkernel&#x5bf9;&#x5404;&#x79cd;&#x63a5;&#x53e3;&#x7684; &#x9;Bluetooth device&#x7684;&#x9a71;&#x52a8;,&#x5982;&#xff1a;USB&#x63a5;&#x53e3;&#xff0c;&#x4e32;&#x53e3;&#x7b49;&#x3002;"/>
</node>
</node>
</node>
</node>
<node CREATED="1435820702708" FOLDED="true" ID="ID_1793912985" MODIFIED="1486607159207">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      developer.android.com&#23448;&#26041;
    </p>
    <p>
      &#34013;&#29273;&#24320;&#21457;&#25991;&#26723;&#38405;&#35835;&#24635;&#32467;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435820744796" FOLDED="true" ID="ID_886749648" MODIFIED="1486607154967" TEXT="1.Basics">
<node CREATED="1435820799715" ID="ID_102609888" MODIFIED="1484548753206" TEXT="bluetooth API&#x63d0;&#x4f9b;&#x7684;&#x529f;&#x80fd;">
<node CREATED="1435820937609" ID="ID_778087442" MODIFIED="1435820945603" TEXT="&#x626b;&#x63cf;&#x5176;&#x4ed6;&#x7684;&#x84dd;&#x7259;&#x8bbe;&#x5907;"/>
<node CREATED="1435820955094" ID="ID_1570582984" MODIFIED="1435820970432" TEXT="&#x5411;&#x672c;&#x5730;&#x9002;&#x914d;&#x5668;&#x8be2;&#x95ee;&#x53ef;&#x4ee5;&#x914d;&#x5bf9;&#x7684;&#x84dd;&#x7259;&#x8bbe;&#x5907;"/>
<node CREATED="1435820979984" ID="ID_264916950" MODIFIED="1435820986570" TEXT="&#x5efa;&#x7acb;&#x4e32;&#x53e3;&#x901a;&#x9053;"/>
<node CREATED="1435820995302" ID="ID_679979596" MODIFIED="1435821004048" TEXT="&#x901a;&#x8fc7;&#x670d;&#x52a1;&#x53d1;&#x73b0;&#x8fde;&#x63a5;&#x5230;&#x5176;&#x4ed6;&#x7684;&#x8bbe;&#x5907;"/>
<node CREATED="1435821015409" ID="ID_574865435" MODIFIED="1435821019702" TEXT="&#x7ba1;&#x7406;&#x591a;&#x4e2a;&#x8fde;&#x63a5;"/>
</node>
<node CREATED="1435821088401" FOLDED="true" ID="ID_1165767340" MODIFIED="1486605688229" TEXT="&#x5bf9;&#x4e8e;&#x521b;&#x5efa;&#x84dd;&#x7259;&#x8fde;&#x63a5;&#x9700;&#x8981;&#x7528;&#x5230;&#x7684;&#x7c7b;&#x548c;&#x63a5;&#x53e3;">
<node CREATED="1435821236987" ID="ID_140276448" MODIFIED="1484631348166" TEXT="BluetoothAdapter&#x84dd;&#x7259;&#x4ea4;&#x4e92;&#x7684;&#x5165;&#x53e3;&#x70b9;">
<node CREATED="1435821276454" ID="ID_15106065" MODIFIED="1435821292998" TEXT="&#x53d1;&#x73b0;&#x5176;&#x4ed6;&#x7684;&#x84dd;&#x7259;&#x8bbe;&#x5907;"/>
<node CREATED="1435821297480" ID="ID_848677503" MODIFIED="1435821305430" TEXT="&#x8be2;&#x95ee;&#x53ef;&#x4ee5;&#x914d;&#x5bf9;&#x7684;&#x84dd;&#x7259;&#x8bbe;&#x5907;"/>
<node CREATED="1435821318454" ID="ID_748136620" MODIFIED="1435821628170">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;&#24050;&#30693;&#30340;MAC&#22320;&#22336;&#21021;&#22987;&#21270;<font color="#ff0099">BluethDevice</font>
    </p>
  </body>
</html></richcontent>
<arrowlink DESTINATION="ID_1132896842" ENDARROW="Default" ENDINCLINATION="27;-193;" ID="Arrow_ID_1197486428" STARTARROW="None" STARTINCLINATION="279;-48;"/>
</node>
<node CREATED="1435821372877" ID="ID_932219788" MODIFIED="1435821397133">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21019;&#24314;<font color="#ff0000">BluetoothServerSocket</font>&#30417;&#21548;&#20854;&#20182;&#35774;&#22791;&#30340;&#35831;&#27714;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1435821410813" FOLDED="true" ID="ID_1132896842" MODIFIED="1484631347180">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BluetoothDevice
    </p>
    <p>
      &#20195;&#34920;&#19968;&#20010;&#36828;&#31471;&#30340;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1132896842" ENDARROW="Default" ENDINCLINATION="27;-193;" ID="Arrow_ID_1197486428" SOURCE="ID_748136620" STARTARROW="None" STARTINCLINATION="279;-48;"/>
<node CREATED="1435821526802" ID="ID_1002612803" MODIFIED="1435821570998">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#36807;BluetoothSocket&#21521;&#36828;&#31471;&#35774;&#22791;&#35831;&#27714;&#19968;&#20010;&#36830;&#25509;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435821581765" ID="ID_217318069" MODIFIED="1435821588363" TEXT="&#x8be2;&#x95ee;&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x7684;&#x57fa;&#x672c;&#x4fe1;&#x606f;"/>
</node>
<node CREATED="1435821646233" FOLDED="true" ID="ID_84250700" MODIFIED="1484631343740">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BluetoothSocket&#34013;&#29273;
    </p>
    <p>
      &#22871;&#25509;&#23383;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_84250700" ENDARROW="Default" ENDINCLINATION="112;7;" ID="Arrow_ID_1726293710" SOURCE="ID_951422317" STARTARROW="None" STARTINCLINATION="-37;-38;"/>
<node CREATED="1435821688300" ID="ID_1143229343" MODIFIED="1435821748080" TEXT="&#x5141;&#x8bb8;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x901a;&#x8fc7;InputStream&#x548c;OutputStream&#x4ea4;&#x6d41;&#x6570;&#x636e;"/>
</node>
<node CREATED="1435821837529" FOLDED="true" ID="ID_307796079" MODIFIED="1484548753960">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BluetoothServerSocket
    </p>
    <p>
      &#20195;&#34920;&#19968;&#20010;&#24050;&#32463;&#25171;&#24320;&#30340;&#26381;&#21153;&#22871;&#25509;&#23383;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435822035996" ID="ID_555463230" MODIFIED="1435822063561" TEXT="&#x5f53;&#x4e24;&#x4e2a;&#x8bbe;&#x5907;&#x914d;&#x5bf9;&#x65f6;&#xff0c;&#x5fc5;&#x987b;&#x6709;&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x6253;&#x5f00;&#x670d;&#x52a1;&#x5957;&#x63a5;&#x5b57;"/>
<node CREATED="1435822068014" ID="ID_951422317" MODIFIED="1435822196292" TEXT="&#x5f53;&#x8fde;&#x63a5;&#x5efa;&#x7acb;&#x4e4b;&#x540e;BluetoothSocket&#x4f1a;&#x88ab;&#x8fd4;&#x56de;">
<arrowlink DESTINATION="ID_84250700" ENDARROW="Default" ENDINCLINATION="112;7;" ID="Arrow_ID_1726293710" STARTARROW="None" STARTINCLINATION="-37;-38;"/>
</node>
</node>
<node CREATED="1435822259039" ID="ID_1234389175" MODIFIED="1435822281898">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BluetoothClass
    </p>
    <p>
      &#25551;&#36848;&#34013;&#29273;&#35774;&#22791;&#30340;&#29305;&#28857;&#21644;&#33021;&#21147;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435822295021" FOLDED="true" ID="ID_1334537446" MODIFIED="1484548753960">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BluetoothProfile
    </p>
    <p>
      &#20195;&#34920;&#34013;&#29273;&#37197;&#32622;&#30340;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435822379045" ID="ID_1867766593" MODIFIED="1435822394667" TEXT="Bluetooth Profile&#x662f;&#x4e00;&#x4e2a;&#x57fa;&#x5e26;&#x901a;&#x4fe1;&#x7684;&#x63a5;&#x53e3;"/>
</node>
<node CREATED="1435822441388" ID="ID_156320712" MODIFIED="1435822477671">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BluetoothHeadset
    </p>
    <p>
      &#25552;&#20379;&#23545;&#20110;&#34013;&#29273;&#32819;&#26426;&#30340;&#25903;&#25345;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435822742218" FOLDED="true" ID="ID_539314859" MODIFIED="1484548753960">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BluetoothA2dp
    </p>
    <p>
      &#23450;&#20041;&#20102;&#39640;&#36136;&#37327;&#30340;&#38899;&#39057;&#20256;&#36755;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435822789524" ID="ID_493484499" MODIFIED="1435822806039" TEXT="&quot;A2DP&quot; stands for Advanced Audio Distribution Profile"/>
</node>
<node CREATED="1435822831316" FOLDED="true" ID="ID_573220483" MODIFIED="1484548753960" TEXT="BluetoothHealth">
<node CREATED="1435822858486" ID="ID_866786081" MODIFIED="1435822896505" TEXT="&#x53ef;&#x4ee5;&#x63a7;&#x5236;&#x84dd;&#x7259;&#x670d;&#x52a1;&#x7684;&#x84dd;&#x7259;&#x5065;&#x5eb7;&#x914d;&#x7f6e;&#x4ee3;&#x7406;"/>
</node>
<node CREATED="1435822953892" FOLDED="true" ID="ID_1120156363" MODIFIED="1484548753960" TEXT="BluetoothHealthCallback">
<node CREATED="1435823030065" ID="ID_1561632087" MODIFIED="1435823079157">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="black" size="3" face="Roboto, sans-serif">An abstract class that you use to implement&#160;</font><a style="text-decoration: none; color: rgb(3, 155, 229)" href="http://developer.android.com/reference/android/bluetooth/BluetoothHealth.html"><code style="text-align: start; word-spacing: 0px; background-color: rgb(247, 247, 247); line-height: 18px; text-transform: none; font-family: Consolas, Liberation Mono, Menlo, Courier, monospace; padding-top: 3px; font-variant: normal; padding-left: 5px; text-indent: 0px; font-size: 13px; font-style: normal; font-weight: normal; padding-right: 5px; padding-bottom: 3px; color: rgb(0, 102, 0); letter-spacing: normal; white-space: normal"><font color="#ff3333" size="3" face="Consolas, Liberation Mono, Menlo, Courier, monospace">BluetoothHealth</font></code></a><font color="#ff3333" size="3" face="Roboto, sans-serif">&#160;</font><font color="black" size="3" face="Roboto, sans-serif">callbacks. </font>
    </p>
    <p>
      <font size="3">&#21487;&#20197;&#29992;&#26469;&#26816;&#27979;&#24403;&#21069;&#24212;&#29992;&#31243;&#24207;&#30340;&#27880;&#20876;&#29366;&#24577;&#21644;&#34013;&#29273;&#36890;&#36947;&#30340;&#29366;&#24577;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1435823323487" ID="ID_1167610540" MODIFIED="1435823360691">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">BluetoothHealthAppConfiguration </font>
    </p>
    <p>
      <font size="3">&#20195;&#34920;&#34013;&#29273;&#31532;&#19977;&#26041;</font><font color="black" size="3" face="Roboto, sans-serif">Bluetooth Health third-party application</font>
    </p>
    <p>
      <font size="3">&#30340;&#37197;&#32622;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435823486797" FOLDED="true" ID="ID_689301090" MODIFIED="1484548753960" TEXT="BluetoothProfile.ServiceListener">
<node CREATED="1435823492179" ID="ID_923551387" MODIFIED="1436155051372">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#23458;&#25143;&#31471;&#36830;&#25509;&#25110;&#32773;&#26029;&#24320;&#19982;&#26381;&#21153;&#30340;&#36830;&#25509;&#65292;&#29992;&#26469;&#36890;&#30693;<font color="#ff3333">BluetoothProfile</font>&#30340;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1469201095587" ID="ID_304020439" MODIFIED="1486607161857" TEXT="&#x4e66;&#x7c4d;&#x9605;&#x8bfb;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1469201109512" FOLDED="true" ID="ID_1078579848" MODIFIED="1486605685430" TEXT="&#x7b2c;&#x4e00;&#x7ae0;: &#x6982;&#x8ff0;(&#x4e24;&#x79cd;&#x84dd;&#x7259;&#x6280;&#x672f;)">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1470633906279" ID="ID_1714468755" MODIFIED="1484548753263" TEXT="BR(Basic Rate)">
<node CREATED="1470633962947" FOLDED="true" ID="ID_788592440" MODIFIED="1484548753960">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#21487;&#36873;&#30340;EDR&#25216;&#26415;(enhanced data rate)</b>
    </p>
    <p>
      &#35813;&#25216;&#26415;&#20351;&#29992;&#30340;&#20173;&#28982;&#26159;&#34013;&#29273;&#21407;&#29983;&#30340;&#29289;&#29702;&#23618;&#25216;&#26415;
    </p>
    <p>
      &#21482;&#26159;&#36895;&#29575;&#25552;&#21319;&#20102;&#32780;&#24050;
    </p>
  </body>
</html></richcontent>
<node CREATED="1471852642786" FOLDED="true" ID="ID_1091156156" MODIFIED="1482911183232" TEXT="&#x7269;&#x7406;&#x4fe1;&#x9053;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1471852672194" ID="ID_181564325" MODIFIED="1471852740476" TEXT="1.ISM&#x9891;&#x6bb5;&#x88ab;&#x5212;&#x5206;&#x6210;79&#x4e2a;channel,&#x6bcf;&#x4e2a;channel&#x5e26;&#x5bbd;&#x662f;1M,&#x4f7f;&#x7528;&#x8df3;&#x9891;&#x6280;&#x672f;"/>
<node CREATED="1471852759690" FOLDED="true" ID="ID_365576558" MODIFIED="1482911182780" TEXT="2.&#x5b9a;&#x4e49;&#x4e86;&#x4e94;&#x79cd;&#x8df3;&#x9891;&#x4fe1;&#x9053;">
<node CREATED="1471853137226" ID="ID_1843966900" MODIFIED="1471853146481">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BR/EDR Basic Piconet Physical Channel
    </p>
    <p>
      &#29992;&#20110;&#22788;&#20110;&#36830;&#25509;&#29366;&#24577;&#30340;&#34013;&#29273;&#35774;&#22791;&#20043;&#38388;&#30340;&#36890;&#20449; &#20351;&#29992;&#20840;&#37096;&#30340;79&#20010;&#36339;&#39057;&#28857;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471853157890" ID="ID_1623353402" MODIFIED="1471853294345">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BR/EDR Adapted Piconet Physical Channel
    </p>
    <p>
      &#20027;&#35201;&#29992;&#20110;&#24050;&#32463;&#24314;&#31435;&#36830;&#25509;&#30340;&#35774;&#22791;&#20043;&#38388;&#30340;&#36890;&#20449;&#65292;
    </p>
    <p>
      &#20294;&#26159;&#19981;&#20250;&#20351;&#29992;&#20840;&#37096;&#30340;79&#20010;&#36339;&#39057;&#28857;&#65292;&#20294;&#26159;&#33267;&#23569;&#35201;&#20351;&#29992;20&#20010;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471853463763" ID="ID_801963774" MODIFIED="1471853506962">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BR/EDR Page Scan Physical Channel
    </p>
    <p>
      &#29992;&#20110;&#35774;&#22791;&#21457;&#29616;&#21644;&#34987;&#21457;&#29616;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471853535059" ID="ID_471294764" MODIFIED="1471853577145">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BR/EDR Inquery Scan Physical Channel
    </p>
    <p>
      &#29992;&#20110;&#35774;&#22791;&#20043;&#38388;&#30340;&#36830;&#25509;&#21644;&#34987;&#36830;&#25509;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471853684635" ID="ID_357714763" MODIFIED="1471853708619">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BR/EDR Synchronization Scan Channel
    </p>
    <p>
      &#29992;&#20110;&#26080;&#36830;&#25509;&#30340;&#24191;&#25773;&#36890;&#20449;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1470633966995" FOLDED="true" ID="ID_1977917394" MODIFIED="1484548753961">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20132;&#26367;&#20351;&#29992;&#30340;(alternative)mac&#23618;&#21644;phy&#23618;(AMP)</b>
    </p>
    <p>
      amp&#25216;&#26415;&#20026;&#20102;&#25552;&#39640;&#34013;&#29273;&#20256;&#36755;&#30340;&#36895;&#29575;&#65292;&#20511;&#29992;&#20102;
    </p>
    <p>
      wifi&#25216;&#26415;&#24403;&#20013;&#30340;&#29289;&#29702;&#23618;&#21644;mac&#23618;&#20102;
    </p>
  </body>
</html></richcontent>
<node CREATED="1471854438044" ID="ID_95005240" MODIFIED="1471854480660">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21482;&#26377;&#19968;&#31181;<b>&#20449;&#36947;</b>&#65292;&#29992;&#20110;&#22312;&#36890;&#20449;&#26102;&#19982;BR/EDR&#20999;&#25442;&#20351;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1470633910011" ID="ID_1960980246" MODIFIED="1484548753264">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LE(Low Energe)
    </p>
    <p>
      le&#25216;&#26415;&#20854;&#23454;&#36319;&#30495;&#27491;&#30340;&#34013;&#29273;&#25216;&#26415;&#24046;&#24322;&#24456;&#22823;
    </p>
    <p>
      &#21482;&#26159;&#28155;&#21152;&#20102;&#19968;&#20010;&#34013;&#29273;&#30340;&#26415;&#35821;&#32780;&#24050;
    </p>
  </body>
</html></richcontent>
<node CREATED="1471853764475" ID="ID_1022785723" MODIFIED="1484631521349" TEXT="&#x7269;&#x7406;&#x4fe1;&#x9053;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1471853802579" ID="ID_1594215147" MODIFIED="1471853854251">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.ISM&#39057;&#27573;&#34987;&#21010;&#20998;&#25104;&#20102;40&#20010;channel,
    </p>
    <p>
      &#27599;&#20010;channel&#20855;&#26377;2M&#30340;&#24102;&#23485;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471853932011" ID="ID_766823243" MODIFIED="1484631524308" TEXT="2.&#x5b9a;&#x4e49;&#x4e86;2&#x79cd;&#x4fe1;&#x9053;">
<node CREATED="1471853952987" ID="ID_144636902" MODIFIED="1471854262588">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LE Piconet Physical Channel
    </p>
    <p>
      &#29992;&#20110;&#22312;&#24050;&#32463;&#24314;&#31435;&#36830;&#25509;&#30340;&#35774;&#22791;&#20043;&#38388;&#36827;&#34892;&#36890;&#20449;
    </p>
    <p>
      &#36873;&#25321;&#22312;37&#20010;&#39057;&#28857;&#19978;&#36827;&#34892;&#36339;&#39057;&#25805;&#20316;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471854265940" ID="ID_1850649890" MODIFIED="1471854351573">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LE Advertisement Broadcast Channel
    </p>
    <p>
      &#29992;&#20110;&#26080;&#36830;&#25509;&#30340;&#24191;&#25773;&#65292;&#35774;&#22791;&#21457;&#29616;&#26381;&#21153;&#31561;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1470635445780" ID="ID_718345297" MODIFIED="1471858057057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#34013;&#29273;&#21327;&#35758;&#23450;&#20041;&#20102;&#20004;&#20010;&#23618;&#27425;&#30340;&#21327;&#35758;</b>&#65292;&#19968;&#20010;&#26159;core&#35268;&#33539;&#21450;&#23545;&#24212;&#30340;profile
    </p>
    <p>
      https://www.bluetooth.com/specifications/bluetooth-core-specification
    </p>
    <p>
      &#19968;&#20010;&#26159;application,&#21253;&#21547;&#21508;&#31181;&#21508;&#26679;&#30340;profile
    </p>
    <p>
      https://www.bluetooth.com/specifications/adopted-specifications
    </p>
    <p>
      &#21487;&#20197;&#19979;&#36733;&#21040;&#21508;&#31181;&#19981;&#21516;&#30340;application&#30340;&#25991;&#26723;
    </p>
    <p>
      &#34013;&#29273;&#26680;&#24515;&#23618;&#26159;&#20851;&#27880;&#20110;&#34013;&#29273;&#21327;&#35758;&#30340;&#35268;&#33539;&#30340;&#25551;&#36848;&#65292;&#26159;&#19968;&#31181;&#26426;&#21046;
    </p>
    <p>
      &#34013;&#29273;&#24212;&#29992;&#23618;&#21017;&#38024;&#23545;&#21508;&#31181;&#19981;&#21516;&#30340;&#24212;&#29992;&#22330;&#26223;&#65292;&#23646;&#20110;&#31574;&#30053;&#20102;
    </p>
    <p>
      core&#23618;&#30001;&#20004;&#20010;&#37096;&#20998;&#32452;&#25104;&#65292;host&#21644;controller, controller&#29992;&#20110;&#23545;&#22522;&#24102;
    </p>
    <p>
      &#30828;&#20214;&#21442;&#25968;&#30340;&#35774;&#32622;&#24182;&#22312;&#27492;&#22522;&#30784;&#20043;&#19978;&#25277;&#35937;&#20986;&#36923;&#36753;&#38142;&#36335;&#23618;&#65292;
    </p>
    <p>
      host&#21017;&#36827;&#34892;&#36827;&#19968;&#27493;&#30340;&#25277;&#35937;&#23553;&#35013;&#65292;&#23631;&#34109;&#25481;&#34013;&#29273;&#25216;&#26415;&#30340;&#32454;&#33410;&#65292;&#35753;application
    </p>
    <p>
      &#23618;&#26356;&#22909;&#22320;&#20351;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1469201130473" FOLDED="true" ID="ID_1247114520" MODIFIED="1486605683733" TEXT="&#x7b2c;&#x4e8c;&#x7ae0;:&#x57fa;&#x5e26;&#x5c42;&#x534f;&#x8bae;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1469240712675" ID="ID_1574303153" MODIFIED="1469240801353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1. &#24037;&#20316;&#22312;2.4G&#36203;&#20857;&#30340;ISM&#39057;&#27573;&#65292;&#20449;&#36947;&#37319;&#29992;625us&#30340;&#26631;&#31216;&#26102;&#38553;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1469240971567" ID="ID_1622130702" MODIFIED="1469241140972">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#20856;&#22411;&#30340;&#34013;&#29273;&#31995;&#32479;&#30340;&#26500;&#25104;
    </p>
    <p>
      &#26080;&#32447;&#21333;&#20803;&#65292;&#38142;&#36335;&#25511;&#21046;&#22120;&#21333;&#20803;&#65292;&#38142;&#36335;&#31649;&#29702;&#21333;&#20803;&#65292;&#20027;&#26426;&#32456;&#31471;&#25509;&#21475;&#21333;&#20803;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1469241568230" FOLDED="true" ID="ID_1557796704" MODIFIED="1486605682885" TEXT="3.&#x7269;&#x7406;&#x94fe;&#x8def;">
<node CREATED="1469241590957" ID="ID_842415154" MODIFIED="1469242073087">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.sco&#38142;&#36335;&#26159;&#22312;&#20027;&#21333;&#20803;&#21644;&#20174;&#21333;&#20803;&#20043;&#38388;&#23454;&#29616;&#28857;&#23545;&#28857;&#19988;&#23545;&#31216;
    </p>
    <p>
      &#30340;&#21516;&#27493;&#25968;&#25454;&#20132;&#25442;&#38142;&#36335;&#12290;&#20027;&#21333;&#20803;&#22312;&#35268;&#21017;&#26102;&#38388;&#38388;&#38548;&#19978;&#21521;&#20174;&#21333;&#20803;
    </p>
    <p>
      &#21457;&#36865;sco&#20998;&#32452;.&#35813;&#38388;&#38548;&#31216;&#20026;&#20027;&#20174;&#20445;&#30041;&#26102;&#38553;&#20013;&#30340;&#21040;&#20174;&#21333;&#20803;&#30340;SCO
    </p>
    <p>
      &#26102;&#38388;&#38388;&#38548;Tsco. SCO&#38142;&#36335;&#30001;&#20027;&#21333;&#20803;&#24314;&#31435;.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1469242547631" ID="ID_1291146415" MODIFIED="1469242628664">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.ACL&#38142;&#36335;
    </p>
    <p>
      &#22312;&#38750;sco&#20445;&#30041;&#38142;&#36335;&#37324;&#38754;&#65292;&#20027;&#21333;&#20803;&#21487;&#20197;&#20197;&#26102;&#38553;&#20026;&#21333;&#20301;&#19982;&#20219;&#20309;&#20174;&#21333;&#20803;&#20132;&#25442;
    </p>
    <p>
      &#20998;&#32452;.
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1469242820608" FOLDED="true" ID="ID_561905842" MODIFIED="1486605682037">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.<b>&#22522;&#24102;&#20998;&#32452;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1469243001807" FOLDED="true" ID="ID_1516710184" MODIFIED="1484548753961">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#29992;&#26684;&#24335;: &#24494;&#24494;&#32593;&#20449;&#36947;&#19978;&#30340;&#25968;&#25454;&#20197;&#20998;&#32452;&#30340;&#24418;&#24335;&#20256;&#36755;
    </p>
    <p>
      LSB&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;MSB
    </p>
    <p>
      &#25509;&#20837;&#30721;(72&#25110;&#32773;68&#20301;)--------&#20998;&#32452;&#22836;(54&#20301;)--------&#26377;&#25928;&#36733;&#33655;(0-2745&#20301;)
    </p>
  </body>
</html></richcontent>
<node CREATED="1435312199400" FOLDED="true" ID="ID_1491852357" MODIFIED="1482911183232">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#25509;&#20837;&#30721;access code&#65288;&#20998;&#32452;&#33267;&#23569;&#21253;&#21547;&#25509;&#20837;&#30721;&#65289;&#65306;</b>
    </p>
    <p>
      1.&#24341;&#23548;&#30721;(&#30452;&#27969;&#20559;&#32622;&#34917;&#20607;)
    </p>
    <p>
      2.&#21516;&#27493;&#23383;(&#26469;&#33258;24&#20301;&#22320;&#22336;&#30340;64&#20301;&#20195;&#30721;&#23383;)&#21644;
    </p>
    <p>
      3.&#23614;&#30721;(&#29992;&#20110;&#25193;&#23637;&#30452;&#27969;&#34917;&#20607;)&#65292;&#23614;&#30721;&#19982;&#21516;&#27493;&#23383;&#30340;MSB&#19977;&#20301;
    </p>
    <p>
      &#20849;&#21516;&#26500;&#25104;&#19968;&#20010;&#29992;&#20110;&#25193;&#23637;&#30452;&#27969;&#34917;&#20607;&#30340;7&#20301;&#20108;&#36827;&#21046;&#24207;&#21015;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435312326192" ID="ID_676657451" MODIFIED="1435312347540" TEXT="&#x4fe1;&#x9053;&#x63a5;&#x5165;&#x7801;(CAC)"/>
<node CREATED="1435312357217" ID="ID_529894512" MODIFIED="1435312368836" TEXT="&#x8bbe;&#x5907;&#x63a5;&#x5165;&#x7801;(DAC)"/>
<node CREATED="1435312382687" FOLDED="true" ID="ID_414776224" MODIFIED="1471866794807" TEXT="&#x67e5;&#x8be2;&#x63a5;&#x5165;&#x7801;(IAC)">
<node CREATED="1435312414585" ID="ID_495975958" MODIFIED="1435312475002">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19987;&#29992;&#26597;&#35810;&#25509;&#20837;&#30721;&#65306;
    </p>
    <p>
      &#21457;&#29616;&#19987;&#29992;&#35774;&#22791;&#32452;&#20869;&#30340;&#34013;&#29273;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435312429729" ID="ID_558078017" MODIFIED="1435312488983">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#29992;&#26597;&#35810;&#25509;&#20837;&#30721;
    </p>
    <p>
      &#35206;&#30422;&#33539;&#22260;&#20869;&#30340;&#34013;&#29273;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1435312219634" FOLDED="true" ID="ID_918738268" MODIFIED="1482911183233">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20998;&#32452;&#22836;
    </p>
    <p>
      &#20351;&#29992;1:3&#27604;&#20363;&#30340;&#21069;&#21521;&#32416;&#38169;&#30721;&#36827;&#34892;&#20445;&#25252;&#65292;
    </p>
    <p>
      &#30495;&#27491;&#26377;&#29992;&#30340;&#22836;&#37096;&#26159;18&#20301;&#65292;&#20027;&#35201;&#21253;&#21547;&#38142;&#36335;&#25511;&#21046;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1435312680367" ID="ID_477744937" MODIFIED="1435312703315" TEXT="AM_ADDR(3bit)&#x7528;&#x4e8e;&#x8bc6;&#x522b;&#x4ece;&#x8bbe;&#x5907;"/>
<node CREATED="1435312729912" FOLDED="true" ID="ID_578070549" MODIFIED="1471866794807">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>TYPE(4)&#34920;&#31034;&#20998;&#32452;&#31867;&#22411;</b>
    </p>
    <p>
      &#25351;&#31034;&#20998;&#32452;&#25509;&#25910;&#21644;&#21457;&#36865;&#30340;&#31867;&#22411;&#20197;&#21450;&#21344;&#29992;&#30340;
    </p>
    <p>
      &#26102;&#38553;&#20010;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435313500369" FOLDED="true" ID="ID_1414198152" MODIFIED="1471866794807" TEXT="&#x516c;&#x5171;&#x5206;&#x7ec4;">
<node CREATED="1435313559094" ID="ID_1449870143" MODIFIED="1435313634065">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ID&#20998;&#32452;
    </p>
    <p>
      &#35774;&#22791;&#30340;&#23547;&#21628;&#65292;&#26597;&#35810;&#65292;&#21709;&#24212;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435313568089" ID="ID_237914661" MODIFIED="1435313666377">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NULL&#20998;&#32452;
    </p>
    <p>
      &#36820;&#22238;&#21457;&#36865;&#26041;FLOW,ARQN&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435313578512" ID="ID_756236409" MODIFIED="1435313581583" TEXT="POLL&#x5206;&#x7ec4;"/>
<node CREATED="1435313589408" ID="ID_1943019395" MODIFIED="1435313702400">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FHS&#20998;&#32452;
    </p>
    <p>
      &#25351;&#31034;&#34013;&#29273;&#35774;&#22791;&#22320;&#22336;&#21644;&#26102;&#38047;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1435313512393" ID="ID_1775619176" MODIFIED="1435313515791" TEXT="SCO&#x5206;&#x7ec4;"/>
<node CREATED="1435313523112" ID="ID_463239703" MODIFIED="1435313530965" TEXT="eSCO&#x5206;&#x7ec4;"/>
<node CREATED="1435313537536" ID="ID_1898083908" MODIFIED="1435313540368" TEXT="ACL&#x5206;&#x7ec4;"/>
</node>
<node CREATED="1435312761085" ID="ID_810859542" MODIFIED="1435312789446" TEXT="FLOW(1)&#x6d41;&#x91cf;&#x63a7;&#x5236;&#x6807;&#x5fd7;&#xff0c;&#x7528;&#x4e8e;&#x6682;&#x505c;ACL&#x67d0;&#x4e9b;&#x5206;&#x7ec4;&#x7684;&#x53d1;&#x9001;"/>
<node CREATED="1435312834891" ID="ID_1197180843" MODIFIED="1435312876564" TEXT="ARQN(1)&#x786e;&#x8ba4;&#x6307;&#x793a;"/>
<node CREATED="1435312879229" ID="ID_1548368305" MODIFIED="1435312912629" TEXT="SEQN(1)&#x5e8f;&#x5217;&#x7f16;&#x53f7;&#xff0c;&#x7528;&#x4e8e;&#x9632;&#x6b62;&#x91cd;&#x53d1;"/>
<node CREATED="1435312929173" ID="ID_1178667430" MODIFIED="1435312948382" TEXT="HEC(8)&#x5206;&#x7ec4;&#x5934;&#x9519;&#x8bef;&#x6821;&#x9a8c;"/>
</node>
</node>
</node>
</node>
<node CREATED="1469201166289" ID="ID_218722684" MODIFIED="1469201180632" TEXT="&#x7b2c;&#x4e09;&#x7ae0;:&#x94fe;&#x8def;&#x7ba1;&#x7406;&#x5668;&#x534f;&#x8bae;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201201063" ID="ID_1774513088" MODIFIED="1469201608663">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#22235;&#31456;:&#36923;&#36753;&#38142;&#36335;&#25511;&#21046;&#21644;&#21327;&#35758;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201254216" ID="ID_509175411" MODIFIED="1469201611207" TEXT="&#x7b2c;&#x4e94;&#x7ae0;:&#x670d;&#x52a1;&#x641c;&#x7d22;&#x534f;&#x8bae;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201295631" ID="ID_746604269" MODIFIED="1469201613814">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20845;&#31456;:&#22522;&#20110;ts07.10&#30340;RFCOMM&#21327;&#35758;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201337566" ID="ID_1652507865" MODIFIED="1469201616389">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#19971;&#31456;:IrDA&#20114;&#25805;&#20316;&#24615;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201376774" ID="ID_907993445" MODIFIED="1469201618639">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20843;&#31456;:&#30005;&#35805;&#25511;&#21046;&#20108;&#36827;&#21046;&#21327;&#35758;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201407750" ID="ID_946371382" MODIFIED="1469201621678">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20061;&#31456;:wap&#20449;&#36947;&#30340;&#34013;&#29273;&#20114;&#25805;&#20316;&#24615;&#35201;&#27714;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201460549" ID="ID_1713085466" MODIFIED="1469201624246">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#21313;&#31456;:&#20027;&#25511;&#21046;&#22120;&#25509;&#21475;&#21151;&#33021;&#35268;&#33539;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201490302" ID="ID_1189841995" MODIFIED="1469201626841">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#21313;&#19968;&#31456;:HCI&#20256;&#36755;&#23618;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1488695497622" ID="ID_56374837" MODIFIED="1490354843596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25991;&#26723;&quot;Bluetooth HCI&#23618;&#35814;&#35299;&#21450;&#39537;&#21160;&#31616;&#20171;&quot;&#31508;&#35760;
    </p>
  </body>
</html></richcontent>
<node CREATED="1488695573242" ID="ID_1640102992" MODIFIED="1488695810317">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#e80f0f"><b>&#34013;&#29273;&#35774;&#22791;&#24213;&#23618;&#30828;&#20214;&#30340;&#32452;&#25104;&#37096;&#20998;:</b></font></i>
    </p>
    <p>
      1.&#38142;&#36335;&#31649;&#29702;&#21327;&#35758;(LMP)
    </p>
    <p>
      <font color="#e10101">2.&#22522;&#24102;(BB)</font>
    </p>
    <p>
      &#22522;&#24102;&#30340;&#20316;&#29992;&#23601;&#26159;&#21487;&#20197;&#25552;&#20379;&#20004;&#31181;&#19981;&#21516;&#30340;&#38142;&#36335;&#65292;&#21363;SCO&#21644;
    </p>
    <p>
      ACL&#38142;&#36335;&#65292;&#36127;&#36131;&#36339;&#39057;&#21644;&#34013;&#29273;&#25968;&#25454;&#20197;&#21450;&#20449;&#24687;&#24103;&#30340;&#20256;&#36755;&#65292;&#23545;&#25152;&#26377;&#30340;&#25968;&#25454;
    </p>
    <p>
      &#21253;&#25552;&#20379;&#26657;&#39564;&#30721;&#12290;
    </p>
    <p>
      3.&#23556;&#39057;(RF)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488695901095" ID="ID_322260511" MODIFIED="1488729656710">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#0f0be9">&#34013;&#29273;&#30340;HCI&#23618;&#26159;&#20174;L2CAP&#23618;&#36827;&#20837;LM&#23618;&#20043;&#38388;&#30340;&#19968;&#23618;&#65292;<br color="#0f0be9" />&#20026;&#19978;&#23618;&#35775;&#38382;&#22522;&#24102;&#23618;&#25552;&#20379;&#20102;&#25509;&#21475;&#12290; </font></i>
    </p>
    <p>
      <i><font color="#d60910">hci&#23618;&#26159;&#29992;&#26469;&#27807;&#36890;host&#21644;controller&#30340;&#65292;host&#36890;&#24120;&#23601;&#26159;&#25163;&#26426;&#31471;, </font></i>
    </p>
    <p>
      <i><font color="#d60910">controller&#36890;&#24120;&#23601;&#26159;&#25163;&#26426;&#31471;&#37324;&#38754;&#30340;&#34013;&#29273;&#33455;&#29255;&#25110;&#32773;&#26159;&#36828;&#31471;&#30340;&#34013;&#29273;&#35774;&#22791;.</font></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488696033262" ID="ID_1181238533" MODIFIED="1490354872514">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>HCI&#23618;&#19982;&#22522;&#24102;&#30340;&#36890;&#20449;&#26041;&#24335;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1488696086189" FOLDED="true" ID="ID_850520506" MODIFIED="1490354876935">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#34013;&#29273;&#19982;&#22522;&#24102;&#20043;&#38388;&#30340;&#36890;&#20449;&#37117;&#26159;&#36890;&#36807;&#25968;&#25454;&#21253;&#30340;&#24418;&#24335;&#26469;&#36827;&#34892;&#30340;&#65292;
    </p>
    <p>
      &#29978;&#33267;&#21629;&#20196;&#30340;&#36820;&#22238;&#21442;&#25968;&#37117;&#26159;&#36890;&#36807;&#20107;&#20214;&#21253;&#30340;&#24418;&#24335;&#36820;&#22238;&#30340;&#12290;<br />&#34013;&#29273;&#20855;&#26377;&#19977;&#31181;&#24418;&#24335;&#30340;&#21253;&#65292;&#21363;&#25968;&#25454;&#21253;&#65292;&#21629;&#20196;&#21253;&#21644;&#20107;&#20214;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1488696225524" ID="ID_882117779" MODIFIED="1488696253056">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25968;&#25454;&#21253;:
    </p>
    <p>
      &#20027;&#26426;&#21040;&#20027;&#26426;&#25511;&#21046;&#22120;&#20043;&#38388;&#26159;&#21452;&#21521;&#36890;&#20449;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488696256467" FOLDED="true" ID="ID_461462085" MODIFIED="1488703368498">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20107;&#20214;&#21253;:
    </p>
    <p>
      &#21482;&#20174;&#25511;&#21046;&#22120;&#21040;&#20027;&#26426;&#20043;&#38388;&#36827;&#34892;&#21333;&#21521;&#20256;&#36755;
    </p>
  </body>
</html></richcontent>
<node CREATED="1488696778647" ID="ID_1072986841" MODIFIED="1488696818106">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#29992;&#20107;&#20214;:
    </p>
    <p>
      &#21629;&#20196;&#23436;&#25104;&#21253;&#21644;&#21629;&#20196;&#29366;&#24577;&#21253;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488696826974" ID="ID_177809357" MODIFIED="1488696883743">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27979;&#35797;&#20107;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488696930119" ID="ID_257154966" MODIFIED="1488696977746">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20986;&#38169;&#20107;&#20214;:
    </p>
    <p>
      &#20135;&#29983;&#20002;&#22833;&#21644;&#25968;&#25454;&#32531;&#20914;&#21306;&#28322;&#20986;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1488696303357" FOLDED="true" ID="ID_194874174" MODIFIED="1488703367371">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21629;&#20196;&#21253;:
    </p>
    <p>
      &#21482;&#20174;&#20027;&#26426;&#21521;&#20027;&#26426;&#25511;&#21046;&#22120;&#36827;&#34892;&#21333;&#21521;&#20256;&#36755;
    </p>
  </body>
</html></richcontent>
<node CREATED="1488696381289" ID="ID_1296841036" MODIFIED="1488696388779" TEXT="&#x94fe;&#x8def;&#x63a7;&#x5236;&#x547d;&#x4ee4;"/>
<node CREATED="1488696392227" ID="ID_932219477" MODIFIED="1488696418711">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38142;&#36335;&#25919;&#31574;&#21644;&#27169;&#24335;&#21629;&#20196;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488696426787" ID="ID_936362480" MODIFIED="1488696436642" TEXT="&#x4e3b;&#x673a;&#x63a7;&#x5236;&#x548c;&#x57fa;&#x5e26;&#x547d;&#x4ee4;"/>
<node CREATED="1488696444347" ID="ID_1460398372" MODIFIED="1488696449178" TEXT="&#x4fe1;&#x606f;&#x547d;&#x4ee4;"/>
<node CREATED="1488696455187" ID="ID_1951227302" MODIFIED="1488696460339" TEXT="&#x72b6;&#x6001;&#x547d;&#x4ee4;"/>
<node CREATED="1488696466305" ID="ID_203563855" MODIFIED="1488696471852" TEXT="&#x6d4b;&#x8bd5;&#x547d;&#x4ee4;"/>
</node>
<node CREATED="1488701334271" ID="ID_1747283763" MODIFIED="1488729262056">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#c10d0d">&#21629;&#20196;&#21253;&#21644;&#20107;&#20214;&#21253;&#21487;&#20197;&#25353;&#29031;&#21151;&#33021;&#34987;&#20998;&#25104; </font>
    </p>
    <p>
      <font color="#c10d0d">&#22810;&#20010;&#23567;&#32452;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1488701474483" ID="ID_1193901352" MODIFIED="1488701543471">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      generic events
    </p>
    <p>
      &#36890;&#29992;&#20107;&#20214;&#21487;&#33021;&#20250;&#22240;&#20026;&#22810;&#20010;&#21629;&#20196;&#32780;&#21457;&#29983;&#65292;&#25110;&#32773;&#21487;&#33021;
    </p>
    <p>
      &#20250;&#22240;&#20026;&#38543;&#26426;&#30340;&#20107;&#20214;&#32780;&#21457;&#29983;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488701592067" ID="ID_1000377955" MODIFIED="1488701637309">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      device setup
    </p>
    <p>
      &#35813;&#21629;&#20196;&#38598;&#21512;&#26159;&#29992;&#26469;&#23558;&#35774;&#22791;&#32622;&#25104;&#19968;&#20010;
    </p>
    <p>
      &#21487;&#30693;&#30340;&#29366;&#24577;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488701640994" ID="ID_351358484" MODIFIED="1488701719085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      controller flow control
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#29992;&#20110;&#25511;&#21046;&#20174;host&#21040;<br />controller&#30340;&#25968;&#25454;&#27969;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488701723874" ID="ID_640126184" MODIFIED="1488701784103">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      controller infomation
    </p>
    <p>
      &#35813;&#21629;&#20196;&#38598;&#21512;&#20801;&#35768;host&#21457;&#29616;&#35774;&#22791;&#30340;&#26412;&#22320;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488701811833" ID="ID_1836919478" MODIFIED="1488701854739">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      controller configuration
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#65292;&#20801;&#35768;&#36827;&#34892;&#20840;&#23616;&#24615;&#30340;&#37197;&#32622;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488701857953" ID="ID_1091037150" MODIFIED="1488702460830">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      device discovery
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#35774;&#22791;&#21457;&#29616;&#21608;&#22260;&#30340;&#20854;&#20182;
    </p>
    <p>
      &#35774;&#22791;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702468587" ID="ID_591857060" MODIFIED="1488702547261">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      connection setup
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#19968;&#20010;&#35774;&#22791;&#21521;&#21478;&#19968;&#20010;&#35774;&#22791;
    </p>
    <p>
      &#21457;&#36215;&#36830;&#25509;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702567835" ID="ID_1629120509" MODIFIED="1488702614870">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      remote information
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#38598;&#21512;&#20801;&#35768;&#21457;&#29616;&#19968;&#20010;&#36828;&#31471;&#30340;
    </p>
    <p>
      &#35774;&#22791;&#30340;&#37197;&#32622;&#20449;&#24687;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702642499" ID="ID_1739757094" MODIFIED="1488702687294">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Synchronous Connections
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#21019;&#24314;&#19968;&#20010;&#21516;&#27493;&#36830;&#25509;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702690365" ID="ID_732096576" MODIFIED="1488702763623">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      connection state
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#23545;&#19968;&#20010;&#36830;&#25509;&#36827;&#34892;&#37197;&#32622;&#65292;
    </p>
    <p>
      &#29305;&#21035;&#26159;&#22312;&#20302;&#30005;&#37327;&#30340;&#24773;&#20917;&#19979;&#36827;&#34892;&#37197;&#32622;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702782426" ID="ID_33476900" MODIFIED="1488702828701">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      piconect structure
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#21457;&#29616;&#21644;&#37325;&#26032;&#37197;&#32622;&#19968;&#20010;
    </p>
    <p>
      piconect
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702832025" ID="ID_1472082271" MODIFIED="1488702892628">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      quality of service
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#38598;&#21512;&#20801;&#35768;&#25351;&#23450;&#26381;&#21153;&#36136;&#37327;&#30340;&#21442;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702903656" ID="ID_77091194" MODIFIED="1488702945347">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      physical links
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#20801;&#35768;&#23545;&#19968;&#20010;&#29289;&#29702;&#38142;&#25509;
    </p>
    <p>
      &#36827;&#34892;&#37197;&#32622;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488702968607" ID="ID_1623128218" MODIFIED="1488703011836">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      host flow control
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#23545;host&#31471;&#36827;&#34892;
    </p>
    <p>
      flow control
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488703028430" ID="ID_948351726" MODIFIED="1488703069547">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      link information
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#35835;&#21462;&#19968;&#20010;&#38142;&#25509;&#30340;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488703092597" ID="ID_714278448" MODIFIED="1488703150513">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#f10202">Authentication and Encryption</font>
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#23545;&#19968;&#20010;&#36828;&#31471;&#35774;&#22791;&#36827;&#34892;&#35748;&#35777;,
    </p>
    <p>
      &#24182;&#19988;&#23545;&#36830;&#25509;&#36827;&#34892;&#21152;&#23494;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488703163990" ID="ID_390132369" MODIFIED="1488703210207">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Testing
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#23558;&#19968;&#20010;&#35774;&#22791;&#25918;&#32622;&#21040;&#27979;&#35797;
    </p>
    <p>
      &#27169;&#24335;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488703241823" ID="ID_1734672620" MODIFIED="1488703324834">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Connectionless Slave Broadcast
    </p>
    <p>
      &#35813;&#21629;&#20196;&#21644;&#20107;&#20214;&#38598;&#21512;&#20801;&#35768;&#24314;&#31435;&#25110;&#32773;&#25286;&#27585;&#19968;&#20010;
    </p>
    <p>
      &#26080;&#38142;&#25509;&#27169;&#24335;&#30340;&#20174;&#24191;&#25773;&#29289;&#29702;&#38142;&#36335;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1488703374333" ID="ID_1288396971" MODIFIED="1488703409813">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#d90e0e"><b>HCI&#23618;&#30340;&#21253;&#26684;&#24335;</b></font></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1488719177130" ID="ID_331052942" MODIFIED="1488719736955">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#ef0c0c">HCI Command Packet</font></i>
    </p>
    <p>
      1.&#25511;&#21046;&#22120;&#24212;&#35813;&#21487;&#20197;&#26368;&#22823;&#25509;&#25910;255&#23383;&#33410;&#30340;&#21629;&#20196;&#21253;&#65292;&#21253;&#25324;&#22836;&#22312;&#20869;
    </p>
    <p>
      2.&#21629;&#20196;&#30340;&#31867;&#22411;&#26159;&#36890;&#36807;2&#23383;&#33410;&#30340;Opcode&#26469;&#36827;&#34892;&#21306;&#20998;&#30340;&#12290;
    </p>
    <p>
      3.Opcode&#34987;&#20998;&#21106;&#25104;&#20004;&#20010;&#37096;&#20998;
    </p>
    <p>
      OpCode Group Field (OGF)&#21644;OpCode Command Field (OCF).
    </p>
  </body>
</html></richcontent>
<node CREATED="1488719742790" ID="ID_1814071231" MODIFIED="1488719753733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/hci-command-packet.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1488719771080" ID="ID_1255653098" MODIFIED="1488721707562">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ACL Data Pakcet
    </p>
    <p>
      1.acl&#25968;&#25454;&#21253;&#20998;&#25104;automatically-flushable&#21644;non-automatically-flushable
    </p>
    <p>
      &#20004;&#31181;&#31867;&#22411;&#65292;&#21069;&#32773;&#22522;&#20110;&#19968;&#20010;&#33258;&#21160;&#21047;&#26032;&#23450;&#26102;&#22120;&#36827;&#34892;&#21047;&#26032;&#65292;&#21518;&#32773;&#21017;&#19981;&#21463;&#33258;&#21160;&#21047;&#26032;&#23450;&#26102;&#22120;&#25511;&#21046;.
    </p>
    <p>
      2.&#25152;&#26377;&#20301;&#20110;AMP&#36923;&#36753;&#38142;&#36335;&#19978;&#30340;&#25968;&#25454;&#21253;&#37117;&#20250;&#21463;&#21040;&#33258;&#21160;&#23450;&#26102;&#22120;&#30340;&#25511;&#21046;
    </p>
  </body>
</html></richcontent>
<node CREATED="1488721711998" ID="ID_722286018" MODIFIED="1488726535931">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="bluetoothpic/acl-data-packet.png" />
      
    </p>
    <p>
      1.Packet Boundary Flag:
    </p>
    <p>
      00&#34920;&#31034;&#35813;&#25968;&#25454;&#26159;&#31532;&#19968;&#20010;&#20174;&#19978;&#23618;&#20256;&#36882;&#19979;&#26469;&#30340;&#38750;&#33258;&#21160;&#21047;&#26032;&#30340;&#25968;&#25454;&#24103;
    </p>
    <p>
      01&#34920;&#31034;&#35813;&#25968;&#25454;&#26159;&#20174;&#19978;&#23618;&#20256;&#36882;&#19979;&#26469;&#30340;&#36830;&#32493;&#30340;&#25968;&#25454;&#24103;&#24403;&#20013;&#30340;&#19968;&#20010;
    </p>
    <p>
      10&#34920;&#31034;&#35813;&#25968;&#25454;&#26159;&#31532;&#19968;&#20010;&#20174;&#19978;&#23618;&#20256;&#36882;&#19979;&#26469;&#30340;&#21487;&#33258;&#21160;&#21047;&#26032;&#30340;&#25968;&#25454;&#24103;
    </p>
    <p>
      11&#34920;&#31034;&#35813;&#25968;&#25454;&#21253;&#26159;&#19968;&#20010;&#23436;&#25972;&#30340;&#30001;&#19978;&#23618;&#36923;&#36753;&#38142;&#36335;&#23618;&#20256;&#36882;&#19979;&#26469;&#30340;&#25968;&#25454;&#24103;&#65292;&#19988;&#26159;&#33258;&#21160;&#21047;&#26032;&#30340;
    </p>
    <p>
      2. Broadcast Flag&#65306;
    </p>
    <p>
      &#22914;&#26524;&#26159;&#20174;host&#20256;&#36882;&#21521;controller&#31471;:
    </p>
    <p>
      00&#34920;&#31034;&#19981;&#26159;&#24191;&#25773;&#25968;&#25454;&#65292;&#26159;&#28857;&#23545;&#28857;&#30340;&#25968;&#25454;
    </p>
    <p>
      01&#34920;&#31034;&#35813;&#25968;&#25454;&#26159;&#24191;&#25773;&#32473;&#25152;&#26377;&#30340;active slave&#33410;&#28857;&#30340;
    </p>
    <p>
      10&#34920;&#31034;&#35813;&#25968;&#25454;&#26159;&#24191;&#25773;&#32473;&#25152;&#26377;parked&#29366;&#24577;&#30340;slave&#35774;&#22791;&#30340;
    </p>
    <p>
      11&#20445;&#30041;&#20351;&#29992;
    </p>
    <p>
      &#22914;&#26524;&#26159;&#20174;controller&#31471;&#21521;host&#31471;&#20256;&#36882;:
    </p>
    <p>
      00&#34920;&#31034;&#35813;&#25968;&#25454;&#26159;&#28857;&#23545;&#28857;&#30340;&#25968;&#25454;
    </p>
    <p>
      01&#34920;&#31034;&#20316;&#20026;slave&#31471;&#25509;&#25910;&#21040;&#20102;&#24191;&#25773;&#25968;&#25454;
    </p>
    <p>
      10&#34920;&#31034;&#22312;parked&#29366;&#24577;&#19979;&#30340;slave&#31471;&#25509;&#25910;&#21040;&#20102;&#24191;&#25773;&#25968;&#25454;
    </p>
    <p>
      11&#20445;&#30041;&#21040;&#23558;&#26469;&#20351;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1488726695617" ID="ID_358732678" MODIFIED="1488729102993">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HCI Synchronous Data Packets
    </p>
    <p>
      &#21516;&#27493;&#25968;&#25454;&#21253;&#24403;&#20013;&#30340;Packet_Status_Flag&#26631;&#24535;
    </p>
    <p>
      00&#34920;&#31034;&#24050;&#32463;&#27491;&#30830;&#22320;&#25509;&#25910;&#21040;&#20102;&#25968;&#25454;&#21253;
    </p>
    <p>
      01&#34920;&#31034;&#21487;&#33021;&#26159;&#26080;&#25928;&#30340;&#25968;&#25454;&#21253;
    </p>
    <p>
      10&#34920;&#31034;&#27809;&#26377;&#25968;&#25454;&#25509;&#25910;&#21040;
    </p>
    <p>
      11&#34920;&#31034;&#26377;&#37096;&#20998;&#30340;&#25968;&#25454;&#20002;&#22833;&#20102;<br />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488729110279" ID="ID_395395" MODIFIED="1488729223257">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e30c0c"><b>HCI Event Packet </b></font>
    </p>
    <p>
      &#20107;&#20214;&#25968;&#25454;&#21253;&#26159;controller&#29992;&#26469;&#36890;&#30693;host&#30456;&#20851;&#20107;&#20214;&#30340;,
    </p>
    <p>
      host&#24517;&#39035;&#33021;&#22815;&#25509;&#25910;controller&#31471;&#22810;&#22823;255&#20010;&#23383;&#33410;&#30340;
    </p>
    <p>
      &#20107;&#20214;&#21253;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1488729801409" ID="ID_1446397625" MODIFIED="1490354867209">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;bluedroid&#24403;&#20013;hci&#20301;&#20110;&#20195;&#30721;system/bt/stack/hcic&#24403;&#20013;&#65292;
    </p>
    <p>
      &#20854;&#20013;&#23450;&#20041;&#30340;&#25509;&#21475;&#22914;&#19979;:
    </p>
  </body>
</html></richcontent>
<node CREATED="1488729901208" ID="ID_1021321056" MODIFIED="1488729910545">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BOOLEAN btsnd_hcic_inquiry(const LAP inq_lap, UINT8 duration, UINT8 response_cnt)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488729968136" ID="ID_1858966836" MODIFIED="1488730006373">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BOOLEAN btsnd_hcic_create_conn(BD_ADDR dest, UINT16 packet_types,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;UINT8 page_scan_rep_mode, UINT8 page_scan_mode,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;UINT16 clock_offset, UINT8 allow_switch)
    </p>
    <p>
      <font color="#eb0808">host&#31471;&#20027;&#21160;&#21457;&#36215;ACL&#36830;&#25509;&#30340;&#35831;&#27714;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488730724850" ID="ID_1905863477" MODIFIED="1488730764151">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BOOLEAN btsnd_hcic_disconnect (UINT16 handle, UINT8 reason)
    </p>
    <p>
      host&#31471;&#25110;&#32773;&#26159;controller&#31471;&#20027;&#21160;&#26029;&#24320;acl&#36830;&#25509;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488730827169" ID="ID_39712776" MODIFIED="1488730861811">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BOOLEAN btsnd_hcic_add_SCO_conn (UINT16 handle, UINT16 packet_types)
    </p>
    <p>
      &#24403;&#20351;&#29992;&#34013;&#29273;&#32819;&#26426;&#25509;&#21548;&#30005;&#35805;&#26102;&#65292;&#24314;&#31435;sco&#25110;&#32773;&#26159;esco&#38142;&#25509;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488730912408" ID="ID_1275795960" MODIFIED="1488730943891">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BOOLEAN btsnd_hcic_accept_conn (BD_ADDR dest, UINT8 role)
    </p>
    <p>
      host&#31471;&#25509;&#21463;&#24314;&#31435;acl&#36830;&#25509;&#30340;&#35831;&#27714;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488730956040" ID="ID_1718778211" MODIFIED="1488730983996">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BOOLEAN btsnd_hcic_reject_conn (BD_ADDR dest, UINT8 reason)
    </p>
    <p>
      host&#31471;&#25298;&#32477;&#25509;&#21463;acl&#36830;&#25509;&#30340;&#35831;&#27714;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1469201524804" ID="ID_1284252067" MODIFIED="1469201629206">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#21313;&#20108;&#31456;:&#34013;&#29273;&#27979;&#35797;&#27169;&#24335;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201555293" ID="ID_551171973" MODIFIED="1469201632317">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#21313;&#19977;&#31456;:&#34013;&#29273;&#20860;&#23481;&#24615;&#35201;&#27714;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1469201583260" ID="ID_1979714677" MODIFIED="1469201636878">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#21313;&#22235;&#31456;:&#27979;&#35797;&#25511;&#21046;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1470637131198" FOLDED="true" ID="ID_1795060829" MODIFIED="1490586107799" TEXT="&#x8865;&#x5145;&#x8bf4;&#x660e;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1470637187438" ID="ID_1386144405" MODIFIED="1490356905568" TEXT="&#x84dd;&#x7259;&#x534f;&#x8bae;&#x67b6;&#x6784;">
<node CREATED="1470637207885" ID="ID_1697377620" MODIFIED="1470637227730">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/bluetooth-stack.gif" />
  </body>
</html></richcontent>
<node CREATED="1486611772013" ID="ID_120246439" MODIFIED="1486611785006">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/bluetooth_stack.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1470641141584" ID="ID_1966481221" MODIFIED="1490356910091">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/bluetooth-layers.gif" />
  </body>
</html></richcontent>
<node CREATED="1471855500541" ID="ID_1547200115" MODIFIED="1471856812256">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1&#65289;<b>SCO</b>: Synchronous Connection-Oriented &#21363;&#38754;&#21521;&#36830;&#25509;&#30340;&#21516;&#27493;&#36923;&#36753;&#20256;&#36755;&#12290;
    </p>
    <p>
      2&#65289;<b>eSCO</b>: Extended Synchronous Connection-Oriented&#25193;&#23637;&#30340;&#38754;&#21521;&#36830;&#25509;&#30340;&#21516;&#27493;&#36923;&#36753;&#20256;&#36755;&#12290;
    </p>
    <p>
      3&#65289;<b>ACL</b>: Asynchronous Connection-Oriented &#38754;&#21521;&#36830;&#25509;&#30340;&#24322;&#27493;&#36923;&#36753;&#20256;&#36755;
    </p>
    <p>
      4&#65289;<b>ASB</b>: Active Slave Broadcast&#27963;&#36291;&#30340;slave &#24191;&#25773;&#36923;&#36753;&#20256;&#36755;,&#38754;&#21521;&#36830;&#25509;&#30340;&#24191;&#25773;&#20256;&#36755;&#38142;&#36335;
    </p>
    <p>
      5&#65289;<b>PSB</b>: ParkedSlave Broadcast&#20241;&#30496;&#30340;slave&#20851;&#38381;&#36923;&#36753;&#20256;&#36755;&#65292;&#38754;&#21521;&#36830;&#25509;&#30340;&#24191;&#25773;&#20256;&#36755;&#38142;&#36335;
    </p>
    <p>
      6)&#160; <b>CSB</b>: Connectless Slave Broadcast &#38754;&#21521;&#26080;&#36830;&#25509;&#30340;&#24191;&#25773;&#20256;&#36755;&#38142;&#36335;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1490581863206" ID="ID_1993395891" MODIFIED="1490582107848">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#c50909">LMP</font></i></b>
    </p>
    <p>
      Link Manager Protocol
    </p>
    <p>
      &#29992;&#20110;&#25511;&#21046;&#21644;&#21327;&#21830;&#20851;&#20110;&#35774;&#22791;&#20043;&#38388;&#36830;&#25509;&#30456;&#20851;&#30340;&#25152;&#26377;&#25805;&#20316;
    </p>
    <p>
      <b>&#21253;&#25324;&#23545;&#20110;&#36923;&#36753;&#20256;&#36755;&#23618;&#21644;&#36923;&#36753;&#38142;&#36335;&#23618;&#30340;&#24314;&#31435;&#21644;&#25511;&#21046;&#65292;&#23545;&#20110;&#29289;&#29702;&#38142;&#36335;&#30340;&#25511;&#21046;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1470641187426" ID="ID_825756476" MODIFIED="1470641195078">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/bluetooth-core.gif" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1471861324987" ID="ID_364997398" MODIFIED="1490356937401" TEXT="BLE&#x534f;&#x8bae;&#x6808;&#x4ecb;&#x7ecd;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1471861556772" ID="ID_1379752921" MODIFIED="1490356940479">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/ble-stack.gif" />
  </body>
</html></richcontent>
<node CREATED="1471867166554" ID="ID_887150247" MODIFIED="1490580771482">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>l<i>ink layer&#23618;&#30340;&#20116;&#31181;&#29366;&#24577;</i></b>
    </p>
    <p>
      Standby State
    </p>
    <p>
      &#21021;&#22987;&#29366;&#24577;,&#26082;&#19981;&#21457;&#36865;&#25968;&#25454;&#20063;&#19981;&#25509;&#25910;&#25968;&#25454;&#65292;&#21487;&#20197;&#20999;&#25442;&#21040;&#38500;connection&#20043;&#22806;&#30340;&#20219;&#20309;&#29366;&#24577;
    </p>
    <p>
      Advertising State
    </p>
    <p>
      &#21487;&#20197;&#36890;&#36807;&#24191;&#25773;&#21457;&#36865;&#25968;&#25454;&#30340;&#29366;&#24577;,&#23427;&#24191;&#25773;&#30340;&#25968;&#25454;&#21487;&#20197;&#30001;&#22788;&#20110;scanning&#21644;initiating&#29366;&#24577;
    </p>
    <p>
      &#30340;&#23454;&#20307;&#25509;&#25910;
    </p>
    <p>
      Scanning State
    </p>
    <p>
      &#26159;&#21487;&#20197;&#36890;&#36807;&#24191;&#25773;&#36890;&#36947;&#25509;&#25910;&#25968;&#25454;&#30340;&#29366;&#24577;,&#26681;&#25454;advertising&#30340;&#24191;&#25773;&#30340;&#25968;&#25454;&#31867;&#22411;&#65292;&#26377;&#20123;
    </p>
    <p>
      scanner&#21487;&#20197;&#20027;&#21160;&#21521;advertiser&#35831;&#27714;&#19968;&#20123;&#25968;&#25454;
    </p>
    <p>
      Initiating State
    </p>
    <p>
      &#21482;&#33021;&#25509;&#25910;advertiser&#24191;&#25773;&#25968;&#25454;&#30340;connectable&#30340;&#25968;&#25454;
    </p>
    <p>
      Connection State
    </p>
    <p>
      &#26159;&#21644;&#26576;&#20010;&#23454;&#20307;&#24314;&#31435;&#20102;&#36830;&#25509;&#30340;&#19968;&#31181;&#29366;&#24577;&#65292;&#30001;advertising&#21644;initiating&#29366;&#24577;
    </p>
    <p>
      &#20999;&#25442;&#32780;&#26469;.
    </p>
  </body>
</html></richcontent>
<node CREATED="1471917080184" ID="ID_428327471" MODIFIED="1471917090416">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/ble-state.gif" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1471920631739" FOLDED="true" ID="ID_1330135863" MODIFIED="1482911183233">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      L2CAP&#21327;&#35758;&#65306;&#36923;&#36753;&#38142;&#36335;&#25511;&#21046;&#19982;&#36866;&#37197;&#21327;&#35758;
    </p>
    <p>
      1.&#21327;&#35758;/&#36890;&#36947;&#30340;&#22810;&#36335;&#22797;&#29992;
    </p>
    <p>
      2.&#19978;&#23618;&#21327;&#35758;&#25968;&#25454;&#30340;&#20998;&#21106;/&#37325;&#32452;&#65292;&#29983;&#25104;&#21327;&#35758;&#25968;&#25454;&#21333;&#20803;PDUs
    </p>
    <p>
      3.&#27969;&#25511;&#26426;&#21046;
    </p>
    <p>
      4.&#38169;&#35823;&#37325;&#20256;&#26426;&#21046;
    </p>
    <p>
      5.&#27969;&#24335;&#20256;&#36755;
    </p>
    <p>
      6.PDUs&#30340;&#20998;&#29255;&#21644;&#37325;&#32452;&#65292;&#29983;&#25104;&#31526;&#21512;link layer&#23618;&#35201;&#27714;&#30340;&#25968;&#25454;
    </p>
    <p>
      7.QoS&#30340;&#25903;&#25345;
    </p>
  </body>
</html></richcontent>
<node CREATED="1471923064245" ID="ID_1209357796" MODIFIED="1471928149190">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21327;&#35758;&#36890;&#36947;&#30340;&#22810;&#36335;&#22797;&#29992;:
    </p>
    <p>
      &#23558;PDUs&#25968;&#25454;&#21152;&#19978;&#19968;&#20010;&#29305;&#23450;&#30340;ID header&#28982;&#21518;&#36890;&#36807;&#36923;&#36753;&#38142;&#36335;
    </p>
    <p>
      &#21457;&#36865;&#20986;&#21435;&#65292;&#35813;ID&#23601;&#26159;&#19968;&#31181;&#22810;&#36335;&#22797;&#29992;&#30340;&#25163;&#27573;
    </p>
    <p>
      1.&#22522;&#20110;&#36830;&#25509;&#30340;&#22797;&#29992;
    </p>
    <p>
      ID&#23601;&#26159;channel&#30340;ID
    </p>
    <p>
      2.&#22522;&#20110;&#26080;&#36830;&#25509;&#30340;&#22797;&#29992;
    </p>
    <p>
      &#27809;&#26377;&#25152;&#35859;&#30340;channel ID&#20102;&#65292;&#21435;&#32780;&#20195;&#26367;&#30340;&#26159;&#25152;&#35859;&#30340;PSM
    </p>
    <p>
      &#36825;&#26159;&#22522;&#20110;&#21327;&#35758;&#30340;&#22797;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1471928247363" ID="ID_198130267" MODIFIED="1471930017951">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>GAP: generic access profile</i></b>
    </p>
    <p>
      &#20351;&#29992;&#22330;&#26223;&#26159;&#22522;&#20110;&#26080;&#36830;&#25509;&#30340;&#24191;&#25773;&#36890;&#36947;&#21644;&#24314;&#31435;&#36830;&#25509;&#30340;&#36807;&#31243;
    </p>
    <p>
      1.GAP&#23618;&#30340;&#34013;&#29273;&#35774;&#22791;&#35282;&#33394;
    </p>
    <p>
      Broadcaster Role &#35774;&#22791;&#27491;&#22312;&#21457;&#36865;&#24191;&#25773;&#20107;&#20214;
    </p>
    <p>
      Oberserver Role &#35774;&#22791;&#27491;&#22312;&#25509;&#25910;&#24191;&#25773;&#20107;&#20214;
    </p>
    <p>
      Peripheral Role &#35774;&#22791;&#25509;&#25910;link layer&#23545;&#25509;
    </p>
    <p>
      Central Role&#35774;&#22791;&#21457;&#36215;link layer&#23545;&#25509;
    </p>
    <p>
      2.GAP&#23618;&#30340;&#36890;&#20449;&#27169;&#24335;
    </p>
    <p>
      &#21333;&#21521;&#30340;&#26080;&#36830;&#25509;&#30340;&#36890;&#20449;&#27169;&#24335;
    </p>
    <p>
      &#34013;&#29273;&#35774;&#22791;&#30340;&#21457;&#29616;&#25805;&#20316;
    </p>
    <p>
      &#34013;&#29273;&#35774;&#22791;&#30340;&#36830;&#25509;&#25805;&#20316;
    </p>
    <p>
      &#34013;&#29273;&#35774;&#22791;&#30340;&#37197;&#23545;&#25805;&#20316;
    </p>
    <p>
      3.user interface&#26377;&#20851;&#30340;&#34013;&#29273;&#21442;&#25968;
    </p>
    <p>
      &#34013;&#29273;&#22320;&#22336;
    </p>
    <p>
      &#34013;&#29273;&#21517;&#31216;
    </p>
    <p>
      &#34013;&#29273;&#30340;pincode
    </p>
    <p>
      &#34013;&#29273;&#30340;class----&gt;&#21644;&#21457;&#23556;&#21151;&#29575;&#26377;&#20851;&#31995;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471930984486" ID="ID_1557302374" MODIFIED="1490356943323">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>BLE&#30456;&#20851;&#30340;&#19968;&#20123;&#27979;&#35797;&#24037;&#20855;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1471931157774" ID="ID_1165892223" MODIFIED="1471931386727">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bluepy
    </p>
    <p>
      &#20351;&#29992;python&#33050;&#26412;&#23553;&#35013;&#30340;&#27979;&#35797;&#24037;&#20855;
    </p>
    <p>
      http://ianharvey.github.io/bluepy-doc/scanner.html
    </p>
    <p>
      &#35813;&#32593;&#31449;&#19979;&#38754;&#26377;&#35768;&#22810;&#30340;&#27979;&#35797;&#20195;&#30721;&#31034;&#20363;
    </p>
    <p>
      &#23433;&#35013;&#26041;&#27861;:
    </p>
    <p>
      #&#23433;&#35013;python&#30340;&#21253;&#31649;&#29702;&#24037;&#20855;&#8212;pip
    </p>
    <p>
      sudo apt-get install python-pip libglib2.0-dev
    </p>
    <p>
      #&#20351;&#29992;pip&#23433;&#35013;bluepy
    </p>
    <p>
      sudo pip install bluepy
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1471922554965" ID="ID_64770098" MODIFIED="1490357054371" TEXT="&#x786c;&#x4ef6;&#x5206;&#x6790;">
<node CREATED="1471922635301" ID="ID_901348195" MODIFIED="1471938120961">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BT_HOST_WAKE&#36830;&#25509;&#21040;soc&#30340;SPI3_CS0_N &#29992;&#20110;&#21796;&#37266;&#20027;&#26426;
    </p>
    <p>
      BT_DEV_WAKE&#36830;&#25509;&#21040;FST_SPI_CS2_N &#29992;&#20110;&#20027;&#26426;&#21796;&#37266;&#35813;&#35774;&#22791;
    </p>
    <p>
      <b>BT_RST_N------GPIO_N3/C0_BPM1_TX/C1_BPM1_TX</b>
    </p>
    <p>
      <b>WL_REG_ON----USB_OC1_N</b>&#160;&#20869;&#37096;&#30340;&#35843;&#33410;&#22120;&#30005;&#28304;&#30340;&#20351;&#33021;
    </p>
    <p>
      WIFI_HOST_WAKE---PMC_WAKE_N&#21796;&#37266;&#20027;&#26426;
    </p>
    <p>
      PCM_OUT-----LPE_I2S1_DATAIN host&#20027;&#26426;i2s&#36755;&#20837;
    </p>
    <p>
      PCM_CLK------LPE_I2S1_CLK
    </p>
    <p>
      PCM_IN-------LPE_I2S1_DATAOUT
    </p>
    <p>
      PCM_SYNC-----LPE_I2S1_FRM
    </p>
    <p>
      UART_RTS_N------UART1_RTS_N
    </p>
    <p>
      UART_CTS_N------UART1_CTS_N
    </p>
    <p>
      UART_TXD-----UART1_DATAIN
    </p>
    <p>
      UART_RXD-----UART1_DATAOUT
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1490586103754" ID="ID_1089887842" MODIFIED="1490586103754" TEXT=""/>
</node>
<node CREATED="1490586112557" ID="ID_1116781236" MODIFIED="1490586121628" TEXT="Bluetooth Profile">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1490586126941" ID="ID_1696855590" MODIFIED="1490586129303" TEXT="A2DP">
<node CREATED="1490586148349" ID="ID_1172646325" MODIFIED="1490586163919" TEXT="1.profile &#x534f;&#x8bae;&#x6808;&#x6982;&#x63fd;">
<node CREATED="1490586167428" ID="ID_368270436" MODIFIED="1490586321456">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/a2dp-profile-stack01.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490591701357" ID="ID_695436321" MODIFIED="1490591712815" TEXT="2.Application Layer">
<node CREATED="1490591723357" ID="ID_353912484" MODIFIED="1490592883119">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.audio stream setup</b>
    </p>
    <p>
      &#22914;&#26524;remote device&#30340;AVDTP&#29256;&#26412;&#26159;&#26410;&#30693;&#30340;&#65292;&#37027;&#20040;&#35774;&#22791;&#38656;&#35201;&#21457;&#36215;
    </p>
    <p>
      SDP&#35810;&#38382;&#26469;&#33719;&#21462;&#36828;&#31471;&#35774;&#22791;&#30340;AVDTP&#30340;&#29256;&#26412;&#20449;&#24687;&#12290;&#22312;&#25191;&#34892;
    </p>
    <p>
      GAVDP_ConnectionEstablishment&#21160;&#20316;&#20043;&#21069;&#65292;&#36825;&#20010;&#25805;&#20316;&#26159;&#24517;&#39035;&#30340;&#12290;
    </p>
    <p>
      &#24403;&#19968;&#20010;&#35774;&#22791;&#24819;&#35201;stream&#38899;&#39057;&#30340;&#20869;&#23481;&#20043;&#21069;&#65292;&#35774;&#22791;&#24517;&#39035;&#24314;&#31435;&#19968;&#20010;stream &#36830;&#25509;
    </p>
    <p>
      &#20449;&#21495;&#22788;&#29702;&#20197;&#21450;&#20856;&#22411;&#30340;&#20449;&#21495;&#27969;&#22312;section4.1&#21644;&#38468;&#24405;GAVDP&#24403;&#20013;&#26377;&#35299;&#37322;&#12290;
    </p>
    <p>
      &#30446;&#21069;&#26377;&#20004;&#31181;&#31867;&#22411;&#30340;&#26381;&#21153;&#37197;&#32622;: &#19968;&#31181;&#26159;&#24212;&#29992;&#26381;&#21153;&#33021;&#21147;&#65292;&#21478;&#19968;&#31181;&#26159;&#20256;&#36755;&#26381;&#21153;&#33021;&#21147;&#12290;
    </p>
    <p>
      &#24212;&#29992;&#26381;&#21153;&#33021;&#21147;&#21253;&#25324;audio codec&#33021;&#21147;&#21644;&#20869;&#23481;&#20445;&#25252;&#33021;&#21147;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1490592906421" ID="ID_1442228425" MODIFIED="1490593976833">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.audio stream
    </p>
    <p>
      <i>&#19968;&#26086;stream&#36830;&#25509;&#24314;&#31435;&#65292;&#24182;&#19988;&#22312;GAVDP&#20013;&#30340;start stream&#27969;&#31243;&#34987; </i>
    </p>
    <p>
      <i>&#25191;&#34892;&#65292;&#19981;&#31649;&#26159;sink&#36824;&#26159;source&#37117;&#22312;STREAMING&#29366;&#24577;&#12290; </i>
    </p>
    <p>
      <i>src&#20351;&#29992;Send Audio Stream procedure&#26469;&#21457;&#36865;audio data&#32473;sink, </i>
    </p>
    <p>
      <i>sink&#21453;&#36807;&#26469;&#20250;&#20351;&#29992;Receive Audio Stream procedure&#26469;&#25509;&#25910;&#25968;&#25454;&#12290; </i>
    </p>
    <p>
      <i>&#22312;&#31532;&#22235;&#31456;&#65292;&#20851;&#20110;AVDTP&#22836;&#37324;&#38754;&#30340;audio&#20855;&#20307;&#30340;&#21442;&#25968;&#21644;&#23186;&#20307;&#25968;&#25454;&#36127;&#36733;&#30340;&#26684;&#24335; </i>
    </p>
    <p>
      <i>&#20063;&#20250;&#34987;&#25351;&#23450; </i>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1490593774512" ID="ID_1355415358" MODIFIED="1490593786771">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/audio-stream-procedures.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1490593991415" ID="ID_388918831" MODIFIED="1490594819059">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.audio send
    </p>
    <p>
      &#22312;Send Audio Stream procedure&#38454;&#27573;&#65292;source&#24212;&#35813;&#23558;&#25968;&#25454;&#35299;&#30721;&#25104;
    </p>
    <p>
      &#22312;signaling &#20250;&#35805;&#38454;&#27573;&#21327;&#21830;&#22909;&#30340;&#26684;&#24335;&#12290;&#28982;&#21518;&#24212;&#29992;&#23618;&#20250;&#23558;&#35813;&#35299;&#30721;&#20043;&#21518;&#30340;&#25968;&#25454;
    </p>
    <p>
      &#35774;&#32622;&#25104;&#23450;&#20041;&#22909;&#30340;media payload&#26684;&#24335;&#65292;&#21152;&#23494;&#30340;audio&#25968;&#25454;&#24103;&#20250;&#34987;&#36866;&#37197;&#21040;&#39044;
    </p>
    <p>
      &#23450;&#20041;&#30340;&#25968;&#25454;&#26684;&#24335;&#24403;&#20013;(chapter4 &#23450;&#20041;)&#12290;
    </p>
    <p>
      &#24403;&#20869;&#23481;&#20445;&#25252;&#27169;&#24335;&#34987;&#20351;&#29992;&#65292;&#19968;&#20010;&#20869;&#23481;&#20445;&#25252;&#22836;&#20250;&#20808;&#20110;&#21152;&#23494;&#30340;audio&#20869;&#23481;&#12290;
    </p>
    <p>
      &#28982;&#21518;&#35813;stream&#25968;&#25454;&#20250;&#36890;&#36807;&#26292;&#38706;&#30340;&#25509;&#21475;&#20256;&#36882;&#32473;AVDTP&#23454;&#20307;&#12290;stream data
    </p>
    <p>
      &#20250;&#36890;&#36807;&#20256;&#36755;&#23618;&#30340;&#36890;&#36947;&#20351;&#29992;&#36873;&#25321;&#30340;&#20256;&#36755;&#26381;&#21153;&#21457;&#36865;&#20986;&#21435;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1490594825561" ID="ID_933810291" MODIFIED="1490594994218">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.receive audio stream
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490595000024" ID="ID_269439389" MODIFIED="1490595825065">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3. audio codec&#20114;&#25805;&#20316;&#24615;&#35201;&#27714;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1435560325020" ID="ID_1852650945" MODIFIED="1490347184686" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#db1010">&#38899;&#39057;&#31995;&#32479;</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1435560344479" ID="ID_1409256327" MODIFIED="1490347190485" TEXT="1.Framework&#x670d;&#x52a1;AudioManager">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1435560386479" ID="ID_1058672613" MODIFIED="1490347192973" TEXT="2.&#x672c;&#x5730;&#x670d;&#x52a1;AudioFlinger">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1435560410432" ID="ID_1148366396" MODIFIED="1490347195053" TEXT="3.&#x62bd;&#x8c61;&#x5c42;ALSAHAL">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1435560430647" ID="ID_622518518" MODIFIED="1490347197485" TEXT="4.&#x672c;&#x5730;&#x5e93;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1435560552311" ID="ID_1789568863" MODIFIED="1490347199861" TEXT="5.external&#x7684;ALSA-LIB&#x5916;&#x90e8;&#x5e93;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1435560570031" ID="ID_1202614947" MODIFIED="1491357103828">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>6.ALSA&#39537;&#21160;&#23618;&#26694;&#26550;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1472400207636" ID="ID_1502746956" MODIFIED="1484548753523" TEXT="PCM&#x8bbe;&#x5907;">
<node CREATED="1472400623079" ID="ID_1684430482" MODIFIED="1491357302184">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="alsa/pcm-middle-layer.png" />
  </body>
</html></richcontent>
<node CREATED="1472402218679" ID="ID_900387020" MODIFIED="1472402225269">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="alsa/pcm-hardware.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1490341570322" ID="ID_859680549" MODIFIED="1490347164069">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#dd0101">audio&#30456;&#20851;&#30340;&#30693;&#35782;</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1490341585626" ID="ID_1282286001" MODIFIED="1490347145184">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Single Ended&#21644;Balanced&#32819;&#26426;&#32447;</i></b>
    </p>
    <p>
      single-ended&#26159;&#19968;&#31181;&#26368;&#31616;&#21333;&#21644;&#26368;&#36890;&#29992;&#30340;&#20256;&#36755;&#30005;&#23376;&#20449;&#21495;&#30340;&#26041;&#24335;&#65292;&#19968;&#26681;&#32447;&#20256;&#36755;&#20195;&#34920;&#20449;&#21495;&#30340;
    </p>
    <p>
      &#30005;&#21387;&#65292;&#21478;&#19968;&#26681;&#32447;&#25509;&#21040;&#22320;&#12290;single-ended&#30340;&#26367;&#20195;&#26041;&#26696;&#34987;&#31216;&#20026;&quot;&#24046;&#20998;&#20449;&#21495;&quot;&#12290;single-ended
    </p>
    <p>
      &#23481;&#26131;&#23454;&#29616;&#65292;&#20294;&#26159;&#30001;&#20110;&#19979;&#38754;&#30340;&#21407;&#22240;&#23548;&#33268;&#38477;&#22122;&#25928;&#26524;&#19981;&#22909;:
    </p>
    <p>
      1)&#21457;&#36865;&#21644;&#25509;&#25910;&#33455;&#29255;&#22312;ground&#30005;&#21387;&#19978;&#38754;&#30340;&#19981;&#21516;
    </p>
    <p>
      2)&#20449;&#21495;&#32447;&#19978;&#38754;&#30340;&#24863;&#24212;&#20449;&#21495;
    </p>
    <p>
      single-ended&#30340;&#20248;&#28857;&#26159;&#23454;&#29616;&#31616;&#21333;&#65292;n&#36335;&#38899;&#39057;&#20449;&#21495;&#21482;&#38656;&#35201;n+1&#26681;&#32447;&#65292;&#32570;&#28857;&#26159;&#24178;&#25200;&#22826;&#22823;&#12290;
    </p>
    <p>
      &#22312;&#25918;&#22823;&#22120;&#31471;Balanced&#34987;&#31216;&#20026;&quot;&#24046;&#20998;&#20449;&#21495;&quot;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491563706684" ID="ID_879442190" MODIFIED="1491563752837">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#35895;&#27468;&#32593;&#31449;&#19978;&#30340;audio&#26041;&#38754;&#30340;&#26415;&#35821;</b>
    </p>
    <p>
      https://source.android.com/devices/audio/terminology
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1491563755166" ID="ID_712749614" MODIFIED="1491563782957">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Digital Audio&#30456;&#20851;&#30340;&#26415;&#35821;
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1491563785636" ID="ID_1354986411" MODIFIED="1491564719056">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      acoustics&#22768;&#23398;
    </p>
    <p>
      &#29992;&#20110;&#30740;&#31350;&#22768;&#38899;&#30340;&#26426;&#26800;&#23646;&#24615;
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1491564722791" ID="ID_1970111291" MODIFIED="1491564796330">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      attenuation&#34928;&#20943;
    </p>
    <p>
      &#20316;&#29992;&#20110;&#22768;&#38899;&#19978;&#38754;&#30340;&#34928;&#20943;&#22240;&#23376;
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1491564800408" ID="ID_1701882387" MODIFIED="1491565082296">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      audiophile&#21457;&#28903;&#21451;
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1491565086407" ID="ID_921354504" MODIFIED="1491565219194">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>channel</i></b>
    </p>
    <p>
      audio&#20449;&#24687;&#30340;&#21333;&#20010;&#27969;&#65292;&#36890;&#24120;&#23545;&#24212;&#19968;&#20010;recording&#25110;&#32773;&#26159;playback
    </p>
    <p>
      &#30340;&#20301;&#32622;&#12290;
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1436169438422" FOLDED="true" ID="ID_297200867" MODIFIED="1486606936994" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      android-media-router&#36335;&#30001;&#26694;&#26550;&#24320;&#21457;
    </p>
    <p>
      android&#23186;&#20307;&#36335;&#30001;&#25509;&#21475;&#34987;&#35774;&#35745;&#25104;&#21487;&#22312;&#20108;&#32423;&#35774;&#22791;&#19978;
    </p>
    <p>
      &#21576;&#29616;&#21644;&#25773;&#25918;&#23186;&#20307;&#20449;&#24687;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1436169636732" ID="ID_780405438" MODIFIED="1482999415036">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">1.&#27010;&#36848; </font>
    </p>
    <p>
      <font size="12px" color="rgb(102, 102, 102)" face="Times New Roman">&#37027;&#20123;&#19981;&#25903;&#25345;&#23186;&#20307;&#36335;&#30001;&#26694;&#26550;&#30340;&#23186;&#20307;&#25773;&#25918;&#22120;&#30828;&#20214;&#21046;&#36896;&#21830;&#21487;&#20197;&#20026;&#20182;&#20204;&#30340;&#30828;&#20214;&#21152;&#28155;&#25903;&#25345;&#21253;&#65292;&#36890;&#36807;&#23454;&#29616;MediaRouterProvider&#23545;&#35937;&#19988;&#20316;&#20026;&#19968;&#20010;&#24212;&#29992;&#31243;&#24207;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1436169816045" ID="ID_1622082883" MODIFIED="1436170368863">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3"><b>2.&#28155;&#21152;&#25353;&#38062;&#21040;&#29992;&#25143;&#30028;&#38754;&#24182;&#19988;&#32465;&#23450;&#19978;&#36335;&#30001;&#36873;&#25321;&#22120;&#23545;&#35937;</b></font>
    </p>
    <p>
      <b><font face="Times New Roman" color="rgb(102, 102, 102)" size="3">&#24517;&#39035;&#36890;&#36807;setRouteSelector&#65288;&#65289;&#26041;&#27861;&#20851;&#32852;&#19968;&#20010;&#23186;&#20307;&#36335;&#30001;&#36873;&#25321;&#22120;&#21040;&#36825;&#20010;&#25353;&#38062; </font></b>
    </p>
    <p>
      <font face="Times New Roman" color="rgb(102, 102, 102)" size="3"><b>&#21576;&#29616;&#30340;&#23186;&#20307;&#36335;&#30001;&#31867;&#22411;-------&#22914;&#36828;&#31243;&#25773;&#25918;&#12289;&#20108;&#32423;&#36755;&#20986;&#25110;&#32773;&#20854;&#20182;&#65292;&#22312;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#34987;&#23450;&#20041;&#20986;&#26469;&#12290;&#36890;&#36807;&#21019;&#24314;&#19968;&#20010;MediaRouteSelector&#23545;&#35937;&#26469;&#23450;&#20041;&#36825;&#20123;&#31867;&#22411;&#65292;&#35813;&#23545;&#35937;&#35201;&#25509;&#21463;&#26469;&#33258;&#26694;&#26550;&#25110;&#20854;&#20320;&#33258;&#24049;&#25110;&#20182;&#24320;&#21457;&#32773;&#21019;&#24314;&#30340;&#20182;&#23186;&#20307;&#36335;&#30001;&#25552;&#20379;&#30340;MediaControlIntent&#23545;&#35937;&#12290; </b></font>
    </p>
    <p>
      <font face="Times New Roman" color="#ff3333">MediaRouteSelector&#23545;&#35937;&#26102;&#65292;&#21487;&#20351;&#29992;MediaRouteSelector.Builder&#31867;&#26469;&#21019;&#24314;&#23545;&#35937;&#21644;&#35774;&#32622;&#23186;&#20307;&#25773;&#25918;&#31867;&#21035;&#65288;&#25511;&#21046;&#31867;&#21035;</font><font face="Times New Roman" color="rgb(102, 102, 102)">&#65289;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1436170386691" ID="ID_1935213365" MODIFIED="1436170413845">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#19968;&#26086;&#20320;&#23450;&#20041;&#20102;&#36825;&#20010;&#36873;&#25321;&#22120;&#65292;&#24517;&#39035;&#25226;&#23427;&#20851;&#32852;&#21040;&#19982;&#33756;&#21333;&#26639;&#30456;&#20851;&#30340;MediaRouteActionProvider&#23545;&#35937;
    </p>
    <p>
      <span style="text-indent: 0px; font-size: 12px; font-style: normal; white-space: normal; letter-spacing: normal; display: inline !important; color: rgb(0, 0, 0); word-spacing: 0px; line-height: 18px; font-family: Consolas, Courier New, Courier, mono, serif; float: none; font-variant: normal; text-align: left; background-color: rgb(255, 255, 255); text-transform: none; font-weight: normal"><font face="Consolas, Courier New, Courier, mono, serif" color="rgb(0, 0, 0)" size="12px">mediaRouteActionProvider.setRouteSelector(mSelector);</font></span>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1436170570183" ID="ID_90943928" MODIFIED="1436170604909">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3"><b>4 </b></font>
    </p>
    <div style="text-indent: 0px; font-size: 13px; font-style: normal; white-space: normal; letter-spacing: normal; color: rgb(102, 102, 102); word-spacing: 0px; line-height: 19.5px; font-family: SimSun, &#x5b8b;&#x4f53;, Arial Narrow; font-variant: normal; text-align: start; background-color: rgb(255, 255, 255); text-transform: none; font-weight: normal">
      <b><font size="3" face="Times New Roman">&#20026;&#20102;&#36830;&#25509;&#21040;&#19968;&#20010;&#29992;&#25143;&#36873;&#25321;&#30340;&#23186;&#20307;&#36335;&#30001;&#65292;&#20320;&#30340;app&#24517;&#39035;&#21253;&#21547;MediaRouter&#26694;&#26550;&#23545;&#35937;&#65292;&#28982;&#21518;&#38468;&#21152;&#19968;&#20010;MediaRouter.Callbak&#23545;&#35937;&#12290;&#24403;&#19968;&#20010;&#36335;&#30001;&#34987;&#29992;&#25143;&#36873;&#25321;&#65292;&#25913;&#21464;&#25110;&#32773;&#26029;&#24320;&#20043;&#21518;&#65292;&#36825;&#20010;&#22238;&#35843;&#23545;&#35937;&#25509;&#21463;&#26469;&#33258;&#23186;&#20307;&#36335;&#30001;&#26694;&#26550;&#30340;&#28040;&#24687;&#12290;</font></b>
    </div>
    <div style="text-indent: 0px; font-size: 13px; font-style: normal; white-space: normal; letter-spacing: normal; color: rgb(102, 102, 102); word-spacing: 0px; line-height: 19.5px; font-family: SimSun, &#x5b8b;&#x4f53;, Arial Narrow; font-variant: normal; text-align: start; background-color: rgb(255, 255, 255); text-transform: none; font-weight: normal">
      <font size="3" face="Times New Roman"><b>&#20026;&#20102;&#33719;&#24471;&#19968;&#20010;MediaRouter&#26694;&#26550;&#23545;&#35937;&#23454;&#20363;&#65292;&#21487;&#20197;&#22312;&#19968;&#20010;&#25903;&#25345;&#23186;&#20307;&#36335;&#30001;&#24212;&#29992;&#31243;&#24207;&#25509;&#21475;&#30340;&#27963;&#21160;&#39029;&#38754;&#30340;onCreate()&#26041;&#27861;&#20013;&#35843;&#29992;MediaRouter.getInstance()&#26041;&#27861;&#12290;</b></font>
    </div>
  </body>
</html></richcontent>
</node>
<node CREATED="1436170696556" ID="ID_1517000933" MODIFIED="1436170903887">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">5.</font><font face="Times New Roman" color="rgb(102, 102, 102)" size="3">&#23186;&#20307;&#36335;&#30001;&#26694;&#26550;&#36890;&#36807;&#20320;&#20851;&#32852;&#21040;MediaRouter&#26694;&#26550;&#23454;&#20307;&#30340;&#22238;&#35843;&#23545;&#35937;&#19982;&#19968;&#20010;app&#36890;&#20449;&#12290; </font>
    </p>
    <p>
      <font face="Times New Roman" color="rgb(102, 102, 102)" size="3">&#20351;&#29992;&#23186;&#20307;&#36335;&#30001;&#26694;&#26550;&#30340;&#30340;&#19968;&#20010;app&#24517;&#39035;&#32487;&#25215;MediaRouter.Callback&#23545;&#35937;&#26469; </font>
    </p>
    <p>
      <font face="Times New Roman" color="rgb(102, 102, 102)" size="3">&#25509;&#25910;&#24403;</font><font face="Times New Roman" color="#ff3366" size="3">&#23186;&#20307;&#36335;&#30001;&#36830;&#25509;&#26102;&#30340;&#28040;&#24687;&#21644;&#36890;&#36807;&#36825;&#20010;&#36335;&#30001;&#22120;&#25552;&#20379;&#20869;&#23481;&#21040;&#36830;&#25509;&#22909;&#30340;&#35774;&#22791;</font><font face="Times New Roman" color="rgb(102, 102, 102)" size="3">&#12290; </font>
    </p>
    <p>
      <span style="text-indent: 0px; font-size: 12px; font-style: normal; white-space: normal; letter-spacing: normal; display: inline !important; color: rgb(102, 102, 102); word-spacing: 0px; line-height: 19.5px; font-family: Times New Roman; float: none; font-variant: normal; text-align: start; background-color: rgb(255, 255, 255); text-transform: none; font-weight: normal"><font face="Times New Roman" color="rgb(102, 102, 102)" size="12px">&#23450;&#20041;&#22909;&#20320;&#30340;&#23186;&#20307;&#36335;&#30001;&#22238;&#35843;&#23545;&#35937;&#20043;&#21518;&#65292;&#20320;&#36824;&#38656;&#35201;&#25226;&#23427;&#20851;&#32852;&#21040;&#20027;&#23186;&#20307;&#36335;&#30001;&#26694;&#26550;&#23545;&#35937;&#19978;</font></span>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1436171030058" ID="ID_831054012" MODIFIED="1436171035267" TEXT="6.&#x65e2;&#x7136;&#x5a92;&#x4f53;&#x8def;&#x7531;&#x662f;&#x4e00;&#x4e2a;&#x5206;&#x4eab;&#x63a5;&#x53e3;&#xff0c;&#x4f60;&#x7684;app&#x5fc5;&#x987b;&#x5173;&#x8054;&#x548c;&#x5206;&#x79bb;&#x4f60;&#x7684;MediaRouter.Callback&#x5bf9;&#x8c61;&#x5206;&#x522b;&#x5728;&#x4f60;&#x7684;app&#x5f00;&#x542f;&#x548c;&#x5173;&#x95ed;&#x65f6;&#x3002;"/>
<node CREATED="1436171359657" ID="ID_49878218" MODIFIED="1436171421901">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">7.</font><font face="Times New Roman" color="rgb(34, 34, 34)" size="3">&#36828;&#31243;&#25773;&#25918;&#26041;&#27861;&#21457;&#36865;&#25511;&#21046;&#21629;&#20196;&#21040;&#20108;&#32423;&#35774;&#22791;&#19978;&#26469;&#21021;&#22987;&#21270;&#25773;&#25918;&#25110;&#32773;&#25511;&#21046;&#27491;&#22312;&#36827;&#34892;&#30340; </font>
    </p>
    <p>
      <font face="Times New Roman" color="rgb(34, 34, 34)" size="3">&#25773;&#25918;&#65288;&#26242;&#20572;&#12289;&#20498;&#22238;&#12289;&#24555;&#36827;&#12289;&#38899;&#37327;&#39640;&#20302;&#65289; </font>
    </p>
    <p>
      <font face="Times New Roman" color="rgb(34, 34, 34)" size="3">&#24517;&#39035;&#20351;&#29992;&#36890;&#36807;MediaRouter.Callback&#23545;&#35937;&#25509;&#25910;&#21040;&#30340;&#19968;&#20010;&#36828;&#31243;&#25773;&#25918;MediaRouter.RouteInfo&#23545;&#35937;&#26469;&#21019;&#24314;&#19968;&#20010;RemotePlaybackClient&#23545;&#35937;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1436326189372" ID="ID_1852108560" MODIFIED="1490347205213" POSITION="left" TEXT="android&#x5f00;&#x53d1;&#x57fa;&#x7840;&#x77e5;&#x8bc6;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1436326201826" ID="ID_1908228595" MODIFIED="1484548753625" TEXT="1.Handler">
<node CREATED="1436326296329" ID="ID_1831777531" MODIFIED="1436326347761">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#19968;&#20010;</font><font size="3" color="rgb(0, 0, 0)" face="monospace">Handler</font><font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#20801;&#35768;&#20320;&#21457;&#36865;&#21644;&#22788;&#29702;&#28040;&#24687;&#65288;</font><font size="3" color="rgb(0, 0, 0)" face="monospace">Message</font><font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#65289;&#20197;&#21450;&#19982;&#19968;&#20010;&#32447;&#31243;&#30340; </font>
    </p>
    <p>
      <font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#28040;&#24687;&#38431;&#21015;&#30456;&#20851;&#30340;</font><font size="3" color="rgb(0, 0, 0)" face="monospace">Runnable</font><font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#23545;&#35937;&#12290; </font>
    </p>
    <p>
      <font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#24403;&#20320;&#21019;&#24314;&#20102;&#19968;&#20010;&#26032;</font><font size="3" color="rgb(0, 0, 0)" face="monospace">Handler</font><font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#65292;&#23427;&#23601;&#20250;&#21644;&#21019;&#24314;&#23427;&#30340;&#32447;&#31243;</font><font size="3" color="rgb(0, 0, 0)" face="monospace">/</font><font size="3" color="rgb(0, 0, 0)" face="&#x5b8b;&#x4f53;">&#28040;&#24687;&#38431;&#21015;&#32465;&#23450;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1436326366511" ID="ID_244840477" MODIFIED="1436326394160">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p style="font-weight: normal; text-transform: none; margin-right: 0cm; font-variant: normal; margin-left: 0cm; text-align: left; font-family: Arial; padding-right: 0px; color: rgb(0, 0, 0); line-height: 26px; margin-top: 0cm; font-size: 14px; background-color: rgb(255, 255, 255); text-indent: 0px; word-spacing: 0px; white-space: normal; padding-left: 0px; padding-top: 0px; padding-bottom: 0px; margin-bottom: 0pt; letter-spacing: normal; font-style: normal" class="a">
      <font size="3" face="&#x5b8b;&#x4f53;"><strong><span style="font-family: &#x5b8b;&#x4f53;" lang="HI">&#38656;&#35201;&#20351;&#29992;</span></strong></font><strong><font size="3" face="monospace"><span style="font-family: monospace" lang="EN-US">Handler</span></font><font size="3" face="&#x5b8b;&#x4f53;"><span style="font-family: &#x5b8b;&#x4f53;" lang="HI">&#26377;&#20004;&#22823;&#20027;&#35201;&#30340;&#21407;&#22240;&#65306;</span></font></strong>
    </p>
    <p style="font-weight: normal; text-transform: none; margin-right: 0cm; font-variant: normal; margin-left: 0cm; text-align: left; font-family: Arial; padding-right: 0px; color: rgb(0, 0, 0); line-height: 26px; margin-top: 0cm; font-size: 14px; background-color: rgb(255, 255, 255); text-indent: 0px; word-spacing: 0px; white-space: normal; padding-left: 0px; padding-top: 0px; padding-bottom: 0px; margin-bottom: 0pt; letter-spacing: normal; font-style: normal" class="a">
      <font size="3" face="&#x5b8b;&#x4f53;"><span style="font-family: &#x5b8b;&#x4f53;" lang="HI">&#65288;</span></font><font size="3" face="monospace"><span style="font-family: monospace" lang="EN-US">1</span></font><font size="3" face="&#x5b8b;&#x4f53;"><span style="font-family: &#x5b8b;&#x4f53;" lang="HI">&#65289;&#22312;&#23558;&#26469;&#30340;&#26576;&#20010;&#26102;&#38388;&#28857;&#35843;&#24230;&#22788;&#29702;&#28040;&#24687;&#21644;</span></font><font size="3" face="monospace"><span style="font-family: monospace" lang="EN-US">runnable</span></font><font size="3" face="&#x5b8b;&#x4f53;"><span style="font-family: &#x5b8b;&#x4f53;" lang="HI">&#23545;&#35937;&#65307;</span></font>
    </p>
    <p style="font-weight: normal; text-transform: none; margin-right: 0cm; font-variant: normal; margin-left: 0cm; text-align: left; font-family: Arial; padding-right: 0px; color: rgb(0, 0, 0); line-height: 26px; margin-top: 0cm; font-size: 14px; background-color: rgb(255, 255, 255); text-indent: 0px; word-spacing: 0px; white-space: normal; padding-left: 0px; padding-top: 0px; padding-bottom: 0px; margin-bottom: 0pt; letter-spacing: normal; font-style: normal" class="a">
      <font size="3" face="&#x5b8b;&#x4f53;"><span style="font-family: &#x5b8b;&#x4f53;" lang="HI">&#65288;</span></font><font size="3" face="monospace"><span style="font-family: monospace" lang="EN-US">2</span></font><font size="3" face="&#x5b8b;&#x4f53;"><span style="font-family: &#x5b8b;&#x4f53;" lang="HI">&#65289;&#23558;&#38656;&#35201;&#25191;&#34892;&#30340;&#25805;&#20316;&#25918;&#21040;&#20854;&#20182;&#32447;&#31243;&#20043;&#20013;&#65292;&#32780;&#19981;&#26159;&#33258;&#24049;&#30340;&#65307;</span></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1436326421721" ID="ID_512527737" MODIFIED="1436326447911">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3" color="#ff6600" face="monospace">Handler</font><font size="3" color="#ff6600" face="&#x5b8b;&#x4f53;">&#22312;&#23454;&#38469;&#24320;&#21457;&#20013;&#26159;&#24456;&#24120;&#29992;&#30340;&#65292; </font>
    </p>
    <p>
      <font size="3" color="#ff6600" face="&#x5b8b;&#x4f53;">&#20027;&#35201;&#26159;&#29992;&#26469;&#25509;&#25910;&#23376;&#32447;&#31243;&#21457;&#36865;&#30340;&#25968;&#25454;&#65292; </font>
    </p>
    <p>
      <font size="3" color="#ff6600" face="&#x5b8b;&#x4f53;">&#28982;&#21518;&#20027;&#32447;&#31243;&#32467;&#21512;&#27492;&#25968;&#25454;&#26469;&#26356;&#26032;&#30028;&#38754;</font><font size="3" color="#ff6600" face="monospace">UI</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1470710623566" ID="ID_1118439170" MODIFIED="1491356924602" POSITION="right" TEXT="Linux&#x84dd;&#x7259;&#x9a71;&#x52a8;&#x548c;bluez&#x4f7f;&#x7528;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1470710686973" FOLDED="true" ID="ID_1378656370" MODIFIED="1488694918468">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#25968;&#25454;&#22312;&#21508;&#20010;&#23618;&#20043;&#38388;&#30340;&#27969;&#21160;
    </p>
    <p>
      HCI &lt;-------&gt; BCSP &lt;---------&gt;HCI_UART&lt;-------&gt;UART
    </p>
  </body>
</html></richcontent>
<node CREATED="1470711367958" FOLDED="true" ID="ID_65627731" MODIFIED="1488694914603">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.HCI_UART&#23618;&#30340;&#21152;&#20837;drivers/bluetooth/hci_ldisc.c
    </p>
    <p>
      static int __init hci_uart_init(void)&#20989;&#25968;&#35843;&#29992;&#20989;&#25968;tty_register_ldisc&#21521;tty&#23618;&#27880;&#20876;
    </p>
    <p>
      &#20102;&#19968;&#20010;&#26032;&#30340;&#32447;&#36335;&#35268;&#31243;static struct tty_ldisc_ops hci_uart_ldisc
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992;bcsp_init()&#20989;&#25968;&#27880;&#20876;bcsp&#21327;&#35758;
    </p>
  </body>
</html></richcontent>
<node CREATED="1470713791512" ID="ID_1817323073" MODIFIED="1470713798158">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/bcsp.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1470713867656" FOLDED="true" ID="ID_416731030" MODIFIED="1488694910163">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#20876;&#26032;&#30340;&#32447;&#36335;&#35268;&#31243;&#30340;&#26102;&#20505;&#65292;&#20854;&#23454;&#26159;&#23558;&#26032;&#30340;&#32447;&#36335;&#35268;&#31243;&#25918;&#21040;&#20102;&#19968;&#20010;&#20840;&#23616;&#30340;&#25968;&#25454;tty_ldiscs&#24403;&#20013;&#20102;
    </p>
    <p>
      tty_register_ldisc(N_HCI, &amp;hci_uart_ldisc);
    </p>
    <p>
      &#27880;&#20876;&#20102;ID&#26159;N_HCI&#30340;&#32447;&#36335;&#35268;&#31243;
    </p>
    <p>
      &#35813;&#32447;&#36335;&#35268;&#31243;&#20250;&#22312;&#29992;&#25143;&#31354;&#38388;&#34987;&#29992;&#25143;&#35774;&#32622;&#20026;&#40664;&#35748;&#30340;&#32447;&#36335;&#35268;&#31243;
    </p>
    <p>
      int i = N_HCI;
    </p>
    <p>
      ioctl(uart_fd, TIOCSETD, &amp;i)
    </p>
  </body>
</html></richcontent>
<node CREATED="1470729526998" ID="ID_1037676945" MODIFIED="1471942299003">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#20876;&#20102;&#26032;&#30340;&#32447;&#36335;&#35268;&#31243;&#20043;&#21518;&#65292;&#23545;&#24212;&#30340;&#35268;&#31243;&#30340;ops&#20013;&#30340;ioctl
    </p>
    <p>
      &#20250;&#34987;&#19978;&#23618;&#24212;&#29992;&#35843;&#29992;&#21040;
    </p>
    <p>
      static struct tty_ldisc_ops hci_uart_ldisc;
    </p>
    <p>
      hci_uart_ldisc.ioctl&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= hci_uart_tty_ioctl
    </p>
    <p>
      &#24403;&#19978;&#23618;&#24212;&#29992;&#20256;&#20837;&#30340;&#21629;&#20196;&#26159;HCIUARTSETPROTO&#30340;&#26102;&#20505;&#65292;&#20250;&#35843;&#29992;
    </p>
    <p>
      hci_uart_set_proto(hu, arg)&#20989;&#25968;-----&gt;&#27880;&#20876;hci_dev
    </p>
    <p>
      <b>int hci_register_dev(struct hci_dev *hdev) </b>
    </p>
    <p>
      &#22312;&#35813;&#20989;&#25968;&#24403;&#20013;&#20250;&#27880;&#20876;hci&#35774;&#22791;&#65292;&#20998;&#37197;hci&#35774;&#22791;&#30340;id,&#21021;&#22987;&#21270;workqueue&#21644;req_workqueue
    </p>
    <p>
      &#36825;&#20004;&#20010;&#24037;&#20316;&#38431;&#21015;&#25351;&#38024;&#65292;&#27880;&#20876;&#20102;rfkill
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1470732231154" ID="ID_104448579" MODIFIED="1471935074363">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct tty_struct
    </p>
    <p>
      struct hci_uart
    </p>
    <p>
      struct hci_dev
    </p>
    <p>
      <b><i>&#36890;&#36807;&#27880;&#20876;hci_dev&#65292;&#23601;&#30456;&#24403;&#20110;&#23558;hci&#23618;&#21152;&#20837;&#36827;&#26469;&#20102;</i></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1470713977280" ID="ID_166465272" MODIFIED="1470719639859">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28155;&#21152;&#26032;&#30340;&#21327;&#35758;&#26080;&#38750;&#23601;&#26159;&#22312;&#19968;&#20010;&#21327;&#35758;&#25968;&#32452;&#24403;&#20013;&#28155;&#21152;&#20102;&#19968;&#20010;&#20803;&#32032;&#32780;&#24050;
    </p>
    <p>
      static const struct hci_uart_proto *hup[HCI_UART_MAX_PROTO];
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1470725962971" ID="ID_1193357865" MODIFIED="1470725979538" TEXT="&#x6dfb;&#x52a0;uart H4&#x534f;&#x8bae;"/>
</node>
<node CREATED="1470726118756" FOLDED="true" ID="ID_49373898" MODIFIED="1488694904269">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.uart driver&#27880;&#20876;
    </p>
    <p>
      &#160;static int __init serial8250_init(void)
    </p>
  </body>
</html></richcontent>
<node CREATED="1470900086785" FOLDED="true" ID="ID_1645616441" MODIFIED="1488694899131">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.int serial8250_pnp_init(void)&#27880;&#20876;pnp_driver:
    </p>
    <p>
      &#160;&#160; <font color="#ec0202">serial_pnp_driver</font>
    </p>
    <p>
      &#27599;&#24403;&#26377;&#26032;&#30340;pnp_device&#27880;&#20876;&#21040;&#31995;&#32479;&#24403;&#20013;&#30340;&#26102;&#20505;&#65292;
    </p>
    <p>
      &#23601;&#20250;&#29983;&#25104;&#19968;&#20010;&#26032;&#30340;uart_8250_port&#65292;
    </p>
    <p>
      &#35813;port&#20250;&#34987;&#25918;&#32622;&#21040;&#19968;&#20010;&#20840;&#23616;&#25968;&#32452;serial8250_ports[]
    </p>
    <p>
      &#24403;&#20013;&#65292;&#21487;&#20197;&#21442;&#30475;&#30011;&#30340;&#22270;
    </p>
  </body>
</html></richcontent>
<node CREATED="1470909168041" ID="ID_1518727172" MODIFIED="1482991554090">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#20989;&#25968;serial8250_isa_init_ports&#24403;&#20013;
    </p>
    <p>
      &#35774;&#32622;serial8250_ports[i]-&gt;ops = &amp;univ8250_driver_ops
    </p>
    <p>
      univ8250_driver_ops.setup_irq&#20013;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      serial_link_irq_chain(up)&#35774;&#32622;&#27599;&#20010;uart_port&#30340;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;
    </p>
    <p>
      serial8250_interrupt
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#0d1e90" DESTINATION="ID_1518727172" ENDARROW="Default" ENDINCLINATION="462;0;" ID="Arrow_ID_30914952" SOURCE="ID_1843496547" STARTARROW="None" STARTINCLINATION="110;-44;"/>
</node>
</node>
<node CREATED="1470984593266" FOLDED="true" ID="ID_1136518736" MODIFIED="1488694897820">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.serial8250_isa_init_ports
    </p>
    <p>
      &#35813;&#20989;&#25968;&#20250;&#21021;&#22987;&#21270;serial8250_ports&#25968;&#32452;&#24403;&#20013;
    </p>
    <p>
      &#30340;uart_port&#20013;&#30340;ops&#20026;<b><i>serial8250_pops</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1472017907395" FOLDED="true" ID="ID_421280983" MODIFIED="1488694896212">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static const struct uart_ops serial8250_pops = {
    </p>
    <p>
      .tx_empty&#160;&#160;&#160;= serial8250_tx_empty,
    </p>
    <p>
      .set_mctrl&#160;&#160;= serial8250_set_mctrl,
    </p>
    <p>
      .get_mctrl&#160;&#160;= serial8250_get_mctrl,
    </p>
    <p>
      .stop_tx&#160;&#160;&#160;&#160;= serial8250_stop_tx,
    </p>
    <p>
      .start_tx&#160;&#160;&#160;= serial8250_start_tx,
    </p>
    <p>
      .throttle&#160;&#160;&#160;= serial8250_throttle,
    </p>
    <p>
      &#160;.unthrottle = serial8250_unthrottle,
    </p>
    <p>
      &#160;.stop_rx&#160;&#160;&#160;&#160;= serial8250_stop_rx,
    </p>
    <p>
      &#160;.enable_ms&#160;&#160;= serial8250_enable_ms,
    </p>
    <p>
      &#160;.break_ctl&#160;&#160;= serial8250_break_ctl,
    </p>
    <p>
      .startup&#160;&#160;&#160;&#160;= serial8250_startup,
    </p>
    <p>
      .shutdown&#160;&#160;&#160;= serial8250_shutdown,
    </p>
    <p>
      .set_termios&#160;&#160;&#160;&#160;= serial8250_set_termios,
    </p>
    <p>
      .set_ldisc&#160;&#160;= serial8250_set_ldisc,
    </p>
    <p>
      .pm&#160;&#160;&#160;&#160;&#160;= serial8250_pm,
    </p>
    <p>
      .type&#160;&#160;&#160;&#160;&#160;&#160;&#160;= serial8250_type,
    </p>
    <p>
      .release_port&#160;&#160;&#160;= serial8250_release_port,
    </p>
    <p>
      .request_port&#160;&#160;&#160;= serial8250_request_port,
    </p>
    <p>
      .config_port&#160;&#160;&#160;&#160;= serial8250_config_port,
    </p>
    <p>
      .verify_port&#160;&#160;&#160;&#160;= serial8250_verify_port,
    </p>
    <p>
      &#160;.poll_get_char = serial8250_get_poll_char,
    </p>
    <p>
      &#160;.poll_put_char = serial8250_put_poll_char,
    </p>
  </body>
</html></richcontent>
<node CREATED="1472031335994" ID="ID_1843496547" MODIFIED="1484813057259">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;uart_port-&gt;ops&#30340;startup&#20989;&#25968;&#24403;&#20013;&#20250;&#20248;&#20808;&#35843;&#29992;uart_port-&gt;start_up&#20989;&#25968;&#65292;
    </p>
    <p>
      &#27425;&#20248;&#20808;&#20250;&#35843;&#29992;serial8250_do_startup&#20989;&#25968;----&#12299;
    </p>
    <p>
      &#22312;serial8250_do_startup&#20013;&#39318;&#20808;&#20250;&#21028;&#26029;uart_port&#21644;&#20854;&#25152;&#22312;&#30340;uart_8250_port
    </p>
    <p>
      &#30340;iotype&#26159;&#21542;&#30456;&#21516;&#65292;&#33509;&#26159;&#19981;&#30456;&#21516;&#65292;&#21017;&#36890;&#36807;set_io_from_upio(port)&#20989;&#25968;&#35774;&#32622;uart_port
    </p>
    <p>
      &#30340;handle_irq&#20989;&#25968;
    </p>
    <p>
      &#36890;&#36807;uart_port&#26144;&#23556;&#21040;struct uart_8250_port
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992;&#20102;<b>uart_8250_port-&gt;ops.setup_irq(up)</b>&#20989;&#25968;&#29992;&#20110;&#35774;&#32622;uart_port&#30340;
    </p>
    <p>
      &#20013;&#26029;&#22788;&#29702;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<arrowlink COLOR="#0d1e90" DESTINATION="ID_1518727172" ENDARROW="Default" ENDINCLINATION="462;0;" ID="Arrow_ID_30914952" STARTARROW="None" STARTINCLINATION="110;-44;"/>
<node CREATED="1472103741854" ID="ID_381281961" MODIFIED="1472104050304">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      uart&#30340;&#20013;&#26029;&#20989;&#25968;&#25509;&#25910;&#21040;&#25968;&#25454;&#20043;&#21518;&#65292;&#20250;&#36890;&#36807;
    </p>
    <p>
      tty&#23618;&#25509;&#21475;&#23558;&#25968;&#25454;&#20256;&#36882;&#32473;tty&#23618;&#65292;&#28982;&#21518;tty&#23618;&#20250;&#25226;&#25968;&#25454;
    </p>
    <p>
      &#20132;&#32473;ldisc&#23618;<b>hci_uart_tty_receive</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1474128013979" ID="ID_1820128502" MODIFIED="1482993008051">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21516;&#26102;&#20250;&#23558;old_serial_port&#25968;&#32452;&#24403;&#20013;
    </p>
    <p>
      &#23450;&#20041;&#30340;uart_port&#30340;&#20018;&#21475;&#21442;&#25968;&#36171;&#20540;&#32473;&#23545;&#24212;&#30340;
    </p>
    <p>
      uart_8250_port-&gt;port,
    </p>
    <p>
      &#28982;&#21518;&#26816;&#26597;<font color="#ea0909">serial8250_isa_config</font>&#25351;&#38024;&#26377;&#27809;&#26377;&#34987;&#36171;&#20540;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#34987;&#36171;&#20540;&#20102;&#65292;&#23601;&#23545;&#19978;&#38754;&#30340;port&#36827;&#34892;&#25805;&#20316;(&#21487;&#33021;&#26159;&#20026;&#20102;
    </p>
    <p>
      &#20462;&#22797;&#26576;&#20123;&#24179;&#21488;&#19979;&#38754;&#30340;&#20018;&#21475;&#21442;&#25968;)
    </p>
    <p>
      serial8250_isa_config&#20250;&#22312;&#20855;&#20307;&#30340;soc&#30340;&#24179;&#21488;&#20195;&#30721;&#24403;&#20013;
    </p>
    <p>
      &#34987;&#36171;&#20540;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472007183504" FOLDED="true" ID="ID_1551873706" MODIFIED="1488694891915">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#35843;&#29992;int uart_register_driver(struct uart_driver *drv)&#20989;&#25968;&#36890;&#36807;&#19968;&#20010;uart_driver
    </p>
    <p>
      &#29983;&#25104;tty_driver,&#24182;&#19988;&#26681;&#25454;uart_driver&#37324;&#38754;&#30340;nr&#21442;&#25968;&#29983;&#25104;tty_driver&#37324;&#38754;&#30340;tty_struct&#21644;
    </p>
    <p>
      tty_port&#25968;&#32452;&#25351;&#38024;,
    </p>
    <p>
      &#24182;&#35774;&#32622;tty_driver&#37324;&#38754;&#30340;ops&#21442;&#25968;&#20026;uart_ops;
    </p>
    <p>
      drv-&gt;state = kzalloc(sizeof(struct uart_state) * drv-&gt;nr, GFP_KERNEL)&#20998;&#37197;tty_driver
    </p>
    <p>
      &#37324;&#38754;&#30340;state&#25968;&#32452;&#65292;<b>state&#25351;&#38024;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#19968;&#20010;&#25104;&#21592;&#21464;&#37327; </b>
    </p>
    <p>
      <i><font color="#104b32">for (i = 0; i &lt; drv-&gt;nr; i++) { </font></i>
    </p>
    <p>
      <i><font color="#104b32">struct uart_state *state = drv-&gt;state + i; </font></i>
    </p>
    <p>
      <i><font color="#104b32">struct tty_port *port = &amp;state-&gt;port; </font></i>
    </p>
    <p>
      <i><font color="#104b32">tty_port_init(port); </font></i>
    </p>
    <p>
      <i><font color="#104b32">port-&gt;ops = &amp;uart_port_ops; </font></i>
    </p>
    <p>
      <i><font color="#104b32">}</font></i>
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      <font color="#e50e0e">&#26368;&#21518;&#35843;&#29992;&#20989;&#25968;tty_register_driver&#27880;&#20876;tty_driver</font>
    </p>
    <p>
      <b><i>tty_driver&#37324;&#38754;&#30340;ops&#20013;&#30340;uart_open&#20989;&#25968;&#30001;tty_open&#20989;&#25968;tty-&gt;ops-&gt;open </i></b>
    </p>
    <p>
      <b><i>&#35843;&#29992;&#36827;&#26469;</i></b>
    </p>
  </body>
</html></richcontent>
<arrowlink COLOR="#d80606" DESTINATION="ID_1579064263" ENDARROW="Default" ENDINCLINATION="325;0;" ID="Arrow_ID_1375331762" STARTARROW="None" STARTINCLINATION="734;0;"/>
<node CREATED="1476436212960" ID="ID_19511930" MODIFIED="1484815918059">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20998;&#26512;&#19968;&#19979;static int uart_open(struct tty_struct *tty, struct file *filp)&#20989;&#25968;</b>
    </p>
    <p>
      uart_open&#26159;&#34987;&#23553;&#35013;&#21040;static const struct tty_operations uart_ops&#32467;&#26500;&#20307;&#24403;&#20013;&#30340;&#65292;&#22312;&#20855;&#20307;&#30340;
    </p>
    <p>
      &#20018;&#21475;&#39537;&#21160;&#24403;&#20013;&#25105;&#20204;&#21487;&#20197;&#23450;&#20041;&#33258;&#24049;&#30340;uart_ops-&gt;open&#20989;&#25968;&#65292;&#36825;&#37324;&#20998;&#26512;&#30340;uart_open&#20989;&#25968;&#20301;&#20110;
    </p>
    <p>
      &#25991;&#20214; tty/serial/serial_core.c&#24403;&#20013;
    </p>
    <p>
      uart_open&#20250;&#36890;&#36807;<b>state&#25351;&#38024;</b>&#35843;&#29992;&#21040;uart_port&#65292;&#20174;&#32780;&#30495;&#27491;&#21551;&#21160;&#30828;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1482991816443" FOLDED="true" ID="ID_1686420308" MODIFIED="1488694885493">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20256;&#36882;&#36827;&#21435;&#30340;uart_driver&#25968;&#25454;&#32467;&#26500;&#25351;&#38024;&#26159;&#22914;&#19979;&#30340;&#32467;&#26500;:
    </p>
    <p>
      <b><i>static struct uart_driver serial8250_reg</i></b>&#160;= {
    </p>
    <p>
      &#160;&#160;&#160;&#160;.owner&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= THIS_MODULE,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.driver_name&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= &quot;serial&quot;,
    </p>
    <p>
      &#160;&#160;&#160; <b><i>.dev_name&#160;&#160;&#160;&#160;&#160;&#160;&#160;= &quot;ttyS&quot;,</i></b>
    </p>
    <p>
      &#160;&#160;&#160;&#160;.major&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= TTY_MAJOR,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.minor&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= 64,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.cons&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= SERIAL8250_CONSOLE,
    </p>
    <p>
      };
    </p>
    <p>
      <b>serial8250_reg.nr = UART_NR</b>
    </p>
    <p>
      &#36825;&#37324;&#23450;&#20041;&#30340;&#26368;&#22823;&#30340;&#31471;&#21475;&#25968;&#30446;&#26159;48
    </p>
  </body>
</html></richcontent>
<node CREATED="1482994566988" ID="ID_1328641476" MODIFIED="1482994822084">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;uart_driver&#32467;&#26500;&#20307;&#24403;&#20013;&#26377;&#19968;&#20010;&#25104;&#21592;&#21464;&#37327;&#21483;&#20570;struct uart_state&#160;&#160;&#160;*state
    </p>
    <p>
      &#38750;&#24120;&#37325;&#35201;&#65292; serial8250_reg&#24403;&#20013;&#30340;state&#25351;&#38024;&#24403;&#20013;&#30340;&#27599;&#20010;&#25104;&#21592;&#20250;&#36890;&#36807;&#20989;&#25968;
    </p>
    <p>
      serial8250_register_ports(&amp;serial8250_reg, &amp;serial8250_isa_devs-&gt;dev)
    </p>
    <p>
      &#26469;&#34987;&#21021;&#22987;&#21270;&#19968;&#27425;&#12290;
    </p>
    <p>
      &#35813;&#20989;&#25968;&#20351;&#29992;&#22914;&#19979;&#26041;&#27861;&#23545;state&#36827;&#34892;&#21021;&#22987;&#21270;
    </p>
    <p>
      struct uart_8250_port *up = &amp;serial8250_ports[i]
    </p>
    <p>
      uart_add_one_port(drv, &amp;up-&gt;port)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1482994825296" ID="ID_1766623573" MODIFIED="1483013906995">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int uart_add_one_port(struct uart_driver *drv, struct uart_port *uport)&#20989;&#25968;&#20998;&#26512;
    </p>
    <p>
      a.
    </p>
    <p>
      state-&gt;uart_port = uport;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      uport-&gt;state = state
    </p>
    <p>
      &#36825;&#37324;&#26159;&#23558;uart_state&#21644;uart_8250_port.port&#32852;&#31995;&#22312;&#20102;&#19968;&#36215;
    </p>
    <p>
      b.
    </p>
    <p>
      &#35843;&#29992;&#20989;&#25968;uart_configure_port(drv, state, uport)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482993532770" ID="ID_662851558" MODIFIED="1482993557639">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="1"><b>static const struct tty_operations uart_ops </b>= { </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.open&#160;&#160;&#160;&#160;&#160;&#160;&#160;= uart_open, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.close&#160;&#160;&#160;&#160;&#160;&#160;= uart_close, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.write&#160;&#160;&#160;&#160;&#160;&#160;= uart_write, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.put_char&#160;&#160;&#160;= uart_put_char, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.flush_chars&#160;&#160;&#160;&#160;= uart_flush_chars, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.write_room = uart_write_room, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.chars_in_buffer= uart_chars_in_buffer, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.flush_buffer&#160;&#160;&#160;= uart_flush_buffer, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.ioctl&#160;&#160;&#160;&#160;&#160;&#160;= uart_ioctl, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.throttle&#160;&#160;&#160;= uart_throttle, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.unthrottle = uart_unthrottle, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.send_xchar = uart_send_xchar, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.set_termios&#160;&#160;&#160;&#160;= uart_set_termios, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.set_ldisc&#160;&#160;= uart_set_ldisc, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.stop&#160;&#160;&#160;&#160;&#160;&#160;&#160;= uart_stop, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.start&#160;&#160;&#160;&#160;&#160;&#160;= uart_start, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.hangup&#160;&#160;&#160;&#160;&#160;= uart_hangup, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.break_ctl&#160;&#160;= uart_break_ctl, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.wait_until_sent= uart_wait_until_sent, </font>
    </p>
    <p>
      <font size="1">#ifdef CONFIG_PROC_FS </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.proc_fops&#160;&#160;= &amp;uart_proc_fops, </font>
    </p>
    <p>
      <font size="1">#endif </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.tiocmget&#160;&#160;&#160;= uart_tiocmget, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.tiocmset&#160;&#160;&#160;= uart_tiocmset, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.get_icount = uart_get_icount, </font>
    </p>
    <p>
      <font size="1">#ifdef CONFIG_CONSOLE_POLL </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.poll_init&#160;&#160;= uart_poll_init, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.poll_get_char&#160;&#160;= uart_poll_get_char, </font>
    </p>
    <p>
      <font size="1">&#160;&#160;&#160;&#160;.poll_put_char&#160;&#160;= uart_poll_put_char, </font>
    </p>
    <p>
      <font size="1">#endif </font>
    </p>
    <p>
      <font size="1">};</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1470990859384" ID="ID_184609849" MODIFIED="1470991053168">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3</b>.<b><i>&#27880;&#20876;&#20102;&#19968;&#20010;platform_driver serial8250_isa_driver</i></b>
    </p>
    <p>
      &#22312;&#35813;driver&#30340;probe&#20989;&#25968;&#24403;&#20013;&#65292;&#36890;&#36807;platform_device-&gt;device
    </p>
    <p>
      &#23384;&#20648;&#30340;platform data&#26469;&#21021;&#22987;&#21270;uart_8250_port&#25968;&#25454;&#65292;
    </p>
    <p>
      &#21516;&#26102;&#23558;&#35813;uart_8250_port&#27880;&#20876;&#21040;&#25968;&#32452;serial8250_ports&#24403;&#20013;&#21435;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472105965697" FOLDED="true" ID="ID_1722919533" MODIFIED="1488694917427" TEXT="H4&#x5c42;&#x7684;&#x63a5;&#x6536;">
<node CREATED="1472105981297" ID="ID_1046019682" MODIFIED="1472106084022">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>h4&#23618;&#21482;&#35782;&#21035;3&#31181;&#24103;&#31867;&#22411;</i></b>
    </p>
    <p>
      static const struct h4_recv_pkt h4_recv_pkts[] = {
    </p>
    <p>
      { H4_RECV_ACL,&#160;&#160;&#160;.recv = hci_recv_frame },
    </p>
    <p>
      { H4_RECV_SCO,&#160;&#160;&#160;.recv = hci_recv_frame },
    </p>
    <p>
      { H4_RECV_EVENT, .recv = hci_recv_frame },
    </p>
    <p>
      &#160;};
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1476410145894" FOLDED="true" ID="ID_1591605326" MODIFIED="1490355591602" TEXT="tty&#x9a71;&#x52a8;&#x5c42;&#x7ed3;&#x6784;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1476413134844" FOLDED="true" ID="ID_1261360145" MODIFIED="1490355589971" TEXT="core&#x5c42;&#x4ee3;&#x7801;&#x5206;&#x6790;">
<node CREATED="1476413149260" ID="ID_1607329353" MODIFIED="1476429807874">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#39318;&#20808;&#30475;&#19968;&#19979;tty_driver&#30340;&#32467;&#26500;&#20307;&#65292;tty_driver&#36890;&#24120;&#26159;&#22312;
    </p>
    <p>
      &#20018;&#21475;&#39537;&#21160;&#31243;&#24207;&#24403;&#20013;&#34987;&#21160;&#24577;&#20998;&#37197;&#30340;&#65292;&#28982;&#21518;&#35843;&#29992;tty&#23618;&#30340;&#25509;&#21475;
    </p>
    <p>
      &#36827;&#34892;&#27880;&#20876;&#12290;
    </p>
    <p>
      <b><i>struct tty_driver { </i></b>
    </p>
    <p>
      <b><i>....... </i></b>
    </p>
    <p>
      <b><i>struct cdev *cdevs; --&gt; &#26681;&#25454;&#32447;&#36335;&#35268;&#31243;&#30340;&#25968;&#37327;&#36827;&#34892;&#20998;&#37197; </i></b>
    </p>
    <p>
      <b><i>....... </i></b>
    </p>
    <p>
      <b><i>unsigned int&#160;&#160;&#160;&#160;num; ---&gt;&#32447;&#36335;&#35268;&#31243;&#25110;&#32773;&#26159;&#35774;&#22791;&#30340;&#25968;&#37327; </i></b>
    </p>
    <p>
      <b><i>....... </i></b>
    </p>
    <p>
      <b><i>struct tty_struct **ttys; </i></b>
    </p>
    <p>
      <b><i>struct tty_port **ports; </i></b>
    </p>
    <p>
      <b><i>struct ktermios **termios; </i></b>
    </p>
    <p>
      <b><i>void *driver_state; </i></b>
    </p>
    <p>
      <b><i>const struct tty_operations *ops; </i></b>
    </p>
    <p>
      <b><i>struct list_head tty_drivers; </i></b>
    </p>
    <p>
      <b><i>}</i></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476413768877" ID="ID_1579064263" MODIFIED="1482993026281">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.&#30475;&#19968;&#19979;&#20989;&#25968; int tty_register_driver(struct tty_driver *driver)</b>
    </p>
    <p>
      a. &#39318;&#20808;&#21160;&#24577;&#25110;&#32773;&#38745;&#24577;&#22320;&#20998;&#37197;dev_t, &#22914;&#26524;&#26159;&#21160;&#24577;&#20998;&#37197;&#30340;&#65292;&#21017;&#23558;driver&#37324;&#38754;&#30340;&#20004;&#20010;
    </p>
    <p>
      &#21442;&#25968;&#36827;&#34892;&#36171;&#20540;&#25805;&#20316;
    </p>
    <p>
      driver-&gt;major = MAJOR(dev);
    </p>
    <p>
      driver-&gt;minor_start = MINOR(dev);
    </p>
    <p>
      b. &#28982;&#21518;&#35813;&#20989;&#25968;&#20250;&#26681;&#25454;driver-&gt;flags&#30340;&#26631;&#24535;&#20301;&#36827;&#34892;&#30456;&#24212;&#30340;&#21160;&#20316;:
    </p>
    <p>
      &#22914;&#26524;&#35774;&#32622;&#20102;<b>TTY_DRIVER_DYNAMIC_ALLOC</b>&#26631;&#24535;&#20301;&#65292;&#37027;&#20040;
    </p>
    <p>
      &#21482;&#20250;&#23545;driver-&gt;cdev[0]&#35774;&#32622;&#23545;&#24212;&#30340;&#23383;&#31526;&#35774;&#22791;&#25805;&#20316;&#20989;&#25968;fops
    </p>
    <p>
      &#19981;&#20250;&#23545;&#20854;&#20182;&#30340;&#32447;&#36335;&#35268;&#31243;&#36827;&#34892;&#30456;&#24212;&#30340;fops&#30340;&#35774;&#32622;&#21644;&#33410;&#28857;&#30340;&#26174;&#31034;,&#19968;&#33324;&#26469;&#35762;
    </p>
    <p>
      &#20018;&#21475;&#39537;&#21160;&#22312;&#20998;&#37197;driver&#30340;&#26102;&#20505;&#26159;&#19981;&#20250;&#35774;&#32622;&#35813;&#26631;&#24535;&#20301;&#30340;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#27809;&#26377;&#35774;&#32622;<b>TTY_DRIVER_DYNAMIC_DEV</b>&#26631;&#24535;&#20301;&#65292;&#21017;&#23545;&#27599;&#19968;&#20010;
    </p>
    <p>
      &#32447;&#36335;&#35268;&#31243;&#35843;&#29992;<font color="#e60808">tty_register_device</font>&#20998;&#37197;struct device&#32467;&#26500;&#20307;&#65292;&#24182;&#19988;&#35774;&#32622;&#23545;&#24212;&#30340;cdev&#30340;fops
    </p>
    <p>
      &#22312;tty_register_device&#20989;&#25968;&#20013;&#35774;&#32622;tty&#30340;&#35774;&#22791;&#30340;&#21517;&#31216;&#65292;&#35813;&#21517;&#31216;&#26159;&#20174;
    </p>
    <p>
      <font color="#ec0b0b">tty_driver&#24403;&#20013;&#33719;&#24471;&#30340;&#65292;&#32780;tty_deriver&#30340;name&#26159;&#20174;uart_driver&#24403;&#20013;&#36171;&#20540;&#32780;&#26469;&#30340;</font>
    </p>
    <p>
      &#19968;&#33324;&#22312;&#20018;&#21475;&#39537;&#21160;&#24403;&#20013;<b>TTY_DRIVER_DYNAMIC_ALLOC&#65292;TTY_DRIVER_DYNAMIC_DEV </b>
    </p>
    <p>
      &#21464;&#37327;&#37117;&#19981;&#20250;&#34987;&#35774;&#32622;&#65292;&#20063;&#23601;&#26159;&#35828;&#20018;&#21475;&#39537;&#21160;&#31243;&#24207;&#22312;&#35843;&#29992;tty_register_driver&#25509;&#21475;
    </p>
    <p>
      &#30340;&#26102;&#20505;&#20250;&#40664;&#35748;&#35201;&#23545;&#25152;&#26377;&#30340;&#32447;&#36335;&#35268;&#31243;&#36827;&#34892;&#20998;&#37197;&#12290;<font color="#e20909">&#21487;&#20197;&#30475;&#20986;&#36825;&#20004;&#20010;&#26631;&#24535;&#20301;&#22312;&#20869;&#26680;&#20013; </font>
    </p>
    <p>
      <font color="#e20909">&#26159;&#20026;&#20102;&#33410;&#30465;&#20869;&#23384;&#32780;&#35774;&#32622;&#30340;&#12290;</font>
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#d80606" DESTINATION="ID_1579064263" ENDARROW="Default" ENDINCLINATION="325;0;" ID="Arrow_ID_1375331762" SOURCE="ID_1551873706" STARTARROW="None" STARTINCLINATION="734;0;"/>
<node CREATED="1476415508655" ID="ID_1113658622" MODIFIED="1484812083233">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#30475;&#19968;&#19979;&#36319;tty&#33410;&#28857;&#25805;&#20316;&#30456;&#20851;&#30340;fops&#30340;&#32467;&#26500;&#20307;</i></b>
    </p>
    <p>
      static const struct file_operations tty_fops = {
    </p>
    <p>
      &#160;&#160;&#160;&#160;.llseek&#160;&#160;&#160;&#160;&#160;= no_llseek,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.read&#160;&#160;&#160;&#160;&#160;&#160;&#160;= tty_read,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.write&#160;&#160;&#160;&#160;&#160;&#160;= tty_write,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.poll&#160;&#160;&#160;&#160;&#160;&#160;&#160;= tty_poll,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.unlocked_ioctl = tty_ioctl,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.compat_ioctl&#160;&#160;&#160;= tty_compat_ioctl,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.open&#160;&#160;&#160;&#160;&#160;&#160;&#160;= tty_open,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.release&#160;&#160;&#160;&#160;= tty_release,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.fasync&#160;&#160;&#160;&#160;&#160;= tty_fasync,
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1476423699133" ID="ID_1295788636" MODIFIED="1476436057900">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20998;&#26512;&#19968;&#19979;tty_open&#36825;&#20010;&#20989;&#25968;:</b>
    </p>
    <p>
      &#35813;&#20989;&#25968;&#39318;&#20808;&#20250;&#36890;&#36807;dev_t device = inode-&gt;i_rdev
    </p>
    <p>
      &#26469;&#21028;&#26029;&#25171;&#24320;&#30340;&#26159;&#19981;&#26159;&#20869;&#26680;&#24050;&#32463;&#23450;&#20041;&#22909;&#30340;&#25511;&#21046;&#32456;&#31471;&#65292;&#22914;&#26524;&#19981;&#26159;&#21017;
    </p>
    <p>
      &#36890;&#36807;<b>get_tty_driver(device, index</b>)&#20989;&#25968;&#26597;&#25214;&#25105;&#20204;&#24050;&#32463;&#27880;&#20876;&#21040;
    </p>
    <p>
      &#20869;&#26680;&#38142;&#34920;tty_drivers&#24403;&#20013;&#30340;struct tty_driver&#25351;&#38024;&#12290;
    </p>
    <p>
      &#35843;&#29992;<b>tty_driver_lookup_tty(driver, inode, index)</b>&#20989;&#25968;&#65292;&#22312;&#35813;&#20989;&#25968;&#37324;&#38754;
    </p>
    <p>
      &#36890;&#36807;driver-&gt;ops-&gt;lookup&#20989;&#25968;&#25110;&#32773;driver-&gt;ttys[idx]&#25968;&#32452;&#26469;&#36820;&#22238;&#35813;
    </p>
    <p>
      tty_driver&#25152;&#23545;&#24212;&#30340;struct tty_struct&#25351;&#38024;,&#22914;&#26524;index&#23545;&#24212;&#30340;tty&#36824;&#27809;&#26377;&#20998;&#37197;&#65292;
    </p>
    <p>
      &#21017;&#35813;&#20989;&#25968;&#36820;&#22238;&#30340;&#26159;&#31354;&#25351;&#38024;&#65292;&#27492;&#26102;&#25105;&#20204;&#38656;&#35201;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      <b>tty = tty_init_dev(driver, index) </b>
    </p>
    <p>
      &#35813;&#20989;&#25968;&#35843;&#29992;tty = alloc_tty_struct(driver, idx)&#20989;&#25968;&#65292; alloc_tty_struct&#20989;&#25968;
    </p>
    <p>
      &#20570;&#20102;&#37325;&#35201;&#30340;&#19968;&#27493;:&#160; <font color="#ef0c0c">tty-&gt;ops = driver-&gt;ops,&#21363;tty-&gt;ops&#23454;&#38469;&#19978;&#25351;&#21521;tty_driver-&gt;ops</font>
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992;tty_add_file(tty, filp)&#20989;&#25968;&#26469;&#23558;&#25171;&#24320;&#25991;&#20214;&#30340;&#25351;&#38024;&#28155;&#21152;&#21040;&#35813;
    </p>
    <p>
      tty&#30340;&#38431;&#21015;&#37324;&#38754;&#12290;
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992;retval = tty-&gt;ops-&gt;open(tty, filp)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476429728996" ID="ID_1569370671" MODIFIED="1476429751876">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>struct tty_struct { </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;int magic; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;struct kref kref; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;struct device *dev; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;struct tty_driver *driver; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;const struct tty_operations *ops; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;int index; </i></b>
    </p>
    <p>
      <b><i>............ </i></b>
    </p>
    <p>
      <b><i>}</i></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1476430145091" ID="ID_725202802" MODIFIED="1476430565315">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32447;&#36335;&#35268;&#31243;,&#19981;&#21516;&#31867;&#22411;&#30340;tty&#35774;&#22791;&#20855;&#26377;&#19981;&#21516;&#31867;&#22411;&#30340;&#32447;&#36335;&#35268;&#31243;&#65292;
    </p>
    <p>
      &#36825;&#19968;&#23618;&#30340;&#23454;&#29616;&#20027;&#35201;&#26159;&#22312;&#25991;&#20214;n_tty.c&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1470721488264" FOLDED="true" ID="ID_876763497" MODIFIED="1486692199457">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int getopt(int argc, char * const argv[],
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const char *optstring);
    </p>
    <p>
      
    </p>
    <p>
      int getopt_long(int argc, char * const argv[],
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const char *optstring,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const struct option *longopts, int *longindex);
    </p>
    <p>
      
    </p>
    <p>
      int getopt_long_only(int argc, char * const argv[],
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const char *optstring,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const struct option *longopts, int *longindex);
    </p>
  </body>
</html></richcontent>
<node CREATED="1486605764867" ID="ID_494370721" MODIFIED="1486605776669">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>struct option { </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const char *name; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;has_arg; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*flag; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;val; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}; </i></b>
    </p>
    <p>
      
    </p>
    <p>
      <b><i>----&gt;longindex&#29992;&#20110;&#36820;&#22238;&#38271;&#36873;&#39033;&#22312;&#38271;&#36873;&#39033;&#25968;&#32452;&#24403;&#20013;&#30340;&#20301;&#32622;&#32034;&#24341;</i></b>
    </p>
    <p>
      extern char *optarg;&#33509;&#26029;&#36873;&#39033;&#21518;&#38754;&#26377;&#21442;&#25968;&#65292;&#21017;&#25351;&#21521;&#35813;&#21442;&#25968;
    </p>
    <p>
      extern int optind &#25195;&#25551;&#36807;&#31243;&#24403;&#20013;&#26631;&#31034;&#19979;&#19968;&#20010;&#36873;&#39033;&#30340;&#32034;&#24341;&#65292;&#25195;&#25551;&#32467;&#26463;&#21518;&#26631;&#35782;&#31532;&#19968;&#20010;&#38750;&#36873;&#39033;
    </p>
    <p>
      &#21442;&#25968;&#32034;&#24341;
    </p>
    <p>
      opterr
    </p>
    <p>
      optopt
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1470724644363" ID="ID_533212518" MODIFIED="1470724819812">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      termios&#32467;&#26500;&#20307;&#26159;posix&#26631;&#20934;&#23450;&#20041;&#30340;&#29992;&#26469;&#35774;&#32622;
    </p>
    <p>
      &#32456;&#31471;&#23646;&#24615;&#30340;&#32467;&#26500;&#20307;
    </p>
    <p>
      &#160;tcflag_t c_iflag;&#160;&#160;&#160;&#160;&#160;&#160;/* input modes */
    </p>
    <p>
      &#160;tcflag_t c_oflag;&#160;&#160;&#160;&#160;&#160;/* output modes */
    </p>
    <p>
      &#160;tcflag_t c_cflag;&#160;&#160;&#160;&#160;&#160;/* control modes */
    </p>
    <p>
      &#160;tcflag_t c_lflag;&#160;&#160;&#160;&#160;&#160;&#160;/* local modes */
    </p>
    <p>
      &#160;cc_t&#160;&#160;&#160;c_cc[NCCS];&#160;&#160;&#160;/* special characters */
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472435557506" ID="ID_1703123683" MODIFIED="1490355519024" TEXT="bluez&#x4f7f;&#x7528;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472436386746" ID="ID_121546849" MODIFIED="1472436394401">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="dbus/dbus-1.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1472446972491" FOLDED="true" ID="ID_1538322678" MODIFIED="1488732119863" TEXT="&#x91cd;&#x8981;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472447004427" ID="ID_907264449" MODIFIED="1484548753640">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct generic_data{
    </p>
    <p>
      unsigned int refcount
    </p>
    <p>
      DBusConnection *conn
    </p>
    <p>
      char *path
    </p>
    <p>
      GSList *interfaces
    </p>
    <p>
      GSList *objects
    </p>
    <p>
      GSList *added
    </p>
    <p>
      GSList *removed
    </p>
    <p>
      guint process_id
    </p>
    <p>
      gboolean pending_prop
    </p>
    <p>
      char *introspect
    </p>
    <p>
      struct generic_data *parent
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<node CREATED="1472447409651" ID="ID_817675668" MODIFIED="1472447503331">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct interface_data{
    </p>
    <p>
      char *name
    </p>
    <p>
      const GDBusMethodTable *methods
    </p>
    <p>
      const GDBusSignalTable *signals
    </p>
    <p>
      const GDBusPropertyTable *properties
    </p>
    <p>
      GSList *pending_prop
    </p>
    <p>
      void *user_data
    </p>
    <p>
      GDBusDestroyFunction destroy
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472449696751" ID="ID_1507702699" MODIFIED="1472449761548">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct btd_service {
    </p>
    <p>
      int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ref;
    </p>
    <p>
      struct btd_device&#160;&#160;&#160;*device;
    </p>
    <p>
      struct btd_profile&#160;&#160;*profile;
    </p>
    <p>
      void&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*user_data;
    </p>
    <p>
      btd_service_state_t state;
    </p>
    <p>
      int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;err;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472456073499" ID="ID_375465429" MODIFIED="1484548753641">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct mgmt {
    </p>
    <p>
      int ref_count;
    </p>
    <p>
      int fd;
    </p>
    <p>
      bool close_on_unref;
    </p>
    <p>
      struct io *io;
    </p>
    <p>
      bool writer_active;
    </p>
    <p>
      <b>struct queue *request_queue;</b>
    </p>
    <p>
      struct queue *reply_queue;
    </p>
    <p>
      struct queue *pending_list;
    </p>
    <p>
      struct queue *notify_list;
    </p>
    <p>
      unsigned int next_request_id;
    </p>
    <p>
      unsigned int next_notify_id;
    </p>
    <p>
      bool need_notify_cleanup;
    </p>
    <p>
      bool in_notify;
    </p>
    <p>
      void *buf;
    </p>
    <p>
      uint16_t len;
    </p>
    <p>
      mgmt_debug_func_t debug_callback;
    </p>
    <p>
      mgmt_destroy_func_t debug_destroy;
    </p>
    <p>
      void *debug_data;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1472457234500" ID="ID_114358910" MODIFIED="1472457326530">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct mgmt_request {
    </p>
    <p>
      unsigned int id;
    </p>
    <p>
      uint16_t opcode;
    </p>
    <p>
      uint16_t index;
    </p>
    <p>
      void *buf;
    </p>
    <p>
      uint16_t len;
    </p>
    <p>
      &#160;mgmt_request_func_t callback;
    </p>
    <p>
      mgmt_destroy_func_t destroy;
    </p>
    <p>
      void *user_data;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1472446983475" FOLDED="true" ID="ID_552178998" MODIFIED="1488732117294" TEXT="&#x542f;&#x52a8;&#x6d41;&#x7a0b;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472447584452" ID="ID_858439777" MODIFIED="1472447696003">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>void btd_agent_init(void)</b>
    </p>
    <p>
      &#26681;&#25454;&#36335;&#24452;/org/bluez&#29983;&#25104;&#20102;&#19968;&#20010;generic_data&#65292;
    </p>
    <p>
      &#28982;&#21518;&#21521;&#35813;generic_data&#30340;interface&#38142;&#34920;&#24403;&#20013;&#28155;&#21152;
    </p>
    <p>
      &#19968;&#20010;&#21517;&#31216;&#21483;&#20570;org.bluez.AgentManager1&#30340;interface
    </p>
    <p>
      &#24182;&#19988;&#32473;&#35813;interface&#36171;&#20540;&#19968;&#32452;&#26041;&#27861;
    </p>
    <p>
      static const GDBusMethodTable methods[]
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472447757228" ID="ID_1779260199" MODIFIED="1472449416641">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static int connect_dbus(void)
    </p>
    <p>
      &#21521;dbus&#21518;&#21488;&#36827;&#31243;&#35831;&#27714;&#19968;&#20010;&#31995;&#32479;&#33539;&#22260;&#20869;&#30340;&#24635;&#32447;DBusConnection
    </p>
    <p>
      &#24182;&#19988;&#20026;&#35813;&#24635;&#32447;&#35831;&#27714;&#20102;&#19968;&#20010;&#21517;&#31216;org.bluez
    </p>
    <p>
      &#28982;&#21518;&#32473;&#35813;connection&#25351;&#23450;&#19968;&#20010;&#36335;&#24452;&#20026;&quot;/&quot;,&#28982;&#21518;&#32473;&#35813;connection
    </p>
    <p>
      &#27880;&#20876;&#19968;&#20010;vtable
    </p>
    <p>
      static DBusObjectPathVTable generic_table = {
    </p>
    <p>
      .unregister_function&#160;&#160;&#160;&#160;= generic_unregister,
    </p>
    <p>
      .message_function&#160;&#160;&#160;= generic_message,
    </p>
    <p>
      }
    </p>
    <p>
      &#28982;&#21518;&#32473;&#35813;connection&#20851;&#32852;&#19968;&#20010;generic_data&#65292;
    </p>
    <p>
      &#21521;generic_data&#30340;interface&#30340;&#38142;&#34920;&#24403;&#20013;&#28155;&#21152;&#19968;&#20010;interface
    </p>
    <p>
      org.freedesktop.DBus.Introspectable,&#36825;&#20010;&#25509;&#21475;&#26377;&#19968;&#20010;&#26080;&#21442;&#25968;&#30340;&#26041;&#27861;Introspect&#65292;
    </p>
    <p>
      &#29992;&#26469;&#36820;&#22238;XML string,&#35813;string&#25551;&#36848;&#20102;interfaces, methods, and signals of the object
    </p>
    <p>
      &#28982;&#21518;&#20877;&#21521;&#35813;generic_data&#30340;interface&#38142;&#34920;&#24403;&#20013;&#28155;&#21152;&#19968;&#20010;&#21483;&#20570;org.freedesktop.DBus.ObjectManager
    </p>
    <p>
      &#30340;&#25509;&#21475;&#65292;&#29992;&#20110;&#22788;&#29702;&#25509;&#21475;&#30340;&#28155;&#21152;&#21644;&#31227;&#38500;&#20107;&#20214;&#65292;&#24182;&#28155;&#21152;&#35813;&#25509;&#21475;&#23545;&#24212;&#30340;&#22788;&#29702;&#26041;&#27861;&#21644;&#25509;&#25910;&#30340;&#20449;&#21495;
    </p>
    <p>
      <b><i>&#26368;&#21518;&#23558;&#35813;generic_data&#25351;&#38024;&#36171;&#20540;&#32473;generic_data *root&#25351;&#38024;</i></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472449517565" ID="ID_213264935" MODIFIED="1472449691731">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;<b>void btd_device_init(void)</b>
    </p>
    <p>
      &#21521;&#31995;&#32479;&#20869;&#37096;&#30340;static GSList *state_callback&#29366;&#24577;&#22238;&#35843;&#38142;&#34920;
    </p>
    <p>
      &#28155;&#21152;&#19968;&#20010;&#22238;&#35843;&#20989;&#25968;service_state_changed
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472449868085" ID="ID_245580906" MODIFIED="1472450225047">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>void btd_profile_init(void) </b>
    </p>
    <p>
      &#21521;/org/bluez&#19979;&#20877;&#28155;&#21152;&#19968;&#20010;&#21483;&#20570;org.bluez.ProfileManager1
    </p>
    <p>
      &#30340;&#25509;&#21475;&#21644;&#23545;&#24212;&#30340;&#26041;&#27861;
    </p>
    <p>
      static const GDBusMethodTable methods[] = {
    </p>
    <p>
      { GDBUS_METHOD(&quot;RegisterProfile&quot;,
    </p>
    <p>
      &#160;GDBUS_ARGS({ &quot;profile&quot;, &quot;o&quot;}, { &quot;UUID&quot;, &quot;s&quot; },
    </p>
    <p>
      &#160;{ &quot;options&quot;, &quot;a{sv}&quot; }),
    </p>
    <p>
      &#160;NULL, register_profile) },
    </p>
    <p>
      { GDBUS_METHOD(&quot;UnregisterProfile&quot;, GDBUS_ARGS({ &quot;profile&quot;, &quot;o&quot; }),
    </p>
    <p>
      NULL, unregister_profile) },
    </p>
    <p>
      &#160;{ }
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472455963539" ID="ID_1330469567" MODIFIED="1472458494048">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>adapter_init() </i></b>
    </p>
    <p>
      &#26032;&#29983;&#25104;&#19968;&#20010;struct mgmt&#32467;&#26500;&#20307;&#30340;mgmt_master&#65292;
    </p>
    <p>
      &#28982;&#21518;&#29983;&#25104;&#19968;&#20010;struct mgmt_request *request&#25918;&#32622;&#21040;
    </p>
    <p>
      mgmt_master&#30340;&#35831;&#27714;&#38431;&#21015;&#24403;&#20013;&#12290;
    </p>
    <p>
      &#35774;&#32622;request&#30340;opcode&#20026;MGMT_OP_READ_VERSION&#65292;
    </p>
    <p>
      &#22238;&#35843;&#20989;&#25968;&#20026;read_version_complete
    </p>
    <p>
      &#22312;read_version_complete&#37324;&#38754;&#65292;&#20998;&#21035;&#23545;&#24212;
    </p>
    <p>
      opcode&#20026;MGMT_OP_READ_COMMANDS&#65292;&#27880;&#20876;&#20102;&#19968;&#20010;request&#65292;&#22238;&#35843;&#20989;&#25968;&#26159;read_commands_complete
    </p>
    <p>
      opcode&#20026;MGMT_EV_INDEX_ADDED&#65292;&#27880;&#20876;&#20102;&#19968;&#20010;notify,&#22238;&#35843;&#20989;&#25968;&#26159;<b>index_added</b>
    </p>
    <p>
      opcode&#20026;MGMT_EV_INDEX_REMOVED&#65292;&#27880;&#20876;&#20102;&#19968;&#20010;notify&#65292;&#22238;&#35843;&#20989;&#25968;&#26159;index_removed
    </p>
    <p>
      opcode&#20026;MGMT_OP_READ_INDEX_LIST&#65292;&#27880;&#20876;&#20102;&#19968;&#20010;request,&#22238;&#35843;&#20989;&#25968;&#26159;read_index_list_complete
    </p>
    <p>
      &#22312;index_added&#20989;&#25968;&#24403;&#20013;&#20250;&#38024;&#23545;MGMT_OP_READ_INFO&#27880;&#20876;&#19968;&#20010;request,&#23545;&#24212;&#30340;&#22238;&#35843;&#20989;&#25968;&#26159;
    </p>
    <p>
      <b>read_info_complete------&gt; adapter_register,&#27880;&#20876;blue&#30340;adapte(/org/bluez/hci%d) </b>
    </p>
    <p>
      <b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#24182;&#19988;&#27880;&#20876;&#23545;&#24212;&#30340;&#20107;&#20214;&#30340;&#25511;&#21046;&#20989;&#25968;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472538339160" ID="ID_1949834183" MODIFIED="1490355523835">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#d30808">&#21629;&#20196;&#34892;&#24037;&#20855;</font></i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1472538365319" ID="ID_668644320" MODIFIED="1472539073753">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bluetoothctl&#23454;&#29616;&#37197;&#23545;&#21644;&#36830;&#25509;
    </p>
    <p>
      # power on
    </p>
    <p>
      # agent on
    </p>
    <p>
      # default-agent
    </p>
    <p>
      # scan on
    </p>
    <p>
      # pair 00:1D:43:6D:03:26
    </p>
    <p>
      # connect 00:1D:43:6D:03:26
    </p>
    <p>
      &#35774;&#22791;&#40664;&#35748;&#24773;&#20917;&#19979;&#21487;&#33021;&#26159;&#20572;&#27490;&#30340;&#12290;&#20320;&#21487;&#20197;&#22312;pavucontrol&#30340;&quot;Configuration&quot;&#26631;&#31614;&#39029;&#37324;&#36873;&#25321;&#37197;&#32622;(OFF, A2DP, HFP)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472539078888" ID="ID_1696757032" MODIFIED="1472539118543">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      # pacmd set-card-profile bluez_card.00_1E_7C_30_86_FA a2dp_sink
    </p>
    <p>
      a2dp_sink&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-- High Fidelity Playback (A2DP Sink) (sinks: 1, sources: 0, priority: 10, available: yes)
    </p>
    <p>
      headset_head_unit&#160;&#160;-- Headset Head Unit (HSP/HFP) (sinks: 1, sources: 1, priority: 20, available: yes)
    </p>
    <p>
      off&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-- Off (sinks: 0, sources: 0, priority: 0, available: yes)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1484548777121" ID="ID_1539665501" MODIFIED="1484548779899" TEXT="http://blog.csdn.net/yuzaipiaofei/article/details/12114781"/>
</node>
<node CREATED="1472695038683" ID="ID_1669068797" MODIFIED="1472695051470" TEXT="HSP Profile">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1472470369429" FOLDED="true" ID="ID_339489790" MODIFIED="1484812039855" TEXT="PulseAudio">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472470405885" ID="ID_931852280" MODIFIED="1472471355366">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Sink
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;an output device
    </p>
    <p>
      Source
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;an input device
    </p>
    <p>
      Sink input
    </p>
    <p>
      &#160;&#160;&#160;&#160;a stream that is connected to the output
    </p>
    <p>
      Source output
    </p>
    <p>
      &#160;&#160;&#160;&#160;a stream that is connected to the input
    </p>
    <p>
      Client
    </p>
    <p>
      &#160;&#160;&#160;&#160;an active client of the PA server,
    </p>
    <p>
      &#160;&#160;&#160;&#160;something that can create none/one/many sink inputs/source outputs
    </p>
    <p>
      &#160;&#160;&#160;&#160;on any sink/source the PA server has
    </p>
    <p>
      Card
    </p>
    <p>
      &#160;&#160;&#160;&#160;a collection of sinks/sources that belong to a single hardware device.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472472141638" ID="ID_1114391225" MODIFIED="1484548753669" TEXT="pulseaudio&#x4f7f;&#x7528;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472472153030" ID="ID_519077722" MODIFIED="1484548753673">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.pulseaudio -nC
    </p>
    <p>
      &#24320;&#21551;pulseaudio&#30340;&#21629;&#20196;&#34892;&#27169;&#24335;,
    </p>
    <p>
      &#21487;&#20197;&#20351;&#29992;CLI&#21629;&#20196;&#34892;&#20102;<b>PulseAudio Command Line Interface Syntax</b>
    </p>
    <p>
      pulseaudio&#25552;&#20379;&#20102;&#19968;&#20010;&#31616;&#21333;&#30340;&#21629;&#20196;&#34892;&#35821;&#35328;&#65292;&#29992;&#20110;&#37197;&#32622;&#33050;&#26412;&#24403;&#20013;&#65292;pacmd
    </p>
    <p>
      &#20132;&#20114;&#24335;shell&#24403;&#20013;&#65292;&#20197;&#21450;&#27169;&#22359;&#30340;module-cli&#21644;module-cli-protocol-{unix,tcp}
    </p>
  </body>
</html></richcontent>
<node CREATED="1472472562023" ID="ID_195147699" MODIFIED="1472472772927">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      list-modules
    </p>
    <p>
      &#26174;&#31034;&#25152;&#26377;&#24050;&#32463;&#21152;&#36733;&#30340;&#27169;&#22359;
    </p>
    <p>
      list-cards
    </p>
    <p>
      &#29616;&#23454;&#25152;&#26377;&#24050;&#32463;&#27880;&#20876;&#30340;&#22768;&#21345;
    </p>
    <p>
      list-sinks or list-sources
    </p>
    <p>
      list-clients
    </p>
    <p>
      &#26174;&#31034;&#25152;&#26377;active&#30340;client
    </p>
    <p>
      list-sink-inputs or list-source-outputs
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472472792999" ID="ID_92624733" MODIFIED="1472473096054">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>volume command</i></b>
    </p>
    <p>
      set-sink-volume|set-source-volume index|name volume
    </p>
    <p>
      set-sink-mute|set-source-mute index|name boolean
    </p>
    <p>
      set-sink-input-volume|set-source-output-volume index volume
    </p>
    <p>
      &#160;set-sink-input-mute|set-source-output-mute index boolean
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472473098791" ID="ID_220769893" MODIFIED="1472473374558">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#37197;&#32622;&#21629;&#20196;</i></b>
    </p>
    <p>
      set-default-sink|set-default-source index|name
    </p>
    <p>
      set-card-profile index|name profile-name
    </p>
    <p>
      &#35774;&#32622;&#22768;&#21345;&#30340;profile
    </p>
    <p>
      set-sink-port|set-source-port index|name port-name
    </p>
    <p>
      &#35774;&#32622;sink&#25110;&#32773;source&#30340;profile
    </p>
    <p>
      set-port-latency-offset card-index|card-name port-name offset
    </p>
    <p>
      &#35774;&#32622;&#22768;&#21345;&#30340;&#26576;&#19968;&#20010;&#31471;&#21475;&#30340;&#24310;&#36831;&#20559;&#31227;&#37327;
    </p>
    <p>
      suspend-sink|suspend-source index|name boolean
    </p>
    <p>
      suspend boolean
    </p>
    <p>
      &#25346;&#36215;&#25152;&#26377;&#30340;sink&#21644;source
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472473420232" ID="ID_1425344798" MODIFIED="1472473504291">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#40664;&#35748;&#30340;&#37197;&#32622;&#25991;&#20214;&#26159;&#20301;&#20110;/usr/local/etc/pulse&#19979;&#38754;&#30340;
    </p>
    <p>
      &#38500;&#38750;&#22312;&#21551;&#21160;pulseaudio&#30340;&#26102;&#20505;&#25351;&#23450;--sysconfdir=/etc
    </p>
    <p>
      &#21017;&#37197;&#32622;&#25991;&#20214;&#20301;&#20110;/etc/pulse&#30446;&#24405;&#19979;&#26041;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472533856592" ID="ID_809429921" MODIFIED="1472533998612">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#32534;&#35793; </i></b>
    </p>
    <p>
      <font color="#b20303">apt-get source XXX </font>
    </p>
    <p>
      <font color="#b20303">apt-get build-dep XXX </font>
    </p>
    <p>
      <font color="#b20303">debian/control </font>
    </p>
    <p>
      <font color="#b20303">dpkg-buildpackage</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472538169863" ID="ID_1512682171" MODIFIED="1472538209096">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#21629;&#20196;&#34892;&#24037;&#20855; </b>
    </p>
    <p>
      <b>pactl </b>
    </p>
    <p>
      <b>pacmd</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472539940985" ID="ID_139908739" MODIFIED="1472553111874">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;https://wiki.archlinux.org/index.php/Bluetooth#HSP.2FHFP_profiles
    </p>
    <p>
      &#30340;&#36164;&#26009;
    </p>
    <p>
      bluz5&#24050;&#32463;&#19981;&#25903;&#25345;HFP/HSP&#20102;&#65292;&#38656;&#35201;&#23433;&#35013;pulseaudio7&#20197;&#19978;&#30340;&#26469;&#25903;&#25345;
    </p>
    <p>
      &#26681;&#25454;https://freedesktop.org/wiki/Software/PulseAudio/Notes/6.0/&#32593;&#31449;&#25552;&#20379;&#30340;&#36164;&#26009;
    </p>
    <p>
      pulseaudio6&#20197;&#21518;&#23545;&#20110;BlueZ 5 headset backend&#65292;&#25105;&#20204;&#21487;&#20197;&#36873;&#25321;pulseaudio
    </p>
    <p>
      native&#25903;&#25345;&#25110;&#32773;&#36890;&#36807;oFono&#26469;&#36827;&#34892;&#25903;&#25345;
    </p>
    <p>
      <b><i>The native HSP backend for BlueZ 5 depends on libbluetooth </i></b>
    </p>
    <p>
      <i><font color="#b90808">The native backend only supports HSP, not HFP. That's usually not a big issue, </font></i>
    </p>
    <p>
      <i><font color="#b90808">because most devices support both HSP and HFP, so it's enough to support only </font></i>
    </p>
    <p>
      <i><font color="#b90808">one profile to get audio working. Another limitation in the native backend is that </font></i>
    </p>
    <p>
      <i><font color="#b90808">it doesn't support the &quot;headset role&quot;, which means that the use case of connecting </font></i>
    </p>
    <p>
      <i><font color="#b90808">a PC to a mobile phone, so that the PC pretends to be a headset, isn't supported.</font></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472557545164" ID="ID_1789277116" MODIFIED="1484548753680">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>PulseAudio Sink</i></b>
    </p>
    <p>
      <font color="#860202">https://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/Developer/IO/</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1472608387713" ID="ID_1809989753" MODIFIED="1472608798181">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#27599;&#20010;sink&#25110;&#32773;source&#26159;&#30001;&#20241;&#30496;&#22312;&#38899;&#39057;&#35774;&#22791;&#25991;&#20214;&#25551;&#36848;&#31526;&#19978;&#30340;&#32447;&#31243;&#39537;&#21160;&#30340;&#65292;
    </p>
    <p>
      &#28982;&#21518;&#20174;&#23458;&#25143;&#31471;&#25512;&#25110;&#32773;&#25289;&#21462;&#25968;&#25454;&#12290;&#35813;&#32447;&#31243;&#26159;&#34987;&#35774;&#35745;&#25104;&#26080;&#38145;&#32447;&#31243;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472608807650" FOLDED="true" ID="ID_1124735961" MODIFIED="1484548753979">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.sink&#21644;source&#36319;PA&#30340;&#20107;&#20214;&#20027;&#24490;&#29615;&#30340;&#36890;&#20449;&#26041;&#24335;&#26159;&#36890;&#36807;message&#65292;&#23558;message
    </p>
    <p>
      &#25918;&#21040;&#19968;&#20010;&#26080;&#38145;&#21270;&#30340;&#38431;&#21015;&#24403;&#20013;&#12290;sink&#21644;source&#30456;&#20851;&#32852;&#30340;&#32447;&#31243;&#19981;&#20250;&#38459;&#22622;&#21040;&#35813;&#38431;&#21015;&#19978;&#65292;
    </p>
    <p>
      &#20294;&#26159;&#20301;&#20110;&#35813;&#28040;&#24687;&#38431;&#21015;&#21478;&#19968;&#31471;&#30340;main loop&#20250;&#34987;&#38459;&#22622;&#12290;&#26377;&#20004;&#31181;&#38431;&#21015;&#65292;&#19968;&#31181;&#26159;&#24403;&#21069;&#36319;
    </p>
    <p>
      main loop&#27807;&#36890;&#30340;&#38431;&#21015;&#65292;&#21478;&#19968;&#20010;&#26159;&#22791;&#29992;&#30340;&#28040;&#24687;&#38431;&#21015;&#65292;&#22240;&#20026;RT&#32447;&#31243;&#26377;&#21487;&#33021;&#20250;&#20877;&#31649;&#29702;&#19968;&#32452;
    </p>
    <p>
      sink&#21644;source&#12290;&#36825;&#20010;&#28040;&#24687;&#38431;&#21015;&#23601;&#26159;<b>pa_thread_mq</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1472609405339" ID="ID_1276572750" MODIFIED="1472609425707">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pa_thread_mq-&gt;inq is from the main event loop to the specific thread
    </p>
    <p>
      and pa_thread_mq-&gt;outq is from the thread back to the event loop
    </p>
    <p>
      pa_thread_mq_xxx() can be used to set up the pair and hook them up with the main event loop
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472611046060" FOLDED="true" ID="ID_1303228100" MODIFIED="1482911183234">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      process_msg()
    </p>
    <p>
      &#20989;&#25968;&#34987;&#29992;&#26469;&#36827;&#34892;&#28040;&#24687;&#30340;&#20998;&#21457;&#25805;&#20316;
    </p>
    <p>
      &#27880;&#24847;:&#35813;&#20989;&#25968;&#26159;&#20010;&#20869;&#37096;&#38745;&#24577;&#20989;&#25968;&#65292;&#26159;&#34987;&#25918;&#22312;
    </p>
    <p>
      u-&gt;sink-&gt;parent.process_msg = sink_process_msg
    </p>
  </body>
</html></richcontent>
<node CREATED="1472611354822" ID="ID_148372248" MODIFIED="1472611506131">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;&#32487;&#25215;&#33258;pa_msgobject&#30340;object&#37117;&#21487;&#20197;&#25509;&#25910;&#21040;message,
    </p>
    <p>
      &#21487;&#20197;&#36890;&#36807;&#20989;&#25968;<b>pa_asncmsgq_send(), or _post</b>()&#26469;&#21457;&#36865;
    </p>
    <p>
      message:
    </p>
    <p>
      _send() is synchronous (i.e. blocks until the function is received and handled on the receiving side)
    </p>
    <p>
      _post() is asynchronous (i.e. it justs enqueues and returns)
    </p>
    <p>
      _send() should thus only be used for communication from the main event loop to the thread but not the other way round
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472612208366" ID="ID_46019611" MODIFIED="1472612961544">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20219;&#24847;&#30340;&#28040;&#24687;&#37117;&#21487;&#20197;&#36890;&#36807;message queue
    </p>
    <p>
      &#20363;&#22914;pa_sink, pa_source, pa_sink_input, pa_source_output&#37117;&#21487;&#20197;&#25509;&#25910;message
    </p>
    <p>
      &#24182;&#19988;&#21487;&#20197;&#23450;&#20041;&#19968;&#20123;&#40664;&#35748;&#30340;&#28040;&#24687;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472612972311" ID="ID_938954642" MODIFIED="1472612990471">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3. sink&#30340;&#29366;&#24577;
    </p>
    <p>
      PA_SINK_INIT: the sink has been allocated, but has not yet been installed in the core with pa_sink_put()
    </p>
    <p>
      PA_SINK_RUNNING: we are playing something
    </p>
    <p>
      PA_SINK_SUSPENDED: the device has been temporarily suspended. usually this should cause the device file to be closed
    </p>
    <p>
      PA_SINK_IDLE: very similar to PA_SINK_RUNNING but signifies that no non-paused stream is connected to the sink. Usually this should be handled like PA_SINK_RUNNING, but can be used as an optimization for some cases, since pa_sink_render() will always return silence in this state
    </p>
    <p>
      PA_SINK_UNLINKED: the sink has been removed from the core and is being destructed
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472638405325" FOLDED="true" ID="ID_1963665709" MODIFIED="1484548753979">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#37325;&#28857;&#20195;&#30721;&#20998;&#26512;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472638422261" ID="ID_1998465914" MODIFIED="1472638440340">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>1.static int add_card(struct userdata *u)</i></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1472541009890" ID="ID_597539249" MODIFIED="1483408125381" TEXT="DBUS">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472541023274" ID="ID_1396525522" MODIFIED="1472541289742">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.dbus&#30340;&#23618;&#27425;&#32467;&#26500;</b>
    </p>
    <p>
      <b><i>libdbus</i></b>&#160;&#20801;&#35768;&#20004;&#20010;&#24212;&#29992;&#31243;&#24207;&#30456;&#20114;&#36830;&#25509;&#24182;&#19988;&#20132;&#25442;&#20449;&#24687;
    </p>
    <p>
      <b><i>A message bus daemon executable</i></b>&#160;&#35813;daemon&#22522;&#20110;libdbus&#24314;&#31435;&#65292;
    </p>
    <p>
      application&#21487;&#20197;&#36830;&#25509;&#21040;&#35813;daemon&#24182;&#19988;&#36890;&#36807;&#23427;&#26469;&#20998;&#21457;&#28040;&#24687;
    </p>
    <p>
      <b><i>Wrapper libraries or bindings based on particular application frameworks</i></b>
    </p>
    <p>
      &#23545;&#20110;libdbus api&#30340;&#26356;&#19978;&#23618;&#27425;&#30340;&#23553;&#35013;&#65292;&#20415;&#21033;&#20351;&#29992;&#65292;&#27604;&#22914;libdbus-glib and libdbus-qt
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472541893315" ID="ID_781206102" MODIFIED="1483408135643" TEXT="2.DBUS&#x7684;&#x4e00;&#x4e9b;&#x91cd;&#x8981;&#x6982;&#x5ff5;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472541990387" ID="ID_1938534148" MODIFIED="1472542298608">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    1.Native Objects and Object Paths &#19968;&#20123;&#32534;&#31243;&#26694;&#26550;&#20250;&#23450;&#20041;&#33258;&#24049;&#30340;object&#65292;&#21363;&#33258;&#24049;&#30340;&#22522;&#31867;&#65292;&#22312;dbus&#30340;&#27010;&#24565;&#24403;&#20013; &#32479;&#25104;&#20026;native object. &#22312;dbus&#30340;&#24213;&#23618;&#30340;&#27010;&#24565;&#21644;api&#24403;&#20013;&#65292;&#24182;&#19981;&#20851;&#24515;native object&#26159;&#20160;&#20040;&#19996;&#35199;&#65292; dbus&#25552;&#20379;&#20102;&#19968;&#20010;object paths&#30340;&#27010;&#24565;&#65292;object path&#21487;&#20197;&#29992;&#26469;&#25351;&#21521; &#26576;&#20010;&#26694;&#26550;&#30340;&#23545;&#35937;&#23454;&#20363;&#65292;&#24182;&#19988;&#20801;&#35768;&#36828;&#31243;&#30340;&#24212;&#29992;&#31243;&#24207;&#36890;&#36807;&#35813;path&#26469;&#25351;&#21521;&#23545;&#35937;&#23454;&#20363;
  </body>
</html></richcontent>
</node>
<node CREATED="1472542304595" ID="ID_1101793564" MODIFIED="1472542584650">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.Methods and Signals
    </p>
    <p>
      &#27599;&#20010;object&#25317;&#26377;members,&#26377;&#20004;&#31181;&#24456;&#37325;&#35201;&#30340;members:
    </p>
    <p>
      methods&#21644;signals&#65292; signals&#26159;&#26469;&#33258;&#35813;object&#30340;&#24191;&#25773;&#65292;
    </p>
    <p>
      signals&#21487;&#33021;&#20250;&#21253;&#21547;&#19968;&#20010;data payload
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472542668219" ID="ID_1413994524" MODIFIED="1472546350308">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.Interfaces
    </p>
    <p>
      &#27599;&#20010;object&#21487;&#33021;&#20250;&#23545;&#24212;&#22810;&#20010;interfaces, &#21487;&#20197;&#23558;interfaces&#24819;&#35937;&#25104;&#20026;&#26159;&#22810;&#20010;
    </p>
    <p>
      methods&#21644;signals&#30340;&#38598;&#21512;&#65292;interface&#23450;&#20041;&#20102;&#19968;&#20010;&#23545;&#35937;&#23454;&#20363;&#30340;type&#12290;
    </p>
    <p>
      dbus&#20250;&#32473;&#19968;&#20010;interface&#19968;&#20010;&#21517;&#31216;&#65292;&#20363;&#22914;<b><i>org.freedesktop.Introspectable</i></b>
    </p>
    <p>
      &#27599;&#31181;&#19981;&#21516;&#30340;&#32534;&#31243;&#26694;&#26550;&#20250;&#23558;interface&#26144;&#23556;&#25104;object,&#22914;c++&#30340;&#34394;&#22522;&#31867;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472542948211" ID="ID_1297053277" MODIFIED="1472543535138">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.Proxies
    </p>
    <p>
      &#19968;&#20010;proxy object&#26159;&#19968;&#20010;native object&#65292;&#29992;&#26469;&#20195;&#34920;remote process&#24403;&#20013;&#30340;
    </p>
    <p>
      &#26576;&#20010;object.
    </p>
    <p>
      &#24213;&#23618;&#30340;dbus&#20250;&#29983;&#25104;&#19968;&#20010;&#26041;&#27861;&#35843;&#29992;&#30340;message,&#21457;&#36865;&#35813;message&#24182;&#19988;&#25509;&#25910;&#21644;&#22788;&#29702;
    </p>
    <p>
      &#22238;&#22797;&#30340;message&#30340;&#32467;&#26524;&#12290;&#39640;&#23618;&#27425;&#30340;&#32534;&#31243;&#26694;&#26550;&#21487;&#36873;&#22320;&#25552;&#20379;&#19968;&#20123;proxy object.
    </p>
    <p>
      proxy object&#30475;&#36215;&#26469;&#20687;&#26159;native object,&#20294;&#26159;&#24403;&#20320;&#35843;&#29992;&#23427;&#30340;&#26041;&#27861;&#30340;&#26102;&#20505;&#65292;&#23427;&#20250;&#23558;&#35813;&#35843;&#29992;
    </p>
    <p>
      &#36716;&#25442;&#25104;dbus&#24418;&#24335;&#30340;message&#24182;&#19988;&#31561;&#24453;&#22238;&#22797;&#12290;&#21487;&#20197;&#23545;&#27604;&#19968;&#19979;&#20004;&#31181;&#32534;&#31243;&#30340;&#26041;&#24335;:
    </p>
    <p>
      <i>In pseudocode, programming without proxies might look like this: </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>Message message = new Message(&quot;/remote/object/path&quot;, &quot;MethodName&quot;, arg1, arg2); </i>
    </p>
    <p>
      <i>Connection connection = getBusConnection(); </i>
    </p>
    <p>
      <i>connection.send(message); </i>
    </p>
    <p>
      <i>Message reply = connection.waitForReply(message); </i>
    </p>
    <p>
      <i>if (reply.isError()) { </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>} else { </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;Object returnValue = reply.getReturnValue(); </i>
    </p>
    <p>
      <i>} </i>
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      <i>Programming with proxies might look like this: </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>Proxy proxy = new Proxy(getBusConnection(), &quot;/remote/object/path&quot;); </i>
    </p>
    <p>
      <i>Object returnValue = proxy.MethodName(arg1, arg2);</i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472543773988" ID="ID_1659658593" MODIFIED="1472544368460">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      5.Bus names
    </p>
    <p>
      &#24403;&#19968;&#20010;application&#36830;&#25509;&#21040;&#20102;bus daemon&#19978;&#38754;&#30340;&#26102;&#20505;&#65292;bus daemon&#37117;&#20250;&#32473;&#35813;application
    </p>
    <p>
      &#36171;&#20104;&#19968;&#20010;&#21517;&#31216;&#65292;&#35813;&#21517;&#31216;&#20197;&quot;:&quot;&#24320;&#22836;&#65292;&#27604;&#22914;&quot;:34-907&quot;, &#22312;bus daemon&#30340;&#25972;&#20010;&#29983;&#21629;&#21608;&#26399;&#24403;&#20013;
    </p>
    <p>
      &#27599;&#20010;&#21517;&#31216;&#26159;&#19981;&#20250;&#34987;&#37325;&#22797;&#20351;&#29992;&#30340;&#12290;
    </p>
    <p>
      name&#30340;&#19968;&#20010;&#24456;&#37325;&#35201;&#30340;&#20316;&#29992;&#23601;&#26159;&#36319;&#36394;&#19968;&#20010;application&#30340;&#29983;&#21629;&#21608;&#26399;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1472544372869" ID="ID_1650741101" MODIFIED="1472544497077">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6.Address
    </p>
    <p>
      &#20351;&#29992;D-Bus&#30340;&#35201;&#20040;&#26159;client&#65292;&#35201;&#20040;&#26159;server.
    </p>
    <p>
      dbus address&#25351;&#23450;&#20102;server&#30417;&#21548;&#30340;&#20301;&#32622;&#21644;client
    </p>
    <p>
      &#36830;&#25509;&#30340;&#20301;&#32622;
    </p>
    <p>
      &#27604;&#22914;unix:path=/tmp/abcdef
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1472545299438" ID="ID_824907856" MODIFIED="1483408129859" TEXT="3.DBUS&#x7684;&#x8c03;&#x8bd5;&#x5de5;&#x5177;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1472545317477" FOLDED="true" ID="ID_472409899" MODIFIED="1484548753980">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>dbus-monitor</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1482834588032" ID="ID_973975414" MODIFIED="1482842772773">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>dbus-monitor &#36755;&#20986;&#20449;&#24687;&#35299;&#35835;</i></b>
    </p>
    <p>
      1.&#22312;log&#24403;&#20013;&#30475;&#21040;&#30340;sender&#21644;destination&#23383;&#26679;&#37117;&#26159;&#38024;&#23545;services&#26469;&#35828;&#30340;,
    </p>
    <p>
      &#24403;destination=null&#30340;&#26102;&#20505;&#65292;&#20195;&#34920;&#24403;&#21069;&#30340;&#20449;&#24687;&#26159;&#19968;&#20010;&#24191;&#25773;&#20449;&#24687;&#12290;
    </p>
    <p>
      2.&#19968;&#20010;service&#21487;&#20197;&#26292;&#38706;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;object&#32473;bus,&#27599;&#20010;object&#37117;&#20250;&#34987;
    </p>
    <p>
      &#36171;&#20104;&#19968;&#20010;path,&#27604;&#22914;
    </p>
    <p>
      /org/freedesktop/NetworkManager/ActiveConnection/1
    </p>
    <p>
      3.&#27599;&#20010;object&#26377;&#22810;&#20010;interface, interface&#37324;&#38754;&#21253;&#25324;&#20102;methods&#21644;signals.
    </p>
    <p>
      
    </p>
    signal sender=:1.1948 dest=(null destination) serial=1829990 path=/org/ayatana/menu/DA00003; interface=org.ayatana.dbusmenu; member=ItemPropertyUpdated int32 23 string &quot;enabled&quot; variant boolean true &#19978;&#38754;&#26159;&#19968;&#20010;&#20449;&#21495;&#30340;&#26684;&#24335;&#65292;&#20449;&#21495;&#30340;&#25509;&#21475;&#26159;org.ayatana.dbusmenu, &#20449;&#21495;&#30340;&#21517;&#31216;&#26159;ItemPropertyUpdated &#20449;&#21495;&#30340;&#20869;&#23481;&#26159; int 32 23&#160;&#160;&#160;item id&#21495; string &quot;enable&quot; &#23646;&#24615;&#30340;&#21517;&#31216; variant boolean true &#35774;&#32622;&#23646;&#24615;&#30340;&#20540;
  </body>
</html></richcontent>
</node>
<node CREATED="1482915937632" FOLDED="true" ID="ID_274788392" MODIFIED="1484548753684">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#ab0a0a">&#22914;&#20309;&#36890;&#36807;unique name&#24471;&#21040;&#23545;&#24212;&#30340;&#36827;&#31243;&#30340;&#21517;&#31216;&#21602;? </font></i>
    </p>
    <p>
      <i><font color="#ab0a0a">&#35831;&#20351;&#29992;&#22914;&#19979;&#30340;&#33050;&#26412;</font></i>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1482917340472" ID="ID_1826049033" LINK="../Debian-Learning/utilscript/dbus-unique-name-translate.sh" MODIFIED="1482917350194" TEXT=""/>
</node>
<node CREATED="1482920465472" ID="ID_1710658207" MODIFIED="1482923715752">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      udev log&#32423;&#21035;&#30340;&#35774;&#32622;
    </p>
    <p>
      <b>udevadm control --log-priority=info</b>
    </p>
    <p>
      &#35843;&#35797;&#23436;&#25104;&#20043;&#21518;&#38656;&#35201;&#23558;log-priority&#37325;&#26032;&#35774;&#32622;&#25104;err
    </p>
    <p>
      
    </p>
    <p>
      <b>udevadm monitor</b>&#21487;&#20197;&#23454;&#26102;&#25171;&#21360;uevent&#20107;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1482911245689" ID="ID_765170857" MODIFIED="1482911268801" TEXT="hciattach rfcomm">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1486605815193" FOLDED="true" ID="ID_1024809522" MODIFIED="1490355573555">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bluetooth hid
    </p>
    <p>
      &#23454;&#38469;&#19978;&#23601;&#26159;&#22312;&#34013;&#29273;&#26080;&#32447;&#36890;&#20449;&#30340;&#22522;&#30784;&#19978;&#25191;&#34892;
    </p>
    <p>
      usb&#30340;hid&#21327;&#35758;
    </p>
    <p>
      &#35774;&#22791;&#25551;&#36848;&#31526;&#21644;&#25509;&#21475;&#25551;&#36848;&#31526;&#20250;&#21807;&#19968;&#30830;&#23450;&#19968;&#20010;&#35774;&#22791;&#25152;&#23646;&#30340;class
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1486605824801" ID="ID_539903483" MODIFIED="1486606897742">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#34013;&#29273;&#31995;&#32479;&#24403;&#20013;&#65292;master&#21487;&#20197;&#22312;ad-hoc piconet&#27169;&#24335;&#19979;&#38754;
    </p>
    <p>
      &#36319;&#22810;&#36798;7&#20010;&#27963;&#21160;&#30340;&#35774;&#22791;&#36827;&#34892;&#20132;&#20114;&#12290;&#22810;&#36798;255&#20010;&#35774;&#22791;&#21487;&#20197;&#22788;&#20110;
    </p>
    <p>
      &#26410;&#28608;&#27963;&#25110;&#32773;&#26159;&#20572;&#27850;&#29366;&#24577;&#24403;&#20013;&#12290;
    </p>
    <p>
      &#34013;&#29273;&#25216;&#26415;&#20811;&#26381;&#20102;&#35774;&#22791;&#20043;&#38388;&#30340;&#21516;&#27493;&#38382;&#39064;&#65292;&#20351;&#24471;&#19981;&#21516;&#30340;&#22806;&#35774;&#21644;&#21151;&#33021;
    </p>
    <p>
      &#37117;&#21487;&#20197;&#26080;&#32541;&#34701;&#21512;&#12290;
    </p>
    <p>
      hid&#26159;&#36890;&#36807;profile&#30340;&#26041;&#24335;&#26469;&#23454;&#29616;&#30340;&#65292;&#23427;&#20204;&#25552;&#20379;&#26631;&#20934;&#32473;&#21378;&#21830;&#12290;
    </p>
    <p>
      &#27599;&#20010;profile spec&#21253;&#21547;&#22914;&#19979;&#30340;&#26368;&#23567;&#30340;&#20449;&#24687;&#65306;
    </p>
    <p>
      1.&#23545;&#20854;&#20182;&#30340;profile&#30340;&#20381;&#36182;
    </p>
    <p>
      2.&#29992;&#25143;&#25509;&#21475;&#26684;&#24335;
    </p>
    <p>
      3.&#34987;profile&#20351;&#29992;&#21040;&#30340;&#20855;&#20307;&#30340;&#34013;&#29273;&#21327;&#35758;&#26632;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486622317006" FOLDED="true" ID="ID_1216366508" MODIFIED="1488694932683">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2. usb&#30340;&#25253;&#21578;&#25551;&#36848;&#31526;&#35828;&#26126;&#20102;&#19968;&#20010;&#25253;&#21578;&#30340;&#38598;&#21512;&#20197;&#21450;&#22312;&#25253;&#21578;&#24403;&#20013;
    </p>
    <p>
      &#20986;&#29616;&#30340;item
    </p>
    <p>
      &#25152;&#26377;&#30340;&#25551;&#36848;&#31526;&#20250;&#25551;&#36848;&#25253;&#21578;&#30340;&#20540;&#30340;&#21487;&#36873;&#33539;&#22260;&#20197;&#21450;&#22312;&#25253;&#21578;&#24403;&#20013;&#20986;&#29616;&#30340;item&#30340;&#24847;&#24605;
    </p>
    <p>
      &#22312;&#25253;&#21578;&#30340;&#22522;&#30784;&#19978;&#65292;&#25105;&#20204;&#21457;&#23637;&#20986;'application collections'&#30340;&#27010;&#24565;&#65292;&#21363;&#36319;&#26576;&#20010;&#24212;&#29992;
    </p>
    <p>
      &#26377;&#20851;&#30340;&#25152;&#26377;&#30340;&#25253;&#21578;&#30340;&#19968;&#20010;&#38598;&#21512;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1486629262627" ID="ID_1365392493" MODIFIED="1486630132135">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3. &#34013;&#29273;hid&#35774;&#22791;&#24403;&#20013;&#30340;hid&#26381;&#21153;&#35760;&#24405;&#21253;&#21547;&#20102;&#35813;&#35774;&#22791;&#30340;&#25551;&#36848;&#31526;&#65292;
    </p>
    <p>
      &#21487;&#36873;&#22320;&#36824;&#21253;&#21547;&#20102;&#29289;&#29702;&#25551;&#36848;&#31526;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486637933594" ID="ID_1581584143" MODIFIED="1486639136324">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.bluetooth hid &#35774;&#22791;&#21253;&#21547;&#19977;&#31181;report&#31867;&#22411;
    </p>
    <p>
      Input
    </p>
    <p>
      Output
    </p>
    <p>
      Feature
    </p>
    <p>
      input&#21644;output&#25253;&#21578;&#21253;&#21547;&#20102;&#20302;&#24310;&#36831;&#30340;&#25968;&#25454;
    </p>
    <p>
      feature&#26159;&#21452;&#21521;&#30340;&#25968;&#25454;&#65292;&#20856;&#22411;&#22320;&#21253;&#21547;&#19981;&#21487;&#35265;&#25110;&#32773;&#26159;&#19981;&#26159;&#30001;&#29992;&#25143;&#20135;&#29983;&#30340;&#25968;&#25454;
    </p>
    <p>
      hid&#35774;&#22791;&#33267;&#23569;&#35201;&#21253;&#21547;&#19968;&#31181;report &#31867;&#22411;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486639143469" ID="ID_1640627399" MODIFIED="1486640340683">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#34013;&#29273;hid&#35774;&#22791;&#21644;&#34013;&#29273;hid host&#20043;&#38388;&#21019;&#24314;&#20102;&#20004;&#20010;&#36923;&#36753;&#30340;&#36890;&#36947;&#65306;
    </p>
    <p>
      &#19968;&#20010;&#25511;&#21046;&#36890;&#36947;&#21644;&#19968;&#20010;&#20013;&#26029;&#36890;&#36947;
    </p>
    <p>
      reports&#21487;&#33021;&#20250;&#34987;&#20013;&#26029;&#36890;&#36947;&#25110;&#32773;&#26159;&#25511;&#21046;&#36890;&#36947;&#25152;&#25658;&#24102;
    </p>
    <p>
      &#20301;&#20110;&#20013;&#26029;&#36890;&#36947;&#19978;&#30340;report data&#26159;&#22312;&#27809;&#26377;&#35831;&#27714;&#30340;&#24773;&#20917;&#19979;&#34987;&#21457;&#36865;&#30340;&#65292;
    </p>
    <p>
      &#36825;&#20123;&#34987;&#31216;&#20026;&#24322;&#27493;reports&#12290;
    </p>
    <p>
      &#20301;&#20110;&#25511;&#21046;&#36890;&#36947;&#19978;&#38754;&#30340;report data&#20250;&#34987;&#35831;&#27714;SET_REPORT&#25110;&#32773;GET_REPORT
    </p>
    <p>
      &#25152;&#21021;&#22987;&#21270;&#65292;&#36825;&#20123;&#20256;&#36755;&#25968;&#25454;&#34987;&#31216;&#20316;&#21516;&#27493;reports.
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1486706193748" FOLDED="true" ID="ID_47350236" MODIFIED="1488694936171" TEXT="hid remote&#x5524;&#x9192;&#x529f;&#x80fd;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1486706212274" ID="ID_1646578315" MODIFIED="1486707087487">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#dc0a0a">HIDRemoteWake</font></b>&#23646;&#24615;&#26159;&#19968;&#20010;&#24067;&#23572;&#20540;&#65292;&#29992;&#26469;&#25552;&#31034;&#26576;&#20010;hid&#35774;&#22791;
    </p>
    <p>
      &#26159;&#21542;&#20855;&#26377;&#25552;&#20379;&#19968;&#20010;wake-up&#20449;&#21495;&#32473;hid host&#30340;&#33021;&#21147;&#12290;
    </p>
    <p>
      &#24403;bluetooth hid host&#31995;&#32479;&#36827;&#20837;&#20102;suspend&#29366;&#24577;&#65292;&#35813;&#26631;&#24535;&#34987;&#29992;&#20110;&#20915;&#23450;
    </p>
    <p>
      bluetooth hid host&#31995;&#32479;&#26159;&#21542;&#21487;&#20197;&#23558;&#35813;hid&#35774;&#22791;&#21253;&#21547;&#22312;&#21487;&#20197;&#21796;&#37266;hid host
    </p>
    <p>
      &#31995;&#32479;&#30340;&#35774;&#22791;&#38598;&#21512;&#24403;&#20013;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#27809;&#26377;hid&#35774;&#22791;&#23558;RemoteWake&#26631;&#24535;&#35774;&#32622;&#25104;TRUE&#65292;&#24182;&#19988;&#24403;&#21069;&#30340;radio&#20063;&#27809;&#26377;
    </p>
    <p>
      &#35774;&#22791;&#21487;&#20197;&#20801;&#35768;&#20854;&#20182;&#31867;&#22411;&#30340;&#35774;&#22791;&#26469;&#21796;&#37266;&#31995;&#32479;&#65292;&#37027;&#20040;Hid Host&#31995;&#32479;&#20250;&#22312;suspend
    </p>
    <p>
      &#29366;&#24577;&#19979;&#38754;&#23436;&#20840;&#20851;&#38381;radio&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486707091990" ID="ID_8040713" MODIFIED="1486707362300">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ec0707">Bluetooth Hid Host</font></b>&#21487;&#33021;&#20250;&#36890;&#36807;&#21457;&#36215;&#19968;&#20010;&#21483;&#20570;
    </p>
    <p>
      Suspend Control Operation&#30340;&#35831;&#27714;&#26469;&#36890;&#30693;&#19968;&#20010;&#20855;&#22791;wake up
    </p>
    <p>
      &#21151;&#33021;&#30340;Hid&#35774;&#22791;&#12290;&#35813;&#36890;&#30693;&#20250;&#35753;&#19968;&#20010;hid&#35774;&#22791;&#20851;&#38381;&#20219;&#20309;&#23545;&#21796;&#37266;
    </p>
    <p>
      hid host&#27809;&#26377;&#24110;&#21161;&#30340;&#30005;&#36335;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486707368923" ID="ID_1270677732" MODIFIED="1486707649143">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#19968;&#20010;&#24050;&#32463;&#36827;&#20837;suspend&#27169;&#24335;&#30340;HID&#35774;&#22791;&#65292;&#27809;&#26377;&#20160;&#20040;&#20855;&#20307;&#30340;&#35201;&#27714;&#12290;
    </p>
    <p>
      &#34013;&#29273;hid&#35774;&#22791;&#21487;&#33021;&#22312;suspend&#29366;&#24577;&#19979;&#20063;&#20250;&#20445;&#25345;&#36830;&#25509;&#30340;&#29366;&#24577;&#65292;&#20294;&#26159;&#24212;&#35813;&#20351;&#29992;
    </p>
    <p>
      &#20687;Sniff mode &#25110;&#32773; Sniff Subrating&#36825;&#26679;&#30340;&#20302;&#21151;&#32791;&#27169;&#24335;&#12290;
    </p>
    <p>
      &#21487;&#36873;&#22320;&#65292;&#22914;&#26524;hid&#35774;&#22791;&#23558;<b><font color="#ef0c0c">HIDReconnectInitiate</font></b>&#23646;&#24615;&#22768;&#26126;&#25104;&#20102;TRUE,
    </p>
    <p>
      &#37027;&#20040;&#22312;suspend&#27169;&#24335;&#19979;&#65292;&#23427;&#21487;&#20197;&#23558;&#33258;&#24049;&#20174;hid host&#24403;&#20013;&#26029;&#24320;&#25110;&#32773;
    </p>
    <p>
      hid host&#21487;&#20197;&#20027;&#21160;&#22320;&#26029;&#24320;&#35813;&#35774;&#22791;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486708194933" FOLDED="true" ID="ID_531520326" MODIFIED="1488694934861">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#23545;&#20110;hid&#35774;&#22791;&#65292;&#26377;&#19979;&#38754;&#20960;&#31181;&#26041;&#24335;&#21487;&#20197;&#34987;&#25346;&#36215;&#21644;&#21796;&#37266; </i></b>
    </p>
    <p>
      <b><i>&#31995;&#32479;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1486708585866" ID="ID_1357592901" MODIFIED="1486708666752">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Sniff Mode
    </p>
    <p>
      Hid&#35774;&#22791;&#21487;&#33021;&#20250;&#36827;&#20837;sniff&#27169;&#24335;&#65292;&#22312;&#20004;&#20010;&#21957;&#25506;&#38170;&#28857;&#20043;&#38388;hid&#35774;&#22791;
    </p>
    <p>
      &#21487;&#33021;&#20250;&#20241;&#30496;&#24456;&#38271;&#30340;&#19968;&#27573;&#26102;&#38388;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1475045261713" ID="ID_1242333908" MODIFIED="1490355428754" POSITION="right" TEXT="BlueDroid&#x5206;&#x6790;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1475057675334" ID="ID_486765396" MODIFIED="1484376273241" TEXT="HW&#x5c42;&#x7684;&#x5b9a;&#x4e49;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1475057688790" ID="ID_940209254" MODIFIED="1491545677101">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#d90909">hardware/intel/bluedroid/btif/src/bluetooth.c&#25991;&#20214;&#23450;&#20041;&#20102;&#30828;&#20214;&#25277;&#35937;&#23618;</font></i>
    </p>
    <p>
      static int open_bluetooth_stack(const struct hw_module_t *module, UNUSED_ATTR char const *name, struct hw_device_t **abstraction) {
    </p>
    <p>
      static bluetooth_device_t device = {
    </p>
    <p>
      .common = {
    </p>
    <p>
      .tag = HARDWARE_DEVICE_TAG,
    </p>
    <p>
      .version = 0,
    </p>
    <p>
      .close = close_bluetooth_stack,
    </p>
    <p>
      },
    </p>
    <p>
      <b>.get_bluetooth_interface = bluetooth__get_bluetooth_interface</b>
    </p>
    <p>
      };
    </p>
    <p>
      device.common.module = (struct hw_module_t *)module;
    </p>
    <p>
      *abstraction = (struct hw_device_t *)&amp;device;
    </p>
    <p>
      return 0;
    </p>
    <p>
      }
    </p>
    <p>
      <font color="#b80202"><i>static struct hw_module_methods_t bt_stack_module_methods = { </i></font>
    </p>
    <p>
      <font color="#b80202"><i>.open = open_bluetooth_stack, </i></font>
    </p>
    <p>
      <font color="#b80202"><i>};</i></font>
    </p>
    <p>
      EXPORT_SYMBOL struct hw_module_t HAL_MODULE_INFO_SYM = {
    </p>
    <p>
      .tag = HARDWARE_MODULE_TAG,
    </p>
    <p>
      .version_major = 1,
    </p>
    <p>
      .version_minor = 0,
    </p>
    <p>
      .id = BT_HARDWARE_MODULE_ID,
    </p>
    <p>
      .name = &quot;Bluetooth Stack&quot;,
    </p>
    <p>
      .author = &quot;The Android Open Source Project&quot;,
    </p>
    <p>
      .methods = &amp;bt_stack_module_methods
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1475058340111" ID="ID_387367707" MODIFIED="1475113094945">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#33719;&#24471;bluetooth&#25277;&#35937;&#23618;&#27169;&#22359;&#23545;&#24212;&#30340;hw_device_t&#25351;&#38024;&#20043;&#21518;&#65292;&#23601;&#21487;&#20197;&#35843;&#29992;
    </p>
    <p>
      <font color="#eb0404"><i>.get_bluetooth_interface = bluetooth__get_bluetooth_interface</i></font>
    </p>
    <p>
      &#20989;&#25968;&#20102;&#65292;&#35813;&#20989;&#25968;&#36820;&#22238;static const bt_interface_t bluetoothInterface
    </p>
    <p>
      &#32467;&#26500;&#20307;&#65292;&#29992;&#20110;&#21021;&#22987;&#21270;bluedroid&#21327;&#35758;&#26855;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475058566888" ID="ID_1057805663" MODIFIED="1484376289103">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      472 <font color="#e50505"><b>static const bt_interface_t bluetoothInterface</b></font>&#160;= {
    </p>
    <p>
      473&#160;&#160;&#160;&#160;&#160;sizeof(bluetoothInterface),
    </p>
    <p>
      474&#160;&#160;&#160;&#160; <font color="#df0303">init,</font>
    </p>
    <p>
      475&#160;&#160;&#160;&#160;&#160;enable,
    </p>
    <p>
      476&#160;&#160;&#160;&#160;&#160;disable,
    </p>
    <p>
      477&#160;&#160;&#160;&#160;&#160;cleanup,
    </p>
    <p>
      478&#160;&#160;&#160;&#160;&#160;get_adapter_properties,
    </p>
    <p>
      479&#160;&#160;&#160;&#160;&#160;get_adapter_property,
    </p>
    <p>
      480&#160;&#160;&#160;&#160;&#160;set_adapter_property,
    </p>
    <p>
      481&#160;&#160;&#160;&#160;&#160;get_remote_device_properties,
    </p>
    <p>
      482&#160;&#160;&#160;&#160;&#160;get_remote_device_property,
    </p>
    <p>
      483&#160;&#160;&#160;&#160;&#160;set_remote_device_property,
    </p>
    <p>
      484&#160;&#160;&#160;&#160;&#160;get_remote_service_record,
    </p>
    <p>
      485&#160;&#160;&#160;&#160;&#160;get_remote_services,
    </p>
    <p>
      486&#160;&#160;&#160;&#160;&#160;start_discovery,
    </p>
    <p>
      487&#160;&#160;&#160;&#160;&#160;cancel_discovery,
    </p>
    <p>
      488&#160;&#160;&#160;&#160;&#160;create_bond,
    </p>
    <p>
      489&#160;&#160;&#160;&#160;&#160;create_bond_out_of_band,
    </p>
    <p>
      490&#160;&#160;&#160;&#160;&#160;remove_bond,
    </p>
    <p>
      491&#160;&#160;&#160;&#160;&#160;cancel_bond,
    </p>
    <p>
      492&#160;&#160;&#160;&#160;&#160;get_connection_state,
    </p>
    <p>
      493&#160;&#160;&#160;&#160;&#160;pin_reply,
    </p>
    <p>
      494&#160;&#160;&#160;&#160;&#160;ssp_reply,
    </p>
    <p>
      495&#160;&#160;&#160;&#160;&#160;get_profile_interface,
    </p>
    <p>
      496&#160;&#160;&#160;&#160;&#160;dut_mode_configure,
    </p>
    <p>
      497&#160;&#160;&#160;&#160;&#160;dut_mode_send,
    </p>
    <p>
      498&#160;&#160;&#160;&#160;&#160;.................
    </p>
    <p>
      510 };
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#163dee" DESTINATION="ID_1057805663" ENDARROW="Default" ENDINCLINATION="733;0;" ID="Arrow_ID_828039722" SOURCE="ID_1376500307" STARTARROW="None" STARTINCLINATION="234;0;"/>
<node CREATED="1475128786606" FOLDED="true" ID="ID_1961662345" MODIFIED="1484548753980">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.static int init(bt_callbacks_t *callbacks) </b>
    </p>
    <p>
      &#39318;&#20808;&#23558;callbacks&#36171;&#20540;&#32473;bt_hal_cbacks&#21464;&#37327;
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992;&#20989;&#25968;<font color="#d50a0a"><i>stack_manager_get_interface()-&gt;init_stack()</i></font>
    </p>
    <p>
      stack_manager_get_interface&#20989;&#25968;&#39318;&#20808;&#21019;&#24314;&#20102;&#19968;&#20010;
    </p>
    <p>
      <font color="#8e0a0a"><b>stack_manager</b></font>&#32447;&#31243;&#65292;<font color="#bd0909">&#35813;&#32447;&#31243;&#30340;&#20027;&#35201;&#30446;&#30340;&#26159;&#22788;&#29702;&#25972;&#20010;bluedroid </font>
    </p>
    <p>
      <font color="#bd0909">&#23618;&#30340;&#20107;&#20214;&#65292;&#22914;&#21021;&#22987;&#21270;</font>
    </p>
    <p>
      &#28982;&#21518;&#36820;&#22238;&#32467;&#26500;&#20307;
    </p>
    <p>
      static const stack_manager_t interface = {
    </p>
    <p>
      &#160;<font color="#e01313">init_stack</font>,
    </p>
    <p>
      &#160;&#160;start_up_stack_async,
    </p>
    <p>
      &#160;&#160;shut_down_stack_async,
    </p>
    <p>
      &#160;&#160;clean_up_stack,
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;get_stack_is_running
    </p>
    <p>
      };
    </p>
    <p>
      init_stack&#20989;&#25968;&#20250;&#35843;&#29992;thread_post(management_thread, <font color="#ef0303">event_init_stack</font>, semaphore);
    </p>
    <p>
      &#20989;&#25968;&#65292;&#20256;&#36882;&#19968;&#20010;event_init_stack&#32473;stack_manager&#32447;&#31243;&#36827;&#34892;&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
<node CREATED="1475137955694" ID="ID_889189070" MODIFIED="1475141958099">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#a90808">static void event_init_stack(void *context) </font></i>
    </p>
    <p>
      module_management_start();&#26242;&#26102;&#27809;&#26377;&#30475;&#25026;&#22312;&#24178;&#20160;&#20040;
    </p>
    <p>
      module_init(get_module(OSI_MODULE));&#22909;&#20687;&#27809;&#26377;&#20570;&#20160;&#20040;&#23454;&#36136;&#24615;&#30340;&#19996;&#35199;
    </p>
    <p>
      module_init(get_module(BT_UTILS_MODULE));&#27809;&#30475;&#25026;
    </p>
    <p>
      module_init(get_module(BTIF_CONFIG_MODULE));&#21152;&#36733;&#37197;&#32622;&#25991;&#20214;bt_config.conf
    </p>
    <p>
      <font color="#bb0303">btif_init_bluetooth();</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475141975466" FOLDED="true" ID="ID_1453391171" MODIFIED="1484548753685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#37325;&#28857;&#20998;&#26512;&#19968;&#19979;&#20989;&#25968;<font color="#bb0303">btif_init_bluetooth()</font></i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1475142141914" ID="ID_440390984" MODIFIED="1475142154132">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/bluedroid-init.jpeg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1475143335979" FOLDED="true" ID="ID_1812628736" MODIFIED="1482911182992">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.bte_main_boot_entry()
    </p>
  </body>
</html></richcontent>
<node CREATED="1475142438514" ID="ID_1582202042" MODIFIED="1475147972525">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.module_init(get_module(INTEROP_MODULE))
    </p>
    <p>
      &#21021;&#22987;&#21270;INTEROP_MODULE&#27169;&#22359;&#65292;&#35813;&#27169;&#22359;&#24182;&#27809;&#26377;&#23450;&#20041;Init&#20989;&#25968;&#65292;
    </p>
    <p>
      &#25152;&#20197;&#36825;&#37324;&#24182;&#27809;&#26377;&#36827;&#34892;&#21021;&#22987;&#21270;&#25805;&#20316;&#12290;
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475147937991" FOLDED="true" ID="ID_1128004915" MODIFIED="1475150945882">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2. hci = hci_layer_get_interface()
    </p>
    <p>
      &#35813;&#20989;&#25968;&#39318;&#20808;&#23558;&#20869;&#23384;&#31354;&#38388;&#30340;&#20998;&#37197;&#22120;
    </p>
    <p>
      static const allocator_t interface = {
    </p>
    <p>
      buffer_alloc,
    </p>
    <p>
      osi_free
    </p>
    <p>
      }
    </p>
    <p>
      &#25351;&#38024;&#36171;&#20540;&#32473;&#20102;&#21464;&#37327;buffer_allocator
    </p>
  </body>
</html></richcontent>
<node CREATED="1475147941503" ID="ID_1955768166" MODIFIED="1475147951025">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#25509;&#21475;&#25351;&#38024;
    </p>
    <p>
      static const vendor_t interface = {
    </p>
    <p>
      vendor_open,
    </p>
    <p>
      vendor_close,
    </p>
    <p>
      send_command,
    </p>
    <p>
      send_async_command,
    </p>
    <p>
      set_callback,
    </p>
    <p>
      }; &#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;vendor
    </p>
    <p>
      &#23558;&#25509;&#21475;&#25351;&#38024;
    </p>
    <p>
      static const hci_hal_t interface = {
    </p>
    <p>
      hal_init,
    </p>
    <p>
      hal_open,
    </p>
    <p>
      hal_close,
    </p>
    <p>
      read_data,
    </p>
    <p>
      packet_finished,
    </p>
    <p>
      transmit_data,
    </p>
    <p>
      }&#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;hal
    </p>
    <p>
      &#23558;&#25509;&#21475;&#25351;&#38024;
    </p>
    <p>
      const stack_config_t interface = {
    </p>
    <p>
      get_btsnoop_log_path,
    </p>
    <p>
      get_btsnoop_turned_on,
    </p>
    <p>
      get_btsnoop_should_save_last,
    </p>
    <p>
      get_trace_config_enabled,
    </p>
    <p>
      get_all
    </p>
    <p>
      };&#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;stack_config
    </p>
    <p>
      &#23558;&#25509;&#21475;&#25351;&#38024;
    </p>
    <p>
      static const btsnoop_t interface = {
    </p>
    <p>
      set_api_wants_to_log,
    </p>
    <p>
      capture
    </p>
    <p>
      };&#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;btsnoop
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475147998679" ID="ID_1965977254" MODIFIED="1475149001885">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23558;&#25509;&#21475;&#32467;&#26500;&#20307;
    </p>
    <p>
      static const hci_inject_t interface = {
    </p>
    <p>
      &#160;hci_inject_open,
    </p>
    <p>
      hci_inject_close
    </p>
    <p>
      }&#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;hci_inject
    </p>
    <p>
      &#23558;&#25509;&#21475;&#32467;&#26500;&#20307;
    </p>
    <p>
      static const controller_t interface={
    </p>
    <p>
      get_is_ready,
    </p>
    <p>
      get_address,
    </p>
    <p>
      get_bt_version,
    </p>
    <p>
      get_features_classic,
    </p>
    <p>
      ............
    </p>
    <p>
      }&#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;controller
    </p>
    <p>
      &#23558;&#25509;&#21475;&#32467;&#26500;&#20307;static const packet_fragmenter_t interface = {
    </p>
    <p>
      init,
    </p>
    <p>
      cleanup,
    </p>
    <p>
      fragment_and_dispatch,
    </p>
    <p>
      reassemble_and_dispatch
    </p>
    <p>
      };&#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;packet_fragmenter
    </p>
    <p>
      &#23558;&#25509;&#21475;&#32467;&#26500;&#20307;
    </p>
    <p>
      static const low_power_manager_t interface = {
    </p>
    <p>
      init,
    </p>
    <p>
      cleanup,
    </p>
    <p>
      post_command,
    </p>
    <p>
      wake_assert,
    </p>
    <p>
      transmit_done
    </p>
    <p>
      };&#36171;&#20540;&#32473;&#25351;&#38024;&#21464;&#37327;low_power_manager
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475149015232" ID="ID_56941637" MODIFIED="1475149139018">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#de0c0c"><i>static void init_layer_interface() {</i></font>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;if (!interface_created) {&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface.send_low_power_command = low_power_manager-&gt;post_command;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface.do_postload = do_postload;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;// It's probably ok for this to live forever. It's small and&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;// there's only one instance of the hci interface.&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface.event_dispatcher = data_dispatcher_new(&quot;hci_layer&quot;);&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;if (!interface.event_dispatcher) {&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;LOG_ERROR(LOG_TAG, &quot;%s could not create upward dispatcher.&quot;, __func__);&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;return;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;}&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface.set_data_queue = set_data_queue;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface.transmit_command = transmit_command;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface.transmit_command_futured = transmit_command_futured;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface.transmit_downward = transmit_downward;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interface_created = true;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      &#160;&#160;}&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
    <p>
      }
    </p>
    <p>
      <font color="#ac0e0e"><i>&#21021;&#22987;&#21270;hci_t *interface,&#160;&#160;&#24182;&#23558;&#20854;&#36171;&#20540;&#32473;&#21464;&#37327;static const hci_t *hci;</i></font>&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475149943545" ID="ID_1394464828" MODIFIED="1475150424922">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#b60c0c">&#30003;&#35831;&#19968;&#20010;fixed_queue_t *&#31867;&#22411;&#30340;&#21464;&#37327; </font></i>
    </p>
    <p>
      <i><font color="#b60c0c">btu_hci_msg_queue </font></i>
    </p>
    <p>
      <i><font color="#b60c0c">&#24182;&#23558;&#35813;&#25351;&#38024;&#36171;&#20540;&#32473;upwards_data_queue&#21464;&#37327;</font></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475150429065" ID="ID_1387450064" MODIFIED="1475150499137">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      module_init(get_module(STACK_CONFIG_MODULE));
    </p>
    <p>
      &#35843;&#29992;STACK_CONFIG_MODULE&#30340;init&#20989;&#25968;
    </p>
    <p>
      &#35813;&#20989;&#25968;&#30340;&#20316;&#29992;&#23601;&#26159;&#21152;&#36733;bt_stack.conf&#37197;&#32622;&#25991;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1475150954090" ID="ID_1425138587" MODIFIED="1475151107154">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>2. btif_fetch_local_bdaddr(&amp;btif_local_bd_addr); </i></b>
    </p>
    <p>
      &#33719;&#24471;&#26412;&#22320;&#34013;&#29273;&#35774;&#22791;&#30340;&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475151153546" ID="ID_401792031" MODIFIED="1475151366472">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.bt_jni_workqueue_thread = thread_new(BT_JNI_WORKQUEUE_NAME); </b>
    </p>
    <p>
      &#26032;&#24314;&#19968;&#20010;jni&#24037;&#20316;&#32447;&#31243;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1484649982617" ID="ID_1278328852" MODIFIED="1484650038606">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#881919">bluedroid/stack/include/hcidefs.h &#25991;&#20214; </font></i></b>
    </p>
    <p>
      <b><i><font color="#881919">&#24403;&#20013;&#21487;&#20197;&#26597;&#35810;&#21040;&#25152;&#26377;&#30340;HCI&#30340;&#21629;&#20196;</font></i></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1475113343456" ID="ID_1469039082" MODIFIED="1484376251794" TEXT="&#x4e0a;&#x5c42;APP">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1475113387746" ID="ID_1153728533" MODIFIED="1475128537606">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25991;&#20214;packages/apps/Bluetooth/src/com/android/bluetooth/btservice/AdapterService.java
    </p>
    <p>
      &#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#25972;&#20010;app&#21551;&#21160;&#21021;&#22987;&#21270;&#30340;&#20195;&#30721;
    </p>
    <p>
      <font color="#ea1515">public class AdapterService extends Service </font>
    </p>
    <p>
      AdapterService&#22312;&#29983;&#25104;&#30340;&#26102;&#20505;&#20250;&#35843;&#29992;&#20869;&#37096;&#30340;&#19968;&#20010;&#38745;&#24577;&#20989;&#25968;<font color="#e60d0d">classInitNative()</font>
    </p>
    <p>
      &#35813;&#20989;&#25968;&#30340;&#20316;&#29992;&#23601;&#26159;&#21021;&#22987;&#21270;jni&#20989;&#25968;&#38543;&#21518;&#38656;&#35201;&#30340;&#20449;&#24687;&#12290;
    </p>
    <p>
      &#22312;&#20989;&#25968;public void onCreate()&#24403;&#20013;&#65292;&#35843;&#29992;&#20102;&#19968;&#20010;jni&#30340;&#20989;&#25968;<font color="#d80a0a"><b><i>initNative();</i></b></font>
    </p>
    <p>
      &#35813;&#20989;&#25968;&#30340;&#20316;&#29992;&#23601;&#26159;&#29992;&#26469;&#21021;&#22987;&#21270;&#25972;&#20010;bluedroid&#21327;&#35758;&#26632;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<arrowlink COLOR="#c80606" DESTINATION="ID_1481356822" ENDARROW="Default" ENDINCLINATION="20;-209;" ID="Arrow_ID_1333253320" STARTARROW="None" STARTINCLINATION="704;0;"/>
</node>
</node>
<node CREATED="1475113360384" ID="ID_1315763748" MODIFIED="1484376264303" TEXT="JNI&#x5c42;&#x5b9a;&#x4e49;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1475127425045" ID="ID_1605582275" MODIFIED="1491545656682">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#d80606"><i>packages/apps/Bluetooth/jni/com_android_bluetooth_btservice_AdapterService.cpp</i></font>
    </p>
    <p>
      &#25991;&#20214;&#23450;&#20041;&#20102;adapterservice&#31867;&#38656;&#35201;&#20351;&#29992;&#30340;JNI&#30340;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1475127620629" ID="ID_1866607132" MODIFIED="1484376268112">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1267 static JNINativeMethod sMethods[] = {
    </p>
    <p>
      1268&#160;&#160;&#160;&#160;&#160;/* name, signature, funcPtr */
    </p>
    <p>
      1269&#160;&#160;&#160;&#160;&#160;{&quot;<font color="#bb0a0a">classInitNative</font>&quot;, &quot;()V&quot;, (void *) classInitNative},
    </p>
    <p>
      1270&#160;&#160;&#160;&#160; <font color="#ec0e0e"><i>{&quot;initNative&quot;, &quot;()Z&quot;, (void *) initNative},</i></font>
    </p>
    <p>
      1271&#160;&#160;&#160;&#160;&#160;{&quot;cleanupNative&quot;, &quot;()V&quot;, (void*) cleanupNative},
    </p>
    <p>
      1272&#160;&#160;&#160;&#160;&#160;{&quot;enableNative&quot;, &quot;(Z)Z&quot;,&#160;&#160;(void*) enableNative},
    </p>
    <p>
      1273&#160;&#160;&#160;&#160;&#160;{&quot;disableNative&quot;, &quot;()Z&quot;,&#160;&#160;(void*) disableNative},
    </p>
    <p>
      1274&#160;&#160;&#160;&#160;&#160;{&quot;setAdapterPropertyNative&quot;, &quot;(I[B)Z&quot;, (void*) setAdapterPropertyNative},
    </p>
    <p>
      1275&#160;&#160;&#160;&#160;&#160;{&quot;getAdapterPropertiesNative&quot;, &quot;()Z&quot;, (void*) getAdapterPropertiesNative},
    </p>
    <p>
      1276&#160;&#160;&#160;&#160;&#160;{&quot;getAdapterPropertyNative&quot;, &quot;(I)Z&quot;, (void*) getAdapterPropertyNative},
    </p>
    <p>
      1277&#160;&#160;&#160;&#160;&#160;{&quot;getDevicePropertyNative&quot;, &quot;([BI)Z&quot;, (void*) getDevicePropertyNative},
    </p>
    <p>
      1278&#160;&#160;&#160;&#160;&#160;{&quot;setDevicePropertyNative&quot;, &quot;([BI[B)Z&quot;, (void*) setDevicePropertyNative},
    </p>
    <p>
      1279&#160;&#160;&#160;&#160;&#160;{&quot;startDiscoveryNative&quot;, &quot;()Z&quot;, (void*) startDiscoveryNative},
    </p>
    <p>
      1280&#160;&#160;&#160;&#160;&#160;{&quot;cancelDiscoveryNative&quot;, &quot;()Z&quot;, (void*) cancelDiscoveryNative},
    </p>
    <p>
      1281&#160;&#160;&#160;&#160;&#160;{&quot;createBondNative&quot;, &quot;([BI)Z&quot;, (void*) createBondNative},
    </p>
    <p>
      1282&#160;&#160;&#160;&#160;&#160;{&quot;createBondOutOfBandNative&quot;, &quot;([BILandroid/bluetooth/OobData;)Z&quot;, (void*) createBondOutOfBandNative},
    </p>
    <p>
      1283&#160;&#160;&#160;&#160;&#160;{&quot;removeBondNative&quot;, &quot;([B)Z&quot;, (void*) removeBondNative},
    </p>
    <p>
      1284&#160;&#160;&#160;&#160;&#160;{&quot;cancelBondNative&quot;, &quot;([B)Z&quot;, (void*) cancelBondNative},
    </p>
    <p>
      1285&#160;&#160;&#160;&#160;&#160;{&quot;getConnectionStateNative&quot;, &quot;([B)I&quot;, (void*) getConnectionStateNative},
    </p>
    <p>
      1286&#160;&#160;&#160;&#160;&#160;{&quot;pinReplyNative&quot;, &quot;([BZI[B)Z&quot;, (void*) pinReplyNative},
    </p>
    <p>
      1287&#160;&#160;&#160;&#160;&#160;{&quot;sspReplyNative&quot;, &quot;([BIZI)Z&quot;, (void*) sspReplyNative},
    </p>
    <p>
      1288&#160;&#160;&#160;&#160;&#160;{&quot;getRemoteServicesNative&quot;, &quot;([B)Z&quot;, (void*) getRemoteServicesNative},
    </p>
    <p>
      1289&#160;&#160;&#160;&#160;&#160;{&quot;connectSocketNative&quot;, &quot;([BI[BIII)I&quot;, (void*) connectSocketNative},
    </p>
    <p>
      1290&#160;&#160;&#160;&#160;&#160;{&quot;createSocketChannelNative&quot;, &quot;(ILjava/lang/String;[BIII)I&quot;,
    </p>
    <p>
      1291&#160;&#160;&#160;&#160;&#160;&#160;(void*) createSocketChannelNative},
    </p>
    <p>
      1292&#160;&#160;&#160;&#160;&#160;{&quot;configHciSnoopLogNative&quot;, &quot;(Z)Z&quot;, (void*) configHciSnoopLogNative},
    </p>
    <p>
      1293&#160;&#160;&#160;&#160;&#160;{&quot;alarmFiredNative&quot;, &quot;()V&quot;, (void *) alarmFiredNative},
    </p>
    <p>
      1294&#160;&#160;&#160;&#160;&#160;{&quot;readEnergyInfo&quot;, &quot;()I&quot;, (void*) readEnergyInfo},
    </p>
    <p>
      1295&#160;&#160;&#160;&#160;&#160;{&quot;dumpNative&quot;, &quot;(Ljava/io/FileDescriptor;[Ljava/lang/String;)V&quot;, (void*) dumpNative},
    </p>
    <p>
      1296&#160;&#160;&#160;&#160;&#160;{&quot;factoryResetNative&quot;, &quot;()Z&quot;, (void*)factoryResetNative},
    </p>
    <p>
      1297&#160;&#160;&#160;&#160;&#160;{&quot;interopDatabaseClearNative&quot;, &quot;()V&quot;, (void*) interopDatabaseClearNative},
    </p>
    <p>
      1298&#160;&#160;&#160;&#160;&#160;{&quot;interopDatabaseAddNative&quot;, &quot;(I[BI)V&quot;, (void*) interopDatabaseAddNative}
    </p>
    <p>
      1299 };
    </p>
  </body>
</html></richcontent>
<node CREATED="1475127667669" ID="ID_1481356822" MODIFIED="1484549485189">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      {&quot;initNative&quot;, &quot;()Z&quot;, (void *) initNative}&#30340;&#20351;&#29992;
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#c80606" DESTINATION="ID_1481356822" ENDARROW="Default" ENDINCLINATION="20;-209;" ID="Arrow_ID_1333253320" SOURCE="ID_1153728533" STARTARROW="None" STARTINCLINATION="704;0;"/>
<node CREATED="1475128651734" ID="ID_694663101" MODIFIED="1475128772741">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.sBluetoothInterface-&gt;init(&amp;sBluetoothCallbacks);</b>
    </p>
    <p>
      &#35843;&#29992;bluedroid&#23618;&#30340;init&#20989;&#25968;&#65292;&#24182;&#19988;&#20256;&#20837;&#20102;&#19968;&#32452;&#22238;&#35843;&#20989;&#25968;&#29992;&#20110;
    </p>
    <p>
      bluedroid&#23618;&#36890;&#30693;&#19978;&#23618;&#20351;&#29992;
    </p>
    <p>
      &#160;488 static bt_callbacks_t sBluetoothCallbacks = {
    </p>
    <p>
      &#160;489&#160;&#160;&#160;&#160;&#160;sizeof(sBluetoothCallbacks),
    </p>
    <p>
      &#160;490&#160;&#160;&#160;&#160;&#160;adapter_state_change_callback,
    </p>
    <p>
      &#160;491&#160;&#160;&#160;&#160;&#160;adapter_properties_callback,
    </p>
    <p>
      &#160;492&#160;&#160;&#160;&#160;&#160;remote_device_properties_callback,
    </p>
    <p>
      &#160;493&#160;&#160;&#160;&#160;&#160;device_found_callback,
    </p>
    <p>
      &#160;494&#160;&#160;&#160;&#160;&#160;discovery_state_changed_callback,
    </p>
    <p>
      &#160;495&#160;&#160;&#160;&#160;&#160;pin_request_callback,
    </p>
    <p>
      &#160;496&#160;&#160;&#160;&#160;&#160;ssp_request_callback,
    </p>
    <p>
      &#160;497&#160;&#160;&#160;&#160;&#160;bond_state_changed_callback,
    </p>
    <p>
      &#160;498&#160;&#160;&#160;&#160;&#160;acl_state_changed_callback,
    </p>
    <p>
      &#160;499&#160;&#160;&#160;&#160;&#160;callback_thread_event,
    </p>
    <p>
      &#160;500&#160;&#160;&#160;&#160;&#160;dut_mode_recv_callback,
    </p>
    <p>
      &#160;501&#160;&#160;&#160;&#160;&#160;le_test_mode_recv_callback,
    </p>
    <p>
      &#160;502&#160;&#160;&#160;&#160;&#160;energy_info_recv_callback
    </p>
    <p>
      &#160;503 };
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1475128100061" ID="ID_1376500307" MODIFIED="1484552678893">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e30707">static void classInitNative(JNIEnv* env, jclass clazz)</font>
    </p>
    <p>
      &#36825;&#26159;&#19968;&#20010;&#38745;&#24577;&#20989;&#25968;&#65292;&#22312;&#35813;&#20989;&#25968;&#24403;&#20013;&#36890;&#36807;&#20989;&#25968;
    </p>
    <p>
      hw_get_module(id, (hw_module_t const**)&amp;module)
    </p>
    <p>
      &#33719;&#24471;&#22312;hardware&#23618;&#23450;&#20041;&#30340;bluedroid&#30340;&#30828;&#20214;&#25277;&#35937;&#23618;&#27169;&#22359;
    </p>
    <p>
      &#28982;&#21518;&#36890;&#36807;
    </p>
    <p>
      module-&gt;methods-&gt;open(module, id, &amp;abstraction);
    </p>
    <p>
      &#33719;&#24471;bluedroid&#23450;&#20041;&#30340;hw_device_t&#32467;&#26500;&#20307;
    </p>
    <p>
      &#28982;&#21518;&#36890;&#36807;&#20989;&#25968;
    </p>
    <p>
      sBluetoothInterface = btStack-&gt;get_bluetooth_interface();
    </p>
    <p>
      &#36820;&#22238;bluedroid&#23450;&#20041;&#30340;&#25805;&#20316;&#21327;&#35758;&#26632;&#30340;&#19968;&#31995;&#21015;&#20989;&#25968;&#30340;&#32467;&#26500;&#20307;
    </p>
    <p>
      sBluetoothInterface---&gt;&#160;&#160;bt_interface_t *sBluetoothInterface
    </p>
  </body>
</html></richcontent>
<arrowlink COLOR="#163dee" DESTINATION="ID_1057805663" ENDARROW="Default" ENDINCLINATION="733;0;" ID="Arrow_ID_828039722" STARTARROW="None" STARTINCLINATION="234;0;"/>
</node>
</node>
</node>
</node>
<node CREATED="1484376734535" ID="ID_214721952" MODIFIED="1484376770699">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Android&#34013;&#29273;&#24635;&#20307;&#26550;&#26500;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1484376774038" ID="ID_1542095586" MODIFIED="1490355434236">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/android-bluetooth-architecture.png" />
  </body>
</html></richcontent>
<node CREATED="1484388083114" ID="ID_883977551" MODIFIED="1484388230564">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bluetooth adapter&#23450;&#20041;&#30340;bluetooth&#30340;&#29366;&#24577;
    </p>
    <p>
      STATE_OFF = 10
    </p>
    <p>
      STATE_TURNING_ON = 11
    </p>
    <p>
      STATE_ON = 12
    </p>
    <p>
      STATE_TURNING_OFF = 13
    </p>
    <p>
      STATE_BLE_TURNING_ON = 14
    </p>
    <p>
      STATE_BLE_ON = 15
    </p>
    <p>
      STATE_BLE_TURNING_OFF = 16
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1484548490308" ID="ID_1373375081" MODIFIED="1484548587726">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#24212;&#29992;&#31243;&#24207;&#36890;&#36807;android.bluetooth package&#19979;&#30340;API&#26469;&#35843;&#29992;&#31995;&#32479;&#30340;Bluetooth&#21151;&#33021;&#12290;
    </p>
    <p>
      2.&#24212;&#29992;&#23618;&#31354;&#38388;&#22686;&#21152;&#20102;&#19968;&#20010;&#21517;&#20026;Bluetooth&#30340;App&#12290;&#23427;&#20570;&#20026;&#31995;&#32479;&#30340;bluetooth&#26680;&#24515;&#36827;&#31243;&#32780;&#23384;&#22312;&#12290;
    </p>
    <p>
      &#20854;&#20869;&#37096;&#23558;&#36890;&#36807;JNI&#26469;&#35843;&#29992;Bluetooth HAL&#23618;&#20197;&#23436;&#25104;&#21508;&#31181;&#34013;&#29273;&#35831;&#27714;&#12290;
    </p>
    <p>
      3.Bluetooth HAL&#20063;&#23646;&#20110;Android 4.2&#26032;&#22686;&#27169;&#22359;&#65292;&#23427;&#30001;&#34013;&#29273;&#26680;&#24515;&#35268;&#33539;&#30828;&#20214;&#25277;&#35937;&#23618;&#21644;&#34013;&#29273;&#24212;&#29992;&#35268;&#33539;&#30828;&#20214;&#25277;&#35937;&#23618;&#32452;&#25104;&#12290;
    </p>
    <p>
      &#30001;&#20110;HAL&#23618;&#30340;&#38548;&#31163;&#20316;&#29992;&#65292;&#19978;&#23618;&#20195;&#30721;&#21487;&#36731;&#26494;&#31227;&#26893;&#21040;&#19981;&#21516;&#33455;&#29255;&#24179;&#21488;&#12290;
    </p>
    <p>
      4.&#20316;&#20026;&#25972;&#20010;&#34013;&#29273;&#26381;&#21153;&#30340;&#26680;&#24515;&#65292;Bluetooth Stack&#27169;&#22359;&#21017;&#30001;Bluetooth Application Layer&#65288;&#32553;&#20889;&#20026;BTA&#65289;&#21644;
    </p>
    <p>
      Bluetooth Embedded System&#65288;&#32553;&#20889;&#20026;BTE&#65289;&#20004;&#22823;&#37096;&#20998;&#32452;&#25104;&#12290;BTA&#23454;&#29616;&#20102;&#34013;&#29273;&#35774;&#22791;&#31649;&#29702; &#29366;&#24577;&#31649;&#29702;&#21450;&#19968;&#20123;&#24212;&#29992;&#35268;&#33539;&#12290;
    </p>
    <p>
      &#32780;BTE&#21017;&#36890;&#36807;HCI&#19982;&#21378;&#21830;&#34013;&#29273;&#33455;&#29255;&#20132;&#20114;&#20197;&#23454;&#29616;&#20102;&#34013;&#29273;&#21327;&#35758;&#26632;&#30340;&#36890;&#29992;&#21151;&#33021;&#21644;&#30456;&#20851;&#21327;&#35758;&#12290;
    </p>
    <p>
      &#21478;&#22806;&#65292;BTE&#36824;&#21253;&#25324;&#19968;&#20010;&#32479;&#19968;&#20869;&#26680;&#25509;&#21475;&#65288;GKI&#65289;&#65292;&#34013;&#29273;&#33455;&#29255;&#21378;&#21830;&#21487;&#20511;&#21161;GKI&#24555;&#36895;&#36731;&#26494;&#24471;
    </p>
    <p>
      &#31227;&#26893;&#34013;&#29273;&#21327;&#35758;&#26632;&#21040;&#20854;&#20182;&#25805;&#20316;&#31995;&#32479;&#25110;&#25163;&#26426;&#24179;&#21488;&#19978;&#12290;
    </p>
    <p>
      5.Vendor Extentions&#65288;&#21378;&#21830;&#25193;&#23637;&#65289;&#65306;&#24320;&#21457;&#32773;&#21487;&#20197;&#28155;&#21152;&#33258;&#23450;&#20041;&#25193;&#23637;&#20197;&#23454;&#29616;&#21378;&#21830;&#29305;&#23450;&#30340;&#27169;&#22359;&#21644;&#32452;&#20214;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1490355599771" ID="ID_463787309" MODIFIED="1490355616811" TEXT="Bluedroid&#x5de5;&#x5177;&#x7684;&#x4f7f;&#x7528;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1490355628500" ID="ID_838808635" MODIFIED="1490355988385" TEXT="1.&#x9ad8;&#x901a;&#x81ea;&#x5df1;&#x5f00;&#x53d1;&#x4e86;&#x4e00;&#x4e2a;&#x5de5;&#x5177;btapp">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1490355644435" ID="ID_1914301564" MODIFIED="1490355984332">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>2. btsnoop&#24037;&#20855;&#30340;&#20351;&#29992;</i></b>
    </p>
    <p>
      btsnoop_net&#36890;&#36807;&#26412;&#22320;TCP&#22871;&#25509;&#23383;&#26333;&#20809;&#34013;&#29273;snoop&#26085;&#24535;&#65292;&#36825;&#26679;&#21487;&#20197;&#20801;&#35768;
    </p>
    <p>
      hcidump&#24037;&#20855;&#23454;&#26102;&#23545;bluedroid&#36827;&#34892;debug
    </p>
    <p>
      &#38656;&#35201;&#22312;bt_stack.conf&#24403;&#20013;&#35774;&#32622;`BtSnoopLogOutput=true`
    </p>
    <p>
      $ adb forward tcp:8872 tcp:8872
    </p>
    <p>
      $ nc localhost 8872 | hcidump -r /dev/stdin
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1476337707048" ID="ID_259942704" MODIFIED="1490354913487" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#e60808"><i>wifi&#23398;&#20064;</i></font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1476337737584" ID="ID_1437865057" MODIFIED="1491357577747">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39537;&#21160;&#23618;
    </p>
    <p>
      https://wiki.archlinux.org/index.php/broadcom_wireless
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1476337747472" FOLDED="true" ID="ID_853430536" MODIFIED="1491357583177">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      sdio&#24635;&#32447;&#32467;&#26500;&#160;
    </p>
    <p>
      &#21644;usb&#24635;&#32447;&#31867;&#20284;&#65292;&#25152;&#26377;&#30340;&#36890;&#20449;&#37117;&#26159;&#30001;host&#31471;&#21457;&#36215;&#30340;&#65292;
    </p>
    <p>
      device&#31471;&#21482;&#35201;&#33021;&#22815;&#35299;&#26512;host&#31471;&#21457;&#36865;&#36807;&#26469;&#30340;&#21629;&#20196;&#65292;&#23601;&#21487;&#20197;
    </p>
    <p>
      &#23436;&#25104;&#36890;&#20449;&#30340;&#36807;&#31243;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1476337954168" ID="ID_1752355974" MODIFIED="1476338149816">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CLK&#20449;&#21495;&#65292;host&#31471;&#32473;device&#31471;&#30340;&#20449;&#21495;&#65292;
    </p>
    <p>
      &#27599;&#20010;&#26102;&#38047;&#21608;&#26399;&#21487;&#20197;&#21457;&#36865;&#19968;&#20010;cmd
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476338160808" ID="ID_1277319190" MODIFIED="1476338232495">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CMD&#20449;&#21495;&#65292;&#21452;&#21521;&#30340;&#20449;&#21495;&#65292;&#29992;&#20110;&#20256;&#36865;&#21629;&#20196;
    </p>
    <p>
      &#21644;&#22238;&#22797;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476338250440" ID="ID_1001447039" MODIFIED="1476338744430">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      DATA0-DATA3&#20449;&#21495;: &#20256;&#36755;&#25968;&#25454;&#20449;&#21495;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476338747504" ID="ID_1523260355" MODIFIED="1476338788373">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      VDD&#20449;&#21495;&#65306;&#30005;&#28304;&#20449;&#21495;
    </p>
    <p>
      VSS1,VSS2&#20449;&#21495;&#65306;&#30005;&#28304;&#22320;&#20449;&#21495;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1483631192465" ID="ID_1112368410" MODIFIED="1490067152827">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#c90101"><b>SDIO&#30340;&#20013;&#26029;</b></font></i>
    </p>
    <p>
      &#20026;&#20102;&#33021;&#35753;sdio&#21487;&#20197;&#20351;&#29992;&#20013;&#26029;&#30340;&#26041;&#24335;&#26469;&#36890;&#30693;host&#31471;&#65292;&#19968;&#20010;&#20013;&#26029;&#30340;&#21151;&#33021;&#34987;
    </p>
    <p>
      &#28155;&#21152;&#21040;&#20102;sd&#21345;&#25509;&#21475;&#30340;&#19968;&#20010;&#24341;&#33050;&#19978;&#21435;&#20102;&#12290;
    </p>
    <p>
      &#36825;&#20010;pin&#33050;&#23601;&#26159;&#32534;&#21495;8&#30340;&#24341;&#33050;&#65292;&#35813;&#24341;&#33050;&#22312;4-bit sd&#21345;&#27169;&#24335;&#30340;&#24773;&#20917;&#19979;&#26159;&#20316;&#20026;data[1]
    </p>
    <p>
      &#24341;&#33050;&#30340;&#12290;&#35813;&#24341;&#33050;&#26159;&#20351;&#29992;&#30005;&#24179;&#20013;&#26029;&#30340;&#26041;&#24335;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1483631454327" ID="ID_765089197" MODIFIED="1483632497329">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20013;&#26029;&#30340;&#26102;&#24207;
    </p>
    <p>
      1.spi&#27169;&#24335;&#21644;1-bit sd&#21345;&#27169;&#24335;&#19979;&#30340;&#20013;&#26029;
    </p>
    <p>
      &#22312;&#35813;&#27169;&#24335;&#19979;&#38754;&#65292;&#20013;&#26029;&#24341;&#33050;&#26159;&#19987;&#29992;&#30340;
    </p>
    <p>
      2. sd 4-bit&#27169;&#24335;
    </p>
    <p>
      &#30001;&#20110;&#20013;&#26029;&#24341;&#33050;&#38656;&#35201;&#21644;bit[1]&#20849;&#20139;&#65292;&#37027;&#20040;sd&#21345;&#21482;&#33021;&#22312;&#29305;&#23450;&#30340;&#26102;&#38388;
    </p>
    <p>
      &#21457;&#36865;&#20013;&#26029;&#20449;&#21495;&#65292;&#20027;&#26426;&#22312;&#29305;&#23450;&#30340;&#26102;&#38388;&#26816;&#27979;&#20013;&#26029;&#12290;&#22312;&#20013;&#26029;&#26102;&#38388;&#20869;&#65292;&#22914;&#26524;
    </p>
    <p>
      &#35813;&#24341;&#33050;&#26159;&#20302;&#20449;&#21495;&#65292;&#37027;&#20040;&#23601;&#35748;&#20026;&#21457;&#29983;&#20102;&#19968;&#27425;&#20013;&#26029;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1476338893609" ID="ID_968781439" MODIFIED="1476339295084">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>SDIO&#21629;&#20196;</b>
    </p>
    <p>
      sdio&#21629;&#20196;&#30001;6&#20010;&#23383;&#33410;&#25152;&#32452;&#25104;
    </p>
    <p>
      command:&#24320;&#22987;&#20256;&#36755;&#30340;&#21629;&#20196;&#65292;&#36890;&#36807;cmd&#32447;&#36827;&#34892;&#20256;&#36755;
    </p>
    <p>
      Response:&#20316;&#20026;&#23545;command&#30340;&#22238;&#24212;&#65292;&#20063;&#26159;&#36890;&#36807;cmd&#32447;&#20256;&#36755;
    </p>
    <p>
      Data:&#25968;&#25454;&#26159;&#21452;&#21521;&#20256;&#36755;&#30340;&#65292;&#26082;&#21487;&#20197;&#35774;&#32622;&#25104;1&#32447;&#20256;&#36755;&#65292;&#20063;&#21487;&#20197;&#22235;&#32447;&#20256;&#36755;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476350336378" ID="ID_35053823" MODIFIED="1476350521521">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Linux&#25226;mmc, sd, sdio&#19977;&#32773;&#30340;&#39537;&#21160;
    </p>
    <p>
      &#25972;&#21512;&#36827;&#20837;&#19968;&#20010;&#25991;&#20214;&#22841;&#24403;&#20013;&#65292;&#32479;&#31216;mmc&#23376;&#31995;&#32479;
    </p>
    <p>
      &#20195;&#30721;&#36335;&#24452;&#20301;&#20110; driver/mmc
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1483546853320" FOLDED="true" ID="ID_1507841872" MODIFIED="1490067136521" TEXT="sdio&#x9a71;&#x52a8;&#x4ecb;&#x7ecd;">
<node CREATED="1483546910173" ID="ID_1859345497" MODIFIED="1483547448301">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#30456;&#20851;&#30340;&#26680;&#24515;&#30340;&#39537;&#21160;&#20195;&#30721;&#20301;&#20110;mmc&#30446;&#24405;&#19979;&#38754;
    </p>
    <p>
      mmc/host &#21253;&#21547;&#30340;&#26159;&#20027;&#26426;&#36866;&#37197;&#22120;&#30340;&#39537;&#21160;, sdhci*&#25991;&#20214;&#23454;&#29616;&#20102;SDIO host&#25509;&#21475;
    </p>
    <p>
      mmc/core &#21253;&#21547;&#30340;&#26159;mmc&#23376;&#31995;&#32479;&#30340;&#26680;&#24515;&#36923;&#36753;
    </p>
    <p>
      mmc/card&#21253;&#21547;&#30340;&#26159;&#22522;&#20110;mmc/sdio &#24635;&#32447;&#30340;&#35774;&#22791;&#39537;&#21160;
    </p>
    <p>
      
    </p>
    <p>
      &#22312;&#32534;&#35793;&#30340;&#26102;&#20505;&#20351;&#33021;MMC_DEBUG&#20250;&#24456;&#26377;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1483547488085" FOLDED="true" ID="ID_1177530447" MODIFIED="1490067135409">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2. sdio &#39537;&#21160;&#30340;&#22522;&#26412;&#32467;&#26500;
    </p>
    <p>
      a. &#21021;&#22987;&#21270;
    </p>
    <p>
      static const struct sdio_device_id xxx_ids[] =
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{ SDIO_DEVICE(0xvendor, 0xproduct)&#160;&#160;&#160;&#160;&#160;},&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{ /* end: all zeroes */&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;},&#160;
    </p>
    <p>
      };
    </p>
    <p>
      static struct sdio_driver xxx_driver =
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.probe&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= xxx_probe,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.remove&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= xxx_remove,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.name&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= &quot;xxx&quot;,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.id_table&#160;&#160;&#160;&#160;&#160;&#160;&#160;= xxx_ids,
    </p>
    <p>
      };
    </p>
    <p>
      static int __init xxx_init(void)
    </p>
    <p>
      {
    </p>
    <p>
      &#8230;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ret = sdio_register_driver(&amp;xxx_driver);
    </p>
    <p>
      &#8230;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<node CREATED="1483547746709" ID="ID_1261634631" MODIFIED="1483631171544">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      probe &#21644; remove
    </p>
    <p>
      struct xxx_port{
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct sdio_func func*
    </p>
    <p>
      }
    </p>
    <p>
      static int xxx_probe(struct sdio_func func*,&#160;&#160;)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1483598127757" FOLDED="true" ID="ID_1544266574" MODIFIED="1490067132633" TEXT="PCI&#x9a71;&#x52a8;">
<node CREATED="1483598145090" ID="ID_31584946" MODIFIED="1483889108425">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>iwlwifi 0000:01:00.0: Timeout exiting D0i3 before hcmd </b>
    </p>
    <p>
      <b>https://bugzilla.kernel.org/show_bug.cgi?id=172411 </b>
    </p>
    <p>
      &#35813;&#32593;&#22336;&#25552;&#21040;&#20102;CONFIG_IWLWIFI_PCIE_RTPM&#36825;&#20010;&#37197;&#32622;&#36873;&#39033;&#22312;&#26576;&#20123;&#24179;&#21488;&#19978;
    </p>
    <p>
      &#21487;&#33021;&#20250;&#26377;&#38382;&#39064;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1484361411407" ID="ID_198435590" MODIFIED="1484361979013">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct pci_fixup {
    </p>
    <p>
      &#160;&#160;&#160;&#160;u16 vendor;&#160;&#160;&#160;&#160;&#160;/* You can use PCI_ANY_ID here of course */
    </p>
    <p>
      &#160;&#160;&#160;&#160;u16 device;&#160;&#160;&#160;&#160;&#160;/* You can use PCI_ANY_ID here of course */
    </p>
    <p>
      &#160;&#160;&#160;&#160;u32 class;&#160;&#160;&#160;&#160;&#160;&#160;/* You can use PCI_ANY_ID here too */
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned int class_shift;&#160;&#160;&#160;/* should be 0, 8, 16 */
    </p>
    <p>
      &#160;&#160;&#160;&#160;void (*hook)(struct pci_dev *dev);
    </p>
    <p>
      };
    </p>
    <p>
      &#35813;&#32467;&#26500;&#20307;&#26159;&#38024;&#23545;pci device&#35774;&#22791;&#30340;&#26576;&#20123;bug&#36827;&#34892;&#30340;&#19968;&#39033;&#20462;&#22797;
    </p>
    <p>
      <b><i>&#20241;&#30496;&#38382;&#39064;:</i></b>
    </p>
    <p>
      [ 2242.062320] iwlwifi 0000:01:00.0: quirk_resume_early_delay
    </p>
    <p>
      [ 2242.206621] dwc3 dwc3.0.auto: dwc3_suspend_common
    </p>
    <p>
      [ 2242.207836] ACPI Error: Could not enable RealTimeClock event (20150410/evxfevnt-212)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1478570008107" ID="ID_1850460194" MODIFIED="1490152121847">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>wifi&#27979;&#35797;&#22522;&#26412;&#27010;&#24565;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1478571593686" ID="ID_1203573495" MODIFIED="1478572308822">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SISO &#21333;&#36755;&#20837;&#21333;&#36755;&#20986;
    </p>
    <p>
      MIMO &#22810;&#36755;&#20837;&#22810;&#36755;&#20986;
    </p>
    <p>
      antenna &#25110;&#32773; aerial &#34920;&#31034;&#22825;&#32447;&#65292;&#19968;&#33324;&#30340;&#33455;&#29255;&#19978;&#38754;&#20250;&#26377;2&#20010;&#22825;&#32447;&#65292;
    </p>
    <p>
      &#20998;&#21035;&#21483;&#20570;Ant1 Ant2
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1478572312220" ID="ID_1646950347" MODIFIED="1478577381936">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      IEEE 802.11&#26159;&#19968;&#31995;&#21015;&#23454;&#29616;&#23616;&#22495;&#32593;mac&#23618;&#21644;phy&#23618;&#30340;&#21327;&#35758;&#30340;&#38598;&#21512;
    </p>
    <p>
      802.11a &#29256;&#26412;&#26159;&#26368;&#21407;&#22987;&#30340;802.11&#21327;&#35758;&#30340;&#21319;&#32423;&#29256;&#26412;&#65292;&#23427;&#20351;&#29992;&#21407;&#22987;&#30340;&#21327;&#35758;&#24403;&#20013;&#21046;&#23450;&#30340;
    </p>
    <p>
      &#25968;&#25454;&#38142;&#36335;&#23618;&#21327;&#35758;&#21644;&#24103;&#26684;&#24335;&#65292;&#20294;&#26159;&#29289;&#29702;&#23618;&#26159;&#22522;&#20110;OFDM&#26080;&#38480;&#25509;&#21475;&#30340;&#65292;802.11a&#24037;&#20316;&#22312;
    </p>
    <p>
      5GHZ&#30340;&#39057;&#29575;&#65292;&#20256;&#36755;&#30340;&#36895;&#29575;&#21487;&#20197;&#20174;1.5&#21040;54Mbit/s&#65292;&#30001;&#20110;&#20351;&#29992;&#20102;5GHz&#20316;&#20026;&#20256;&#36755;&#30340;&#39057;&#29575;&#65292;
    </p>
    <p>
      &#20854;&#21463;&#21040;&#20854;&#20182;&#30340;&#39057;&#29575;&#24178;&#25200;&#30340;&#26426;&#20250;&#23567;&#65292;&#20294;&#26159;&#20449;&#21495;&#20250;&#34928;&#20943;&#24471;&#26356;&#24555;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      802.11b &#20855;&#26377;&#26368;&#22823;&#30340;&#25968;&#25454;&#20256;&#36755;&#29575;&#20026;11Mbit/s,&#24182;&#19988;&#20351;&#29992;&#22312;&#21407;&#22987;&#30340;&#21327;&#35758;&#24403;&#20013;&#23450;&#20041;&#30340;&#23186;&#20307;&#35775;&#38382;
    </p>
    <p>
      &#26041;&#27861;&#65292;&#20351;&#29992;&#20102;&#21407;&#22987;&#21327;&#35758;&#24403;&#20013;&#23450;&#20041;&#30340;&#35843;&#21046;&#26041;&#27861;&#30340;&#25193;&#23637;&#26041;&#27861;&#12290;&#30001;&#20110;801.11b&#24037;&#20316;&#22312;2.4Ghz&#39057;&#27573;&#65292;
    </p>
    <p>
      &#22240;&#27492;&#20250;&#21463;&#21040;&#31867;&#20284;&#34013;&#29273;&#65292;&#24494;&#27874;&#28809;&#30340;&#24178;&#25200;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      802.11g 2003&#24180;&#25209;&#20934;&#65292;&#26159;&#31532;&#19977;&#31181;&#35843;&#21046;&#26041;&#24335;&#65292;&#24037;&#20316;&#22312;2.4GHz&#39057;&#27573;&#65292;&#20294;&#26159;&#20351;&#29992;&#36319;11a&#30456;&#21516;&#30340;&#22522;&#20110;
    </p>
    <p>
      OFDM&#30340;&#20256;&#36755;&#26041;&#26696;&#12290;11g&#30340;&#30828;&#20214;&#26159;&#21487;&#20197;&#20860;&#23481;11b&#30340;&#24037;&#20316;&#26041;&#24335;&#30340;&#65292;11g&#30340;&#26368;&#22823;&#20256;&#36755;&#36895;&#29575;&#26159;54Mbit/s
    </p>
    <p>
      
    </p>
    <p>
      802.11n &#26159;&#23545;&#21407;&#22987;&#30340;802.11&#21327;&#35758;&#30340;&#20462;&#27491;&#29256;&#26412;&#65292;&#20027;&#35201;&#26159;&#22686;&#21152;&#20102;MIMO&#21151;&#33021;&#30340;&#22825;&#32447;&#65292; 802.11n&#21487;&#20197;&#21516;&#26102;
    </p>
    <p>
      &#24037;&#20316;&#22312;2.4GHz&#21644;5GHz&#39057;&#27573;&#65292;&#23545;&#20110;5GHz&#30340;&#25903;&#25345;&#26159;&#21487;&#36873;&#30340;&#65292;&#23427;&#25903;&#25345;&#20256;&#36755;&#36895;&#29575;&#20174;54Mbit/s&#21040;600Mbit/s
    </p>
  </body>
</html></richcontent>
<node CREATED="1486434450084" ID="ID_1435579119" MODIFIED="1486436161973">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>OFDM</b>
    </p>
    <p>
      Orthogonal Frequency Division Multiplexing
    </p>
    <p>
      &#27491;&#20132;&#39057;&#20998;&#22797;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487212190729" ID="ID_660715274" MODIFIED="1487212455876">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>802.11ac&#26159;&#24403;&#21069;&#26234;&#33021;&#25163;&#26426;&#19982;&#31508;&#35760;&#26412;&#30005;&#33041;&#20027;&#27969;&#30340;802.11n&#26631;&#20934;&#22686;&#24378;&#29256;</b>
    </p>
    <p>
      &#20174;&#26680;&#24515;&#25216;&#26415;&#26469;&#30475;&#65292;802.11a c&#26159;&#22312;802.11a&#26080;&#32447;Wi-Fi&#26631;&#20934;&#20043;&#19978;&#24314;&#31435;&#36215;&#26469;&#30340;&#65292;
    </p>
    <p>
      &#21253;&#25324;&#23558;&#20351;&#29992;802.11a&#30340;5GHz&#39057;&#27573;&#12290;
    </p>
    <p>
      &#19981;&#36807;&#22312;&#36890;&#36947;&#30340;&#35774;&#32622;&#19978;&#65292;802.11ac&#23558;&#27839;&#29992;802.11n&#30340;MIMO(&#22810;&#36827;&#22810;&#20986;)&#25216;&#26415;&#65292;
    </p>
    <p>
      &#20026;&#23427;&#30340;&#20256;&#36755;&#36895;&#29575;&#36798;&#21040;1Gbps&#25171;&#19979;&#22522;&#30784;&#12290;
    </p>
    <p>
      &#27492;&#22806;&#65292;802.11ac&#36824;&#23558;&#21521;&#21518;&#20860;&#23481;802.11&#20840;&#31995;&#21015;&#29616;&#26377;&#21644;&#21363;&#23558;&#21457;&#24067;&#30340;&#25152;&#26377;&#26631;&#20934;&#21644;&#35268;&#33539;&#65292;
    </p>
    <p>
      &#21253;&#25324;&#21363;&#23558;&#21457;&#24067;&#30340;802.11s&#26080;&#32447;&#32593;&#29366;&#26550;&#26500;&#20197;&#21450; 802.11u&#31561;&#12290;
    </p>
    <p>
      &#23433;&#20840;&#24615;&#26041;&#38754;&#65292;&#23427;&#23558;&#23436;&#20840;&#36981;&#24490;802.11i&#23433;&#20840;&#26631;&#20934;&#30340;&#25152;&#26377;&#20869;&#23481;&#65292;
    </p>
    <p>
      &#20351;&#24471;&#26080;&#32447;Wi-Fi&#33021;&#22815;&#22312;&#23433;&#20840;&#24615;&#26041;&#38754;&#36798;&#21040;&#20225;&#19994;&#32423;&#29992;&#25143;&#30340;&#38656;&#27714;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489111911959" ID="ID_407977068" MODIFIED="1489111942664">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>TDLS</b>
    </p>
    <p>
      Tunneled Direct Link Setup,
    </p>
    <p>
      is &quot;a seamless way to stream media and other data faster
    </p>
    <p>
      between devices already on the same Wi-Fi network
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1478593289930" ID="ID_1884029507" MODIFIED="1478593364748">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ppm &#34920;&#31034;parts per million, &#27599;&#30334;&#19975;&#20998;&#20043;&#19968;&#65292;&#29992;&#26469;
    </p>
    <p>
      &#34920;&#31034;&#31934;&#30830;&#24230;&#30340;&#20559;&#24046;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486632559928" ID="ID_1205091660" MODIFIED="1486632591967" TEXT="wireless ap &#x548c; ad hoc network&#x7684;&#x533a;&#x522b; ">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1486632595943" ID="ID_1334573308" MODIFIED="1486633091556">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ad hoc network&#22312;&#20004;&#20010;&#25110;&#32773;&#26356;&#22810;&#30340;&#35774;&#22791;&#20043;&#38388;&#20351;&#29992;&#36830;&#25509;&#32780;&#19981;&#38656;&#35201;&#20351;&#29992;&#26080;&#32447;&#25509;&#20837;&#28857;&#65292;
    </p>
    <p>
      &#22312;&#19968;&#23450;&#30340;&#36317;&#31163;&#33539;&#22260;&#20043;&#20869;&#65292;&#35774;&#22791;&#20043;&#38388;&#21487;&#20197;&#36827;&#34892;&#30452;&#25509;&#30340;&#20132;&#27969;&#12290;
    </p>
    <p>
      ad hoc&#27169;&#24335;&#38656;&#35201;&#20351;&#29992;&#35774;&#22791;&#24403;&#20013;&#30340;&#21478;&#19968;&#20010;&#32593;&#21345;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486633096525" ID="ID_1262685891" MODIFIED="1486635467484">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      AP&#27169;&#24335;&#20801;&#35768;&#20320;&#20351;&#29992;&#35774;&#22791;&#24403;&#20013;&#30340;&#30456;&#21516;&#19968;&#22359;&#32593;&#21345;&#21019;&#24314;hotspot&#65292;
    </p>
    <b><font color="#d90909">nmcli con up Hotspot ifname YOUR_WIFI_INTERFACE</font></b>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1487845443257" ID="ID_1269314546" MODIFIED="1487845539353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FCC&#35748;&#35777;
    </p>
    <p>
      Federal Communications Commission
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1489129064754" ID="ID_1311822463" MODIFIED="1489129072571" TEXT="wifi security">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1489129079290" ID="ID_1861316064" MODIFIED="1490153233366">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1. WEP, &#26089;&#26399;802.11&#21327;&#35758;&#24403;&#20013;&#30340;&#21152;&#23494;&#26041;&#27861;, Wired Equivalent Privacy</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489129232242" ID="ID_1871398313" MODIFIED="1489129437627">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2. WPA, Wireless Protective Access</b>
    </p>
    <p>
      WPA&#26377;&#20004;&#31181;&#26041;&#24335;: 802.1x(Enterprise)&#21644;PSK(shared key)
    </p>
    <p>
      802.1x&#20351;&#29992;EAP&#35748;&#35777;&#26041;&#27861;&#65292; PSK&#21017;&#22312;&#25509;&#20837;&#28857;&#21644;&#23458;&#25143;&#35774;&#22791;&#20043;&#38388;&#20849;&#20139;&#19968;&#20010;key
    </p>
    <p>
      wpa&#20351;&#29992;TKIP&#21152;&#23494;&#26041;&#27861;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489129509712" ID="ID_263839740" MODIFIED="1489133265692">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.WPA2/802.11i</b>
    </p>
    <p>
      &#22522;&#26412;&#19978;&#36319;WPA&#30340;&#24418;&#24335;&#24046;&#19981;&#22810;&#65292;&#21482;&#26159;&#23427;&#30340;&#21152;&#23494;&#21327;&#35758;&#20351;&#29992;&#30340;&#26159;
    </p>
    <p>
      CCMP, TKIP&#26159;&#21487;&#36873;&#30340;&#19968;&#31181;&#21152;&#23494;&#21327;&#35758;&#12290;
    </p>
    <p>
      &#23545;&#20110;CCMP&#21152;&#23494;&#21327;&#35758;&#65292;&#20351;&#29992;&#30340;&#21152;&#23494;&#26041;&#27861;&#26159;AES
    </p>
    <p>
      &#23545;&#20110;TKIP&#21152;&#23494;&#21327;&#35758;&#65292;&#20351;&#29992;&#30340;&#21152;&#23494;&#31639;&#27861;&#26159;RC4
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489132660406" ID="ID_279946887" MODIFIED="1489133345531">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#d70707">&#23545;&#20110;&#21333;&#25773;&#30340;&#27010;&#24565;&#65292; &#20351;&#29992;&#30340;&#26159;pairwise key &#65288;Pairwise Cipher&#65289;</font></i>
    </p>
    <p>
      <i><font color="#d70707">&#23545;&#20110;&#24191;&#25773;&#30340;&#27010;&#24565;&#65292;&#20351;&#29992;&#30340;&#26159;group key (Group Cipher)</font></i>
    </p>
    <p>
      <i><font color="#d70707">&#27492;&#22806;&#65292;&#23545;&#20110;key&#30340;&#33719;&#21462;&#26377;preshared keys&#21644;server-based keys&#20004;&#20010;&#27010;&#24565;</font></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1490153237214" ID="ID_1229266219" MODIFIED="1490154048347">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4. PEAP
    </p>
    <p>
      PEAP---Protected Extensible Authentication Protocol
    </p>
    <p>
      PEAP&#30340;&#35774;&#35745;&#36319;EAP-TTLS&#30340;&#35774;&#35745;&#24456;&#30456;&#20284;&#65292;&#37117;&#38656;&#35201;&#19968;&#20010;&#20301;&#20110;&#26381;&#21153;&#31471;&#30340;PKI&#30340;&#35777;&#20070;&#65292;
    </p>
    <p>
      &#29992;&#20110;&#21019;&#24314;&#19968;&#20010;&#23433;&#20840;&#30340;TLS&#36890;&#36947;&#65292;&#35813;&#36890;&#36947;&#29992;&#20110;&#20445;&#25252;&#29992;&#25143;&#30340;&#35748;&#35777;&#12290;&#24182;&#19988;&#20351;&#29992;&#26381;&#21153;&#31471;&#30340;
    </p>
    <p>
      &#20844;&#38053;&#35777;&#20070;&#26469;&#35748;&#35777;&#30456;&#20851;&#30340;&#26381;&#21153;&#12290;&#38543;&#21518;&#20301;&#20110;&#36890;&#36947;&#20869;&#37096;&#30340;&#35748;&#35777;&#20449;&#24687;&#30340;&#20132;&#25442;&#26159;&#34987;&#21152;&#23494;&#36807;&#24471;&#65292;
    </p>
    <p>
      &#36825;&#26679;&#29992;&#25143;&#30340;&#35777;&#20070;&#23601;&#19981;&#24597;&#34987;&#31363;&#21548;&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1478597840581" ID="ID_1200259656" MODIFIED="1490354937428">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>wifi&#27979;&#35797;&#27169;&#25311;&#24037;&#20855;</b></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1478597907875" ID="ID_84297615" MODIFIED="1478598283864">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e81313"><b>mac80211_hwsim</b></font>
    </p>
    <p>
      &#35813;&#24037;&#20855;&#26159;&#30001;&#20869;&#26680;&#25552;&#20379;&#30340;&#19968;&#22871;&#27169;&#25311;80211&#21327;&#35758;&#26632;&#30340;&#36719;&#20214;&#27169;&#22359;&#65292;
    </p>
    <p>
      &#21487;&#20197;&#34987;&#29992;&#26469;&#27979;&#35797;mac80211&#30340;&#22823;&#37096;&#20998;&#30340;&#21151;&#33021;&#21644;&#29992;&#25143;&#31354;&#38388;&#30340;&#24037;&#20855;
    </p>
    <p>
      &#65288;&#27604;&#22914;hotapd&#21644;wap_supplicant&#65289;&#12290;
    </p>
    <p>
      mac80211_hwsim&#20869;&#26680;&#27169;&#22359;&#26377;&#19968;&#20010;radio&#21442;&#25968;&#65292;&#29992;&#26469;&#34920;&#31034;&#27169;&#25311;&#30340;
    </p>
    <p>
      radio&#30340;&#20010;&#25968;&#65292;&#40664;&#35748;&#30340;&#20010;&#25968;&#26159;2&#20010;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1481278387001" ID="ID_1157547020" MODIFIED="1481289217037">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    1. wpa_cli &#24037;&#20855;&#21487;&#20197;&#26174;&#31034;&#24403;&#21069;wifi&#30340;&#27169;&#24335;&#29366;&#24577; 2. hostapd /data/misc/wifi/hostapd.conf&#160; &#21551;&#21160;hostap&#21518;&#21488;
  </body>
</html></richcontent>
</node>
<node CREATED="1487645617002" ID="ID_1097251120" MODIFIED="1487768044522">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      supplicant&#21629;&#20196;&#34892;&#25805;&#20316;:
    </p>
    <p>
      1.&#36830;&#25509;&#21040;AP
    </p>
    <p>
      wpa_supplicant -i wlan0 -c ap.conf
    </p>
    <p>
      2.&#33719;&#24471;IP&#22320;&#22336;
    </p>
    <p>
      dhcpcd wlan0
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1479894956954" ID="ID_706981663" MODIFIED="1490149016159" TEXT="wifi&#x603b;&#x4f53;&#x67b6;&#x6784;&#x56fe;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479894972349" ID="ID_412357435" MODIFIED="1483358721718">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/wifi-architecture.png" />
  </body>
</html></richcontent>
<node CREATED="1479895492890" ID="ID_1227244016" MODIFIED="1483358728791" TEXT="wpa_supplicant&#x5206;&#x6790;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479895510969" ID="ID_994502719" MODIFIED="1479895604777">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.&#24635;&#20307;&#20195;&#30721;&#32467;&#26500;</b>
    </p>
    <p>
      &#9500;&#9472;&#9472; Android.mk
    </p>
    <p>
      &#9500;&#9472;&#9472; CleanSpec.mk
    </p>
    <p>
      &#9500;&#9472;&#9472; CONTRIBUTIONS
    </p>
    <p>
      &#9500;&#9472;&#9472; COPYING
    </p>
    <p>
      &#9500;&#9472;&#9472; hostapd
    </p>
    <p>
      &#9500;&#9472;&#9472; hs20
    </p>
    <p>
      &#9500;&#9472;&#9472; MODULE_LICENSE_BSD_LIKE
    </p>
    <p>
      &#9500;&#9472;&#9472; NOTICE
    </p>
    <p>
      &#9500;&#9472;&#9472; README
    </p>
    <p>
      &#9500;&#9472;&#9472; src
    </p>
    <p>
      &#9492;&#9472;&#9472; wpa_supplicant
    </p>
    <p>
      hostapd&#26159;&#25163;&#26426;&#36827;&#20837;&#20102;softap&#27169;&#24335;&#24403;&#20013;
    </p>
    <p>
      wpa_supplicant&#26159;station&#27169;&#24335;&#65292;&#20063;&#25104;&#20026;manager&#27169;&#24335;
    </p>
    <p>
      &#36825;&#20004;&#31181;&#27169;&#24335;&#19979;&#38754;&#37117;&#20250;&#20351;&#29992;&#21040;src&#30446;&#24405;&#24403;&#20013;&#30340;&#36890;&#29992;&#30340;&#20195;&#30721;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1479896728138" ID="ID_1059100382" MODIFIED="1489481819922">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/wpa_supplicant_architecture.jpg" />
  </body>
</html></richcontent>
<node CREATED="1479897609755" ID="ID_850948940" MODIFIED="1489481851267" TEXT="wpa&#x7684;&#x4e0a;&#x884c;&#x63a5;&#x53e3;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479897672074" ID="ID_624324670" MODIFIED="1479897721743">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      wpa&#23454;&#29616;&#20102;&#20004;&#31181;&#19978;&#34892;&#30340;&#36890;&#20449;&#26426;&#21046;:
    </p>
    <p>
      &#19968;&#31181;&#26159;&#20351;&#29992;&#20256;&#32479;&#30340;dbus&#27169;&#24335;
    </p>
    <p>
      &#21478;&#19968;&#31181;&#26159;&#20351;&#29992;unix domain socket&#26426;&#21046;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1479897743346" ID="ID_942418703" MODIFIED="1489482883449">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19978;&#34892;&#25509;&#21475;&#30340;&#23454;&#29616;&#20301;&#20110;&#19979;&#21015;&#25991;&#20214;&#24403;&#20013;:
    </p>
    <p>
      <b><i>wpa_ctrl.h wpa_ctrl.c ctrl_iface_unix.c ctrl_iface.h ctrl_iface.c</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1489482584774" ID="ID_1988464962" MODIFIED="1489482624888">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct wpa_ctrl * wpa_ctrl_open(const char *ctrl_path)
    </p>
    <p>
      &#24314;&#31435;&#19968;&#20010;&#19982;wpa&#26381;&#21153;&#31471;&#36827;&#34892;&#36890;&#20449;&#30340;unix domain socket&#23458;&#25143;&#31471;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489482639276" ID="ID_1954317092" MODIFIED="1489482659629">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void wpa_ctrl_close(struct wpa_ctrl *ctrl)
    </p>
    <p>
      &#38144;&#27585;&#24050;&#32463;&#24314;&#31435;&#30340;&#23458;&#25143;&#31471;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489482709707" ID="ID_1689480702" MODIFIED="1489482735715">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int wpa_ctrl_request(struct wpa_ctrl *ctrl, const char *cmd, size_t cmd_len,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;char *reply, size_t *reply_len,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;void (*msg_cb)(char *msg, size_t len))
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489482754730" ID="ID_1415418149" MODIFIED="1489482785290">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int wpa_ctrl_attach(struct wpa_ctrl *ctrl);
    </p>
    <p>
      /* &#27880;&#20876; &#26576;&#20010; control interface &#20316;&#20026; monitor interface */
    </p>
    <p>
      int wpa_ctrl_detach(struct wpa_ctrl *ctrl);
    </p>
    <p>
      /* &#25764;&#38144;&#26576;&#20010; monitor interface &#20026; &#26222;&#36890;&#30340; control interface&#160;&#160;*/
    </p>
    <p>
      int wpa_ctrl_pending(struct wpa_ctrl *ctrl)&#65307;
    </p>
    <p>
      /* &#21028;&#26029;&#26159;&#21542;&#26377;&#25346;&#36215;&#30340;event &#20107;&#20214; */
    </p>
    <p>
      int wpa_ctrl_recv(struct wpa_ctrl *ctrl, char *reply, size_t *reply_len);
    </p>
    <p>
      /* &#33719;&#21462;&#25346;&#36215;&#30340;event &#20107;&#20214; */
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489482910751" ID="ID_1864407774" MODIFIED="1489483016727">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>ctrl_iface_unix.c&#26381;&#21153;&#31471;&#30340;&#22788;&#29702;&#20989;&#25968;</b>
    </p>
    <p>
      static void wpa_supplicant_ctrl_iface_receive(int sock, void *eloop_ctx,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;void *sock_ctx)
    </p>
    <p>
      /* &#25509;&#25910;&#24182;&#35299;&#26512;client&#21457;&#36865;request&#21629;&#20196;&#65292;&#28982;&#21518;&#26681;&#25454;&#19981;&#21516;&#30340;&#21629;&#20196;&#35843;&#29992;&#24213;&#23618;&#19981;&#21516;&#30340;&#22788;&#29702;&#20989;&#25968;&#65307;&#28982;&#21518;&#23558;&#33719;&#24471;response&#32467;&#26524;&#22238;&#39304;&#21040; client &#32467;&#28857;&#12290;*
    </p>
    <p>
      static void wpa_supplicant_ctrl_iface_send(struct ctrl_iface_priv *priv,
    </p>
    <p>
      &#160;&#160;&#160;int level, const char *buf,
    </p>
    <p>
      &#160;&#160;&#160;size_t len)
    </p>
    <p>
      /* &#21521;&#27880;&#20876;&#30340;monitor interfaces &#20027;&#21160;&#21457;&#36865;event&#20107;&#20214; */
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1489482506401" ID="ID_1629906117" MODIFIED="1489482537786">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>ctrl_iface.h&#21644;ctrl_iface.c&#20027;&#35201;&#23454;&#29616;&#20102; </b>
    </p>
    <p>
      <b>&#21508;&#31181;request&#21629;&#20196;&#30340;&#24213;&#23618;&#22788;&#29702;&#20989;&#25968;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1479897948643" ID="ID_753665034" MODIFIED="1489481824785" TEXT="wpa&#x7684;&#x4e0b;&#x884c;&#x63a5;&#x53e3;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479897971203" ID="ID_1420079301" MODIFIED="1479899505676">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19979;&#34892;&#25509;&#21475;&#20027;&#35201;&#23454;&#29616;&#22914;&#19979;&#19977;&#20010;&#31181;&#31867;&#30340;&#20449;&#24687;&#36890;&#20449;:
    </p>
    <p>
      PF_INET &#36890;&#36807;ioctl&#25509;&#21475;&#21521;kernel&#33719;&#21462;&#20449;&#24687;
    </p>
    <p>
      PE_NETLINK &#25509;&#25910;&#20174;kernel&#19978;&#25253;&#30340;event
    </p>
    <p>
      PF_PACKET &#25509;&#21475;&#65292;&#20027;&#35201;&#29992;&#20110;&#21521;kernel&#21457;&#36865;802.1x&#25253;&#25991;
    </p>
  </body>
</html></richcontent>
<node CREATED="1489481941729" ID="ID_119273675" MODIFIED="1489482245827">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20854;&#20013;driver.h, drivers.c, driver_wext.h&#21644; driver_wext.c&#23454;&#29616; </b>
    </p>
    <p>
      <b>PF_INET socket&#25509;&#21475;&#21644;PF_NETLINK socket&#25509;&#21475; </b>
    </p>
    <p>
      drivers.c&#30340;&#20027;&#35201;&#20316;&#29992;&#23601;&#26159;&#23558;&#21508;&#20010;&#24213;&#23618;&#30340;&#39537;&#21160;&#30340;ops&#25509;&#21475;&#22768;&#26126;
    </p>
    <p>
      &#20986;&#26469;,&#20363;&#22914;
    </p>
    <p>
      extern struct wpa_driver_ops wpa_driver_nl80211_ops
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1489482015282" ID="ID_438131556" MODIFIED="1489482031353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>l2_packet.h&#21644;l2_packet_linux.c&#23454;&#29616; </b>
    </p>
    <p>
      <b>PF_PACKET socket&#25509;&#21475;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1479900052947" ID="ID_1537409773" MODIFIED="1479900389908">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      RFC4137&#25991;&#26723;&#23450;&#20041;&#20102;EAP&#29366;&#24577;&#26426;
    </p>
    <p>
      802.1X&#25991;&#26723;&#23450;&#20041;&#20102;EAPOL&#29366;&#24577;&#26426;
    </p>
    <p>
      wpas&#26681;&#25454;&#36825;&#20004;&#20010;&#25991;&#26723;&#23454;&#29616;&#20102;&#36825;&#20004;&#20010;&#29366;&#24577;&#26426;
    </p>
    <p>
      wpas&#36824;&#23450;&#20041;&#20102;&#33258;&#24049;&#30340;&#29366;&#24577;&#26426;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1479900434466" FOLDED="true" ID="ID_966620068" MODIFIED="1483358740229" TEXT="wpa_supplicant&#x4ee3;&#x7801;&#x521d;&#x59cb;&#x5316;&#x6d41;&#x7a0b;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479900456138" ID="ID_513745837" MODIFIED="1479900497977">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20837;&#21475;&#20989;&#25968;external/wpa_supplicant_8/wpa_supplicant/main.c
    </p>
    <p>
      &#27492;&#31243;&#24207;&#22312;wifi.c&#20013;&#30340;wifi_start_supplicant&#20013;&#34987;&#21551;&#21160;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1482371488506" ID="ID_1964400840" MODIFIED="1483407972813" TEXT="wpa_supplicant&#x4e0e;&#x5185;&#x6838;&#x7684;&#x901a;&#x4fe1;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1482371605033" ID="ID_791863035" MODIFIED="1482372113883">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20869;&#26680;&#24403;&#20013;&#30340;nl80211&#27169;&#22359;&#20351;&#29992;&#30340;&#26159;generic netlink&#25509;&#21475;
    </p>
    <p>
      &#20195;&#30721;&#20301;&#32622;net/wireless/nl80211.c
    </p>
    <p>
      nl80211&#28155;&#21152;&#21040;generic netlink&#24403;&#20013;&#30340;family&#22914;&#19979;
    </p>
    <p>
      static struct genl_family nl80211_fam = {
    </p>
    <p>
      &#160;&#160;&#160;&#160;.id = GENL_ID_GENERATE,&#160;&#160;&#160;&#160;&#160;/* don't bother with a hardcoded ID */
    </p>
    <p>
      &#160;&#160;&#160;&#160;.name = NL80211_GENL_NAME,&#160;&#160;/* have users key off the name instead */
    </p>
    <p>
      &#160;&#160;&#160;&#160;.hdrsize = 0,&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* no private header */
    </p>
    <p>
      &#160;&#160;&#160;&#160;.version = 1,&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* no particular meaning now */
    </p>
    <p>
      &#160;&#160;&#160;&#160;.maxattr = NL80211_ATTR_MAX,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.netnsok = true,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.pre_doit = nl80211_pre_doit,
    </p>
    <p>
      &#160;&#160;&#160;&#160;.post_doit = nl80211_post_doit,
    </p>
    <p>
      };
    </p>
    <p>
      
    </p>
    <p>
      struct genl_ops nl80211_ops&#26159;nl80211&#23545;&#24212;&#30340;ops,&#27599;&#31181;wifi&#30340;&#21629;&#20196;&#37117;&#20250;&#23545;&#24212;
    </p>
    <p>
      &#19968;&#20010;&#22788;&#29702;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1482372149821" ID="ID_675689822" MODIFIED="1482372245086">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      wpa_supplicant&#20250;&#21019;&#24314;&#20004;&#20010;socket,
    </p>
    <p>
      &#19968;&#20010;&#29992;&#20110;&#21457;&#36865;&#28040;&#24687;&#21040;&#20869;&#26680;&#65292;&#21478;&#19968;&#20010;&#29992;&#20110;&#20174;&#20869;&#26680;&#24403;&#20013;&#25509;&#25910;
    </p>
    <p>
      &#22810;&#25773;&#28040;&#24687;&#12290;
    </p>
    <p>
      &#21487;&#20197;&#21442;&#32771;&#20989;&#25968;wpa_driver_nl80211_init_nl_global
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1482385494062" ID="ID_783307510" MODIFIED="1487645589919">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#23545;&#20110;&#20869;&#26680;wifi&#21327;&#35758;&#26632;&#30340;&#26356;&#39640;&#23618;&#27425;&#30340;&#25551;&#36848;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1482385553686" ID="ID_1458266847" MODIFIED="1482385741557">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#25968;&#25454;&#36335;&#24452;&#21644;&#25511;&#21046;&#36335;&#24452;
    </p>
    <p>
      Data path:
    </p>
    <p>
      the data being received is passed from the wireless driver
    </p>
    <p>
      to the netdev core (usually using netif_rx()). From there the net core
    </p>
    <p>
      will pass it through the TCP/IP stack code and will queue it on the relevant
    </p>
    <p>
      sockets from which the userspace process will read it. On the Tx path packets
    </p>
    <p>
      will be sent from the netdev core to the wireless driver using the
    </p>
    <p>
      ndo_start_xmit() callback. The driver registers
    </p>
    <p>
      (like other netdevices such as an ethernet driver) a set of operations
    </p>
    <p>
      callbacks by using the struct net_device_ops.
    </p>
    <p>
      
    </p>
    <p>
      Control path:
    </p>
    <p>
      This path is how userspace controls the WiFi interface/device
    </p>
    <p>
      and performs operations like scan / authentication / association.
    </p>
    <p>
      The userspace interface is based on netlink and called nl80211
    </p>
    <p>
      (see include/uapi/linux/nl80211.h). You can send commands and get events in response.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1482385791252" ID="ID_772346064" MODIFIED="1482389590598">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.nl80211&#25511;&#21046;&#21629;&#20196;&#30340;&#19979;&#21457;&#36335;&#24452;
    </p>
    <p>
      nl80211&#22312;&#21021;&#22987;&#29366;&#24577;&#19979;&#20250;&#34987;&#20869;&#26680;&#30340;cfg80211&#27169;&#22359;&#20351;&#29992;&#21040;&#65292;&#35813;&#27169;&#22359;&#20250;&#35843;&#29992;
    </p>
    <p>
      &#20869;&#26680;&#24403;&#20013;&#30340;nl80211&#24403;&#20013;&#30340;&#22788;&#29702;&#20989;&#25968;&#26469;&#22788;&#29702;&#20855;&#20307;&#30340;&#21629;&#20196;&#12290;cfg80211&#20250;&#35843;&#29992;
    </p>
    <p>
      &#30828;&#20214;&#30456;&#20851;&#30340;&#20989;&#25968;&#26469;&#22788;&#29702;&#36825;&#20123;&#21629;&#20196;&#65292;&#23545;&#20110;Full Mac&#31867;&#22411;&#30340;&#35774;&#22791;&#65292;cfg80211&#30452;&#25509;
    </p>
    <p>
      &#35843;&#29992;&#35813;&#35774;&#22791;&#27880;&#20876;&#30340;&#24213;&#23618;&#20989;&#25968;&#65292;&#35774;&#22791;&#36890;&#36807;cfg80211_ops&#27880;&#20876;&#19968;&#31995;&#21015;&#30340;&#22788;&#29702;&#20989;&#25968;&#12290;
    </p>
    <p>
      &#27604;&#22914;drivers/net/wireless/brcm80211/brcmfmac/wl_cfg80211.c&#23601;&#26159;full mac&#30340;&#26550;&#26500;
    </p>
    <p>
      Soft Mac&#31867;&#22411;&#30340;&#32593;&#21345;&#35774;&#22791;&#65292;&#39318;&#20808;&#20250;&#21033;&#29992;mac80211&#27169;&#22359;&#23454;&#29616;mac&#23618;&#65292;&#22312;&#36825;&#31181;
    </p>
    <p>
      &#24773;&#20917;&#19979;cfg80211&#20250;&#30452;&#25509;&#36319;mac80211&#23618;&#23545;&#35805;&#65292;mac80211&#23618;&#20250;&#36319;&#24213;&#23618;&#30340;&#30828;&#20214;
    </p>
    <p>
      &#36827;&#34892;&#36890;&#20449;&#30340;&#24037;&#20316;&#65292;iwlwifi&#23601;&#26159;&#36825;&#31181;&#26550;&#26500;&#30340;&#12290;
    </p>
    <p>
      mac80211&#36890;&#36807;&#32467;&#26500;&#20307;cfg80211_ops&#21521;cfg80211&#27880;&#20876;(&#20195;&#30721;&#20301;&#20110;net/mac80211/cfg.c)
    </p>
    <p>
      &#30828;&#20214;&#36890;&#36807;&#32467;&#26500;&#20307;ieee80211_ops&#21521;mac80211&#27880;&#20876;(&#20195;&#30721;&#20301;&#20110;drivers/net/wireless/iwlwifi/mvm/mac80211.c)
    </p>
    <p>
      
    </p>
    <p>
      hw probe---&gt;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1482399368348" ID="ID_767187212" MODIFIED="1482399527085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      The op_mode (which stands
    </p>
    <p>
      for operation mode) is the part that handles fw API on one hand, and
    </p>
    <p>
      mac80211 API on the other hand.
    </p>
    iwl-trans.h and <b>iwl-op-mode.h</b>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482390286727" FOLDED="true" ID="ID_1625119962" MODIFIED="1484548753989" TEXT="&#x57fa;&#x672c;&#x6982;&#x5ff5;&#x63cf;&#x8ff0;">
<node CREATED="1482390305471" ID="ID_1149285260" MODIFIED="1482390854691">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>MSDU</b>: mac service data unit
    </p>
    <p>
      &#22312;mac&#23618;&#30340;&#20256;&#36755;&#21333;&#20803;
    </p>
    <p>
      <b>MPDU</b>: mac protocol data unit
    </p>
    <p>
      &#20174;mac&#23618;&#20256;&#36755;&#21040;phy&#23618;&#30340;&#20256;&#36755;&#21333;&#20803;
    </p>
    <p>
      <b>AMSDU</b>: &#24847;&#24605;&#26159;&#34701;&#21512;&#30340;MSDU,&#35813;&#25968;&#25454;&#21333;&#20803;&#26159;&#29992;&#20110;&#20174;mac&#23618;&#20256;&#36755;&#21040;
    </p>
    <p>
      phy&#30340;&#65292;&#20182;&#20204;&#30340;&#29305;&#28857;&#26159;&#20855;&#26377;&#19968;&#20010;&#22836;&#22810;&#20010;&#24103;&#65292;&#20182;&#20204;&#26159;&#21457;&#36865;&#21040;&#21516;&#19968;&#20010;&#23458;&#25143;&#31471;&#30340;
    </p>
    <p>
      &#30456;&#21516;&#30340;class&#24403;&#20013;&#30340;&#65292;AMSDU&#20250;&#22312;mac&#23618;&#32452;&#35013;&#28982;&#21518;&#25512;&#36865;&#21040;MPDU&#24403;&#20013;
    </p>
    <p>
      <b>AMPDU</b>&#65306;&#24847;&#24605;&#26159;&#34701;&#21512;&#36807;&#30340;MPDU&#65292;&#20182;&#20204;&#20250;&#34987;&#25512;&#36865;&#21040;&#19968;&#20010;<b>PPDU</b>(physical protol data unit)
    </p>
    <p>
      &#24403;&#20013;
    </p>
    <p>
      
    </p>
    <p>
      AMPDU&#27604;AMSDU&#30340;&#21487;&#38752;&#24615;&#35201;&#24378;&#24456;&#22810;&#65292;&#32780;&#19988;AMPDU&#26368;&#22823;&#25903;&#25345;64K&#30340;&#25968;&#25454;&#21253;&#65292;
    </p>
    <p>
      &#22823;&#22810;&#25968;&#31995;&#32479;&#20542;&#21521;&#20110;&#20351;&#29992;AMPDU
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1481620046145" FOLDED="true" ID="ID_441546622" MODIFIED="1490354957183">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#f51212">&#36719;&#20214;&#26550;&#26500;</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1481620060469" ID="ID_365427708" MODIFIED="1481620232641">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      wpa_supplicant core functionality
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1481620368964" ID="ID_651044405" MODIFIED="1481620753853">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      wpa_supplicant.c &#31243;&#24207;&#21021;&#22987;&#21270;&#65292;&#20027;&#25511;&#21046;&#24490;&#29615;
    </p>
    <p>
      events.c &#39537;&#21160;&#20107;&#20214;&#22788;&#29702;
    </p>
    <p>
      wpa_supplicant_i.h wpa&#26680;&#24515;&#23618;&#30340;&#20869;&#37096;&#23450;&#20041;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1481620087677" ID="ID_999795253" MODIFIED="1481620235584" TEXT="Generic helper functions">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1481620758683" ID="ID_250802346" MODIFIED="1481620770020">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      eloop.c and eloop.h
    </p>
    <p>
      common.c and common.h
    </p>
    <p>
      defs.h
    </p>
    <p>
      l2_packet.h, l2_packet_linux.c, and l2_packet_pcap.c
    </p>
    <p>
      pcsc_funcs.c and pcsc_funcs.h
    </p>
    <p>
      priv_netlink.h
    </p>
    <p>
      version.h
    </p>
    <p>
      wireless_copy.h
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1481620103733" ID="ID_469186570" MODIFIED="1481620237912" TEXT="Control interface ">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1481620816417" FOLDED="true" ID="ID_1217174049" MODIFIED="1484548753989">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25511;&#21046;&#25509;&#21475;&#21487;&#20197;&#34987;&#29992;&#26469;&#33719;&#21462;&#24403;&#21069;&#30340;&#29366;&#24577;&#20449;&#24687;&#21644;&#26469;&#33258;&#22806;&#37096;&#31243;&#24207;&#30340;&#31649;&#29702;&#25805;&#20316;
    </p>
    <p>
      &#30446;&#21069;&#26377;&#19968;&#20010;&#22522;&#20110;&#21629;&#20196;&#34892;&#30340;&#25509;&#21475;&#31034;&#20363; wpa_cli
    </p>
    <p>
      ctrl_iface.c and ctrl_iface.h
    </p>
    <p>
      ctrl_iface_unix.c
    </p>
    <p>
      ctrl_iface_udp.c
    </p>
    <p>
      ctrl_iface_named_pipe.c
    </p>
    <p>
      wpa_ctrl.c and wpa_ctrl.h
    </p>
    <p>
      wpa_cli.c
    </p>
  </body>
</html></richcontent>
<node CREATED="1481621746343" ID="ID_1964874779" MODIFIED="1481621758731">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      wpa_cli -iwlan0 #&#35813;&#21629;&#20196;&#25191;&#34892;&#21518;&#65292;&#23558;&#36827;&#20837;wpa_cli&#36827;&#31243;
    </p>
    <p>
      ADD_NETWORK #&#20551;&#35774;wpa_supplicant&#36820;&#22238;&#30340;&#26032;&#32593;&#32476;&#37197;&#32622;&#39033;&#32534;&#21495;&#20026;0
    </p>
    <p>
      SET_NETWORK 0 ssid &quot;Android&quot; #&#35774;&#32622;0&#21495;&#32593;&#32476;&#30340;ssid&#20026;&quot;Test&quot;
    </p>
    <p>
      SET_NETWORK 0 key_mgmt WPA-PSK #&#35774;&#32622;0&#21495;&#32593;&#32476;&#30340;key_mgmt&#20026;&quot;WPA-PSK&quot;
    </p>
    <p>
      SET_NETWORK 0 psk &quot;12345678&quot; #&#35774;&#32622;0&#21495;&#32593;&#32476;&#30340;psk&#20026;&quot;12345678&quot;
    </p>
    <p>
      ENABLE_NETWORK 0 #&#20351;&#33021;0&#21495;&#32593;&#32476;&#65292;&#23427;&#23558;&#35302;&#21457;wpa_supplicant&#25195;&#25551;&#12289;&#20851;&#32852;&#31561;&#19968;&#31995;&#21015;&#25805;&#20316;&#30452;&#21040;&#21152;&#20837;&#26080;&#32447;&#32593;&#32476;&quot;Android&quot;
    </p>
    <p>
      SELECT_NETWORK network_id #&#22914;&#26524;&#32593;&#32476;&#32534;&#21495;&#19981;&#20026;0&#65292;&#38656;&#35201;&#25191;&#34892;select&#65292;&#25165;&#20250;&#35302;&#21457;&#25195;&#25551;&#20851;&#32852;
    </p>
    <p>
      CTRL+C #&#36864;&#20986;wpa_cli
    </p>
    <p>
      dhcpcd wlan0 #&#21551;&#21160;dhcpd&#65292;wlan0&#20026;&#26080;&#32447;&#25509;&#21475;&#35774;&#22791;&#21517;&#12290;dhcpcd&#21487;&#20026;&#25163;&#26426;&#20174;AP&#37027;&#33719;&#21462;&#19968;&#20010;IP&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1481622169152" ID="ID_612479407" MODIFIED="1481622295212">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19978;&#34892;&#25509;&#21475;&#23454;&#29616;&#20102;unix domain socket&#25509;&#21475;
    </p>
    <p>
      client&#31471;&#20027;&#35201;&#21151;&#33021;&#20989;&#25968;&#65306;
    </p>
    <p>
      int wpa_ctrl_request();&#160;//&#29992;&#25143;&#27169;&#22359;&#30452;&#25509;&#35843;&#29992;&#35813;&#20989;&#25968;&#23545;wpa_supplicant&#21457;&#36865;&#21629;&#20196;&#24182;&#33719;&#21462;&#25152;&#38656;&#20449;&#24687;
    </p>
    <p>
      int wpa_ctrl_recv(); //&#33719;&#21462;&#25346;&#36215;&#30340;event &#20107;&#20214;
    </p>
    <p>
      
    </p>
    <p>
      server&#31471;&#26368;&#20027;&#35201;&#30340;&#20004;&#20010;&#20989;&#25968;&#20026;&#65306;
    </p>
    <p>
      static void wpa_supplicant_ctrl_iface_receive()&#65307;
    </p>
    <p>
      /* &#25509;&#25910;&#24182;&#35299;&#26512;client&#21457;&#36865;request&#21629;&#20196;&#65292;&#28982;&#21518;&#26681;&#25454;&#19981;&#21516;&#30340;&#21629;&#20196;&#35843;&#29992;&#24213;&#23618;&#19981;&#21516;&#30340;&#22788;&#29702;&#20989;&#25968;&#65307;
    </p>
    <p>
      &#160;* &#28982;&#21518;&#23558;&#33719;&#24471;response&#32467;&#26524;&#22238;&#39304;&#21040; client &#32467;&#28857;&#12290;
    </p>
    <p>
      &#160;*/&#160;
    </p>
    <p>
      static void wpa_supplicant_ctrl_iface_send()
    </p>
    <p>
      /* &#21521;&#27880;&#20876;&#30340;monitor interfaces &#20027;&#21160;&#21457;&#36865;event&#20107;&#20214; */
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1481620116539" ID="ID_1812084938" MODIFIED="1481620240480" TEXT="WPA supplicant">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1481620131738" ID="ID_1279532846" MODIFIED="1481620243112" TEXT="Configuration">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1481621123858" ID="ID_821761522" MODIFIED="1481621134592">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      config_ssid.h #Definition of per network configuration items
    </p>
    <p>
      config.h #Definition of the wpa_supplicant configuration
    </p>
    <p>
      config.c #Configuration parser and common functions
    </p>
    <p>
      config_file.c #Configuration backend for text files (e.g., wpa_supplicant.conf)
    </p>
    <p>
      config_winreg.c
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1481620144538" ID="ID_313810530" MODIFIED="1481620245627" TEXT="TLS library">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1481620157674" ID="ID_450550825" MODIFIED="1481620248032" TEXT="Cryptographic functions">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1481620171921" ID="ID_920149477" MODIFIED="1481620250448" TEXT="EAP peer ">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1481620186546" ID="ID_724582309" MODIFIED="1481620252744" TEXT="EAPOL supplicant">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
</node>
<node CREATED="1482222777984" FOLDED="true" ID="ID_1585324012" MODIFIED="1490067069711">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      libnl&#23398;&#20064;
    </p>
    <p>
      https://www.infradead.org/~tgr/libnl/
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1486459086378" ID="ID_204917437" MODIFIED="1486459120192">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      libnl&#20998;&#25104;&#35768;&#22810;&#30340;&#23376;&#24211;:
    </p>
    <p>
      libnl &#23545;&#20110;socket&#30340;&#26368;&#24213;&#23618;&#30340;&#22788;&#29702;
    </p>
    <p>
      libnl-route Adresses, links, neighbours, routing, traffic control, neighbour tables, &#8230;
    </p>
    <p>
      libnl-nf connection tracking, logging, queue
    </p>
    <p>
      libnl-genl &#25511;&#21046;API, family and command&#27880;&#20876;
    </p>
  </body>
</html></richcontent>
<node CREATED="1486519280682" ID="ID_637479763" MODIFIED="1486531854689">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>libnl</b>
    </p>
    <p>
      libnl&#21253;&#21547;&#20102;&#36890;&#36807;socket&#36827;&#34892;&#36890;&#20449;&#30340;&#26368;&#22522;&#26412;&#30340;&#35201;&#27714;&#65292;&#23427;&#35299;&#20915;&#20102;
    </p>
    <p>
      &#23545;socket&#30340;&#36830;&#25509;&#21644;&#26029;&#24320;&#65292;&#23545;&#25968;&#25454;&#30340;&#21457;&#36865;&#21644;&#25509;&#25910;&#65292;&#23545;&#28040;&#24687;&#30340;&#26500;&#24314;&#21644;&#20998;&#26512;&#65292;&#25552;&#20379;&#20102;
    </p>
    <p>
      &#19968;&#20010;&#23458;&#25143;&#21270;&#30340;&#25509;&#25910;&#29366;&#24577;&#26426;&#65292;&#25552;&#20379;&#20102;&#19968;&#20010;&#25277;&#35937;&#30340;&#25968;&#25454;&#31867;&#22411;&#26694;&#26550;&#26469;&#31616;&#21270;&#22522;&#20110;netlink
    </p>
    <p>
      &#21327;&#35758;&#30340;object&#25805;&#20316;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482223314579" ID="ID_451059191" MODIFIED="1486458999872">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>NetLink Protol Fundamental</b>
    </p>
    <p>
      netlink&#21327;&#35758;&#26159;&#22522;&#20110;BSD sockets&#30340;&#65292;&#24182;&#19988;&#20351;&#29992;&#30340;&#26159;AF_NETLINK
    </p>
    <p>
      &#21327;&#35758;&#31751;&#65292;netlink&#19979;&#38754;&#30340;&#27599;&#20010;&#21327;&#35758;&#37117;&#23545;&#24212;&#30528;&#19968;&#20010;&#21327;&#35758;&#21495;(NETLINK_ROUTE, NETLINK_FILTER)
    </p>
  </body>
</html></richcontent>
<node CREATED="1482223542223" ID="ID_1114715578" MODIFIED="1482224199094">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23547;&#22336;
    </p>
    <p>
      netlink&#22320;&#22336;(port)&#30001;&#19968;&#20010;32bit&#30340;&#22320;&#22336;&#32452;&#25104;&#65292;port 0&#36890;&#24120;&#20195;&#34920;&#20869;&#26680;&#20391;&#23545;&#24212;&#30340;
    </p>
    <p>
      socket, &#20854;&#23427;&#30340;port number&#36890;&#24120;&#26159;&#20195;&#34920;&#29992;&#25143;&#31354;&#38388;&#30340;socket.
    </p>
    <p>
      port number&#26159;&#22522;&#20110;&#36827;&#31243;&#26631;&#35782;&#21495;&#20877;&#21152;&#19978;&#19968;&#20010;&#20559;&#31227;&#37327;&#32780;&#20135;&#29983;&#30340;&#65292;&#36825;&#26679;&#20351;&#24471;&#19968;&#20010;&#36827;&#31243;
    </p>
    <p>
      &#20351;&#29992;&#22810;&#20010;socket&#25104;&#20026;&#21487;&#33021;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1482224204348" ID="ID_724949772" MODIFIED="1482224214987">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/netlink-addressing.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482224389739" ID="ID_1665439959" MODIFIED="1482225137550">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#28040;&#24687;&#30340;&#26684;&#24335;
    </p>
    <p>
      netlink&#21327;&#35758;&#26159;&#22522;&#20110;&#28040;&#24687;&#26426;&#21046;&#30340;&#65292;&#23427;&#30001;&#19968;&#20010;&#28040;&#24687;&#22836;&#21644;&#19968;&#20010;&#28040;&#24687;&#30340;&#36127;&#36733;&#25152;&#32452;&#25104;&#65292;
    </p>
  </body>
</html></richcontent>
<node CREATED="1482225149045" ID="ID_616185691" MODIFIED="1482225155842">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/nlmsghdr.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482225313373" ID="ID_1735660286" MODIFIED="1482229195446">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netlink socket
    </p>
    <p>
      &#20026;&#20102;&#20351;&#29992;netlink&#21327;&#35758;&#65292;netlink socket&#26159;&#24517;&#39035;&#30340;&#65292;&#24212;&#29992;&#31243;&#24207;&#21487;&#33021;&#20250;&#20351;&#29992;&#21040;
    </p>
    <p>
      &#22810;&#20010;netlink socket, &#27604;&#22914;&#19968;&#20010;&#29992;&#26469;&#21457;&#36865;&#21644;&#25509;&#25910;&#28040;&#24687;&#65292;&#21478;&#19968;&#20010;&#29992;&#26469;&#35746;&#38405;&#19968;&#20010;
    </p>
    <p>
      &#22810;&#25773;&#32452;&#29992;&#20110;&#25509;&#25910;&#36890;&#30693;&#12290;
    </p>
    <p>
      netlink socket&#21450;&#20854;&#30456;&#20851;&#30340;&#23646;&#24615;&#21253;&#25324;&#25991;&#20214;&#25551;&#36848;&#31526;&#26159;&#20351;&#29992;&#32467;&#26500;&#20307;
    </p>
    <p>
      struct nl_sock&#26469;&#34920;&#31034;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1485156369655" ID="ID_157144472" MODIFIED="1486459172592">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>netlink&#32534;&#31243;&#23398;&#20064;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1485161566787" ID="ID_1138542484" MODIFIED="1486275533248">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.&#21457;&#36865;&#21644;&#25509;&#25910;&#25968;&#25454;</b>
    </p>
    <p>
      netlink&#22871;&#25509;&#23383;&#26159;&#38754;&#21521;&#26080;&#36830;&#25509;&#30340;&#65292;&#20854;&#21457;&#36865;&#21644;&#25509;&#25910;&#25968;&#25454;&#30340;&#21407;&#29702;
    </p>
    <p>
      &#36319;udp&#21327;&#35758;&#38750;&#24120;&#20687;&#12290;&#21457;&#36865;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;&#26159;&#35843;&#29992;&#31995;&#32479;&#20989;&#25968;sendto
    </p>
    <p>
      &#21644;sendmsg, &#25509;&#25910;&#28040;&#24687;&#30340;&#26102;&#20505;&#26159;&#36890;&#36807;&#31995;&#32479;&#35843;&#29992;recvmsg&#21644;&#31995;&#32479;&#20989;&#25968;
    </p>
    <p>
      recvfrom
    </p>
    <p>
      ssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags)
    </p>
    <p>
      msg.msg_name&#25351;&#23450;&#30446;&#26631;&#22320;&#22336;
    </p>
    <p>
      msg.msg_namelen&#25351;&#23450;&#30446;&#26631;&#22320;&#22336;&#30340;&#38271;&#24230;
    </p>
    <p>
      msg.msg_iov &#20445;&#23384;&#21457;&#36865;&#30340;&#28040;&#24687;&#30340;&#20869;&#23481;
    </p>
    <p>
      sendmsg&#20063;&#21487;&#20197;&#34987;&#29992;&#26469;&#21457;&#36865;&#36741;&#21161;&#28040;&#24687;&#65292;&#21363;&#25152;&#35859;&#30340;&#25511;&#21046;&#28040;&#24687;
    </p>
    <p>
      struct msghdr {
    </p>
    <p>
      &#160;&#160;&#160;&#160;void&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*msg_name;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* optional address */&#160;&#160;&#29992;&#20110;&#26080;&#38142;&#25509;&#30340;&#22871;&#25509;&#23383;&#30340;&#30446;&#26631;&#22320;&#22336;
    </p>
    <p>
      &#160;&#160;&#160;&#160;socklen_t&#160;&#160;&#160;&#160;&#160;msg_namelen;&#160;&#160;&#160;&#160;/* size of address */
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct iovec *msg_iov;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* scatter/gather array */
    </p>
    <p>
      &#160;&#160;&#160;&#160;size_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;msg_iovlen;&#160;&#160;&#160;&#160;&#160;/* # elements in msg_iov */
    </p>
    <p>
      &#160;&#160;&#160;&#160;void&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*msg_control;&#160;&#160;&#160;&#160;/* ancillary data, see below */
    </p>
    <p>
      &#160;&#160;&#160;&#160;size_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;msg_controllen; /* ancillary data buffer len */
    </p>
    <p>
      &#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;msg_flags;&#160;&#160;&#160;&#160;&#160;&#160;/* flags (unused) */
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1486454966882" ID="ID_791079959" MODIFIED="1486455010652">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>msg_controll&#21487;&#33021;&#20250;&#25351;&#21521;&#22810;&#20010;&#32467;&#26500;&#20307;</b>
    </p>
    <p>
      struct cmsghdr {
    </p>
    <p>
      &#160;&#160;&#160;&#160;__kernel_size_t cmsg_len;&#160;&#160;&#160;/* data byte count, including hdr */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;cmsg_level; /* originating protocol */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;cmsg_type;&#160;&#160;/* protocol-specific type */
    </p>
    <p>
      };
    </p>
    <p>
      &#30340;&#25968;&#32452;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486455296862" ID="ID_1807069059" MODIFIED="1486455305807">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct scm_cookie {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct pid&#160;&#160;&#160;&#160;&#160;&#160;*pid;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Skb credentials */
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct scm_fp_list&#160;&#160;*fp;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Passed files&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct scm_creds&#160;&#160;&#160;&#160;creds;&#160;&#160;&#160;&#160;&#160;&#160;/* Skb credentials&#160;&#160;*/
    </p>
    <p>
      #ifdef CONFIG_SECURITY_NETWORK
    </p>
    <p>
      &#160;&#160;&#160;&#160;u32&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;secid;&#160;&#160;&#160;&#160;&#160;&#160;/* Passed security ID&#160;&#160;&#160;*/
    </p>
    <p>
      #endif
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1485162175604" ID="ID_650267292" MODIFIED="1486261481458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3. netlink&#22320;&#22336;&#32467;&#26500;</b>
    </p>
    <p>
      netlinki&#22320;&#22336;&#32467;&#26500;&#20307;<b><i>struct sockaddr_nl</i></b>&#65292;
    </p>
    <p>
      &#20250;&#34987;&#20256;&#36882;&#32473;&#25152;&#26377;&#30340;&#25509;&#25910;&#25110;&#32773;&#21457;&#36865;netlink&#22871;&#25509;&#23383;&#30340;&#31995;&#32479;&#35843;&#29992;&#65292;
    </p>
    <p>
      &#35813;&#32467;&#26500;&#20307;&#21516;&#26679;&#20250;&#36890;&#30693;&#20869;&#26680;&#32593;&#32476;&#21327;&#35758;&#26632;&#25968;&#25454;&#25253;&#30340;&#28304;&#22320;&#22336;&#21644;&#30446;&#30340;&#22320;&#22336;&#12290;
    </p>
    <p>
      netlink&#30340;&#22320;&#22336;&#32467;&#26500;&#20307;&#22914;&#19979;&#25152;&#31034;
    </p>
    <p>
      struct sockaddr_nl
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;sa_family_t nl_family;
    </p>
    <p>
      &#160;&#160;&#160;unsigned short nl_pad;
    </p>
    <p>
      &#160;&#160;&#160;u32 nl_pid;
    </p>
    <p>
      &#160;&#160;&#160;u32 nl_groups;
    </p>
    <p>
      }
    </p>
    <p>
      nl_family&#23450;&#20041;&#22320;&#22336;&#26063;
    </p>
    <p>
      nl_pad &#36825;&#20010;&#22495;&#19981;&#20351;&#29992;&#65292;&#35774;&#32622;&#25104;0
    </p>
    <p>
      nl_pid &#36825;&#20010;&#22495;&#23450;&#20041;&#20102;&#25509;&#25910;&#25968;&#25454;&#25253;&#30340;&#36827;&#31243;id&#21495;&#65292;&#25110;&#32773;&#21457;&#36865;&#25968;&#25454;&#25253;&#30340;&#36827;&#31243;&#30340;id&#21495;
    </p>
    <p>
      nl_groups&#36825;&#20010;&#22495;&#26159;&#29992;&#20110;&#21457;&#36865;&#22810;&#25773;&#25968;&#25454;&#30340;&#65292;&#27599;&#20010;netlink&#21327;&#35758;&#23478;&#26063;&#26377;32&#20010;&#22810;&#25773;&#32452;
    </p>
    <p>
      &#20026;&#20102;&#35746;&#38405;&#19968;&#20010;&#29305;&#23450;&#30340;&#22810;&#25773;&#32452;&#65292;&#31995;&#32479;&#35843;&#29992;bind&#20250;&#34987;&#20351;&#29992;&#21040;&#12290;
    </p>
    <p>
      sockaddr_nl &#32467;&#26500;&#20307;&#20250;&#34987;&#26144;&#23556;&#21040;sockaddr&#32467;&#26500;&#20307;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1485163861648" ID="ID_22157816" MODIFIED="1485179051641">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.netlink&#28040;&#24687;&#32467;&#26500;&#20307;&#26684;&#24335;
    </p>
    <p>
      &#23601;&#20687;&#27599;&#19968;&#20010;Ip&#25253;&#25991;&#37117;&#26377;&#19968;&#20010;&#25253;&#22836;&#65292; netlink&#30340;&#27599;&#19968;&#20010;&#21457;&#36865;&#21644;
    </p>
    <p>
      &#25509;&#25910;&#25968;&#25454;&#24103;&#37117;&#26377;&#25968;&#25454;&#25253;&#25991;&#22836;&#65292;&#25105;&#20204;&#22312;&#21457;&#36865;&#27599;&#19968;&#20010;&#25968;&#25454;&#21253;&#20043;&#21069;&#65292;&#37117;&#35201;
    </p>
    <p>
      &#25163;&#21160;&#26500;&#24314;&#35813;&#25968;&#25454;&#25253;&#25991;&#22836;&#37096;&#12290;
    </p>
    <p>
      struct nlmsghdr {
    </p>
    <p>
      __u32 nlmsg_len;
    </p>
    <p>
      __u16 nlmsg_type;
    </p>
    <p>
      __u16 nlmsg_flags;
    </p>
    <p>
      __u32 nlmsg_seq;
    </p>
    <p>
      __u32 nlmsg_pid;
    </p>
    <p>
      }
    </p>
    <p>
      nlmsg_len&#160;&#160;&#160;&#23450;&#20041;&#20102;&#25972;&#20010;&#25968;&#25454;&#25253;&#25991;&#30340;&#38271;&#24230;&#65292;&#21253;&#25324;&#25253;&#25991;&#30340;&#22836;&#37096;
    </p>
    <p>
      nlmsg_type &#23450;&#20041;&#20102;&#20301;&#20110;&#25968;&#25454;&#25253;&#25991;&#22836;&#37096;&#20043;&#21518;&#30340;&#25968;&#25454;&#30340;&#26684;&#24335;
    </p>
    <p>
      nlmsg_flags &#25511;&#21046;&#26631;&#24535;&#65292;&#23450;&#20041;&#20102;&#35813;message&#26159;&#23646;&#20110;&#21738;&#31181;&#31867;&#22411;&#30340;
    </p>
    <p>
      nlmsg_seq &#26159;&#19968;&#20010;&#38543;&#26426;&#25968;&#65292;&#36827;&#31243;&#21487;&#20197;&#20351;&#29992;&#35813;&#38543;&#26426;&#25968;&#23558;&#35831;&#27714;&#25253;&#25991;&#21644;&#21709;&#24212;&#25253;&#25991;&#23545;&#24212;&#36215;&#26469;
    </p>
    <p>
      nlmsg_pid&#160;&#160;&#22312;&#20351;&#29992;&#22810;&#25773;&#32452;&#30340;&#24773;&#20917;&#19979;&#29305;&#21035;&#26377;&#29992;&#65292;&#20219;&#20309;&#30001;&#29992;&#25143;&#31354;&#38388;&#36827;&#31243;&#20135;&#29983;&#30340;&#28040;&#24687;&#37117;&#35201;&#20351;&#29992;
    </p>
    <p>
      getpid &#35843;&#29992;&#32473;&#35813;&#21464;&#37327;&#36827;&#34892;&#36171;&#20540;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1486262138587" ID="ID_607408532" MODIFIED="1486272346816">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netlink&#25552;&#20379;&#20102;&#19968;&#20123;&#36741;&#21161;&#30340;&#24037;&#20855;&#23439;&#23450;&#20041;&#26469;&#24110;&#21161;&#25105;&#20204;&#26500;&#24314;&#21644;&#25805;&#32437;netlink&#28040;&#24687;&#25968;&#25454;
    </p>
    <p>
      NLMSG_ALIGN(len) &#29992;&#20110;&#23545;&#40784;&#30340;&#25805;&#20316;
    </p>
    <p>
      NLMSG_LENGTH(len) &#32473;&#23450;&#38656;&#35201;&#36890;&#36807;netlink message&#21457;&#36865;&#30340;&#22791;&#29992;&#25968;&#25454;&#30340;
    </p>
    <p>
      &#22823;&#23567;&#65292;&#23601;&#21487;&#20197;&#36820;&#22238;&#25972;&#20010;&#36127;&#36733;&#30340;&#22823;&#23567;&#65292;&#21253;&#25324;netlink&#22836;&#30340;&#22823;&#23567;&#12290;
    </p>
    <p>
      NLMSG_SPACE(len) &#36820;&#22238;&#23545;&#40784;&#20043;&#21518;&#30340;&#22823;&#23567;
    </p>
    <p>
      NLMSG_DATA(nlh) &#36820;&#22238;&#19968;&#20010;&#25968;&#25454;&#25351;&#38024;&#65292;&#35813;&#25351;&#38024;&#25351;&#21521;nlh&#21253;&#21547;&#30340;&#21518;&#22791;&#25968;&#25454;
    </p>
    <p>
      struct nlmsghdr *NLMSG NEXT(struct nlmsghdr *nlh)&#26377;&#20123;netlink&#21327;&#35758;&#35831;&#27714;&#20250;&#26377;&#22810;&#20010;&#21709;&#24212;&#65292;
    </p>
    <p>
      &#22914;&#26524;recv&#20989;&#25968;&#30340;buffer&#22815;&#22823;&#65292;&#37027;&#20040;&#21487;&#20197;&#36890;&#36807;&#35813;&#23439;&#23450;&#20041;&#26469;&#36941;&#21382;&#21040;&#25152;&#26377;&#30340;&#21709;&#24212;&#25968;&#25454;&#12290;
    </p>
    <p>
      int NLMSG PAYLOAD(nlmsghdr *nlh, int len) &#25509;&#21463;netlink&#30340;&#28040;&#24687;&#22836;&#65292;&#24182;&#19988;&#36820;&#22238;&#36319;&#35813;&#28040;&#24687;&#22836;&#30456;&#20851;&#30340;
    </p>
    <p>
      &#22791;&#29992;&#25968;&#25454;&#30340;&#38271;&#24230;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1486459286794" ID="ID_1881198372" MODIFIED="1486459313268">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      netlink&#31867;&#22411;
    </p>
    <p>
      1.socket&#21019;&#24314;
    </p>
    <p>
      socket fd=socket(AF NETLINK,SOCK RAW,protocol) &#30446;&#21069;linux4.4&#20869;&#26680;&#24403;&#20013;&#25903;&#25345;&#30340;protocol&#22914;&#19979;&#65306;
    </p>
    <p>
      #define NETLINK_ROUTE&#160;&#160;&#160;&#160;&#160;&#160;&#160;0&#160;&#160;&#160;/* Routing/device hook&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      #define NETLINK_UNUSED&#160;&#160;&#160;&#160;&#160;&#160;1&#160;&#160;&#160;/* Unused number&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      #define NETLINK_USERSOCK&#160;&#160;&#160;&#160;2&#160;&#160;&#160;/* Reserved for user mode socket protocols&#160;&#160;*/
    </p>
    <p>
      #define NETLINK_FIREWALL&#160;&#160;&#160;&#160;3&#160;&#160;&#160;/* Unused number, formerly ip_queue&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      #define NETLINK_SOCK_DIAG&#160;&#160;&#160;4&#160;&#160;&#160;/* socket monitoring&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      #define NETLINK_NFLOG&#160;&#160;&#160;&#160;&#160;&#160;&#160;5&#160;&#160;&#160;/* netfilter/iptables ULOG */
    </p>
    <p>
      #define NETLINK_XFRM&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;6&#160;&#160;&#160;/* ipsec */
    </p>
    <p>
      #define NETLINK_SELINUX&#160;&#160;&#160;&#160;&#160;7&#160;&#160;&#160;/* SELinux event notifications */
    </p>
    <p>
      #define NETLINK_ISCSI&#160;&#160;&#160;&#160;&#160;&#160;&#160;8&#160;&#160;&#160;/* Open-iSCSI */
    </p>
    <p>
      #define NETLINK_AUDIT&#160;&#160;&#160;&#160;&#160;&#160;&#160;9&#160;&#160;&#160;/* auditing */
    </p>
    <p>
      #define NETLINK_FIB_LOOKUP&#160;&#160;10&#160;&#160;
    </p>
    <p>
      #define NETLINK_CONNECTOR&#160;&#160;&#160;11
    </p>
    <p>
      #define NETLINK_NETFILTER&#160;&#160;&#160;12&#160;&#160;/* netfilter subsystem */
    </p>
    <p>
      #define NETLINK_IP6_FW&#160;&#160;&#160;&#160;&#160;&#160;13
    </p>
    <p>
      #define NETLINK_DNRTMSG&#160;&#160;&#160;&#160;&#160;14&#160;&#160;/* DECnet routing messages */
    </p>
    <p>
      #define NETLINK_KOBJECT_UEVENT&#160;&#160;15&#160;&#160;/* Kernel messages to userspace */
    </p>
    <p>
      #define NETLINK_GENERIC&#160;&#160;&#160;&#160;&#160;16 /* leave room for NETLINK_DM (DM Events) */
    </p>
    <p>
      #define NETLINK_SCSITRANSPORT&#160;&#160;&#160;18&#160;&#160;/* SCSI Transports */
    </p>
    <p>
      #define NETLINK_ECRYPTFS&#160;&#160;&#160;&#160;19
    </p>
    <p>
      #define NETLINK_RDMA&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;20
    </p>
    <p>
      #define NETLINK_CRYPTO&#160;&#160;&#160;&#160;&#160;&#160;21&#160;&#160;/* Crypto layer */
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1490067192257" ID="ID_1593141844" MODIFIED="1490067231462" TEXT="sdio card specific &#x6587;&#x6863;&#x9605;&#x8bfb;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1479953700450" FOLDED="true" ID="ID_1348786010" MODIFIED="1486605666397" POSITION="right" TEXT="Linux Network Internals">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479953715900" FOLDED="true" ID="ID_72904870" MODIFIED="1486276941624" TEXT="1.&#x8d2f;&#x7a7f;&#x5168;&#x5c40;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479953744989" FOLDED="true" ID="ID_1449486188" MODIFIED="1486276937999">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct sk_buff
    </p>
    <p>
      &#29992;&#20110;&#23384;&#20648;&#25968;&#25454;&#21253;&#30340;&#65292;&#35813;&#25968;&#25454;&#32467;&#26500;&#26159;&#34987;&#21508;&#23618;&#25152;&#20351;&#29992;&#30340;&#65292;&#21253;&#25324;
    </p>
    <p>
      &#21508;&#23618;&#30340;&#25968;&#25454;&#22836;&#21644;&#25968;&#25454;payload
    </p>
    <p>
      struct net_device
    </p>
    <p>
      &#20869;&#26680;&#24403;&#20013;&#30340;&#32593;&#32476;&#35774;&#22791;&#37117;&#26159;&#30001;&#35813;&#25968;&#25454;&#32467;&#26500;&#26469;&#20195;&#34920;&#30340;&#65292;&#37324;&#38754;&#21253;&#25324;&#20102;
    </p>
    <p>
      &#32593;&#32476;&#35774;&#22791;&#30340;&#30828;&#20214;&#21644;&#36719;&#20214;&#30340;&#37197;&#32622;
    </p>
    <p>
      struct sock
    </p>
    <p>
      &#29992;&#20110;&#23384;&#20648;&#32593;&#32476;sock&#30340;&#20449;&#24687;&#65292;&#20294;&#26159;&#26412;&#20070;&#19981;&#28041;&#21450;&#23545;&#35813;&#32467;&#26500;&#20307;&#30340;&#35814;&#32454;
    </p>
    <p>
      &#25551;&#36848;
    </p>
  </body>
</html></richcontent>
<node CREATED="1479955699726" ID="ID_1266618151" MODIFIED="1479969552659">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>struct sk_buff&#30340;&#25968;&#25454;&#32467;&#26500;&#30340;&#20869;&#37096;&#32452;&#25104;</b>:
    </p>
    <p>
      <b><i>Layout Fields</i></b>
    </p>
    <p>
      &#25968;&#25454;&#36825;&#20010;&#33539;&#22260;&#30340;&#25968;&#25454;&#25104;&#21592;&#30340;&#36131;&#20219;&#20165;&#20165;&#26159;&#20026;&#20102;&#25628;&#23547;&#21644;&#32452;&#32455;
    </p>
    <p>
      &#25968;&#25454;&#32467;&#26500;&#20307;&#30340;&#26412;&#36523;&#27604;&#22914;prv, next&#25351;&#38024;&#12290;struct sock *sk
    </p>
    <p>
      &#25351;&#38024;&#25351;&#21521;&#25317;&#26377;&#35813;buff&#30340;sock&#32467;&#26500;&#20307;&#65292;&#24403;&#25968;&#25454;&#26159;&#30001;&#26412;&#22320;&#20135;&#29983;
    </p>
    <p>
      &#25110;&#32773;&#26159;&#30001;&#26412;&#22320;&#30340;&#22788;&#29702;&#22120;&#25509;&#25910;&#30340;&#26102;&#20505;&#65292;&#35813;sock&#25351;&#38024;&#26159;&#24456;&#38656;&#35201;&#30340;&#12290;
    </p>
    <p>
      atomic_t users &#26159;sk_buff&#30340;&#24341;&#29992;&#35745;&#25968;&#12290;unsigned int truesize
    </p>
    <p>
      &#20195;&#34920;&#30340;&#26159;buffer&#30340;&#22823;&#23567;
    </p>
    <p>
      <b><i>General Fields</i></b>
    </p>
    <p>
      &#36825;&#37096;&#20998;&#35206;&#30422;&#20102;sk_buff&#32467;&#26500;&#20307;&#37324;&#38754;&#30340;&#22823;&#37096;&#20998;&#30340;&#32467;&#26500;&#20307;&#21464;&#37327;&#65292;&#20294;&#26159;
    </p>
    <p>
      &#36319;&#20855;&#20307;&#30340;&#20869;&#26680;&#30340;&#29305;&#24615;&#27809;&#26377;&#24456;&#22823;&#30340;&#20851;&#31995;&#12290;struct net_device *dev
    </p>
    <p>
      &#35813;&#21464;&#37327;&#25551;&#36848;&#20102;&#19968;&#20010;&#32593;&#32476;&#35774;&#22791;&#65292;&#35813;&#35774;&#22791;&#30340;&#35282;&#33394;&#26159;&#30001;buffer&#24403;&#20013;&#30340;&#25968;&#25454;
    </p>
    <p>
      &#26159;&#21457;&#36865;&#20986;&#21435;&#30340;&#36824;&#26159;&#25509;&#25910;&#22238;&#26469;&#30340;&#12290;struct net_device *input_dev
    </p>
    <p>
      &#36825;&#20010;&#35774;&#22791;&#20195;&#34920;&#25105;&#20204;&#25509;&#25910;&#21040;packet&#30340;&#35774;&#22791;&#12290;struct net_device *real_dev
    </p>
    <p>
      &#20195;&#34920;&#20102;&#34394;&#25311;&#30340;&#35774;&#22791;&#12290;unsigned char pkt_type&#22522;&#20110;L2&#30340;&#30446;&#26631;&#22320;&#22336;&#26469;&#23558;
    </p>
    <p>
      packet&#30340;&#31181;&#31867;&#36827;&#34892;&#21306;&#20998;
    </p>
    <p>
      <b><i>Feature-Specific Fields</i></b>
    </p>
    <p>
      &#36319;&#20869;&#26680;&#20855;&#20307;&#24320;&#21551;&#30340;feature&#30456;&#20851;&#30340;&#21464;&#37327;&#20998;&#31867;:struct&#160;&#160;sec_path&#160;&#160;&#160;&#160;*sp
    </p>
    <p>
      _u32 tc_verd struct nf_bridge_info *nf_bridge
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1479969567165" FOLDED="true" ID="ID_1891127323" MODIFIED="1486276934567">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ef0c0c"><b>sk_buff&#30340;&#31649;&#29702;&#20989;&#25968;:</b></font>
    </p>
    <p>
      <b>alloc_skb</b>&#160;&#29992;&#20110;&#20998;&#37197;buffer,&#35813;buffer&#21253;&#25324;&#20004;&#31181;buffer,
    </p>
    <p>
      one for the buffer and one for the sk_buff structure
    </p>
    <p>
      <b>dev_alloc_skb</b>&#160;&#35774;&#22791;&#39537;&#21160;&#24403;&#20013;&#25152;&#20351;&#29992;&#21040;&#30340;buffer&#20998;&#37197;&#20989;&#25968;&#65292;
    </p>
    <p>
      &#24182;&#19988;&#26412;&#26469;&#26159;&#26399;&#26395;&#22312;&#20013;&#26029;&#24403;&#20013;&#25191;&#34892;&#30340;&#12290;
    </p>
    <p>
      <b>kfree_skb</b>
    </p>
    <p>
      <b>dev_kfree_skb</b>
    </p>
    <p>
      <b>skb_reserve</b>&#160;&#22312;buffer&#30340;&#22836;&#37096;&#20445;&#30041;&#19968;&#20123;&#31354;&#38388;&#65292;&#20801;&#35768;&#22312;&#22836;&#25554;&#20837;
    </p>
    <p>
      &#19968;&#20123;&#31354;&#38388;&#25110;&#32773;&#29992;&#20110;&#23545;&#40784;&#20351;&#29992;
    </p>
    <p>
      <b>skb_push</b>&#160;&#28155;&#21152;&#19968;&#20010;block&#30340;&#25968;&#25454;&#21040;buffer&#30340;&#24320;&#22836;&#65292;skb_put&#28155;&#21152;
    </p>
    <p>
      &#19968;&#20010;block&#30340;&#25968;&#25454;&#21040;buffer&#30340;&#32467;&#23614;&#65292;&#36825;&#20004;&#20010;&#20989;&#25968;&#37117;&#19981;&#26159;&#30495;&#30340;&#28155;&#21152;&#25968;&#25454;
    </p>
    <p>
      &#21040;buffer&#24403;&#20013;&#65292;&#23427;&#20204;&#21482;&#26159;&#31616;&#21333;&#22320;&#25805;&#20316;buffer&#24403;&#20013;&#30340;&#25968;&#25454;&#25351;&#38024;&#32780;&#24050;&#29992;&#26469;
    </p>
    <p>
      &#32473;&#21478;&#19968;&#23618;&#30340;&#20989;&#25968;&#22797;&#21046;&#25968;&#25454;&#12290;
    </p>
    <p>
      #define skb_shinfo(SKB)
    </p>
    <p>
      ((struct skb_shared_info *)((SKB)-&gt;end)) &#29992;&#20110;&#33719;&#24471;skb_shared_info
    </p>
  </body>
</html></richcontent>
<node CREATED="1479971923715" ID="ID_1375512570" MODIFIED="1479971926294">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1479978109392" FOLDED="true" ID="ID_336923871" MODIFIED="1486276933199">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      net_device struct
    </p>
    <p>
      &#23545;&#20110;&#25152;&#26377;&#35774;&#22791;&#30340;net_device&#37117;&#34987;&#25918;&#21040;&#20102;&#19968;&#20010;&#38142;&#34920;&#24403;&#20013;&#20102;&#65292;
    </p>
    <p>
      &#35813;&#38142;&#34920;&#30001;dev_base&#25351;&#38024;&#25351;&#21521;&#23427;&#12290;
    </p>
    <p>
      net_device&#19979;&#38754;&#30340;&#21464;&#37327;&#30340;&#20998;&#31867;:
    </p>
    <p>
      &#8226; Configuration
    </p>
    <p>
      &#8226; Statistics
    </p>
    <p>
      &#8226; Device status
    </p>
    <p>
      &#8226; List management
    </p>
    <p>
      &#8226; Traffic management
    </p>
    <p>
      &#8226; Feature specific
    </p>
    <p>
      &#8226; Generic
    </p>
    <p>
      &#8226; Function pointers (or VFT)
    </p>
  </body>
</html></richcontent>
<node CREATED="1479979307553" ID="ID_1810657162" MODIFIED="1479979563191">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Identifiers</b>
    </p>
    <p>
      int ifindex&#29992;&#20110;&#26631;&#35782;net_device&#30340;&#26631;&#35782;&#31526;
    </p>
    <p>
      int iflink&#29992;&#20110;&#34394;&#25311;&#38567;&#36947;&#35774;&#22791;&#65292;&#29992;&#26469;&#26631;&#35782;&#21040;&#36798;&#36890;&#36947;&#21478;&#19968;&#31471;
    </p>
    <p>
      &#30340;&#30495;&#23454;&#35774;&#22791;&#12290;
    </p>
    <p>
      unsigned short dev_id&#29992;&#20110;ipv6
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1479979675310" ID="ID_993504139" MODIFIED="1479981910599">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Configuration </b>
    </p>
    <p>
      &#37197;&#32622;&#22495;&#24403;&#20013;&#30340;&#19968;&#20123;&#21464;&#37327;&#22312;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#26159;&#30001;&#20869;&#26680;&#26681;&#25454;
    </p>
    <p>
      &#35774;&#22791;&#30340;&#31181;&#31867;&#35774;&#32622;&#20102;&#19968;&#20123;&#40664;&#35748;&#20540;&#65292;&#24403;&#28982;&#36825;&#20123;&#20540;&#20063;&#21487;&#20197;&#22312;&#35774;&#22791;
    </p>
    <p>
      &#39537;&#21160;&#24403;&#20013;&#34987;&#20462;&#25913;&#25110;&#32773;&#22312;&#29992;&#25143;&#31354;&#38388;&#36890;&#36807;ifconfig&#25110;&#32773;ip&#21629;&#20196;
    </p>
    <p>
      &#26469;&#20462;&#25913;&#12290;
    </p>
    <p>
      char name[IFNAMSIZ]&#35774;&#22791;&#21517;&#31216;&#65292;&#27604;&#22914;eth0
    </p>
    <p>
      unsigned long mem_start
    </p>
    <p>
      unsigned long mem_end &#29992;&#20110;&#36319;kernel&#36827;&#34892;&#20449;&#24687;&#20132;&#25442;&#30340;&#21306;&#22495;&#65292;
    </p>
    <p>
      &#35813;&#21306;&#22495;&#21482;&#30001;&#35774;&#22791;&#39537;&#21160;&#26469;&#36827;&#34892;&#25805;&#20316;
    </p>
    <p>
      unsigned long base_addr&#36755;&#20837;&#36755;&#20986;&#20869;&#23384;&#30340;&#22320;&#22336;
    </p>
    <p>
      unsigned char dma&#35774;&#22791;&#20351;&#29992;&#30340;dma&#36890;&#36947;
    </p>
    <p>
      unsigned short flags &#36825;&#37324;&#38754;&#30340;&#19968;&#20123;bit&#29992;&#26469;&#20195;&#34920;&#32593;&#32476;&#35774;&#22791;&#30340;&#33021;&#21147;&#20854;&#20182;
    </p>
    <p>
      &#30340;&#19968;&#20123;bit&#29992;&#20110;&#20195;&#34920;&#29366;&#24577;&#25913;&#21464;&#27604;&#22914;IFF_UP &#25110;&#32773;IFF_RUNNING
    </p>
    <p>
      unsigned short priv_flags &#29992;&#20110;&#23384;&#20648;&#29992;&#25143;&#31354;&#38388;&#30475;&#19981;&#21040;&#30340;&#19968;&#20123;&#26631;&#24535;&#65292;&#24403;&#21069;&#26631;&#24535;&#34987;&#29992;&#20110;
    </p>
    <p>
      VLAN and Bridge virtual devices
    </p>
    <p>
      unsigned short type &#20195;&#34920;&#35774;&#22791;&#30340;&#31181;&#31867;
    </p>
    <p>
      unsigned char dev_addr[MAX_ADDR_LEN] &#35774;&#22791;&#38142;&#36335;&#23618;&#30340;&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1480037753528" FOLDED="true" ID="ID_699327334" MODIFIED="1486276954535" TEXT="3.&#x7528;&#x6237;&#x7a7a;&#x95f4;&#x548c;&#x5185;&#x6838;&#x7684;&#x63a5;&#x53e3;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1480040978657" ID="ID_621794782" MODIFIED="1480298085239">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>proc&#25991;&#20214;&#31995;&#32479;</i></b>
    </p>
    <p>
      &#34394;&#25311;&#25991;&#20214;&#31995;&#32479;&#65292;&#20801;&#35768;&#20869;&#26680;&#21464;&#37327;&#20197;&#25991;&#20214;&#30340;&#24418;&#24335;&#26292;&#38706;
    </p>
    <p>
      &#32473;&#19978;&#23618;&#29992;&#25143;&#31354;&#38388;&#65292;&#36825;&#26159;&#21482;&#35835;&#30340;&#26041;&#24335;&#65292;&#20869;&#26680;&#24403;&#20013;&#22797;&#26434;&#30340;
    </p>
    <p>
      &#25968;&#25454;&#32467;&#26500;&#36866;&#21512;&#20351;&#29992;&#35813;&#25991;&#20214;&#31995;&#32479;&#26292;&#38706;&#32473;&#29992;&#25143;&#31354;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480041168287" ID="ID_586135545" MODIFIED="1480041202409">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>sysctl (/proc/sys directory)</i></b>
    </p>
    <p>
      &#35813;&#25509;&#21475;&#20801;&#35768;&#29992;&#25143;&#31354;&#38388;&#21435;&#35835;&#21462;&#25110;&#32773;&#20462;&#25913;&#20869;&#26680;&#31354;&#38388;&#30340;&#21464;&#37327;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480041260470" ID="ID_907272142" MODIFIED="1480041296581">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>sysfs (/sys filesystem)</i></b>
    </p>
    <p>
      &#20197;&#19968;&#31181;&#38750;&#24120;&#31616;&#27905;&#21644;&#26377;&#32452;&#32455;&#30340;&#26041;&#24335;&#26292;&#38706;&#20869;&#26680;&#31354;&#38388;&#30340;&#21464;&#37327;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480041644964" FOLDED="true" ID="ID_1160972193" MODIFIED="1486276948935">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ioctl&#31995;&#32479;&#35843;&#29992;
    </p>
    <p>
      ioctl&#21487;&#20197;&#23545;&#19968;&#20010;&#25991;&#20214;&#36827;&#34892;&#25805;&#20316;&#65292;&#24182;&#19988;&#21487;&#20197;&#23545;&#26631;&#20934;&#30340;&#25991;&#20214;&#31995;&#32479;&#19981;&#25552;&#20379;&#25509;&#21475;
    </p>
    <p>
      &#30340;&#29305;&#27530;&#25991;&#20214;&#36827;&#34892;&#25805;&#20316;&#65292;&#25105;&#20204;&#21487;&#20197;&#20256;&#36882;&#19968;&#20010;sock&#25991;&#20214;&#25551;&#36848;&#31526;&#32473;ioctl&#31995;&#32479;
    </p>
    <p>
      &#35843;&#29992;&#65292;socket&#31995;&#32479;&#20250;&#22788;&#29702;ioctl&#30340;&#35831;&#27714;&#65292;&#36825;&#31181;&#26041;&#27861;&#22312;&#32769;&#26087;&#30340;&#32593;&#32476;&#21629;&#20196;&#24403;&#20013;
    </p>
    <p>
      &#20250;&#34987;&#20351;&#29992;&#21040;&#22914;ifconfig &#21644;route
    </p>
  </body>
</html></richcontent>
<node CREATED="1480298718638" ID="ID_1548046878" MODIFIED="1480298749151">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#19968;&#31181;&#20351;&#29992;ioctl&#30340;&#20363;&#23376;</b>
    </p>
    <p>
      struct ifreq data;
    </p>
    <p>
      fd = socket(PF_INET, SOCK_DGRAM, 0);
    </p>
    <p>
      &lt; ... initialize &quot;data&quot; ...&gt;
    </p>
    <p>
      err = ioctl(fd, SIOCSIFMTU, &amp;data);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480311462133" ID="ID_967840131" MODIFIED="1480311473091">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/network-ioctl.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1480297849942" ID="ID_598822167" MODIFIED="1480301483564">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Netlink socket: &#26368;&#26032;&#30340;&#21644;&#20869;&#26680;&#20132;&#27969;&#30340;&#26041;&#24335;
    </p>
    <p>
      RFC 3549
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1480301492071" FOLDED="true" ID="ID_1031635993" MODIFIED="1486276963208">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>4.Notification Chains </i></b>
    </p>
    <p>
      &#24403;&#19968;&#20010;&#36335;&#30001;&#36335;&#24452;&#22833;&#36133;&#30340;&#26102;&#20505;&#65292;&#23376;&#31995;&#32479;&#36890;&#36807;notification chains
    </p>
    <p>
      &#26469;&#36890;&#30693;&#23376;&#31995;&#32479;&#12290; &#19968;&#20010;notification chains&#23601;&#26159;&#24403;&#19968;&#20010;&#20107;&#20214;&#21457;&#29983;
    </p>
    <p>
      &#30340;&#26102;&#20505;&#25152;&#35302;&#21457;&#30340;&#19968;&#31995;&#21015;&#30340;&#20989;&#25968;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1480301831764" FOLDED="true" ID="ID_1632266520" MODIFIED="1486276960616">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      notification chains&#22914;&#20309;&#34987;&#22768;&#26126;
    </p>
    <p>
      &#20869;&#26680;&#25903;&#25345;&#21738;&#20123;notification chains
    </p>
  </body>
</html></richcontent>
<node CREATED="1480310483591" ID="ID_1428348667" MODIFIED="1480311359753">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      notifier chain&#30340;&#20803;&#32032;&#26159;&#32467;&#26500;&#20307;
    </p>
    <p>
      struct notifier_block
    </p>
    <p>
      {
    </p>
    <p>
      int (*notifier_call)(struct notifier_block *self, unsigned long, void *);
    </p>
    <p>
      struct notifier_block *next;
    </p>
    <p>
      int priority;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1480301864876" FOLDED="true" ID="ID_733952034" MODIFIED="1486276959632">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Linux&#23376;&#31995;&#32479;&#22914;&#20309;&#27880;&#20876;&#21040;notification chain
    </p>
  </body>
</html></richcontent>
<node CREATED="1480311364166" ID="ID_826247755" MODIFIED="1480311736302">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#19968;&#20010;&#20869;&#26680;&#32452;&#20214;&#23545;&#26576;&#20010;&#36890;&#30693;&#38142;&#30340;&#20107;&#20214;&#24863;&#20852;&#36259;&#65292;&#23427;&#21487;&#20197;
    </p>
    <p>
      &#27880;&#20876;&#19968;&#20010;&#22238;&#35843;&#20989;&#25968;&#65292;
    </p>
    <p>
      <b>notifier_chain_register </b>
    </p>
    <p>
      &#23545;&#20110;&#20869;&#26680;&#24403;&#20013;&#30340;&#19977;&#31181;&#36890;&#30693;&#38142;<font color="#d11212"><i>inetaddr_chain , inet6addr_chain , netdev_chain</i></font>
    </p>
    <p>
      &#20869;&#26680;&#25552;&#20379;&#20102;&#19987;&#38376;&#30340;&#25171;&#21253;&#20989;&#25968;&#26469;&#36827;&#34892;&#27880;&#20876;&#12290;
    </p>
    <p>
      &#23545;&#20110;&#27599;&#20010;&#36890;&#30693;&#38142;&#65292;notifier_block&#20250;&#34987;&#25554;&#20837;&#21040;&#35813;list&#24403;&#20013;&#24182;&#36890;&#36807;priority&#36827;&#34892;
    </p>
    <p>
      &#20248;&#20808;&#32423;&#30340;&#25490;&#21015;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1480301993739" FOLDED="true" ID="ID_23280436" MODIFIED="1486276961688">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Linux&#23376;&#31995;&#32479;&#22914;&#20309;&#22312;&#19968;&#20010;chain&#19978;
    </p>
    <p>
      &#20135;&#29983;notification
    </p>
  </body>
</html></richcontent>
<node CREATED="1480311772131" ID="ID_304122826" MODIFIED="1480320018297">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#36807;&#35843;&#29992;&#20989;&#25968;<font color="#cd0d0d"><b><i>notifier_call_chain</i></b></font>&#65292;&#19968;&#20010;&#38142;&#19978;&#30340;&#36890;&#30693;&#23601;&#20250;
    </p>
    <p>
      &#34987;&#20135;&#29983;&#20986;&#26469;&#65292;&#36825;&#20010;&#20989;&#25968;&#20854;&#23454;&#26159;&#31616;&#21333;&#22320;&#23558;&#36890;&#30693;&#38142;&#19978;&#30340;&#20989;&#25968;
    </p>
    <p>
      &#20840;&#37096;&#35843;&#29992;&#36215;&#26469;
    </p>
    <p>
      &#20869;&#26680;&#25552;&#20379;&#20102;&#33267;&#23569;10&#31181;&#19981;&#21516;&#30340;notifier&#36890;&#30693;&#38142;&#65292;&#20027;&#35201;&#30340;&#36890;&#30693;&#38142;&#22914;&#19979;:
    </p>
    <p>
      inetaddr_chain &#21457;&#36865;&#20851;&#20110;&#22312;&#25509;&#21475;&#19978;&#30340;Ipv4&#22320;&#22336;&#30340;&#28155;&#21152;&#65292;&#21024;&#38500;&#21644;
    </p>
    <p>
      &#20462;&#25913;&#30340;&#36890;&#30693;
    </p>
    <p>
      netdev_chain &#21457;&#36865;&#20851;&#20110;&#27880;&#20876;&#30340;&#32593;&#32476;&#35774;&#22791;&#30340;&#29366;&#24577;&#30340;&#36890;&#30693;
    </p>
    <p>
      &#32593;&#32476;&#20195;&#30721;&#21487;&#20197;&#21521;&#30001;&#20869;&#26680;&#20854;&#20182;&#27169;&#22359;&#20135;&#29983;&#30340;notifier&#27880;&#20876;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1480309982459" ID="ID_1496329448" MODIFIED="1480310362371">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      publish-and-subscribe &#27169;&#22411;
    </p>
    <p>
      notified&#26159;&#19968;&#20010;&#23376;&#31995;&#32479;&#65292;&#23427;&#24076;&#26395;&#22312;&#26576;&#20010;&#20107;&#20214;&#21457;&#29983;&#30340;&#26102;&#20505;&#33021;&#22815;
    </p>
    <p>
      &#24471;&#21040;&#36890;&#30693;&#65292;&#24182;&#19988;&#25552;&#20379;&#20102;&#22238;&#35843;&#20989;&#25968;
    </p>
    <p>
      notifier&#26159;&#19968;&#20010;&#32463;&#21382;&#20107;&#20214;&#30340;&#23376;&#31995;&#32479;&#65292;&#24182;&#19988;&#21487;&#20197;&#35843;&#29992;&#22238;&#35843;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480320029190" ID="ID_1275820585" MODIFIED="1480326671529">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#36890;&#36807;/proc&#25991;&#20214;&#31995;&#32479;&#36827;&#34892;&#35843;&#35797;</b>
    </p>
    <p>
      /proc/net&#30446;&#24405;&#19979;&#38754;&#30340;&#25991;&#20214;:
    </p>
    <p>
      dev &#26174;&#31034;&#24050;&#32463;&#27880;&#20876;&#36807;&#30340;&#32593;&#32476;&#35774;&#22791;&#30340;&#32479;&#35745;&#20449;&#24687;
    </p>
    <p>
      dev_mcast &#29992;&#20110;ip&#22810;&#25773;&#30340;&#21442;&#25968;&#35774;&#32622;
    </p>
    <p>
      wireless &#26080;&#32447;&#32593;&#32476;&#35774;&#22791;&#30340;&#32479;&#35745;&#20449;&#24687;
    </p>
    <p>
      softnet_stat &#36719;&#20013;&#26029;&#30340;&#32479;&#35745;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1480320297756" FOLDED="true" ID="ID_1891860302" MODIFIED="1486276969768">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>5.&#32593;&#32476;&#35774;&#22791;&#21021;&#22987;&#21270;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1480320731162" ID="ID_244601120" MODIFIED="1480320737896">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bluetoothpic/network-init.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1480321338079" ID="ID_558694116" MODIFIED="1480325527372">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Initializing the Device Handling Layer: net_dev_init
    </p>
    <p>
      &#23545;&#20110;&#32593;&#32476;&#20195;&#30721;&#30340;&#19968;&#20010;&#37325;&#35201;&#30340;&#21021;&#22987;&#21270;&#36807;&#31243;&#65292;&#21253;&#25324;&#27969;&#37327;&#25511;&#21046;&#21644;
    </p>
    <p>
      per-CPU ingress queues&#65292;&#37117;&#30001;&#20989;&#25968;net_dev_init&#26469;&#23436;&#25104;&#65292;
    </p>
    <p>
      &#35813;&#20989;&#25968;&#23450;&#20041;&#22312;&#25991;&#20214;net/core/dev.c&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1480326675913" FOLDED="true" ID="ID_498097709" MODIFIED="1486278365690" TEXT="8.&#x4e2d;&#x65ad;&#x548c;&#x7f51;&#x7edc;&#x9a71;&#x52a8;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1480384780898" ID="ID_1910519324" MODIFIED="1480402747805">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>Decisions and Traffic Direction</b></i>
    </p>
    <p>
      &#25968;&#25454;&#21253;&#22312;&#32593;&#32476;&#21327;&#35758;&#26632;&#24403;&#20013;&#25152;&#37319;&#21462;&#30340;&#36335;&#24452;&#19981;&#21516;&#20110;
    </p>
    <p>
      received, transmitted, and forwarded packets
    </p>
    <p>
      &#25152;&#37319;&#21462;&#30340;&#36335;&#24452;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480402756713" ID="ID_556039153" MODIFIED="1480406662731">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Notifying Drivers When Frames Are Received</b>
    </p>
    <p>
      &#31616;&#30701;&#22320;&#20171;&#32461;&#24403;&#25509;&#25910;&#21040;&#19968;&#26722;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;&#39537;&#21160;&#22914;&#20309;&#36890;&#30693;kernel
    </p>
    <p>
      &#35813;&#20107;&#20214;&#12290;
    </p>
    <p>
      <b>poll&#26041;&#24335;</b>
    </p>
    <p>
      this approach can easily waste quite a lot of system resources
    </p>
    <p>
      <b>&#19968;&#26722;&#25968;&#25454;&#19968;&#27425;interrupt&#30340;&#26041;&#24335;</b>
    </p>
    <p>
      This technique, which is quite
    </p>
    <p>
      common, still represents the best option under low traffic loads. Unfortunately, it
    </p>
    <p>
      does not perform well under high traffic loads: forcing an interrupt for each frame
    </p>
    <p>
      received can easily make the CPU waste all of its time handling interrupts.
    </p>
    <p>
      &#22312;&#20013;&#26029;&#30340;&#22788;&#29702;&#26041;&#24335;&#24403;&#20013;&#65292;&#39537;&#21160;&#36127;&#36131;&#23558;&#25509;&#25910;&#21040;&#30340;&#25968;&#25454;&#25918;&#21040;&#36755;&#20837;&#38431;&#21015;&#24403;&#20013;&#65292;&#20855;&#20307;&#30340;&#21327;&#35758;&#23618;&#36127;&#36131;
    </p>
    <p>
      &#20174;&#38431;&#21015;&#24403;&#20013;&#21462;&#20986;&#25968;&#25454;&#65292;&#26126;&#26174;&#22320;&#36127;&#36131;&#25918;&#20837;&#38431;&#21015;&#30340;&#32447;&#31243;&#20248;&#20808;&#32423;&#39640;&#65292;&#36825;&#26679;&#22312;&#31995;&#32479;&#36127;&#36733;&#27604;&#36739;&#22823;&#30340;&#26102;&#20505;&#65292;
    </p>
    <p>
      &#20250;&#36896;&#25104;&#38431;&#21015;&#28385;&#65292;&#31995;&#32479;&#23849;&#28291;&#65292; &#31216;&#20026;receive-livelock
    </p>
    <p>
      <b>&#19968;&#27425;&#20013;&#26029;&#24403;&#20013;&#22788;&#29702;&#22810;&#20010;&#25968;&#25454;&#24103;&#30340;&#26041;&#24335;</b>
    </p>
    <p>
      linux&#24403;&#20013;&#26377;&#24456;&#23569;&#30340;&#39537;&#21160;&#20250;&#37319;&#29992;&#36825;&#31181;&#26041;&#24335;&#65292;&#39537;&#21160;&#22312;&#20013;&#26029;&#22788;&#29702;&#24403;&#20013;&#20250;&#19968;&#30452;&#21521;&#38431;&#21015;&#37324;&#38754;&#28155;&#21152;&#25968;&#25454;&#65292;
    </p>
    <p>
      &#30452;&#21040;&#36798;&#21040;&#35774;&#23450;&#30340;&#26368;&#22823;&#30340;&#24103;&#30340;&#25968;&#20540;&#25110;&#32773;&#26159;&#31383;&#21475;&#26102;&#38388;
    </p>
    <p>
      <b>&#23450;&#26102;&#22120;&#39537;&#21160;&#30340;&#20013;&#26029;</b>
    </p>
    <p>
      &#20197;&#19968;&#23450;&#26102;&#38388;&#30340;&#38388;&#38548;&#26469;&#20135;&#29983;&#20013;&#26029;
    </p>
    <p>
      
    </p>
    <p>
      <font color="#ea0c0c"><b>A good combination would use the interrupt technique </b></font>
    </p>
    <p>
      <font color="#ea0c0c"><b>under low load and switch to the timer-driven interrupt under high load.</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480406674225" FOLDED="true" ID="ID_1986161765" MODIFIED="1486278364042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>Interrupt Handler</b></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1480409035181" ID="ID_836898892" MODIFIED="1480409425251">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20013;&#26029;&#24213;&#21322;&#37096;&#30340;&#35299;&#20915;&#26041;&#26696;:
    </p>
    <p>
      linux&#25552;&#20379;&#20102;&#24456;&#22810;&#19981;&#21516;&#30340;&#26426;&#21046;&#26469;&#23454;&#29616;&#20013;&#26029;&#24213;&#21322;&#37096;&#21644;&#19968;&#20123;&#25512;&#36831;
    </p>
    <p>
      &#24615;&#30340;&#24037;&#20316;&#65292; &#36825;&#20123;&#19981;&#21516;&#30340;&#26426;&#21046;&#20027;&#35201;&#22320;&#26159;&#22312;
    </p>
    <p>
      Running context&#21644;Concurrency and locking&#19978;&#26377;&#25152;&#19981;&#21516;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480409431844" ID="ID_778307860" MODIFIED="1480412727306">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Running context</b>
    </p>
    <p>
      Linux network&#20027;&#35201;&#22320;&#26159;&#37319;&#29992;softirq&#21644;tasklets&#30340;&#26041;&#24335;&#12290;
    </p>
    <p>
      &#21516;&#19968;&#20010;&#23454;&#20363;&#21482;&#33021;&#20351;&#29992;&#19968;&#20010;tasklet, &#21516;&#19968;&#20010;cpu&#19978;&#21482;&#33021;&#36816;&#34892;&#19968;&#20010;
    </p>
    <p>
      &#23454;&#20363;&#30340;softirq, &#20294;&#26159;&#21516;&#19968;&#20010;softirq&#21364;&#21487;&#20197;&#22312;&#22810;&#20010;cpu&#19978;&#21516;&#26102;&#36816;&#34892;&#65292;
    </p>
    <p>
      &#36825;&#21152;&#24378;&#20102;&#24182;&#34892;&#30340;&#25928;&#26524;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480412744973" FOLDED="true" ID="ID_1906137440" MODIFIED="1486278362010">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Linux2.4 &#21450;&#20197;&#19978;&#29256;&#26412;&#24403;&#20013;&#23545;&#20013;&#26029;&#24213;&#21322;&#37096;&#30340;&#22788;&#29702;: </b>
    </p>
    <p>
      linux2.4&#21450;&#20197;&#19978;&#36890;&#36807;soft irq&#26469;&#23454;&#29616;&#20013;&#26029;&#24213;&#21322;&#37096;&#30340;&#22788;&#29702;&#65292;&#36825;&#26159;&#19968;&#31181;
    </p>
    <p>
      &#22810;&#32447;&#31243;&#30340;&#22788;&#29702;&#26041;&#24335;&#12290;&#22810;&#20010;softirq&#21487;&#20197;&#24182;&#34892;&#22320;&#36816;&#34892;&#65292;&#21516;&#19968;&#20010;softirq
    </p>
    <p>
      &#20063;&#21487;&#20197;&#36816;&#34892;&#22312;&#19981;&#21516;&#30340;cpu&#19978;&#38754;&#12290;
    </p>
    <p>
      &#22312;&#25991;&#20214;include/linux/interrupt.h&#24403;&#20013;&#23450;&#20041;&#20102;&#20843;&#31181;&#19981;&#21516;&#30340;softirq&#31867;&#22411;
    </p>
    <p>
      enum
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;HI_SOFTIRQ=0,
    </p>
    <p>
      &#160;&#160;&#160;&#160;TIMER_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;NET_TX_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;NET_RX_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;BLOCK_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;BLOCK_IOPOLL_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;TASKLET_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;SCHED_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;RCU_SOFTIRQ,
    </p>
    <p>
      &#160;&#160;&#160;&#160;NR_SOFTIRQS
    </p>
    <p>
      };
    </p>
    <p>
      <font color="#ea0505"><i>softirq&#26159;&#21487;&#20197;&#34987;&#25346;&#36215;&#30340;&#65292;&#20294;&#26159;kernel&#19981;&#20801;&#35768;&#22312;&#26576;&#20010;&#24050;&#32463;&#26377;&#25346;&#36215;&#30340;cpu&#19978;&#20877;&#25191;&#34892; </i></font>
    </p>
    <p>
      <font color="#ea0505"><i>&#26032;&#30340;&#20854;&#20182;&#30340;softirq, &#36825;&#26679;&#30340;&#26426;&#21046;&#20196;softirq&#33410;&#30465;&#20102;&#22823;&#37327;&#30340;&#38145;&#26426;&#21046;&#30340;&#20351;&#29992;&#12290; </i></font>
    </p>
    <p>
      &#27599;&#20010;softirq&#32500;&#25252;&#20102;&#19968;&#20010;&#25968;&#25454;&#32467;&#26500;:softnet_data
    </p>
    <p>
      &#30001;&#20110;&#21516;&#19968;&#20010;softirq&#21487;&#20197;&#36816;&#34892;&#22312;&#22810;&#20010;cpu&#19978;&#38754;&#65292;&#25152;&#20197;&#23545;&#20110;&#20849;&#20139;&#25968;&#25454;&#30340;&#35775;&#38382;&#38656;&#35201;&#21152;&#38145;
    </p>
  </body>
</html></richcontent>
<node CREATED="1480489089765" ID="ID_1242425214" MODIFIED="1480491780437">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>softirq&#27880;&#20876;:</b>
    </p>
    <p>
      static struct softirq_action softirq_vec[32] _ _cacheline_aligned_in_smp;
    </p>
    <p>
      void open_softirq(int nr, void (*action)(struct softirq_action*), void *data)
    </p>
    <p>
      {
    </p>
    <p>
      softirq_vec[nr].data = data;
    </p>
    <p>
      softirq_vec[nr].action = action;
    </p>
    <p>
      }
    </p>
    <p>
      &#25105;&#20204;&#30693;&#36947;&#22914;&#26524;&#19981;&#22312;&#20013;&#26029;&#19978;&#19979;&#25991;&#20013;&#35843;&#29992;raise_softirq&#26041;&#27861;&#65292;&#21017;&#35843;&#29992;wakeup_softirq
    </p>
    <p>
      &#26469;&#21796;&#37266;&#36719;&#20013;&#26029;&#23432;&#25252;&#36827;&#31243;&#65292;
    </p>
    <p>
      &#20869;&#26680;&#20013;&#26377;&#20004;&#22788;&#35843;&#29992;&#20102;wakeup_softirq&#21796;&#37266;&#20102;&#35813;&#23432;&#25252;&#36827;&#31243;&#65292;
    </p>
    <p>
      do_softirq
    </p>
    <p>
      raise_softirq_irqoff
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480491790290" ID="ID_591773696" MODIFIED="1480491812042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>tasklet</i></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480492482346" ID="ID_324300907" MODIFIED="1480492534501">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>ksoftirqd Kernel Threads</i> </b>
    </p>
    <p>
      &#20026;&#20102;&#24179;&#34913;&#30001;&#20110;network irq&#30340;&#25191;&#34892;&#32780;&#23548;&#33268;&#30340;&#20854;&#20182;&#30340;
    </p>
    <p>
      &#32447;&#31243;&#26080;&#27861;&#25191;&#34892;&#30340;&#24773;&#20917;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1480493111873" ID="ID_1846499766" MODIFIED="1480493447241">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Fields of softnet_data</b>
    </p>
    <p>
      struct sk_buff_head input_pkt_queue
    </p>
    <p>
      &#35813;&#25104;&#21592;&#22312;&#20989;&#25968;net_dev_init&#24403;&#20013;&#34987;&#21021;&#22987;&#21270;&#65292;&#35813;&#38431;&#21015;&#29992;&#20110;&#22312;
    </p>
    <p>
      driver&#20043;&#21069;&#25509;&#25910;&#32593;&#32476;&#25968;&#25454;
    </p>
    <p>
      struct list_head&#160;&#160;&#160;&#160;poll_list
    </p>
    <p>
      &#36825;&#26159;&#35774;&#22791;&#30340;&#21452;&#21521;&#38142;&#34920;&#65292;&#38142;&#34920;&#24403;&#20013;&#26377;&#24453;&#22788;&#29702;&#30340;frame
    </p>
    <p>
      struct Qdisc&#160;&#160;&#160;&#160;&#160;*output_queue
    </p>
    <p>
      struct sk_buff&#160;&#160;*completion_queue
    </p>
    <p>
      output_queue&#26159;&#26377;&#24453;&#20256;&#36755;&#25968;&#25454;&#30340;&#35774;&#22791;&#30340;&#21015;&#34920;&#65292;
    </p>
    <p>
      completion_queue&#26159;buffer&#30340;&#21015;&#34920;&#65292;&#35813;&#21015;&#34920;&#24403;&#20013;&#30340;&#25968;&#25454;&#24050;&#32463;
    </p>
    <p>
      &#34987;&#25104;&#21151;&#20256;&#36755;&#20986;&#21435;&#65292;&#24182;&#19988;&#31561;&#24453;&#34987;&#37322;&#25918;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1486278368906" FOLDED="true" ID="ID_1326516470" MODIFIED="1486605664693" TEXT="10.&#x5e27;&#x63a5;&#x6536;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1486278574378" FOLDED="true" ID="ID_575093139" MODIFIED="1486605661685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25152;&#35859;&#30340;&#24103;&#25509;&#25910;&#65292;&#21363;&#30828;&#20214;&#36890;&#36807;&#20013;&#26029;&#20449;&#21495;&#36890;&#30693;cpu&#24103;&#25968;&#25454;&#30340;&#21040;&#26469;
    </p>
    <p>
      cpu&#25509;&#25910;&#21040;&#20102;&#20013;&#26029;&#20449;&#21495;&#20043;&#21518;&#20250;&#25191;&#34892;do_IRQ&#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#20250;&#25191;&#34892;
    </p>
    <p>
      &#30456;&#24212;&#30340;&#39537;&#21160;&#24403;&#20013;&#27880;&#20876;&#22909;&#30340;&#20013;&#26029;&#22788;&#29702;&#21477;&#26564;&#12290;&#20013;&#26029;&#22788;&#29702;&#21477;&#26564;&#20250;&#25191;&#34892;&#19968;&#20123;
    </p>
    <p>
      &#32039;&#24613;&#30340;&#20219;&#21153;&#65292;&#28982;&#21518;&#23558;&#21097;&#19979;&#30340;&#20219;&#21153;&#35843;&#24230;&#21040;&#20013;&#26029;&#19979;&#21322;&#25991;&#24403;&#20013;&#36827;&#34892;&#22788;&#29702;&#12290;&#20855;&#20307;&#22320;&#26469;&#35828;&#20013;&#26029;
    </p>
    <p>
      &#22788;&#29702;&#21477;&#26564;&#20250;&#25191;&#34892;&#19979;&#38754;&#30340;&#21160;&#20316;&#65306;
    </p>
    <p>
      1.&#23558;&#25509;&#25910;&#21040;&#30340;&#25968;&#25454;&#25335;&#36125;&#21040;&#32467;&#26500;&#20307;sk_buff&#24403;&#20013;
    </p>
    <p>
      2.&#21021;&#22987;&#21270;&#19968;&#20123;sk_buff&#30456;&#20851;&#30340;&#21442;&#25968;&#65292;&#20379;&#19978;&#23618;&#30340;&#21327;&#35758;&#26632;&#21518;&#38754;&#20351;&#29992;&#65292;&#27604;&#22914;&#20250;&#21021;&#22987;&#21270;
    </p>
    <p>
      &#35813;sk_buff&#23545;&#24212;&#30340;&#32593;&#32476;&#21327;&#35758;&#30340;&#23383;&#27573;&#12290;
    </p>
    <p>
      3.&#26356;&#26032;&#19968;&#20123;&#35774;&#22791;&#30340;&#31169;&#26377;&#21442;&#25968;
    </p>
    <p>
      4.&#35843;&#24230;&#36719;&#20013;&#26029;NET_RX_SOFTIRQ&#36890;&#30693;cpu&#26032;&#30340;&#19968;&#24103;&#25968;&#25454;&#30340;&#21040;&#26469;
    </p>
  </body>
</html></richcontent>
<node CREATED="1486280151484" ID="ID_1423376586" MODIFIED="1486281130077">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>1.&#38431;&#21015;</i></b>
    </p>
    <p>
      &#24403;&#35752;&#35770;&#36923;&#36753;&#38142;&#36335;&#23618;&#30340;&#34892;&#20026;&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;&#32463;&#24120;&#20250;&#35752;&#35770;&#20837;&#21475;&#38431;&#21015;
    </p>
    <p>
      &#21644;&#20986;&#21475;&#38431;&#21015;&#12290;
    </p>
    <p>
      &#27599;&#20010;&#38431;&#21015;&#37117;&#26377;&#25351;&#38024;&#25351;&#21521;&#36319;&#23427;&#30456;&#20851;&#30340;&#35774;&#22791;&#65292;&#20197;&#21450;&#25351;&#21521;sk_buff&#30340;&#25351;&#38024;
    </p>
    <p>
      sk_buff&#24403;&#20013;&#23384;&#20648;&#20102;&#20837;&#21475;&#38431;&#21015;&#21644;&#20986;&#21475;&#38431;&#21015;&#24403;&#20013;&#30340;&#25968;&#25454;&#32531;&#23384;&#12290;&#20986;&#21475;&#38431;&#21015;&#26159;&#30452;&#25509;
    </p>
    <p>
      &#36319;&#35774;&#22791;&#20851;&#32852;&#22312;&#19968;&#36215;&#30340;&#65292;&#27969;&#37327;&#25511;&#21046;&#20026;&#27599;&#19968;&#20010;&#35774;&#22791;&#37117;&#20998;&#37197;&#20102;&#19968;&#20010;&#38431;&#21015;&#65292;&#20869;&#26680;&#20250;
    </p>
    <p>
      &#36319;&#36394;&#38656;&#35201;&#21457;&#36865;&#25968;&#25454;&#24103;&#30340;&#35774;&#22791;&#32780;&#19981;&#26159;&#36319;&#36394;&#25968;&#25454;&#24103;&#30340;&#26412;&#36523;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486281132382" FOLDED="true" ID="ID_1185969513" MODIFIED="1486605660357">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#36890;&#30693;&#20869;&#26680;&#24103;&#25509;&#25910;: NAPI&#21644;netif_rx
    </p>
    <p>
      &#20174;linux2.4&#24320;&#22987;&#65292;&#19968;&#31181;&#26032;&#30340;&#29992;&#20110;&#22788;&#29702;&#20837;&#21475;&#25968;&#25454;&#24103;&#30340;api&#34987;&#24341;&#29992;&#21040;&#20102;&#20869;&#26680;
    </p>
    <p>
      &#24403;&#20013;&#65292;&#35813;API&#23601;&#26159;NAPI&#12290;&#22240;&#20026;&#26377;&#19968;&#20123;&#39537;&#21160;&#36824;&#27809;&#26377;&#26356;&#26032;&#21040;&#20351;&#29992;NAPI&#19978;&#38754;&#26469;&#65292;
    </p>
    <p>
      &#25152;&#20197;&#26377;&#20004;&#31181;&#26041;&#24335;&#21487;&#20197;&#36890;&#30693;&#20869;&#26680;&#26032;&#30340;&#25968;&#25454;&#24103;&#30340;&#21040;&#26469;&#12290;
    </p>
    <p>
      a. &#36890;&#36807;&#26087;&#30340;&#20989;&#25968;&#65292;netif_rx
    </p>
    <p>
      b. &#36890;&#36807;NAPI&#30340;&#26426;&#21046;
    </p>
  </body>
</html></richcontent>
<node CREATED="1486286105288" ID="ID_1281423350" MODIFIED="1486286272158">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>netif_rx&#20195;&#30721;&#23454;&#20363;</b>
    </p>
    <p>
      skb = dev_alloc_skb(pkt_len + 5);
    </p>
    <p>
      ... ... ...
    </p>
    <p>
      if (skb != NULL) {
    </p>
    <p>
      skb-&gt;dev = dev;
    </p>
    <p>
      skb_reserve(skb, 2);
    </p>
    <p>
      /* Align IP on 16 byte boundaries */
    </p>
    <p>
      ... ... ...
    </p>
    <p>
      /* copy the DATA into the sk_buff structure */
    </p>
    <p>
      ... ... ...
    </p>
    <p>
      skb-&gt;protocol = eth_type_trans(skb, dev);
    </p>
    <p>
      netif_rx(skb);
    </p>
    <p>
      dev-&gt;last_rx = jiffies;
    </p>
    <p>
      ... ... ...
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486286472795" ID="ID_1596081545" MODIFIED="1486287549684">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      NAPI
    </p>
    <p>
      napi&#28151;&#21512;&#20102;&#20013;&#26029;&#21644;polling&#30340;&#26426;&#21046;&#65292;&#35813;&#28151;&#21512;&#26426;&#21046;&#21487;&#20197;&#22312;&#32593;&#32476;&#36890;&#20449;&#36127;&#36733;&#27604;&#36739;&#22823;&#30340;&#24773;&#20917;
    </p>
    <p>
      &#19979;&#26377;&#25928;&#25552;&#21319;&#32593;&#32476;&#30340;&#24615;&#33021;&#65292;&#21516;&#26102;&#20063;&#21487;&#20197;&#26377;&#25928;&#38477;&#20302;cpu&#30340;&#36127;&#36733;&#12290;
    </p>
    <p>
      &#20174;&#20869;&#26680;&#22788;&#29702;&#30340;&#35282;&#24230;&#30475;&#65292;NAPI&#30340;&#20960;&#22823;&#20248;&#28857;:
    </p>
    <p>
      1.&#38477;&#20302;cpu&#30340;&#36127;&#36733;
    </p>
    <p>
      2.&#22312;&#22788;&#29702;&#35774;&#22791;&#26041;&#38754;&#26356;&#21152;&#22320;&#20844;&#24179;
    </p>
  </body>
</html></richcontent>
<node CREATED="1486287559150" ID="ID_806903659" MODIFIED="1486290910761">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>net_device&#24403;&#20013;&#34987;NAPI&#20351;&#29992;&#21040;&#30340;&#25104;&#21592;&#21464;&#37327;</b>
    </p>
    <p>
      &#24403;&#20351;&#29992;NAPI&#30340;&#35774;&#22791;&#39537;&#21160;&#35843;&#24230;NET_RX_SOFTIRQ&#36719;&#20013;&#26029;&#30340;&#26102;&#20505;&#65292;net_device
    </p>
    <p>
      &#24403;&#20013;&#30340;&#22235;&#20010;&#25104;&#21592;&#21464;&#37327;&#20250;&#34987;&#20351;&#29992;&#21040;&#12290;&#20854;&#20182;&#19981;&#26159;&#29992;NAPI&#39537;&#21160;&#30340;&#35774;&#22791;&#23601;&#19981;&#20250;&#20351;&#29992;&#21040;
    </p>
    <p>
      &#36825;&#22235;&#20010;&#25104;&#21592;&#21464;&#37327;, &#22312;&#26368;&#26032;&#30340;&#20869;&#26680;&#20195;&#30721;&#24403;&#20013;&#36825;&#20123;&#21464;&#37327;&#24050;&#32463;&#34987;&#25918;&#32622;&#21040;&#20102;struct napi_struct
    </p>
    <p>
      &#24403;&#20013;&#20102;&#12290;
    </p>
    <p>
      poll &#36825;&#26159;&#19968;&#20010;&#34394;&#25311;&#20989;&#25968;&#65292;&#29992;&#20110;&#20174;&#35774;&#22791;&#30340;&#20837;&#21475;&#38431;&#21015;&#24403;&#20013;&#24377;&#20986;&#25968;&#25454;&#32531;&#23384;&#65292;&#23545;&#20110;&#20351;&#29992;NAPI&#30340;
    </p>
    <p>
      &#35774;&#22791;&#65292;&#35813;&#38431;&#21015;&#26159;&#19968;&#20010;&#31169;&#26377;&#30340;&#35774;&#22791;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1487039187302" FOLDED="true" ID="ID_1900448817" MODIFIED="1490355468171" POSITION="left" TEXT="BT/WIFI&#x82af;&#x7247;datasheet&#x89e3;&#x8bfb;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1470644180506" FOLDED="true" ID="ID_811862480" MODIFIED="1487039239523" TEXT="ap6234&#x82af;&#x7247;datasheet&#x9605;&#x8bfb;">
<node CREATED="1470644230698" ID="ID_619733051" MODIFIED="1470644981492">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#31532;13&#21495;&#24341;&#33050;WL_REG_ON
    </p>
    <p>
      &#20869;&#37096;&#31283;&#21387;&#30005;&#28304;&#20351;&#33021;&#24341;&#33050;&#65292;&#25511;&#21046;wlan&#30340;&#27169;&#22359;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1470644735554" ID="ID_1469490488" MODIFIED="1470644802590">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#31532;34&#21495;&#24341;&#33050;BT_RST_N
    </p>
    <p>
      &#34013;&#29273;&#26680;&#24515;&#27169;&#22359;&#20302;&#30005;&#20301;&#26377;&#25928;&#22797;&#20301;&#24341;&#33050;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1487039244587" ID="ID_258433070" MODIFIED="1487039769954">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ap6356
    </p>
    <p>
      &#35813;&#33455;&#29255;&#21644;IEEE 802.11 a/b/g/n/ac 2x2 MIMO&#26631;&#20934;&#20860;&#23481;
    </p>
    <p>
      wifi&#27169;&#22359;&#25903;&#25345;PCIe/SDIO&#25509;&#21475;
    </p>
    <p>
      bt&#27169;&#22359;&#25903;&#25345;uart/pcm&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
<node CREATED="1487039775736" ID="ID_891575910" MODIFIED="1487039783611">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="bt-wifi-soc/ap6356.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1487211443703" ID="ID_335871282" MODIFIED="1487234508251">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      AP6212SD &#20026;802.11 b/g/n&#160; <b>2.400 GHz ~2.497 GHz</b>
    </p>
    <p>
      AP6234SD &#20026;802.11 a/b/g/n
    </p>
    <p>
      AP6356SDPR&#20026;802.11 a/b/g/n/ac
    </p>
    <p>
      AP6212SD&#21644;AP6356SDPR&#26159;pin 2 pin
    </p>
    <p>
      <b>AP6255&#160;</b>&#160;802.11 a/b/g/n/ac dual-band
    </p>
    <p>
      <i><font color="#f00b0b">2.400 GHz ~ 2.497 GHz (2.4 GHz ISM Band) </font></i>
    </p>
    <p>
      <i><font color="#f00b0b">4.900 GHz ~ 5.845 GHz (5.0 GHz ISM Band)</font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</map>
