<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1433813407807" ID="ID_1562618889" MODIFIED="1496409680113" TEXT="&#x8001;&#x7f57;&#x5b89;&#x5353;&#x4e4b;&#x65c5;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="14"/>
<node COLOR="#ff6666" CREATED="1433813443993" FOLDED="true" ID="ID_807162115" MODIFIED="1606807971164" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.android4.4&#x6e90;&#x4ee3;&#x7801;&#x7f16;&#x8bd1;
    </p>
    <p>
      kernel&#x6e90;&#x4ee3;&#x7801;&#x7f16;&#x8bd1;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1433813482436" ID="ID_89612854" MODIFIED="1433813491165" TEXT="android&#x6e90;&#x4ee3;&#x7801;&#x7f16;&#x8bd1;"/>
<node CREATED="1433813494355" FOLDED="true" ID="ID_1660476030" MODIFIED="1502794309286" TEXT="kernel&#x7f16;&#x8bd1;">
<node CREATED="1433813502803" FOLDED="true" ID="ID_126974958" MODIFIED="1502794308166" TEXT="&#x786e;&#x5b9a;emulator&#x5bf9;&#x5e94;&#x7684;kernel">
<node CREATED="1433813531531" ID="ID_673274706" MODIFIED="1433813540510" TEXT="1.&#x8fd0;&#x884c;&#x6a21;&#x62df;&#x5668;"/>
<node CREATED="1433813542938" ID="ID_574459761" MODIFIED="1433813549637" TEXT="2.&#x542f;&#x52a8;adb shell"/>
<node CREATED="1433813552243" ID="ID_972882700" MODIFIED="1435060107328" TEXT="3.cat /proc/version">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x6211;&#x5b89;&#x88c5;&#x7684;4.4&#x7684;&#x6e90;&#x4ee3;&#x7801;&#x7684;&#x6a21;&#x62df;&#x5668;&#x8f93;&#x51fa;&#x7684;&#x4fe1;&#x606f;&#x662f;&#xff1a;
    </p>
    <p>
      Linux version 3.4.0-gd853d22(gcc version 4.6.x-google 20120106(prerelease)(GCC) ) #1 PREEMPT Tue Jul 9 17:46:46 PDT 2013
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node COLOR="#ff3399" CREATED="1433904174284" FOLDED="true" ID="ID_727268866" MODIFIED="1491040660765" POSITION="left" TEXT="2.&#x51c6;&#x5907;&#x5de5;&#x4f5c;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1433904215764" ID="ID_1108537317" MODIFIED="1433904221039" TEXT="1.&#x667a;&#x80fd;&#x6307;&#x9488;">
<node CREATED="1433922098822" ID="ID_106756988" MODIFIED="1433922164691">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      java&#x5185;&#x5b58;&#x56de;&#x6536;&#x673a;&#x5236;&#x5f53;&#x4e2d;&#xff1a;
    </p>
    <p>
      &#x5f3a;&#x5f15;&#x7528;,Soft,Weak and
    </p>
    <p>
      phantom reference
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433922206379" ID="ID_135881593" MODIFIED="1433922257599">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      apple cocoa&#x6846;&#x67b6;:
    </p>
    <p>
      &#x7236;&#x5bf9;&#x8c61;&#x5f15;&#x7528;&#x5b50;&#x5bf9;&#x8c61;&#x65f6;&#x4f7f;&#x7528;&#x5f3a;&#x5f15;&#x7528;
    </p>
    <p>
      &#x5b50;&#x5bf9;&#x8c61;&#x5f15;&#x7528;&#x7236;&#x5bf9;&#x8c61;&#x65f6;&#x4f7f;&#x7528;&#x5f31;&#x5f15;&#x7528;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433922347462" ID="ID_316134386" MODIFIED="1435059742783">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">android&#x4e2d;&#x7684;&#x667a;&#x80fd;&#x6307;&#x9488;&#xff1a; </font>
    </p>
    <p>
      <font color="#ff0000">&#x5bf9;&#x8c61;&#x63d0;&#x4f9b;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x5668;&#xff0c;&#x4f46;&#x662f;&#x4e0d;&#x8d1f;&#x8d23;&#x53bb;&#x7ba1;&#x7406;&#x5b83;&#xff1b; </font>
    </p>
    <p>
      <font color="#ff0000">&#x7531;&#x667a;&#x80fd;&#x6307;&#x9488;&#x5bf9;&#x8c61;&#x6765;&#x8d1f;&#x8d23;&#x7ba1;&#x7406;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x5668;</font><br/>
    </p>
    <p>
      <font size="3">1.</font><font face="Arial" size="3" color="rgb(51, 51, 51)">&#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x8d1f;&#x8d23;&#x63d0;&#x4f9b;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x5668;&#x7684;&#x516c;&#x5171;&#x7c7b; </font>
    </p>
    <p>
      <font face="Arial" size="3" color="rgb(51, 51, 51)">2.&#x5b9e;&#x73b0;&#x76f8;&#x5e94;&#x7684;&#x667a;&#x80fd;&#x6307;&#x9488;&#x5bf9;&#x8c61;&#x7c7b;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1433922358754" ID="ID_2901464" MODIFIED="1434087873161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#x8f7b;&#x91cf;&#x7ea7;&#x7684;&#x667a;&#x80fd;&#x6307;&#x9488;&#xff1a;
    </p>
    <p>
      frameworks/rs/cpp/util
    </p>
  </body>
</html></richcontent>
<node CREATED="1434087953608" ID="ID_124748412" MODIFIED="1434348494999">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      lightRefBase:RefBase.h
    </p>
    <p>
      src/frameworks/rs/cpp/util
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1434088033600" ID="ID_158141013" MODIFIED="1434088057543">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      StrongPointer.h:
    </p>
    <p>
      class sp
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1434087591620" ID="ID_269236394" MODIFIED="1434348512346">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#x5f3a;&#x6307;&#x9488;:sp
    </p>
    <p>
      src/system/core/libutils
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1434091176363" ID="ID_588741290" MODIFIED="1434418970424">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#x5f31;&#x6307;&#x9488;:wp
    </p>
    <p>
      frameworks/rs/cpp/util
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1434350115621" ID="ID_122677936" MODIFIED="1435060107362">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.class RefBase&#x5bf9;&#x8c61;&#x7684;&#x5b9e;&#x73b0;
    </p>
    <p>
      src/system/core/libutils/RefBase.cpp
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font size="3">1.&#x5728;RefBase&#x7684;decstrong&#x51fd;&#x6570;&#x5f53;&#x4e2d;&#xff0c;&#x5982;&#x679c;&#x5f3a;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x5df2;&#x7ecf;&#x4e3a;0&#xff0c;&#x5e76;&#x4e14;&#x8be5;&#x5bf9;&#x8c61;&#x7684;&#x58f0;&#x660e;&#x5468;&#x671f;&#x662f;&#x53d7;&#x5230;&#x5f3a;&#x5e94;&#x7528;&#x8ba1;&#x6570;&#x63a7;&#x5236;&#x7684;&#xff0c;&#x90a3;&#x4e48;&#x4ee3;&#x7801;&#x4f1a;&#x5220;&#x9664;RefBase&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#x3002; </font></i>
    </p>
    <p>
      <i><font size="3">&#x5220;&#x9664;&#x4e4b;&#x540e;&#x4f1a;&#x68c0;&#x67e5;mRefs&#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5f31;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x51cf;&#x4e00;&#x4e4b;&#x540e;&#x662f;&#x5426;&#x4e3a;0&#xff0c;&#x82e5;&#x4e0d;&#x662f;0&#x5219;&#x8fd4;&#x56de;&#xff0c;&#x4e0d;&#x5220;&#x9664;weakref_impl&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#xff0c;&#x90a3;&#x4e48;&#x95ee;&#x9898;&#x6765;&#x4e86;&#xff0c;&#x65e2;&#x7136;RefBase&#x90fd;&#x88ab; </font></i>
    </p>
    <p>
      <i><font size="3">&#x5220;&#x9664;&#x4e86;&#xff0c;&#x7559;&#x4e0b;weakref_impl&#x8fd8;&#x6709;&#x610f;&#x4e49;&#x5417;&#xff1f; </font></i>
    </p>
    <p style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; font-style: normal; color: rgb(51, 51, 51); text-align: left; text-indent: 0px; letter-spacing: normal; font-family: Arial; font-variant: normal; white-space: normal; font-size: 14px; line-height: 26px; font-weight: normal">
      <em><i><font size="3"><strong>&#x5206;&#x6790;&#x5230;&#x8fd9;&#x91cc;&#xff0c;&#x6709;&#x5fc5;&#x8981;&#x5c0f;&#x7ed3;&#x4e00;&#x4e0b;&#xff1a;</strong></font></i></em>
    </p>
    <p style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; font-style: normal; color: rgb(51, 51, 51); text-align: left; text-indent: 0px; letter-spacing: normal; font-family: Arial; font-variant: normal; white-space: normal; font-size: 14px; line-height: 26px; font-weight: normal">
      <em><i><font size="3"><strong>A. &#x5982;&#x679c;&#x5bf9;&#x8c61;&#x7684;&#x6807;&#x5fd7;&#x4f4d;&#x88ab;&#x8bbe;&#x7f6e;&#x4e3a;0&#xff0c;&#x90a3;&#x4e48;&#x53ea;&#x8981;&#x53d1;&#x73b0;&#x5bf9;&#x8c61;&#x7684;&#x5f3a;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x503c;&#x4e3a;0&#xff0c;&#x90a3;&#x5c31;&#x4f1a;&#x81ea;&#x52a8;delete&#x6389;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#xff1b; </strong></font></i></em>
    </p>
    <p style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; font-style: normal; color: rgb(51, 51, 51); text-align: left; text-indent: 0px; letter-spacing: normal; font-family: Arial; font-variant: normal; white-space: normal; font-size: 14px; line-height: 26px; font-weight: normal">
      <em><i><font size="3"><strong>&#xff08;&#x5982;&#x679c;&#x5728;&#x5f3a;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x4e3a;0&#xff0c;&#x5355;&#x662f;&#x5374;&#x88ab;&#x5f31;&#x5f15;&#x7528;&#x7684;&#x60c5;&#x51b5;&#xff1f;&#xff09;</strong></font></i></em>
    </p>
    <p style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; font-style: normal; color: rgb(51, 51, 51); text-align: left; text-indent: 0px; letter-spacing: normal; font-family: Arial; font-variant: normal; white-space: normal; font-size: 14px; line-height: 26px; font-weight: normal">
      <em><i><font size="3">B. &#x5982;&#x679c;&#x5bf9;&#x8c61;&#x7684;&#x6807;&#x5fd7;&#x4f4d;&#x88ab;&#x8bbe;&#x7f6e;&#x4e3a;<strong>OBJECT_LIFETIME_WEAK&#xff0c;&#x90a3;&#x4e48;&#x53ea;&#x6709;&#x5f53;&#x5bf9;&#x8c61;&#x7684;&#x5f3a;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x548c;&#x5f31;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x90fd;&#x4e3a;0&#x7684;&#x65f6;&#x5019;&#xff0c;&#x624d;&#x4f1a;&#x81ea;&#x52a8;delete&#x6389;&#x8fd9;&#x4e2a;&#x5bf9;&#x8c61;&#xff1b;</strong></font></i></em>
    </p>
    <p style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; font-style: normal; color: rgb(51, 51, 51); text-align: left; text-indent: 0px; letter-spacing: normal; font-family: Arial; font-variant: normal; white-space: normal; font-size: 14px; line-height: 26px; font-weight: normal">
      <i><font size="3">C. &#x5982;&#x679c;&#x5bf9;&#x8c61;&#x7684;&#x6807;&#x5fd7;&#x4f4d;&#x88ab;&#x8bbe;&#x7f6e;&#x4e3a;<em><strong>OBJECT_LIFETIME_FOREVER&#xff0c;&#x90a3;&#x4e48;&#x5bf9;&#x8c61;&#x5c31;&#x6c38;&#x8fdc;&#x4e0d;&#x4f1a;&#x81ea;&#x52a8;&#x88ab;delete&#x6389;&#xff0c;&#x8c01;new&#x51fa;&#x6765;&#x7684;&#x5bf9;&#x8c61;&#x8c01;&#x6765;delete&#x6389;&#x3002;</strong></em></font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1433990401855" ID="ID_1334121225" MODIFIED="1435060107372" TEXT="2.Android.mk&#x6587;&#x4ef6;&#x89e3;&#x6790;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x4e00;&#x4e2a;&#x4f8b;&#x5b50;&#xff1a;
    </p>
    <p>
      LOCAL_PATH&#xa0;&#xa0;:= $(call my-dir)
    </p>
    <p>
      include $(CLEAR_VARS)
    </p>
    <p>
      LOCAL_MODULE := helloworld
    </p>
    <p>
      LOCAL_SRC_FILES := helloworld.c
    </p>
    <p>
      include $(BUILD_SHARED_LIBRARY)
    </p>
  </body>
</html></richcontent>
<node CREATED="1433990569504" ID="ID_720156100" MODIFIED="1433990609558">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LOCAL_PATH&#x7528;&#x4e8e;&#x8fd4;&#x56de;&#x5f53;&#x524d;&#x7684;
    </p>
    <p>
      Android.mk&#x5728;&#x6e90;&#x4ee3;&#x7801;&#x6811;&#x5f53;&#x4e2d;&#x7684;&#x4f4d;&#x7f6e;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433990613776" ID="ID_957126907" MODIFIED="1433990738873" TEXT="CLEAR_VARS&#x6307;&#x5b9a;&#x8ba9;GNU MAKEFILE&#x6e05;&#x9664;&#x8bb8;&#x591a;LOCAL&#x53d8;&#x91cf;"/>
<node CREATED="1433990744278" ID="ID_1462492100" MODIFIED="1433990903108">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5728;android&#x4e2d;&#x589e;&#x52a0;&#x672c;&#x5730;&#x7a0b;&#x5e8f;&#x6216;&#x8005;&#x5e93;
    </p>
    <p>
      &#x8fd9;&#x4e9b;&#x5e93;&#x8ddf;&#x5b83;&#x6240;&#x8f7d;&#x8def;&#x5f84;&#x6ca1;&#x6709;&#x4efb;&#x4f55;&#x5173;&#x7cfb;
    </p>
    <p>
      &#x53ea;&#x8ddf;Android.mk&#x6709;&#x5173;&#x7cfb;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node COLOR="#ff3399" CREATED="1434595137079" FOLDED="true" ID="ID_952755098" MODIFIED="1508830435467" POSITION="right" TEXT="3.android&#x786c;&#x4ef6;&#x62bd;&#x8c61;&#x5c42;&#x7684;&#x7f16;&#x5199;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1434595402842" ID="ID_11414605" MODIFIED="1435563673556" TEXT="1.&#x5728;&#x5185;&#x6838;&#x6e90;&#x4ee3;&#x7801;&#x5f53;&#x4e2d;&#x6dfb;&#x52a0;&#x9a71;&#x52a8;&#x7a0b;&#x5e8f;">
<node CREATED="1434595511258" ID="ID_402416564" MODIFIED="1434595693868">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#x8fdb;&#x5165;&#x5230;kernel/common/drivers&#x76ee;&#x5f55;&#x5f53;&#x4e2d;&#xff0c;&#x5728;&#x8be5;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x65b0;&#x5efa;hello&#x76ee;&#x5f55;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#x65b0;&#x5efa;hello.h&#x548c;hello.c&#x6587;&#x4ef6;&#x7528;&#x4e8e;&#x58f0;&#x660e;&#x9a71;&#x52a8;&#x7684;&#x5934;&#x6587;&#x4ef6;&#x548c;&#x76f8;&#x5173;&#x7684;&#x5b9e;&#x73b0;&#x6587;&#x4ef6;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1434595736841" ID="ID_1468130062" MODIFIED="1434604410750">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">2.&#x5728;hello&#x76ee;&#x5f55;&#x5f53;&#x4e2d;&#x65b0;&#x589e;Kconfig&#x548c;Makefile&#x6587;&#x4ef6; </font>
    </p>
    <p>
      <font face="monospace" color="rgb(51, 51, 51)" size="3">&#xa0;Kconfig&#x662f;&#x5728;&#x7f16;&#x8bd1;&#x524d;&#x6267;&#x884c;&#x914d;&#x7f6e;&#x547d;&#x4ee4;make menuconfig&#x65f6;&#x7528;&#x5230;&#x7684;&#xff0c; </font>
    </p>
    <p>
      <font face="monospace" color="rgb(51, 51, 51)" size="3">&#xa0;&#x800c;Makefile&#x662f;&#x6267;&#x884c;&#x7f16;&#x8bd1;&#x547d;&#x4ee4;make&#x65f6;&#x7528;&#x5230;&#x7684;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1434604355882" ID="ID_630224235" MODIFIED="1434604407847">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">Kconfig&#x6587;&#x4ef6;&#x5f53;&#x4e2d;&#x7684;&#x5185;&#x5bb9; </font>
    </p>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3" face="Verdana">config HELLO</font>
    </div>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3" face="Verdana">tristate "First Android Driver"</font>
    </div>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3" face="Verdana">default n</font>
    </div>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3" face="Verdana">help</font>
    </div>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3" face="Verdana">This is the first android driver.</font>
    </div>
  </body>
</html></richcontent>
</node>
<node CREATED="1434604424632" ID="ID_585090467" MODIFIED="1434605238958">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Verdana" color="rgb(51, 51, 51)" size="3">Makefile: </font>
    </p>
    <p>
      <font face="Verdana" color="rgb(51, 51, 51)" size="3">obj-$(CONFIG_HELLO) += hello.o</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1434604226011" ID="ID_1949185781" MODIFIED="1434605400880">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3" face="Verdana">3.&#x4fee;&#x6539;arch/arm/Kconfig&#x548c;drivers/kconfig&#x4e24;&#x4e2a;&#x6587;&#x4ef6;, &#x5728;menu "Device Drivers"&#x548c;endmenu&#x4e4b;&#x95f4;&#x6dfb;&#x52a0;&#x4e00;&#x884c;&#xff1a;</font>
    </div>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3"><strong>source "drivers/hello/Kconfig"</strong></font>
    </div>
  </body>
</html></richcontent>
</node>
<node CREATED="1434605359082" ID="ID_589780438" MODIFIED="1434605392267">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3">4.&#x4fee;&#x6539;drivers/Makefile&#x6587;&#x4ef6;&#xff0c;&#x6dfb;&#x52a0;&#x4e00;&#x884c;&#xff1a; </font>
    </div>
    <div style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3">&#xa0;&#xa0;&#xa0;&#xa0;<strong>obj-$(CONFIG_HELLO) += hello/</strong> </font>
    </div>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1434605582177" ID="ID_430396361" MODIFIED="1435226974703" TEXT="2.&#x5728;android&#x6e90;&#x4ee3;&#x7801;&#x5f53;&#x4e2d;&#x6dfb;&#x52a0;&#x8bbf;&#x95ee;&#x9a71;&#x52a8;&#x7684;c&#x7a0b;&#x5e8f;">
<node CREATED="1434605608439" ID="ID_1677340563" MODIFIED="1434605619064" TEXT="1.&#x5728;external&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x65b0;&#x5efa;hello&#x6587;&#x4ef6;&#x5939;"/>
<node CREATED="1434605627465" ID="ID_288260143" MODIFIED="1434605655467">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#x5728;hello&#x6587;&#x4ef6;&#x5939;&#x4e0b;&#x9762;&#x65b0;&#x5efa;hello.c&#x6587;&#x4ef6;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1434605670741" ID="ID_584076071" MODIFIED="1434605754269">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">3.&#x5728;hello&#x76ee;&#x5f55;&#x5f53;&#x4e2d;&#x65b0;&#x5efa;Android.mk&#x6587;&#x4ef6; </font>
    </p>
    <p style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3"><strong>&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_PATH := $(call my-dir)</strong>&#xa0; </font>
    </p>
    <p style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3"><strong>&#xa0;&#xa0;&#xa0;&#xa0;include $(CLEAR_VARS)</strong>&#xa0; </font>
    </p>
    <p style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3"><strong>&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_MODULE_TAGS := optional</strong>&#xa0; </font>
    </p>
    <p style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3"><strong>&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_MODULE := hello</strong>&#xa0; </font>
    </p>
    <p style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3"><strong>&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_SRC_FILES := $(call all-subdir-c-files)</strong>&#xa0; </font>
    </p>
    <p style="text-transform: none; font-weight: normal; color: rgb(51, 51, 51); font-variant: normal; text-indent: 0px; background-color: rgb(255, 255, 255); text-align: left; font-style: normal; word-spacing: 0px; font-size: 13.63636302947998px; font-family: Arial; white-space: normal; letter-spacing: normal; line-height: 25.99431800842285px">
      <font size="3"><strong>&#xa0;&#xa0;&#xa0;&#xa0;include $(BUILD_EXECUTABLE)</strong>&#xa0; </font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1435048084022" ID="ID_1163696792" MODIFIED="1435210726058" TEXT="android&#x786c;&#x4ef6;&#x62bd;&#x8c61;&#x5c42;&#x63a5;&#x53e3;&#x89c4;&#x8303;">
<node CREATED="1435048118699" ID="ID_980174054" MODIFIED="1435048352054" TEXT="1.struct hw_module_t;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      typedef struct hw_module_t {
    </p>
    <p>
      uint32_t tag;
    </p>
    <p>
      uint16_t module_api_version;
    </p>
    <p>
      #define version_major module_api_version
    </p>
    <p>
      uint16_t hal_api_version;
    </p>
    <p>
      #define version_minor hal_api_version
    </p>
    <p>
      const char *id;
    </p>
    <p>
      const char *name;
    </p>
    <p>
      const char *author;
    </p>
    <p>
      struct hw_module_methods_t* methods;
    </p>
    <p>
      &#xa0;void* dso;
    </p>
    <p>
      uint32_t reserved[32-7];
    </p>
    <p>
      } hw_module_t;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435048148226" ID="ID_1066273147" MODIFIED="1435048395209" TEXT="2.struct hw_module_methods_t;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      152 typedef struct hw_module_methods_t {
    </p>
    <p>
      153&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/** Open a specific device */
    </p>
    <p>
      154&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int (*open)(const struct hw_module_t* module, const char* id,
    </p>
    <p>
      155&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;struct hw_device_t** device);
    </p>
    <p>
      156
    </p>
    <p>
      157 } hw_module_methods_t;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435048162958" ID="ID_149899466" MODIFIED="1435048677062" TEXT="3.struct hw_device_t;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      typedef struct hw_device_t {
    </p>
    <p>
      uint32_t tag;
    </p>
    <p>
      uint32_t version;
    </p>
    <p>
      struct hw_module_t* module;
    </p>
    <p>
      uint32_t reserved[12];
    </p>
    <p>
      int (*close)(struct hw_device_t* device);
    </p>
    <p>
      &#xa0;} hw_device_t;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1435059904659" ID="ID_389991330" MODIFIED="1435059916240" TEXT="3.&#x5177;&#x4f53;&#x7684;&#x62bd;&#x8c61;&#x5c42;&#x4ee3;&#x7801;&#x5b9e;&#x73b0;">
<node CREATED="1435059933770" ID="ID_1644178129" MODIFIED="1435060214957" TEXT="1.&#x4e00;&#x4e9b;&#x5934;&#x6587;&#x4ef6;&#x7684;&#x5f15;&#x7528;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol class="dp-cpp" style="border-bottom-style: none; line-height: 25.99431800842285px; font-style: normal; font-size: 11.818181991577148px; border-left-style: none; margin-left: 45px; border-left-width: medium; font-weight: normal; padding-bottom: 0px; white-space: normal; font-variant: normal; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; text-transform: none; background-color: rgb(255, 255, 255); border-bottom-width: medium; word-spacing: 0px; letter-spacing: normal; color: rgb(92, 92, 92); text-align: left; list-style: decimal; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; margin-bottom: 1px; text-indent: 0px" start="1">
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#define&#xa0;LOG_TAG&#xa0;"HelloStub"</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#include&#xa0;&lt;hardware/hardware.h&gt;</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#include&#xa0;&lt;hardware/hello.h&gt;</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#include&#xa0;&lt;fcntl.h&gt;</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#include&#xa0;&lt;errno.h&gt;</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#include&#xa0;&lt;cutils/log.h&gt;</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#include&#xa0;&lt;cutils/atomic.h&gt;</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#define&#xa0;DEVICE_NAME&#xa0;"/dev/hello"</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="gray" size="2">#define&#xa0;MODULE_NAME&#xa0;"Hello"</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1435060219368" ID="ID_636209932" MODIFIED="1435060247429" TEXT="2.&#x4e00;&#x4e9b;&#x51fd;&#x6570;&#x7684;&#x58f0;&#x660e;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol class="dp-cpp" style="border-bottom-style: none; line-height: 25.99431800842285px; font-style: normal; font-size: 11.818181991577148px; border-left-style: none; margin-left: 45px; border-left-width: medium; font-weight: normal; padding-bottom: 0px; white-space: normal; font-variant: normal; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; text-transform: none; background-color: rgb(255, 255, 255); border-bottom-width: medium; word-spacing: 0px; letter-spacing: normal; color: rgb(92, 92, 92); text-align: left; list-style: decimal; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; margin-bottom: 1px; text-indent: 0px" start="1">
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">static</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;hello_device_open(</font><b><font color="rgb(0, 102, 153)" size="2">const</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hw_module_t*&#xa0;module,&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">const</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">char</font></b><font color="black" size="2">*&#xa0;name,&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hw_device_t**&#xa0;device);&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">static</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;hello_device_close(</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hw_device_t*&#xa0;device);&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="rgb(0, 130, 0)" size="2">/*&#x8bbe;&#x5907;&#x8bbf;&#x95ee;&#x63a5;&#x53e3;*/</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">static</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;hello_set_val(</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_device_t*&#xa0;dev,&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;val);&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">static</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;hello_get_val(</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_device_t*&#xa0;dev,&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">*&#xa0;val);&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="rgb(0, 130, 0)" size="2">/*&#x6a21;&#x5757;&#x65b9;&#x6cd5;&#x8868;*/</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">static</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hw_module_methods_t&#xa0;hello_module_methods&#xa0;=&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;open:&#xa0;hello_device_open&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">};&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="rgb(0, 130, 0)" size="2">/*&#x6a21;&#x5757;&#x5b9e;&#x4f8b;&#x53d8;&#x91cf;*/</font><font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_module_t&#xa0;HAL_MODULE_INFO_SYM&#xa0;=&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;common:&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;tag:&#xa0;HARDWARE_MODULE_TAG,&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;version_major:&#xa0;1,&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;version_minor:&#xa0;0,&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;id:&#xa0;HELLO_HARDWARE_MODULE_ID,&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;name:&#xa0;MODULE_NAME,&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;author:&#xa0;MODULE_AUTHOR,&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;methods:&#xa0;&amp;hello_module_methods,&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">};&#xa0;&#xa0;</font>
      </li>
    </ol>
  </body>
</html></richcontent>
<node CREATED="1435060469306" ID="ID_523661913" MODIFIED="1435060496456" TEXT="hello_device_open&#x5b9e;&#x73b0;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol class="dp-cpp" style="border-bottom-style: none; line-height: 25.99431800842285px; font-style: normal; font-size: 11.818181991577148px; border-left-style: none; margin-left: 45px; border-left-width: medium; font-weight: normal; padding-bottom: 0px; white-space: normal; font-variant: normal; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; text-transform: none; background-color: rgb(255, 255, 255); border-bottom-width: medium; word-spacing: 0px; letter-spacing: normal; color: rgb(92, 92, 92); text-align: left; list-style: decimal; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; margin-bottom: 1px; text-indent: 0px" start="1">
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">static</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;hello_device_open(</font><b><font color="rgb(0, 102, 153)" size="2">const</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hw_module_t*&#xa0;module,&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">const</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">char</font></b><font color="black" size="2">*&#xa0;name,&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hw_device_t**&#xa0;device)&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_device_t*&#xa0;dev;dev&#xa0;=&#xa0;(</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_device_t*)malloc(</font><b><font color="rgb(0, 102, 153)" size="2">sizeof</font></b><font color="black" size="2">(</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_device_t));&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">if</font></b><font color="black" size="2">(!dev)&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOGE(</font><font color="blue" size="2">"Hello&#xa0;Stub:&#xa0;failed&#xa0;to&#xa0;alloc&#xa0;space"</font><font color="black" size="2">);&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">return</font></b><font color="black" size="2">&#xa0;-EFAULT;&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;memset(dev,&#xa0;0,&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">sizeof</font></b><font color="black" size="2">(</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_device_t));&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;dev-&gt;common.tag&#xa0;=&#xa0;HARDWARE_DEVICE_TAG;&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;dev-&gt;common.version&#xa0;=&#xa0;0;&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;dev-&gt;common.module&#xa0;=&#xa0;(hw_module_t*)module;&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;dev-&gt;common.close&#xa0;=&#xa0;hello_device_close;&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;dev-&gt;set_val&#xa0;=&#xa0;hello_set_val;dev-&gt;get_val&#xa0;=&#xa0;hello_get_val;&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">if</font></b><font color="black" size="2">((dev-&gt;fd&#xa0;=&#xa0;open(DEVICE_NAME,&#xa0;O_RDWR))&#xa0;==&#xa0;-1)&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOGE(</font><font color="blue" size="2">"Hello&#xa0;Stub:&#xa0;failed&#xa0;to&#xa0;open&#xa0;/dev/hello&#xa0;--&#xa0;%s."</font><font color="black" size="2">,&#xa0;strerror(errno));free(dev);&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">return</font></b><font color="black" size="2">&#xa0;-EFAULT;&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;*device&#xa0;=&#xa0;&amp;(dev-&gt;common);&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;LOGI(</font><font color="blue" size="2">"Hello&#xa0;Stub:&#xa0;open&#xa0;/dev/hello&#xa0;successfully."</font><font color="black" size="2">);&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">return</font></b><font color="black" size="2">&#xa0;0;&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">}&#xa0;&#xa0;</font>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1435061183852" ID="ID_911523965" MODIFIED="1435061210686" TEXT="hello_device_close&#x5b9e;&#x73b0;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol class="dp-cpp" style="border-bottom-style: none; line-height: 25.99431800842285px; font-style: normal; font-size: 11.818181991577148px; border-left-style: none; margin-left: 45px; border-left-width: medium; font-weight: normal; padding-bottom: 0px; white-space: normal; font-variant: normal; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; text-transform: none; background-color: rgb(255, 255, 255); border-bottom-width: medium; word-spacing: 0px; letter-spacing: normal; color: rgb(92, 92, 92); text-align: left; list-style: decimal; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; margin-bottom: 1px; text-indent: 0px" start="1">
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">static</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_device_close(</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hw_device_t*&#xa0;device)&#xa0;{&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_device_t*&#xa0;hello_device&#xa0;=&#xa0;(</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_device_t*)device;&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">if</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">(hello_device)&#xa0;{&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;close(hello_device-&gt;fd);&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;free(hello_device);&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">return</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;0;&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">}&#xa0;&#xa0;</font></span>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1435061227355" ID="ID_620848857" MODIFIED="1435061246868" TEXT="hello_set_val&#x5b9e;&#x73b0;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol class="dp-cpp" style="border-bottom-style: none; line-height: 25.99431800842285px; font-style: normal; font-size: 11.818181991577148px; border-left-style: none; margin-left: 45px; border-left-width: medium; font-weight: normal; padding-bottom: 0px; white-space: normal; font-variant: normal; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; text-transform: none; background-color: rgb(255, 255, 255); border-bottom-width: medium; word-spacing: 0px; letter-spacing: normal; color: rgb(92, 92, 92); text-align: left; list-style: decimal; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; margin-bottom: 1px; text-indent: 0px" start="1">
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <b><font color="rgb(0, 102, 153)" size="2">static</font></b><font color="black" size="2">&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;hello_set_val(</font><b><font color="rgb(0, 102, 153)" size="2">struct</font></b><font color="black" size="2">&#xa0;hello_device_t*&#xa0;dev,&#xa0;</font><b><font color="rgb(46, 139, 87)" size="2">int</font></b><font color="black" size="2">&#xa0;val)&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;LOGI(</font><font color="blue" size="2">"Hello&#xa0;Stub:&#xa0;set&#xa0;value&#xa0;%d&#xa0;to&#xa0;device."</font><font color="black" size="2">,&#xa0;val);&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;write(dev-&gt;fd,&#xa0;&amp;val,&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">sizeof</font></b><font color="black" size="2">(val));&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;</font>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="rgb(0, 102, 153)" size="2">return</font></b><font color="black" size="2">&#xa0;0;&#xa0;&#xa0;</font>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <font color="black" size="2">}&#xa0;&#xa0;</font>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1435061259477" ID="ID_1615242487" MODIFIED="1435061273100" TEXT="hello_get_val&#x5b9e;&#x73b0;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol class="dp-cpp" style="border-bottom-style: none; line-height: 25.99431800842285px; font-style: normal; font-size: 11.818181991577148px; border-left-style: none; margin-left: 45px; border-left-width: medium; font-weight: normal; padding-bottom: 0px; white-space: normal; font-variant: normal; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; text-transform: none; background-color: rgb(255, 255, 255); border-bottom-width: medium; word-spacing: 0px; letter-spacing: normal; color: rgb(92, 92, 92); text-align: left; list-style: decimal; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; margin-bottom: 1px; text-indent: 0px" start="1">
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">static</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_get_val(</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_device_t*&#xa0;dev,&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">*&#xa0;val)&#xa0;{&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">if</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">(!val)&#xa0;{&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOGE(</font></span><span class="string" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: blue; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="blue" size="2">"Hello&#xa0;Stub:&#xa0;error&#xa0;val&#xa0;pointer"</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">);&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">return</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;-EFAULT;&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;read(dev-&gt;fd,&#xa0;val,&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">sizeof</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">(*val));&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;LOGI(</font></span><span class="string" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: blue; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="blue" size="2">"Hello&#xa0;Stub:&#xa0;get&#xa0;value&#xa0;%d&#xa0;from&#xa0;device"</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">,&#xa0;*val);&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">return</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;0;&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">}&#xa0;&#xa0;</font></span>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1435060539633" ID="ID_554815684" MODIFIED="1435060568425" TEXT="4.&#x62bd;&#x8c61;&#x5c42;&#x4ee3;&#x7801;&#x5934;&#x6587;&#x4ef6;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol class="dp-cpp" style="border-bottom-style: none; line-height: 25.99431800842285px; font-style: normal; font-size: 11.818181991577148px; border-left-style: none; margin-left: 45px; border-left-width: medium; font-weight: normal; padding-bottom: 0px; white-space: normal; font-variant: normal; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; text-transform: none; background-color: rgb(255, 255, 255); border-bottom-width: medium; word-spacing: 0px; letter-spacing: normal; color: rgb(92, 92, 92); text-align: left; list-style: decimal; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; margin-bottom: 1px; text-indent: 0px" start="1">
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="preprocessor" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: gray; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="gray" size="2">#ifndef&#xa0;ANDROID_HELLO_INTERFACE_H</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="preprocessor" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: gray; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="gray" size="2">#define&#xa0;ANDROID_HELLO_INTERFACE_H</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="preprocessor" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: gray; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="gray" size="2">#include&#xa0;&lt;hardware/hardware.h&gt;</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">__BEGIN_DECLS&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="comment" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 130, 0); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="rgb(0, 130, 0)" size="2">/*&#x5b9a;&#x4e49;&#x6a21;&#x5757;ID*/</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="preprocessor" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: gray; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="gray" size="2">#define&#xa0;HELLO_HARDWARE_MODULE_ID&#xa0;"hello"</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="comment" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 130, 0); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="rgb(0, 130, 0)" size="2">/*&#x786c;&#x4ef6;&#x6a21;&#x5757;&#x7ed3;&#x6784;&#x4f53;*/</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_module_t&#xa0;{&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hw_module_t&#xa0;common;&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">};&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="comment" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 130, 0); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="rgb(0, 130, 0)" size="2">/*&#x786c;&#x4ef6;&#x63a5;&#x53e3;&#x7ed3;&#x6784;&#x4f53;*/</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_device_t&#xa0;{&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hw_device_t&#xa0;common;&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;fd;&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;(*set_val)(</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_device_t*&#xa0;dev,&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;val);&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;&#xa0;&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;(*get_val)(</font></span><span class="keyword" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(0, 102, 153); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(0, 102, 153)" size="2">struct</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;hello_device_t*&#xa0;dev,&#xa0;</font></span><span class="datatypes" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; font-weight: bold; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: rgb(46, 139, 87); padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><b><font color="rgb(46, 139, 87)" size="2">int</font></b></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">*&#xa0;val);&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">};&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">__END_DECLS&#xa0;&#xa0;</font></span>
      </li>
      <li class="" style="background-color: rgb(248, 248, 248); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: rgb(92, 92, 92); margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
      <li class="alt" style="background-color: rgb(255, 255, 255); margin-top: 0px; padding-left: 10px; border-left-width: 3px; color: black; margin-left: 0; border-bottom-style: none; border-top-style: none; border-left-color: rgb(108, 226, 108); margin-right: 0; padding-right: 3px; padding-bottom: 0px; list-style: decimal-leading-zero outside; padding-top: 0px; margin-bottom: 0px; border-left-style: solid; line-height: 17.27272605895996px; border-right-style: none">
        <span class="preprocessor" style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: gray; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="gray" size="2">#endif</font></span><span style="border-bottom-style: none; border-left-style: none; margin-left: 0px; border-left-width: medium; padding-bottom: 0px; border-right-width: medium; margin-top: 0px; padding-right: 0px; padding-left: 0px; border-right-style: none; border-bottom-width: medium; color: black; padding-top: 0px; border-top-width: medium; border-top-style: none; margin-right: 0px; margin-bottom: 0px"><font color="black" size="2">&#xa0;&#xa0;</font></span>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node COLOR="#ff9900" CREATED="1435211139629" ID="ID_957552785" MODIFIED="1435211187081" TEXT="5.&#x7f16;&#x8bd1;&#x62bd;&#x8c61;&#x5c42;&#x4ee3;&#x7801;&#x7684;&#x8fc7;&#x7a0b;">
<node CREATED="1435211154966" ID="ID_1009475389" MODIFIED="1435211170843" TEXT="&#x5728;hardware/libhardware/include/hardware&#x76ee;&#x5f55;&#xff0c;&#x65b0;&#x5efa;hello.h&#x6587;&#x4ef6;"/>
<node CREATED="1435211217409" ID="ID_366692247" MODIFIED="1435215081114" TEXT="hardware/libhardware/modules&#x76ee;&#x5f55;&#xff0c;&#x65b0;&#x5efa;hello&#x76ee;&#x5f55;&#xff0c;&#x5e76;&#x6dfb;&#x52a0;hello.c&#x6587;&#x4ef6;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">&#x5728;hello.c&#x6587;&#x4ef6;&#x5f53;&#x4e2d;&#x5b9a;&#x4e49;&#x4e86;2&#x4e2a;&#x5f88;&#x91cd;&#x8981;&#x7684;&#x53d8;&#x91cf; </font>
    </p>
    <ol style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; text-indent: 0px; color: rgb(92, 92, 92); margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; border-top-style: none; border-right-style: none; font-variant: normal; border-bottom-width: medium; text-align: left; font-size: 11.818181991577148px; margin-bottom: 1px; line-height: 25.99431800842285px; margin-left: 45px; font-weight: normal; border-right-width: medium; padding-top: 0px; list-style: decimal; text-transform: none; border-left-style: none; padding-right: 0px; letter-spacing: normal; background-color: rgb(255, 255, 255); white-space: normal; word-spacing: 0px; border-top-width: medium; border-left-width: medium; font-style: normal; margin-top: 0px" start="1" class="dp-cpp">
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <b><font size="3" color="rgb(0, 102, 153)">static</font></b><font size="3" color="black">&#xa0;</font><b><font size="3" color="rgb(0, 102, 153)">struct</font></b><font size="3" color="black">&#xa0;hw_module_methods_t&#xa0;hello_module_methods&#xa0;=&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;open:&#xa0;hello_device_open&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font size="3" color="black">};&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font size="3" color="black">&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font size="3" color="rgb(0, 130, 0)">/*&#x6a21;&#x5757;&#x5b9e;&#x4f8b;&#x53d8;&#x91cf;*/</font><font size="3" color="black">&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <b><font size="3" color="rgb(0, 102, 153)">struct</font></b><font size="3" color="black">&#xa0;hello_module_t&#xa0;HAL_MODULE_INFO_SYM&#xa0;=&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;common:&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;tag:&#xa0;HARDWARE_MODULE_TAG,&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;version_major:&#xa0;1,&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;version_minor:&#xa0;0,&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font size="3" color="#ff3366"><i>&#xa0;id:&#xa0;HELLO_HARDWARE_MODULE_ID</i></font></b><font size="3" color="black">,&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;name:&#xa0;MODULE_NAME,&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;author:&#xa0;MODULE_AUTHOR,&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;methods:&#xa0;&amp;hello_module_methods,&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font size="3" color="black">&#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font size="3" color="black">};&#xa0;&#xa0;</font>
      </li>
    </ol>
    <p>
      <font size="3" color="rgb(51, 51, 51)" face="Arial">Android&#x786c;&#x4ef6;&#x62bd;&#x8c61;&#x5c42;&#x4f1a;&#x6839;&#x636e;HELLO_HARDWARE_MODULE_ID&#x7684;&#x503c;&#x5728;Android&#x7cfb;&#x7edf;&#x7684;/system/lib/hw&#x76ee;&#x5f55;&#x4e2d;&#x627e;&#x5230;&#x76f8;&#x5e94;&#x7684;&#x6a21;&#x5757;&#xff0c; </font>
    </p>
    <p>
      <font size="3" color="rgb(51, 51, 51)" face="Arial">&#x7136;&#x540e;&#x52a0;&#x8f7d;&#x8d77;&#x6765;&#xff0c;&#x5e76;&#x4e14;&#x8fd4;&#x56de;hw_module_t&#x63a5;&#x53e3;&#x7ed9;&#x8c03;&#x7528;&#x8005;&#x4f7f;&#x7528;&#x3002;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435211414400" ID="ID_1638405901" MODIFIED="1435211444460" TEXT="&#x5728;hello&#x76ee;&#x5f55;&#x4e0b;&#x65b0;&#x5efa;Android.mk&#x6587;&#x4ef6;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <div style="text-align: left; text-transform: none; font-weight: normal; white-space: normal; background-color: rgb(255, 255, 255); line-height: 25.99431800842285px; letter-spacing: normal; font-size: 13.63636302947998px; word-spacing: 0px; font-variant: normal; font-family: Arial; font-style: normal; color: rgb(51, 51, 51); text-indent: 0px">
      <font size="3">&#xa0;<strong>LOCAL_PATH := $(call my-dir)</strong> </font>
    </div>
    <div style="text-align: left; text-transform: none; font-weight: normal; white-space: normal; background-color: rgb(255, 255, 255); line-height: 25.99431800842285px; letter-spacing: normal; font-size: 13.63636302947998px; word-spacing: 0px; font-variant: normal; font-family: Arial; font-style: normal; color: rgb(51, 51, 51); text-indent: 0px">
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;include $(CLEAR_VARS)</font></strong>
      </div>
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_MODULE_TAGS := optional</font></strong>
      </div>
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_PRELINK_MODULE := false</font></strong>
      </div>
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_MODULE_PATH := $(TARGET_OUT_SHARED_LIBRARIES)/hw</font></strong>
      </div>
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_SHARED_LIBRARIES := liblog</font></strong>
      </div>
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_SRC_FILES := hello.c</font></strong>
      </div>
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;LOCAL_MODULE := hello.default</font></strong>
      </div>
      <div>
        <strong><font size="3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;include $(BUILD_SHARED_LIBRARY)</font></strong>
      </div>
    </div>
  </body>
</html></richcontent>
</node>
</node>
<node COLOR="#3300ff" CREATED="1435211851446" ID="ID_1609485913" MODIFIED="1435215689563">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6.&#x6dfb;&#x52a0;JNI&#x65b9;&#x6cd5;&#x6765;&#x8bbf;&#x95ee;&#x786c;&#x4ef6;&#x62bd;&#x8c61;&#x5c42;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435212040818" ID="ID_1824601655" MODIFIED="1435212346111">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x8fdb;&#x5165;&#x5230;frameworks/base/services/jni&#x76ee;&#x5f55;
    </p>
    <p>
      &#x65b0;&#x5efa;com_android_server_HelloService.cpp
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x8be5;cpp&#x6587;&#x4ef6;&#x91cc;&#x9762;&#x7684;&#x65b9;&#x6cd5;&#x662f;&#x5bf9;&#x5e94;com.android.server.HelloService&#x91cc;&#x9762;&#x7684;&#x65b9;&#x6cd5;&#x7684;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435213261287" ID="ID_892320718" MODIFIED="1435213299907">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">&#x5728;com_android_server_HelloService.cpp&#x4e2d; </font>
    </p>
    <p>
      <font size="3" color="rgb(51, 51, 51)" face="Arial">&#x5b9a;&#x4e49;hello_init&#x3001;hello_getVal&#x548c;hello_setVal&#x4e09;&#x4e2a;JNI&#x65b9;&#x6cd5;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1435214544751" ID="ID_1891418950" MODIFIED="1435214556093" TEXT="hello_init&#x65b9;&#x6cd5;&#x5206;&#x6790;">
<node CREATED="1435214570367" ID="ID_657253467" MODIFIED="1435214574588" TEXT="1.hello_module_t* module; "/>
<node CREATED="1435214585849" ID="ID_185494510" MODIFIED="1435214604792">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.hw_get_module(HELLO_HARDWARE_MODULE_ID,
    </p>
    <p>
      &#xa0;(const struct hw_module_t**)&amp;module)
    </p>
  </body>
</html></richcontent>
<node CREATED="1435215129043" ID="ID_455773980" MODIFIED="1435215132460" TEXT="Android&#x786c;&#x4ef6;&#x62bd;&#x8c61;&#x5c42;&#x4f1a;&#x6839;&#x636e;HELLO_HARDWARE_MODULE_ID&#x7684;&#x503c;&#x5728;Android&#x7cfb;&#x7edf;&#x7684;/system/lib/hw&#x76ee;&#x5f55;&#x4e2d;&#x627e;&#x5230;&#x76f8;&#x5e94;&#x7684;&#x6a21;&#x5757;&#xff0c;&#x7136;&#x540e;&#x52a0;&#x8f7d;&#x8d77;&#x6765;&#xff0c;&#x5e76;&#x4e14;&#x8fd4;&#x56de;hw_module_t&#x63a5;&#x53e3;&#x7ed9;&#x8c03;&#x7528;&#x8005;&#x4f7f;&#x7528;&#x3002;"/>
</node>
<node CREATED="1435214608487" ID="ID_354223273" MODIFIED="1435214698124">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">3.</font><font size="3" color="rgb(0, 0, 0)" face="Consolas, Courier New, Courier, mono, serif">hello_device_open(&amp;(module-&gt;common),&#xa0;&amp;hello_device) </font>
    </p>
    <p>
      &#x8c03;&#x7528;common-&gt;open&#x51fd;&#x6570;&#x4e3a;hello_device&#x5206;&#x914d;&#x7a7a;&#x95f4;&#xff0c;&#x5e76;&#x6253;&#x5f00;&#x8bbe;&#x5907;&#x8282;&#x70b9;
    </p>
    <p>
      &#x5c06;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x4fdd;&#x5b58;&#x8d77;&#x6765;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1435214806048" ID="ID_1740688554" MODIFIED="1435546753490" TEXT="JNI&#x65b9;&#x6cd5;&#x8868;&#xff1a;&#x5c06;com.android.server.HelloService&#x63d0;&#x4f9b;&#x7684;native&#x65b9;&#x6cd5;&#x505a;&#x4e2a;&#x6620;&#x5c04;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol start="1" style="background-color: rgb(255, 255, 255); padding-bottom: 0px; border-top-style: none; letter-spacing: normal; border-bottom-style: none; word-spacing: 0px; border-right-width: medium; border-bottom-width: medium; border-right-style: none; font-variant: normal; padding-right: 0px; margin-bottom: 1px; padding-left: 0px; font-size: 11.818181991577148px; padding-top: 0px; line-height: 25.99431800842285px; margin-right: 0px; font-style: normal; text-transform: none; white-space: normal; list-style: decimal; border-left-width: medium; margin-left: 45px; font-weight: normal; color: rgb(92, 92, 92); font-family: Consolas, Courier New, Courier, mono, serif; text-align: left; text-indent: 0px; border-left-style: none; margin-top: 0px; border-top-width: medium" class="dp-cpp">
      <li style="border-bottom-style: none; list-style: decimal-leading-zero outside; color: black; border-left-style: solid; padding-bottom: 0px; line-height: 17.27272605895996px; padding-right: 3px; margin-top: 0px; padding-left: 10px; padding-top: 0px; border-left-width: 3px; background-color: rgb(255, 255, 255); border-left-color: rgb(108, 226, 108); margin-bottom: 0px; border-top-style: none; margin-left: 0; border-right-style: none; margin-right: 0" class="alt">
        <font color="black">&#xa0;</font><b><font color="rgb(0, 102, 153)">static</font></b><font color="black">&#xa0;</font><b><font color="rgb(0, 102, 153)">const</font></b><font color="black">&#xa0;JNINativeMethod&#xa0;method_table[]&#xa0;=&#xa0;{&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); border-left-style: solid; padding-bottom: 0px; line-height: 17.27272605895996px; padding-right: 3px; margin-top: 0px; padding-left: 10px; padding-top: 0px; border-left-width: 3px; background-color: rgb(248, 248, 248); border-left-color: rgb(108, 226, 108); margin-bottom: 0px; border-top-style: none; margin-left: 0; border-right-style: none; margin-right: 0" class="">
        <font color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</font><font color="blue">"init_native"</font><font color="black">,&#xa0;</font><font color="blue">"()Z"</font><font color="black">,&#xa0;(</font><b><font color="rgb(0, 102, 153)">void</font></b><font color="black">*)hello_init},&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; list-style: decimal-leading-zero outside; color: black; border-left-style: solid; padding-bottom: 0px; line-height: 17.27272605895996px; padding-right: 3px; margin-top: 0px; padding-left: 10px; padding-top: 0px; border-left-width: 3px; background-color: rgb(255, 255, 255); border-left-color: rgb(108, 226, 108); margin-bottom: 0px; border-top-style: none; margin-left: 0; border-right-style: none; margin-right: 0" class="alt">
        <font color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</font><font color="blue">"setVal_native"</font><font color="black">,&#xa0;</font><font color="blue">"(I)V"</font><font color="black">,&#xa0;(</font><b><font color="rgb(0, 102, 153)">void</font></b><font color="black">*)hello_setVal},&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; list-style: decimal-leading-zero outside; color: rgb(92, 92, 92); border-left-style: solid; padding-bottom: 0px; line-height: 17.27272605895996px; padding-right: 3px; margin-top: 0px; padding-left: 10px; padding-top: 0px; border-left-width: 3px; background-color: rgb(248, 248, 248); border-left-color: rgb(108, 226, 108); margin-bottom: 0px; border-top-style: none; margin-left: 0; border-right-style: none; margin-right: 0" class="">
        <font color="black">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;{</font><font color="blue">"getVal_native"</font><font color="black">,&#xa0;</font><font color="blue">"()I"</font><font color="black">,&#xa0;(</font><b><font color="rgb(0, 102, 153)">void</font></b><font color="black">*)hello_getVal},&#xa0;&#xa0;</font>
      </li>
      <li style="border-bottom-style: none; list-style: decimal-leading-zero outside; color: black; border-left-style: solid; padding-bottom: 0px; line-height: 17.27272605895996px; padding-right: 3px; margin-top: 0px; padding-left: 10px; padding-top: 0px; border-left-width: 3px; background-color: rgb(255, 255, 255); border-left-color: rgb(108, 226, 108); margin-bottom: 0px; border-top-style: none; margin-left: 0; border-right-style: none; margin-right: 0" class="alt">
        <font color="black">&#xa0;&#xa0;&#xa0;&#xa0;};&#xa0;&#xa0;</font>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1435215240074" ID="ID_1371928571" MODIFIED="1435215279281">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">&#x5b9a;&#x4e49;&#x4e00;&#x4e2a;&#x6ce8;&#x518c;JNI&#x7684;&#x65b9;&#x6cd5; </font>
    </p>
    <p>
      <b><font size="3" color="rgb(46, 139, 87)" face="Consolas, Courier New, Courier, mono, serif">int</font></b><font size="3" color="rgb(0, 0, 0)" face="Consolas, Courier New, Courier, mono, serif">&#xa0;register_android_server_HelloService(JNIEnv&#xa0;*env)</font>
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#ff3333" CREATED="1435215340290" ID="ID_1798279291" MODIFIED="1435215561596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x4fee;&#x6539;&#x540c;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x7684;onload.cpp&#x6587;&#x4ef6;
    </p>
    <p>
      &#x4ee5;&#x4fbf;&#x7cfb;&#x7edf;&#x542f;&#x52a8;&#x7684;&#x65f6;&#x5019;&#x53ef;&#x4ee5;&#x81ea;&#x52a8;&#x52a0;&#x8f7d;&#x6211;&#x4eec;&#x5b9a;&#x4e49;&#x7684;JNI&#x65b9;&#x6cd5;&#x8868;
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#990099" CREATED="1435215497082" ID="ID_293796984" MODIFIED="1435215537917" TEXT="&#x4fee;&#x6539;&#x540c;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x7684;Android.mk&#x6587;&#x4ef6;&#xff0c;&#x589e;&#x52a0;&#x6211;&#x4eec;&#x7684;&#x6e90;&#x6587;&#x4ef6;"/>
</node>
<node CREATED="1435215626936" ID="ID_1107339578" MODIFIED="1435215685827">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      7.&#x5728;Application Frameworks
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#x5c42;&#x589e;&#x52a0;&#x786c;&#x4ef6;&#x8bbf;&#x95ee;&#x670d;&#x52a1;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435215926619" ID="ID_1520993274" MODIFIED="1435216008897">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x8c03;&#x7528;&#x786c;&#x4ef6;&#x670d;&#x52a1;&#x7684;&#x5e94;&#x7528;&#x7a0b;&#x5e8f;&#x548c;&#x786c;&#x4ef6;&#x670d;&#x52a1;&#x4e4b;&#x95f4;
    </p>
    <p>
      &#x9700;&#x8981;&#x901a;&#x8fc7;&#x4ee3;&#x7406;&#x8fdb;&#x884c;&#x901a;&#x4fe1;&#xff0c;&#x6545;&#x5148;&#x5b9a;&#x4e49;&#x901a;&#x4fe1;&#x534f;&#x8bae;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435216013319" ID="ID_767946531" MODIFIED="1435216068432">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3" color="rgb(51, 51, 51)" face="Arial">frameworks/base/core/java/android/os&#x76ee;&#x5f55;&#xff0c; </font>
    </p>
    <p>
      <font size="3" color="rgb(51, 51, 51)" face="Arial">&#x65b0;&#x589e;IHelloService.aidl&#x63a5;&#x53e3;&#x5b9a;&#x4e49;&#x6587;&#x4ef6;&#xff1a;</font>
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; text-indent: 0px; color: rgb(92, 92, 92); margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; border-top-style: none; border-right-style: none; font-variant: normal; border-bottom-width: medium; text-align: left; font-size: 11.818181991577148px; margin-bottom: 1px; line-height: 25.99431800842285px; margin-left: 45px; font-weight: normal; border-right-width: medium; padding-top: 0px; list-style: decimal; text-transform: none; border-left-style: none; padding-right: 0px; letter-spacing: normal; background-color: rgb(255, 255, 255); white-space: normal; word-spacing: 0px; border-top-width: medium; border-left-width: medium; font-style: normal; margin-top: 0px" start="1" class="dp-j">
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">package</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;android.os;&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">interface</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;IHelloService&#xa0;{&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;&#xa0;&#xa0;&#xa0;</span></font><b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">void</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;setVal(</span></font><b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">int</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;val);&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;&#xa0;&#xa0;&#xa0;</span></font><b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">int</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;getVal();&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">}&#xa0;&#xa0;</span></font>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1435216115660" ID="ID_1853627653" MODIFIED="1435217817312" TEXT="&#x4fee;&#x6539;frameworks/base&#x4e2d;&#x7684;Android.mk&#x6587;&#x4ef6;&#xff0c;&#x589e;&#x52a0;IHelloService.aidl&#x6587;&#x4ef6;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <ol style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; text-indent: 0px; color: rgb(92, 92, 92); margin-right: 0px; font-family: Consolas, Courier New, Courier, mono, serif; border-top-style: none; border-right-style: none; font-variant: normal; border-bottom-width: medium; text-align: left; font-size: 11.818181991577148px; margin-bottom: 1px; line-height: 25.99431800842285px; margin-left: 45px; font-weight: normal; border-right-width: medium; padding-top: 0px; list-style: decimal; text-transform: none; border-left-style: none; padding-right: 0px; letter-spacing: normal; background-color: rgb(255, 255, 255); white-space: normal; word-spacing: 0px; border-top-width: medium; border-left-width: medium; font-style: normal; margin-top: 0px" start="1" class="dp-j">
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">interface</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;IHelloService&#xa0;{&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;&#xa0;&#xa0;&#xa0;</span></font><b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">void</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;setVal(</span></font><b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">int</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;val);&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(255, 255, 255); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: black" class="alt">
        <font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;&#xa0;&#xa0;&#xa0;</span></font><b><font color="rgb(0, 102, 153)"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: rgb(0, 102, 153); margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; font-weight: bold; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px" class="keyword">int</span></font></b><font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">&#xa0;getVal();&#xa0;&#xa0;</span></font>
      </li>
      <li style="border-bottom-style: none; margin-right: 0; border-left-color: rgb(108, 226, 108); border-right-style: none; padding-top: 0px; margin-left: 0; border-top-style: none; border-left-width: 3px; border-left-style: solid; line-height: 17.27272605895996px; background-color: rgb(248, 248, 248); margin-top: 0px; padding-right: 3px; padding-bottom: 0px; margin-bottom: 0px; list-style: decimal-leading-zero outside; padding-left: 10px; color: rgb(92, 92, 92)" class="">
        <font color="black"><span style="padding-left: 0px; padding-bottom: 0px; border-bottom-style: none; color: black; margin-right: 0px; border-top-style: none; border-right-style: none; border-bottom-width: medium; margin-bottom: 0px; margin-left: 0px; border-right-width: medium; padding-top: 0px; border-left-style: none; padding-right: 0px; border-top-width: medium; border-left-width: medium; margin-top: 0px">}&#xa0;&#xa0;</span></font>
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1435217625033" ID="ID_299167882" MODIFIED="1435217665552" TEXT="&#x4f7f;&#x7528;mmm&#x547d;&#x4ee4;&#x7f16;&#x8bd1;&#x751f;&#x6210;IHelloService.stub&#x63a5;&#x53e3;"/>
<node CREATED="1435217859482" ID="ID_448407411" MODIFIED="1435218099328">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3" color="#330033">frameworks/base/services/java/com/android/server&#x76ee;&#x5f55;&#xff0c;&#x65b0;&#x589e;HelloService.java&#x6587;&#x4ef6;</font><font size="3" color="#ff0099">&#xa0; </font>
    </p>
    <p>
      <b><font size="3" color="#ff0099" face="Consolas, Courier New, Courier, mono, serif">public</font></b><font size="3" color="#ff0099" face="Consolas, Courier New, Courier, mono, serif">&#xa0;<b>class</b>&#xa0;HelloService&#xa0;<b>extends</b>&#xa0;IHelloService.Stub</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435218185719" ID="ID_985987107" MODIFIED="1435218231840">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x4fee;&#x6539;&#x540c;&#x76ee;&#x5f55;&#x7684;SystemServer.java&#x6587;&#x4ef6;&#xff0c;&#x5728;ServerThread::run
    </p>
    <p>
      &#x51fd;&#x6570;&#x4e2d;&#x589e;&#x52a0;&#x52a0;&#x8f7d;HelloService&#x7684;&#x4ee3;&#x7801;
    </p>
    <p>
      <strong style="text-align: left; text-transform: none; white-space: normal; background-color: rgb(255, 255, 255); line-height: 25.99431800842285px; letter-spacing: normal; font-size: 13.63636302947998px; word-spacing: 0px; font-variant: normal; font-family: Arial; font-style: normal; color: rgb(51, 51, 51); text-indent: 0px"><font size="13.63636302947998px" color="rgb(51, 51, 51)" face="Arial">ServiceManager.addService("hello", new HelloService());</font></strong>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1435220895345" ID="ID_1255367060" MODIFIED="1435220922731" TEXT="8.Android&#x4e2d;&#x7684;Service&#x5168;&#x9762;&#x603b;&#x7ed3;">
<node CREATED="1435220936708" ID="ID_647912736" MODIFIED="1435220945542" TEXT="service&#x7684;&#x5206;&#x7c7b;">
<node CREATED="1435221028087" ID="ID_1873327390" MODIFIED="1435221571188">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#x6309;&#x7167;&#x8fd0;&#x884c;&#x5730;&#x70b9;&#x5206;&#x7c7b;
    </p>
    <p>
      <font color="#ff0066">&#x672c;&#x5730;&#x670d;&#x52a1;&#xff1a;&#x4f9d;&#x9644;&#x5728;&#x4e3b;&#x8fdb;&#x7a0b;&#x4e0a;&#xff0c;&#x4e3b;&#x8fdb;&#x7a0b;&#x88ab;kill&#x4e4b;&#x540e;&#x670d;&#x52a1;&#x5c31;&#x4f1a;&#x7ec8;&#x6b62;&#x3002;</font>
    </p>
    <p>
      <font color="#ff0066">&#x8fdc;&#x7a0b;&#x670d;&#x52a1;&#xa0;&#xa0;&#xa0;&#xa0;&#x72ec;&#x7acb;&#x4e8e;&#x4e3b;&#x8fdb;&#x7a0b;&#xff0c;&#x4f46;&#x662f;&#x7531;&#x4e8e;&#x662f;&#x72ec;&#x7acb;&#x7684;&#x8fdb;&#x7a0b;&#xff0c; </font>
    </p>
    <p>
      <font color="#ff0066">&#x4f7f;&#x7528;AIDL&#x8fdb;&#x884c;IPC </font>
    </p>
    <p>
      &#x6bd4;&#x8f83;&#x56f0;&#x96be;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435221619038" ID="ID_529149266" MODIFIED="1435221782230">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#x6309;&#x7167;&#x8fd0;&#x884c;&#x7684;&#x7c7b;&#x522b;&#x8fdb;&#x884c;&#x5206;&#x6790;
    </p>
    <p>
      &#x524d;&#x53f0;&#x670d;&#x52a1;&#xff0c;&#x4f1a;&#x5728;&#x901a;&#x77e5;&#x680f;&#x5fc3;&#x4e8b;&#x56fe;&#x6807;&#x7b49;
    </p>
    <p>
      &#x540e;&#x53f0;&#x670d;&#x52a1;&#xff0c;&#x5f53;&#x670d;&#x52a1;&#x88ab;&#x7ec8;&#x6b62;&#xff0c;&#x7528;&#x6237;&#x65e0;&#x6cd5;&#x770b;&#x5230;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435221852957" ID="ID_1895927510" MODIFIED="1435223284536">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#x6309;&#x7167;&#x4f7f;&#x7528;&#x7684;&#x65b9;&#x5f0f;&#x8fdb;&#x884c;&#x5206;&#x7c7b;&#x3002;
    </p>
    <p>
      &#x7531;startService&#x542f;&#x52a8;&#x7684;&#x670d;&#x52a1;&#xff1a;&#x72ec;&#x7acb;&#xff0c;&#x4e0d;&#x8fdb;&#x884c;&#x901a;&#x4fe1;&#x3002;
    </p>
    <p>
      &#x7531;bindService&#x542f;&#x52a8;&#x7684;&#x670d;&#x52a1;&#xff1a;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x901a;&#x4fe1;
    </p>
    <p>
      &#x7531;startService&#x548c;bindService&#x540c;&#x65f6;&#x542f;&#x52a8;&#x7684;&#x670d;&#x52a1;&#xff1a;
    </p>
    <p>
      <font color="#ff0000">&#x9700;&#x8981;&#x540c;&#x65f6;&#x8c03;&#x7528;unbindService&#x548c;stopService&#x624d;&#x80fd;&#x505c;&#x6b62;&#x8be5;&#x670d;&#x52a1;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1435222200705" ID="ID_1884963976" MODIFIED="1435222210433" TEXT="service&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;">
<node CREATED="1435222418000" ID="ID_1990228620" MODIFIED="1435222848970">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#x88ab;&#x542f;&#x52a8;&#x7684;&#x670d;&#x52a1;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1a;&#x8c03;&#x7528;Context.startService&#x542f;&#x52a8;&#x8be5;&#x670d;&#x52a1;
    </p>
    <p>
      &#x8be5;&#x670d;&#x52a1;&#x4f1a;&#x4e00;&#x76f4;&#x5b58;&#x5728;&#xff0c;&#x800c;&#x4e0d;&#x7ba1;&#x542f;&#x52a8;&#x5b83;&#x7684;activity&#x662f;&#x5426;&#x8fd8;&#x5b58;&#x5728;&#xff0c;&#x76f4;&#x5230;&#x8c03;&#x7528;
    </p>
    <p>
      &#x4e86;stopService&#x65b9;&#x6cd5;&#x6216;&#x8005;&#x81ea;&#x8eab;&#x7684;stopSelf&#x65b9;&#x6cd5;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435223073027" ID="ID_1644875073" MODIFIED="1435223134376">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#x88ab;&#x7ed1;&#x5b9a;&#x7684;&#x670d;&#x52a1;&#x7684;&#x751f;&#x547d;&#x5468;&#x671f;&#xff1a;
    </p>
    <p>
      &#x9664;&#x975e;&#x8c03;&#x7528;&#x975e;&#x7ed1;&#x5b9a;&#x51fd;&#x6570;&#x6216;&#x8005;&#x8c03;&#x7528;&#x5b83;&#x7684;Context&#x4e0d;&#x5b58;&#x5728;&#x4e86;&#xff0c;
    </p>
    <p>
      &#x5426;&#x5219;&#x8be5;&#x670d;&#x52a1;&#x4e00;&#x76f4;&#x8fd0;&#x884c;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435223434930" ID="ID_136112410" MODIFIED="1435223571533">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#330033">&#x7279;&#x522b;&#x6ce8;&#x610f;&#xff1a;&#x5f53;&#x624b;&#x673a;&#x5c4f;&#x5e55;&#x4f1a;&#x81ea;&#x52a8;&#x65cb;&#x8f6c;&#x65f6;&#xff0c;&#x5982;&#x679c;&#x4f60;&#x7684;Activity&#x4e5f;&#x4f1a;&#x81ea;&#x52a8;&#x65cb;&#x8f6c; </font></b>
    </p>
    <p>
      <b><font color="#330033">&#x90a3;&#x4e48;&#x5176;&#x5b9e;&#x662f;Activity&#x7684;&#x91cd;&#x65b0;&#x521b;&#x5efa;&#xff0c;&#x6b64;&#x65f6;&#x65cb;&#x8f6c;&#x4e4b;&#x524d;&#x4f7f;&#x7528;bindService&#x5efa;&#x7acb; </font></b>
    </p>
    <p>
      <b><font color="#330033">&#x7684;&#x8fde;&#x63a5;&#x4fbf;&#x4f1a;&#x65ad;&#x5f00;&#x3002;</font></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1435564212116" FOLDED="true" ID="ID_1802347718" MODIFIED="1508830867151" POSITION="left" TEXT="4.linux&#x7248;&#x672c;&#x7ba1;&#x7406;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1435564224130" ID="ID_1217317356" MODIFIED="1508141115882" TEXT="git&#x5b66;&#x4e60;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1502183812413" ID="ID_568706704" MODIFIED="1502183890728">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>remotes/origin/HEAD&#x548c;remotes/origin/master&#x548c;origin/master&#x4e4b;&#x95f4;&#x7684;&#x533a;&#x522b;</i></b>
    </p>
    <p>
      Take a clone of a remote repository and run git
    </p>
    <p>
      &#xa0;branch -a (to show all the branches git knows about). It will probably look something like this:
    </p>
    <p>
      * master
    </p>
    <p>
      &#xa0;&#xa0;remotes/origin/HEAD -&gt; origin/master
    </p>
    <p>
      &#xa0;&#xa0;remotes/origin/master
    </p>
    <p>
      Here, master is a branch in the local repository.
    </p>
    <p>
      remotes/origin/master is a branch named master on the remote named origin.
    </p>
    <p>
      You can refer to this as either origin/master, as in:
    </p>
    <p>
      
    </p>
    <p>
      git diff origin/master..master
    </p>
    <p>
      You can also refer to it as remotes/origin/master:
    </p>
    <p>
      
    </p>
    <p>
      git diff remotes/origin/master..master
    </p>
    <p>
      These are just two different ways of referring to the same thing (incidentally, both of these commands mean
    </p>
    <p>
      "show me the changes between the remote master branch and my master branch).
    </p>
    <p>
      
    </p>
    <p>
      remotes/origin/HEAD is the default
    </p>
    <p>
      &#xa0;branch for the remote named origin. This lets you simply say origin instead of origin/master.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1502184426298" ID="ID_1510917630" MODIFIED="1503494054471" TEXT="Gir Pro&#x5b66;&#x4e60;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1502184443554" ID="ID_778677540" MODIFIED="1508141119789">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ea0909"><b><i>&#x7b2c;&#x4e09;&#x7ae0; Git Branch</i></b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1502184485921" ID="ID_831825345" MODIFIED="1508141121390">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Remote Branches
    </p>
  </body>
</html></richcontent>
<node CREATED="1502184522753" ID="ID_580472649" MODIFIED="1502189924349">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#1b53f3"><b>Push&#x64cd;&#x4f5c;</b></font>
    </p>
    <p>
      git push (remote) (branch)
    </p>
    <p>
      &#x4f8b;&#x5982;&#xff1a;
    </p>
    <p>
      git push origin serverfix
    </p>
    <p>
      &#x8fd9;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x4e00;&#x79cd;&#x7b80;&#x5199;&#xff0c;git&#x4f1a;&#x5c06;&#x5176;&#x6269;&#x5145;&#x6210;&#x5982;&#x4e0b;:
    </p>
    <p>
      git push origin refs/heads/serverfix:refs/heads/serverfix
    </p>
    <p>
      &#x610f;&#x601d;&#x5c31;&#x662f;&#x8bf4;&#x83b7;&#x53d6;&#x672c;&#x5730;&#x7684;serverfix&#x5206;&#x652f;&#xff0c;&#x5e76;&#x5c06;&#x5176;&#x63a8;&#x9001;&#x66f4;&#x65b0;&#x5230;&#x8fdc;&#x7aef;&#x7684;serverfix&#x5206;&#x652f;&#x4e0a;
    </p>
    <p>
      git push origin serverfix:serverfix&#x8ddf;&#x4e0a;&#x9762;&#x7684;&#x610f;&#x601d;&#x662f;&#x4e00;&#x6837;&#x7684;
    </p>
    <p>
      &#x5728;&#x53e6;&#x4e00;&#x53f0;&#x670d;&#x52a1;&#x5668;&#x4e0a;&#xff0c;&#x8fd0;&#x884c;
    </p>
    <p>
      git checkout -b serverfix origin/serverfix
    </p>
    <p>
      &#x5c31;&#x53ef;&#x4ee5;&#x5728;&#x672c;&#x5730;&#x8ddf;&#x8e2a;&#x8fdc;&#x7a0b;&#x7684;&#x5206;&#x652f;&#x4e86;
    </p>
    <p>
      
    </p>
    <p>
      <b>git push &lt;remotename&gt; &lt;commit SHA&gt;:refs/heads/&lt;remotebranchname&gt;</b>
    </p>
    <p>
      <font color="#e70c0c">push&#x4e00;&#x4e2a;&#x7279;&#x5b9a;&#x7684;&#x63d0;&#x4ea4;&#x5230;&#x8fdc;&#x7a0b;&#x5206;&#x652f;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1502185489903" ID="ID_26690415" MODIFIED="1502189881557">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#1a5cf5"><b>Tracking Branches</b></font>
    </p>
    <p>
      <font color="#f61111">git checkout --track origin/serverfix</font>
    </p>
    <p>
      &#x5728;&#x672c;&#x5730;&#x5efa;&#x7acb;&#x4e00;&#x4e2a;&#x8ddf;&#x8e2a;&#x8fdc;&#x7a0b;&#x5206;&#x652f;serverfix&#x7684;&#x5206;&#x652f;&#xff0c;&#x540d;&#x79f0;
    </p>
    <p>
      &#x8ddf;&#x8fdc;&#x7aef;&#x7684;&#x5206;&#x652f;serverfix&#x662f;&#x4e00;&#x6837;&#x7684;
    </p>
    <p>
      <font color="#ad0808">git checkout -b sf origin/serverfix</font>
    </p>
    <p>
      &#x5728;&#x672c;&#x5730;&#x5efa;&#x7acb;&#x4e00;&#x4e2a;&#x8ddf;&#x8e2a;&#x8fdc;&#x7aef;&#x5206;&#x652f;serverfix&#x7684;&#x5206;&#x652f;&#xff0c;
    </p>
    <p>
      &#x540d;&#x79f0;&#x53eb;&#x505a;sf
    </p>
    <p>
      <b>&#x5982;&#x679c;&#x60f3;&#x66f4;&#x6539;&#x672c;&#x5730;&#x5206;&#x652f;&#x6240;&#x8ffd;&#x8e2a;&#x7684;&#x8fdc;&#x7aef;&#x5206;&#x652f;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x5982;&#x4e0b;&#x7684;&#x547d;&#x4ee4; </b>
    </p>
    <p>
      <b>git branch -u origin/serverfix </b>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#dc0f0f">git branch -vv </font>
    </p>
    <p>
      <font color="#dc0f0f">&#x8be5;&#x547d;&#x4ee4;&#x53ef;&#x4ee5;&#x5217;&#x51fa;&#x672c;&#x5730;&#x7684;&#x5206;&#x652f;&#x6240;&#x8ffd;&#x8e2a;&#x7684;&#x8fdc;&#x7aef;&#x5206;&#x652f; </font>
    </p>
    <p>
      <font color="#dc0f0f">&#x6ce8;&#x610f;&#x5f53;&#x524d;&#x5217;&#x51fa;&#x7684;&#x8ddf;&#x8fdc;&#x7aef;&#x5206;&#x652f;&#x7684;&#x5173;&#x7cfb;&#x53ea;&#x662f;&#x7f13;&#x5b58;&#x5728;&#x672c;&#x5730;&#x7684;&#x60c5;&#x51b5;&#xff0c;&#x5982;&#x679c;&#x4f60;&#x60f3;&#x786e;&#x5207;&#x5730;&#x77e5;&#x9053;&#x8ddf;&#x8fdc;&#x7aef;&#x670d;&#x52a1;&#x5668; </font>
    </p>
    <p>
      <font color="#dc0f0f">&#x7684;&#x5173;&#x7cfb;&#xff0c;&#x5e94;&#x8be5;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x7684;&#x547d;&#x4ee4; </font>
    </p>
    <p>
      <font color="#10191c"><b>git fetch --all; git branch -vv</b></font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1435564231787" FOLDED="true" ID="ID_371090293" MODIFIED="1502183803268" TEXT="&#x7b80;&#x5355;&#x7684;diff&#x548c;patch">
<node CREATED="1435564248218" FOLDED="true" ID="ID_1482464879" MODIFIED="1476935130640">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      diff&#xff1a;&#x7528;&#x4e8e;&#x6bd4;&#x8f83;&#x6587;&#x4ef6;&#x6216;&#x8005;
    </p>
    <p>
      &#x76ee;&#x5f55;&#x5f53;&#x4e2d;&#x7684;&#x6bcf;&#x4e2a;&#x6587;&#x4ef6;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435564367394" FOLDED="true" ID="ID_1079518176" MODIFIED="1435568076750" TEXT="1.diff&#x7684;&#x8f93;&#x51fa;&#x683c;&#x5f0f;">
<node CREATED="1435564381807" ID="ID_1519479822" MODIFIED="1435564385335" TEXT="&#x5217;&#x4e3e;&#x65b9;&#x5f0f;"/>
<node CREATED="1435564391784" ID="ID_830633188" MODIFIED="1435565845477">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x547d;&#x4ee4;&#x6a21;&#x5f0f;&#xff1a;
    </p>
    <p>
      &#x8bb0;&#x5f55;&#x7684;&#x662f;&#x4ece;test1&#x66f4;&#x65b0;&#x5230;test2
    </p>
    <p>
      &#x6240;&#x9700;&#x8981;&#x6267;&#x884c;&#x7684;&#x547d;&#x4ee4;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435564421505" ID="ID_1077739978" MODIFIED="1435564426205" TEXT="ed&#x547d;&#x4ee4;&#x683c;&#x5f0f;">
<node CREATED="1435565464257" ID="ID_1813615881" MODIFIED="1435565493637" TEXT="1.ed&#x547d;&#x4ee4;&#x683c;&#x5f0f;&#xff1a;diff -e test1 test2"/>
<node CREATED="1435565499497" ID="ID_1706668563" MODIFIED="1435565542080" TEXT="2.&#x6df7;&#x5408;ed&#x547d;&#x4ee4;&#x683c;&#x5f0f;&#xff08;&#x65e0;&#x53c2;&#x6570;&#x683c;&#x5f0f;):diff test1 test2"/>
</node>
<node CREATED="1435564428896" ID="ID_208054174" MODIFIED="1435564434488" TEXT="RCS&#x547d;&#x4ee4;&#x683c;&#x5f0f;">
<node CREATED="1435565549930" ID="ID_916449314" MODIFIED="1435565577378">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      RCS&#x547d;&#x4ee4;&#x7b80;&#x5355;&#x683c;&#x5f0f;&#xff1a;
    </p>
    <p>
      diff -f test1 test2
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1435564398230" ID="ID_1575449081" MODIFIED="1435565862752">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x4e0a;&#x4e0b;&#x6587;&#x6a21;&#x5f0f;&#xff1a;&#x53ef;&#x8bfb;&#x6027;&#x6bd4;&#x8f83;&#x597d;
    </p>
  </body>
</html></richcontent>
<node CREATED="1435564447065" ID="ID_963122457" MODIFIED="1435567860047">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x8001;&#x7248;&#x6a21;&#x5f0f;&#xff1a;&#x5982;&#x679c;2&#x4e2a;&#x6587;&#x4ef6;&#x76f8;&#x4f3c;&#x5ea6;&#x5f88;&#x9ad8;&#xff0c;&#x5219;&#x4f1a;&#x6d6a;&#x8d39;&#x5927;&#x91cf;
    </p>
    <p>
      &#x786c;&#x76d8;&#x7684;&#x7a7a;&#x95f4;
    </p>
    <p>
      diff -c test1 test2
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1435564458304" ID="ID_1253731571" MODIFIED="1435567982093">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x65b0;&#x7248;&#x6a21;&#x5f0f;&#x5373;&#x5408;&#x5e76;&#x6a21;&#x5f0f;&#xff1a;git&#x7ba1;&#x7406;&#x7cfb;&#x7edf;&#x4f7f;&#x7528;&#x7684;&#x6a21;&#x5f0f;
    </p>
    <p>
      diff -u test1 test2
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1435564254697" ID="ID_1456107045" MODIFIED="1477451447313" TEXT="patch">
<node COLOR="#990099" CREATED="1435566105597" ID="ID_925178802" MODIFIED="1435566292032">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.patch&#x547d;&#x4ee4;&#x7684;&#x6807;&#x51c6;&#x683c;&#x5f0f;&#xff1a;patch [options] [originalfile] [patchfile]
    </p>
    <p>
      &#x5982;&#x679c;pathcfile&#x4e3a;&#x7a7a;&#xff0c;&#x5219;&#x4ece;&#x6807;&#x51c6;&#x8f93;&#x5165;&#x8bfb;&#x53d6;patchfile&#x5185;&#x5bb9;&#xff1b;
    </p>
    <p>
      &#x5982;&#x679c;originalfile&#x4e3a;&#x7a7a;&#xff0c;&#x5219;&#x4ece;patchfile(&#x80af;&#x5b9a;&#x6765;&#x81ea;&#x6807;&#x51c6;&#x8f93;&#x5165;)&#x8bfb;&#x53d6;
    </p>
    <p>
      &#x9700;&#x8981;&#x6253;&#x8865;&#x4e01;&#x7684;&#x6587;&#x4ef6;&#x540d;&#x79f0;&#xff1b;&#x4e00;&#x822c;&#x4ee5;&#x4e0b;&#x9762;&#x8fd9;&#x79cd;&#x7b80;&#x5355;&#x7684;&#x65b9;&#x5f0f;&#x4f7f;&#x7528;
    </p>
    <p>
      patch -p[num] &lt; patchfile
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1492005320793" FOLDED="true" ID="ID_19007191" MODIFIED="1507709171363">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#9a2424">&#x5b89;&#x5353;&#x6e90;&#x4ee3;&#x7801;&#x4ed3;&#x5e93;&#x53ca;&#x5176;&#x7ba1;&#x7406;&#x5de5;&#x5177;repo&#x5206;&#x6790; </font></b>
    </p>
    <p>
      <font color="#260c0c"><i>http://blog.csdn.net/luoshengyang/article/details/18195205</i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1492005491928" ID="ID_872579118" MODIFIED="1492005609067">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Repo&#x5de5;&#x5177;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x7531;&#x4e00;&#x7cfb;&#x5217;&#x7684;python&#x811a;&#x672c;&#x6784;&#x6210;&#x7684;
    </p>
    <p>
      &#x8fd9;&#x4e9b;&#x811a;&#x672c;&#x8c03;&#x7528;git&#x547d;&#x4ee4;&#x6765;&#x5b8c;&#x6210;&#x81ea;&#x5df1;&#x7684;&#x529f;&#x80fd;&#x3002;&#x7ec4;&#x6210;repo
    </p>
    <p>
      &#x5de5;&#x5177;&#x7684;&#x90a3;&#x4e9b;python&#x811a;&#x672c;&#x4e5f;&#x6784;&#x6210;&#x4e86;&#x4e00;&#x4e2a;&#x4ed3;&#x5e93;&#xff0c;&#x8be5;&#x4ed3;&#x5e93;&#x5c31;&#x79f0;&#x4e3a;
    </p>
    <p>
      Repo&#x4ed3;&#x5e93;&#xff0c;&#x6bcf;&#x6b21;&#x8c03;&#x7528;repo&#x547d;&#x4ee4;&#x7684;&#x65f6;&#x5019;&#x90fd;&#x4f1a;&#x66f4;&#x65b0;repo&#x4ed3;&#x5e93;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1492005834671" ID="ID_135408482" MODIFIED="1492005895733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#f41313">manifest&#x4ed3;&#x5e93;</font></b>
    </p>
    <p>
      &#x8be5;&#x4ed3;&#x5e93;&#x7528;&#x4e8e;&#x7ba1;&#x7406;aosp&#x4ee3;&#x7801;&#x5f53;&#x4e2d;&#x7684;&#x6240;&#x6709;&#x7684;
    </p>
    <p>
      &#x5b50;&#x9879;&#x76ee;&#x7684;git&#x4ed3;&#x5e93;&#x7684;&#x4fe1;&#x606f;&#xff0c;repo&#x901a;&#x8fc7;&#x67e5;&#x9605;&#x8fd9;&#x4e9b;&#x4fe1;&#x606f;&#x6765;
    </p>
    <p>
      &#x66f4;&#x65b0;aosp&#x7684;&#x4ee3;&#x7801;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1492005926370" FOLDED="true" ID="ID_667911999" MODIFIED="1507709170035">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      repo&#x4ed3;&#x5e93;&#x548c;manifest&#x4ed3;&#x5e93;&#x662f;&#x5982;&#x4f55;&#x83b7;&#x53d6;&#x7684;?
    </p>
    <p>
      &#x662f;&#x901a;&#x8fc7;&#x8c37;&#x6b4c;&#x5b98;&#x65b9;&#x7f51;&#x7ad9;&#x4e0a;&#x4e00;&#x4e2a;&#x72ec;&#x7acb;&#x7684;&#x811a;&#x672c;&#x83b7;&#x53d6;&#x7684;
    </p>
  </body>
</html></richcontent>
<node CREATED="1492006071412" ID="ID_1654030677" MODIFIED="1492006138163">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#1a8774">&#x83b7;&#x53d6;repo&#x811a;&#x672c;:</font></i></b>
    </p>
    <p>
      $ curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo&#xa0;
    </p>
    <p>
      $ chmod a+x ~/bin/repo
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1492006575272" ID="ID_1109181056" MODIFIED="1492006676682">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#x901a;&#x8fc7;repo&#x811a;&#x672c;&#x5b89;&#x88c5;Repo&#x4ed3;&#x5e93;&#x548c;Manifest&#x4ed3;&#x5e93;:</b>
    </p>
    <p>
      $ repo init -u https://android.googlesource.com/platform/manifest
    </p>
    <p>
      &#x4e0a;&#x9762;&#x7684;&#x547d;&#x4ee4;&#x5b9e;&#x9645;&#x4e0a;&#x5305;&#x542b;&#x4e86;&#x4e24;&#x4e2a;&#x52a8;&#x4f5c;&#xff0c;&#x5b89;&#x88c5;repo&#x4ed3;&#x5e93;&#x548c;&#x5b89;&#x88c5;manifest&#x4ed3;&#x5e93;
    </p>
  </body>
</html></richcontent>
<node CREATED="1492006687887" ID="ID_105232564" MODIFIED="1492091514214">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5b89;&#x88c5;Repo&#x4ed3;&#x5e93;&#x7684;&#x8fc7;&#x7a0b;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1492091523807" FOLDED="true" ID="ID_542054995" MODIFIED="1507709168883" TEXT="repo&#x53c2;&#x8003;&#x547d;&#x4ee4;">
<node CREATED="1492091542373" ID="ID_1274950315" MODIFIED="1492091662341">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#e60808">help</font></b>
    </p>
    <p>
      &#x4f7f;&#x7528;&#x547d;&#x4ee4; repo help &#x53ef;&#x4ee5;&#x83b7;&#x53d6;&#x6700;&#x65b0;&#x7684;&#x5e2e;&#x52a9;&#x6587;&#x6863;
    </p>
    <p>
      &#x83b7;&#x5f97;&#x5177;&#x4f53;&#x7684;&#x67d0;&#x4e2a;&#x547d;&#x4ee4;&#x7684;&#x5e2e;&#x52a9;&#x6587;&#x6863;:
    </p>
    <p>
      repo help &lt;COMMAND&gt;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1492091667344" ID="ID_1898172761" MODIFIED="1492092367868">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#eb1818">init</font></i></b>
    </p>
    <p>
      repo init&#xa0;&#xa0;-u &lt;URL&gt; [&lt;OPTIONS&gt;]
    </p>
    <p>
      &#x8be5;&#x547d;&#x4ee4;&#x5728;&#x5f53;&#x524d;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x521b;&#x5efa;&#x4e86;&#x4e00;&#x4e2a;.repo&#x76ee;&#x5f55;&#x5305;&#x542b;&#x4e86;repo&#x7684;&#x4ed3;&#x5e93;,
    </p>
    <p>
      &#x4e00;&#x4e2a;Manifest&#x6587;&#x4ef6;&#x3002; .repo&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x6709;&#x4e00;&#x4e2a;manifest.xml&#x6587;&#x4ef6;&#xff0c;&#x8be5;&#x6587;&#x4ef6;
    </p>
    <p>
      &#x662f;&#x4e00;&#x4e2a;&#x7b26;&#x53f7;&#x6587;&#x4ef6;&#x6307;&#x5411;&#x4e86;.repo/manifests&#x76ee;&#x5f55;&#x5f53;&#x4e2d;&#x7684;&#x67d0;&#x4e2a;&#x6587;&#x4ef6;&#x3002;
    </p>
    <p>
      &#x9009;&#x9879;:
    </p>
    <p>
      -u &#x6307;&#x5b9a;&#x83b7;&#x53d6;manifest&#x4ed3;&#x5e93;&#x7684;URL&#xff0c;&#x901a;&#x7528;&#x7684;manifest&#x4ed3;&#x5e93;&#x53ef;&#x4ee5;&#x5728;
    </p>
    <p>
      https://android.googlesource.com/platform/manifest&#x627e;&#x5230;
    </p>
    <p>
      -m &#x9009;&#x62e9;&#x4ed3;&#x5e93;&#x5f53;&#x4e2d;&#x7684;&#x4e00;&#x4e2a;manifest&#x6587;&#x4ef6;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6307;&#x5b9a;&#x9009;&#x62e9;&#x54ea;&#x4e2a;manifest&#x6587;&#x4ef6;,
    </p>
    <p>
      &#x5219;&#x4f7f;&#x7528;&#x9ed8;&#x8ba4;&#x7684;default.xml&#x6587;&#x4ef6;
    </p>
    <p>
      -b &#x6307;&#x5b9a;&#x4e00;&#x4e2a;&#x5206;&#x652f;&#xff0c;&#x6bd4;&#x5982;&#x4e00;&#x4e2a;&#x7279;&#x5b9a;&#x7684;manifest-branch
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1492092373917" ID="ID_1517004541" MODIFIED="1492093194411">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#ce1818">sync&#x547d;&#x4ee4;</font></i></b>
    </p>
    <p>
      repo sync [&lt;PROJECT_LIST&gt;]
    </p>
    <p>
      &#x66f4;&#x65b0;&#x672c;&#x5730;&#x73af;&#x5883;&#x5f53;&#x4e2d;&#x7684;&#x5de5;&#x7a0b;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6307;&#x5b9a;PROJECT_LIST&#xff0c;&#x5219;
    </p>
    <p>
      &#x66f4;&#x65b0;&#x6240;&#x6709;&#x7684;&#x5de5;&#x7a0b;&#x6587;&#x4ef6;&#x3002;
    </p>
    <p>
      &#x8fd0;&#x884c;repo&#x547d;&#x4ee4;&#x7684;&#x65f6;&#x5019;&#x8fd0;&#x884c;&#x7684;&#x5e95;&#x5c42;&#x547d;&#x4ee4;:
    </p>
    <p>
      1.&#x5982;&#x679c;&#x5de5;&#x7a0b;&#x4ece;&#x6765;&#x6ca1;&#x6709;&#x88ab;&#x540c;&#x6b65;&#x8fc7;&#xff0c;repo sync&#x548c;git clone&#x7684;&#x547d;&#x4ee4;&#x7b49;&#x540c;
    </p>
    <p>
      2.&#x5982;&#x679c;&#x5de5;&#x7a0b;&#x5df2;&#x7ecf;&#x540c;&#x6b65;&#x8fc7;&#x4e86;&#xff0c;repo sync&#x547d;&#x4ee4;&#x7b49;&#x540c;&#x4e8e;
    </p>
    <p>
      git remote update
    </p>
    <p>
      git rebase origion/ &lt;BRANCH&gt;
    </p>
    <p>
      3.&#x5982;&#x679c;git rebase&#x7684;&#x65f6;&#x5019;&#x9047;&#x5230;&#x4e86;&#x51b2;&#x7a81;&#xff0c;&#x4f60;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x901a;&#x5e38;&#x7684;git&#x547d;&#x4ee4;&#x6765;
    </p>
    <p>
      &#x89e3;&#x51b3;&#x51b2;&#x7a81;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1492093199476" ID="ID_84187740" MODIFIED="1492093827678">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      upload
    </p>
    <p>
      repo upload [&lt;PROJECT_LIST&gt;]
    </p>
    <p>
      &#x5bf9;&#x4e8e;&#x5177;&#x4f53;&#x7684;&#x5de5;&#x7a0b;&#xff0c;repo&#x6bd4;&#x8f83;&#x672c;&#x5730;&#x7684;&#x5de5;&#x7a0b;&#x548c;&#x8fdc;&#x7aef;&#x7684;&#x5de5;&#x7a0b;.
    </p>
    <p>
      repo&#x4f1a;&#x63d0;&#x793a;&#x4f60;&#x5173;&#x4e8e;&#x8fd8;&#x6ca1;&#x6709;&#x63d0;&#x4ea4;&#x7684;&#x5206;&#x652f;&#x7684;&#x4fe1;&#x606f;&#x3002;
    </p>
    <p>
      &#x5728;&#x4f60;&#x9009;&#x62e9;&#x4e86;&#x4e00;&#x4e2a;&#x6216;&#x8005;&#x66f4;&#x591a;&#x7684;&#x5206;&#x652f;&#x4e4b;&#x540e;&#xff0c;&#x6240;&#x6709;&#x7684;&#x5728;&#x8be5;&#x5206;&#x652f;&#x4e0a;&#x9762;&#x7684;&#x63d0;&#x4ea4;&#x90fd;&#x4f1a;&#x901a;&#x8fc7;
    </p>
    <p>
      HTTPS&#x8fde;&#x63a5;&#x4f20;&#x8f93;&#x5230;gerrit&#x4e0a;&#x9762;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1503379558876" ID="ID_933687868" MODIFIED="1503379613013">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#d90505">&#x4f7f;&#x7528;repo&#x547d;&#x4ee4;&#x5bf9;&#x6240;&#x6709;&#x7684;&#x5206;&#x652f;&#x8fdb;&#x884c;&#x64cd;&#x4f5c;</font></b>
    </p>
    <p>
      <b>repo forall -c 'git reset --hard &amp;&amp; git clean -fdx'</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1506050494206" ID="ID_1345830249" MODIFIED="1508042615164" TEXT="ssh&#x76f8;&#x5173;&#x64cd;&#x4f5c;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1506050507823" ID="ID_248244595" MODIFIED="1506050527288">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#f10e0e">&#x66f4;&#x6362;&#x4e86;.ssh&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x7684;&#x5bc6;&#x94a5;&#x4e4b;&#x540e;&#x7684;&#x66f4;&#x65b0;&#x64cd;&#x4f5c;:</font></b>
    </p>
    <p>
      ssh-add -D
    </p>
    <p>
      ssh-add id_rsa
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1476935359890" FOLDED="true" ID="ID_505596854" MODIFIED="1508830422561" POSITION="right" TEXT="5.android&#x7684;&#x5c0f;&#x77e5;&#x8bc6;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1476935377161" FOLDED="true" ID="ID_1113704051" MODIFIED="1499740313049">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.IMEI&#x548c;NVRAM
    </p>
    <p>
      imei&#x4ee3;&#x8868;International Mobile Equipment Identity
    </p>
    <p>
      &#x7531;15&#x4e2a;&#x5341;&#x8fdb;&#x5236;&#x7684;&#x6570;&#x5b57;&#x6784;&#x6210;----&gt;14 digits plus a clock digit
    </p>
    <p>
      &#x5982;&#x4f55;&#x67e5;&#x770b;&#x5230;IMEI&#x53f7;&#xff1a;
    </p>
    <p>
      &#x62e8;&#x53f7;&#x952e;&#x76d8;&#x62e8;&#x53f7;"*#06#"
    </p>
    <p>
      &#x6216;&#x8005;&#x67e5;&#x770b;settings-&gt;about phone-&gt;status
    </p>
  </body>
</html></richcontent>
<node CREATED="1476935760777" ID="ID_200177028" MODIFIED="1476941865106">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#e50e0e">Non-Volatile Random Access Memory</font></b>
    </p>
    <p>
      a type of memory that retains it&#x2019;s contests after switching off a device.
    </p>
    <p>
      It consists of SRAM and EEPROM chips. NVRAM contains data like WiFi
    </p>
    <p>
      and Bluetooth MAC address, Baseband version,
    </p>
    <p>
      IMEI/MEID number and other essential information.
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1479707368505" ID="ID_6989081" MODIFIED="1642060864875" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6.android&#x7cfb;&#x7edf;&#x5206;&#x6790;&#x5de5;&#x5177;,&#x65e5;&#x5fd7;&#x5de5;&#x5177;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1479707423903" ID="ID_1549739821" MODIFIED="1642060866959">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ad0c0c"><b>systrace&#x5de5;&#x5177;&#x7684;&#x4f7f;&#x7528;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1479707445319" ID="ID_180729713" MODIFIED="1642061054535">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      systrace&#30340;&#36755;&#20986;&#32467;&#26524;&#26159;&#19968;&#20010;&#32593;&#39029;&#30340;&#25991;&#20214;&#65292;&#20351;&#29992;chrome&#25171;&#24320;&#35813;&#25991;&#20214;: <b>&#27604;&#36739;&#26032;&#30340;&#29256;&#26412;&#38656;&#35201;&#22312;&#27983;&#35272;&#22120;&#36755;&#20837; chrome://tracing&#25171;&#24320;</b>
    </p>
    <p>
      1.&#20351;&#29992;W&#38190;&#32553;&#23567;&#32593;&#39029;&#32467;&#26524;&#65292;&#20351;&#29992;S&#38190;&#25918;&#22823;&#32593;&#39029;&#32467;&#26524;,A&#38190;&#24038;&#24179;&#31227;&#65292;D&#38190;
    </p>
    <p>
      &#21491;&#24179;&#31227;&#65292;E&#23558;&#26102;&#38388;&#32447;&#30340;&#20013;&#24515;&#23450;&#26684;&#22312;&#24403;&#21069;&#40736;&#26631;&#30340;&#20301;&#32622;&#65292;G&#22312;&#24403;&#21069;&#36873;&#25321;&#30340;&#32447;&#31243;&#30340;&#24320;&#22987;
    </p>
    <p>
      &#26174;&#31034;&#20986;grid
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1479733013052" ID="ID_228513335" MODIFIED="1479736408172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#x8ddf;surfaceflinger&#x76f8;&#x5173;&#x7684;&#x51e0;&#x4e2a;&#x8fdb;&#x7a0b;&#x5728;systrace&#x5f53;&#x4e2d;&#x7684;&#x8868;&#x793a;&#x65b9;&#x6cd5;</b></i>:
    </p>
    <p>
      1.&#x8ddf;vsync&#x76f8;&#x5173;&#x7684;&#x51e0;&#x4e2a;&#x6982;&#x5ff5;
    </p>
    <p>
      HW_VSYNC_ON_0 &#x8fd9;&#x4e2a;&#x4ee3;&#x8868;primary display&#x7684;vsync&#x88ab;disable&#x6216;&#x8005;
    </p>
    <p>
      &#x662f;enable, 0&#x4ee3;&#x8868;primary display,&#x5982;&#x679c;&#x662f;external monitor&#x5c31;&#x662f;1&#x4e86;
    </p>
    <p>
      &#x7576;SF&#x8981;&#x6c42;HWComposer&#x5c07;Display&#x7684;VSync&#x6253;&#x958b;&#x6216;&#x95dc;&#x6389;&#x6642;, &#x9019;&#x500b;event&#x5c31;&#x6703;&#x8a18;&#x9304;&#x4e0b;&#x4f86;
    </p>
    <p>
      
    </p>
    <p>
      HW_VSYNC_0&#x4ee3;&#x8868;primary display&#x7684;&#x53d1;&#x751f;&#x7684;&#x65f6;&#x95f4;&#x70b9;&#xff0c;0&#x4ee3;&#x8868;primary display
    </p>
    <p>
      
    </p>
    <p>
      &#x76ee;&#x524d;user&#x770b;&#x5230;&#x756b;&#x9762;&#x5448;&#x73fe;&#x7684;&#x904e;&#x7a0b;&#x662f;&#x9019;&#x6a23;&#x5b50;&#x7684;, app&#x66f4;&#x65b0;&#x5b83;&#x7684;&#x756b;&#x9762;&#x5f8c;, &#x5b83;&#x9700;&#x8981;&#x900f;&#x904e;BufferQueue&#x901a;&#x77e5;SF,
    </p>
    <p>
      SF&#x518d;&#x5c07;&#x66f4;&#x65b0;&#x904e;&#x7684;app&#x756b;&#x9762;&#x8207;&#x5176;&#x5b83;&#x7684;App&#x6216;Status Bar/Navigation Bar&#x7d44;&#x5408;&#x5f8c;, &#x518d;&#x986f;&#x793a;&#x5728;&#x4f7f;&#x7528;&#x8005;&#x9762;&#x524d;.
    </p>
    <p>
      &#x5728;&#x9019;&#x500b;&#x904e;&#x7a0b;&#x88e1;, &#x6709;3&#x500b;component&#x727d;&#x6d89;&#x9032;&#x4f86;, &#x5206;&#x5225;&#x662f;App, SF, &#x8207;Display.
    </p>
    <p>
      VSYNC-app = HW_VSYNC_0 + phase_app
    </p>
    <p>
      &#xa0;VSYNC-sf = HW_VSYNC_0 + phase_sf
    </p>
    <p>
      &#x5982;&#x679c;phase_app&#x8207;phase_sf&#x8a2d;&#x5b9a;&#x7684;&#x597d;&#x7684;&#x8a71;, &#x53ef;&#x80fd;&#x5927;&#x90e8;&#x4efd;user&#x4f7f;&#x7528;&#x7684;&#x72c0;&#x6cc1;, App+SF&#x53ef;&#x4ee5;&#x5728;&#x4e00;&#x500b;frame&#x88e1;&#x5b8c;&#x6210;,
    </p>
    <p>
      &#x7136;&#x5f8c;&#x5728;&#x4e0b;&#x4e00;&#x500b;HW_VSYNC_0&#x4f86;&#x7684;&#x6642;&#x5019;, &#x986f;&#x793a;&#x5728;display&#x4e0a;.
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1642066052985" ID="ID_1173698033" MODIFIED="1642066155881">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">&#22823;&#31070;&#20889;&#30340;systrace&#31995;&#21015;&#25991;&#31456;</font>
    </p>
    <p>
      <font color="#ff0000" size="4">https://androidperformance.com/2019/05/28/Android-Systrace-About/#</font>
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node CREATED="1496221895678" FOLDED="true" ID="ID_127873495" MODIFIED="1504761238861">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#9f1212"><b>adb shell</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1496221901919" ID="ID_261410774" MODIFIED="1496222380947">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#d90e0e">1.&#x5728;&#x8fde;&#x63a5;&#x5c55;&#x8baf;&#x5e73;&#x53f0;&#x7684;&#x5f00;&#x53d1;&#x677f;&#x7684;&#x65f6;&#x5019;&#x65e0;&#x6cd5;&#x8fdb;&#x884c;&#x8fde;&#x63a5;</font>
    </p>
    <p>
      &#x914d;&#x7f6e;&#x4e86; ~/.android/adb_usb.ini &#x589e;&#x52a0;&#x4e86;&#x5c55;&#x8baf;&#x7684;vendor id&#x8fdb;&#x53bb;
    </p>
    <p>
      &#x5728;&#x76ee;&#x5f55;/etc/udev/rules.d&#x4e0b;&#x9762;&#x589e;&#x52a0;&#x4e86;70-persistent-net.rules&#x6587;&#x4ef6;&#xff0c;
    </p>
    <p>
      &#x7f51;&#x4e0a;&#x8d44;&#x6599;&#x4e0a;&#x9762;&#x8bf4;&#xff0c;&#x8fd0;&#x884c;&#x4e0b;&#x9762;&#x7684;&#x547d;&#x4ee4;&#x53ef;&#x4ee5;&#x81ea;&#x52a8;&#x751f;&#x6210;70-persistent-net.ruies&#x6587;&#x4ef6;
    </p>
    <p>
      sudo udevadm trigger --subsystem-match=net --action=add
    </p>
    <p>
      udevadm trigger --help
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1504147366198" FOLDED="true" ID="ID_32429342" MODIFIED="1504761244142">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#c20808"><b>tombstone</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1504147462766" ID="ID_239064288" MODIFIED="1504147836119">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      addr2line&#x7528;&#x4e8e;&#x83b7;&#x5f97;&#x6307;&#x5b9a;&#x7684;&#x52a8;&#x6001;&#x94fe;&#x63a5;&#x5e93;&#x6587;&#x4ef6;&#x6216;&#x8005;&#x53ef;&#x6267;&#x884c;&#x6587;&#x4ef6;&#x5f53;&#x4e2d;
    </p>
    <p>
      &#x6307;&#x5b9a;&#x5730;&#x5740;&#x5bf9;&#x5e94;&#x7684;&#x6e90;&#x4ee3;&#x7801;&#x4fe1;&#x606f;&#x7684;&#x5de5;&#x5177;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1504147849061" ID="ID_1708476179" MODIFIED="1504751257993">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#a20707"><b>yunos tombstone&#x7684;&#x683c;&#x5f0f;:</b></font>
    </p>
    <p>
      <font color="#1239f2">SP:&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;PC:&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;(offset:binary),&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;export_symbol:instruction_offset</font>
    </p>
    <p>
      <font color="#143dee">SP: 0xacdfe930 PC: 0xb4284cb6(0x0008bcb6:/usr/lib/libcamerahal.so), JPEG_HWGetSize:201 </font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#143dee">addr2line&#x4e00;&#x822c;&#x60c5;&#x51b5;&#x4e0b;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;&#x5bfc;&#x51fa;&#x7b26;&#x53f7;&#x540e;&#x9762;&#x7ed9;&#x5b9a;&#x7684;offset&#x4f5c;&#x4e3a;&#x53c2;&#x6570;&#xff0c;&#x4f46;&#x662f;&#x6709;&#x5982;&#x4e0b;&#x7684;&#x4f8b;&#x5916;: </font>
    </p>
    <p>
      <font color="#d60f08">addr2line -a 0x000156dd -e cow/libVideoDecodeV4l2.so </font>
    </p>
    <p>
      <font color="#d60f08">arm-linux-androideabi-addr2line -f -e libstagefright.so&#xa0;&#xa0;0007cd0f</font>
    </p>
    <p>
      
    </p>
    <p>
      1. PC&#x4e3a;LR&#x5bc4;&#x5b58;&#x5668;&#xff0c;&#x4e5f;&#x5c31;&#x662f;&#x8df3;&#x8f6c;&#x6307;&#x4ee4;&#x7684;&#x4e0b;&#x4e00;&#x6761;&#x6307;&#x4ee4;&#x5730;&#x5740;(addr2line &#x65f6;&#x9700;&#x8981;&#x56de;&#x6eaf;&#x5230;&#x8df3;&#x8f6c;&#x6307;&#x4ee4;&#xff09;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;* thumb&#x6307;&#x4ee4;&#x60c5;&#x51b5;&#x4e0b;&#xa0;&#xa0;pc - 3
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;* arm &#x6a21;&#x5f0f;&#x4e0b; pc -4
    </p>
    <p>
      
    </p>
    <p>
      2. &#x67e5;&#x770b;binary &#x4ee3;&#x7801;&#x6bb5;&#x52a0;&#x8f7d;&#x5730;&#x5740;&#x662f;&#x5426;&#x4e0e;&#x6587;&#x4ef6;&#x504f;&#x79fb;&#x76f8;&#x7b49;&#xff08;&#x5927;&#x90e8;&#x5206;&#x76f8;&#x7b49;&#xff0c;&#x4e0d;&#x76f8;&#x7b49;&#x60c5;&#x51b5;&#x4e0b;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;pc - binary vm start &#xff08;maps &#x4e2d;&#x7684;&#x8d77;&#x59cb;&#x5730;&#x5740;&#xff09;+ vm_addr - offset &#xff08;readelf -l &#x4e2d; .text &#x7684;&#x4fe1;&#x606f;)
    </p>
    <p>
      
    </p>
    <p>
      addr2line &#x53c2;&#x6570;&#x4e2d; &#x5e94;&#x6307;&#x5b9a; -iCaf
    </p>
    <p>
      
    </p>
    <p>
      <b>&#x6293;&#x53d6;tombstone&#x7684;&#x65b9;&#x6cd5;:</b>&#xa0;adb &#x2013;host pull /var/tools/tombstones
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1482300801861" FOLDED="true" ID="ID_196697670" MODIFIED="1606807969829" POSITION="right" TEXT="7.SELinux SEAndroid">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1482300819318" ID="ID_1607491495" MODIFIED="1571884077421">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      DAC&#x548c;MAC
    </p>
    <p>
      DAC&#x5b89;&#x5168;&#x6a21;&#x578b;(&#x81ea;&#x4e3b;&#x8bbf;&#x95ee;&#x63a7;&#x5236;)&#xff0c;&#x8be5;&#x6a21;&#x578b;&#x7684;&#x6838;&#x5fc3;&#x601d;&#x60f3;&#x5c31;&#x662f;&#x8fdb;&#x7a0b;&#x7684;&#x6743;&#x9650;
    </p>
    <p>
      &#x8ddf;&#x6267;&#x884c;&#x8be5;&#x8fdb;&#x7a0b;&#x7684;&#x7528;&#x6237;&#x7684;&#x6743;&#x9650;&#x662f;&#x76f8;&#x540c;&#x7684;&#x3002;
    </p>
    <p>
      MAC&#x5b89;&#x5168;&#x6a21;&#x578b;(&#x5f3a;&#x5236;&#x8bbf;&#x95ee;&#x6a21;&#x578b;)&#xff0c;&#x8be5;&#x6a21;&#x578b;&#x7684;&#x6838;&#x5fc3;&#x601d;&#x60f3;&#x662f;&#x4efb;&#x4f55;&#x8fdb;&#x7a0b;&#x7684;&#x6743;&#x9650;&#x90fd;&#x5fc5;&#x987b;&#x5728;
    </p>
    <p>
      &#x5b89;&#x5168;&#x7b56;&#x7565;&#x914d;&#x7f6e;&#x6587;&#x4ef6;&#x5f53;&#x4e2d;&#x5f97;&#x5230;&#x914d;&#x7f6e;&#x3002;
    </p>
  </body>
</html></richcontent>
<node CREATED="1482302039358" ID="ID_1202106892" MODIFIED="1571898741903">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>MAC&#x7684;&#x57fa;&#x672c;&#x7ba1;&#x7406;&#x5355;&#x4f4d;&#x662f;&#x57fa;&#x4e8e;TE&#x7684;&#xff0c;RBAC&#x4e5f;&#x662f;&#x57fa;&#x4e8e;TE&#x7684;</b>
    </p>
    <p>
      TE&#x7684;allow&#x8bed;&#x53e5;&#x7684;&#x683c;&#x5f0f;&#xff0c;&#x8bed;&#x6cd5;&#x5982;&#x4e0b;&#x6240;&#x793a;:
    </p>
    <p>
      <b>rule_name source_type target_type : class perm_set</b>
    </p>
    <p>
      &#x793a;&#x4f8b;&#x5982;&#x4e0b;&#x6240;&#x793a;:
    </p>
    <p>
      <b>allow netd proc:file write</b>
    </p>
    <p>
      allow&#x8868;&#x793a;&#x6388;&#x6743;&#x8bed;&#x53e5;
    </p>
    <p>
      netd &#x8868;&#x793a;source type&#x4e5f;&#x8868;&#x793a;subject&#xff0c;&#x5373;&#x4e3b;&#x4f53;
    </p>
    <p>
      proc target type,&#x4e5f;&#x53eb;&#x505a;object&#x5ba2;&#x4f53;
    </p>
    <p>
      file &#x4ee3;&#x8868;object class,&#x8868;&#x793a;&#x80fd;&#x591f;&#x7ed9;&#x4e3b;&#x4f53;&#x64cd;&#x4f5c;&#x7684;&#x4e1c;&#x897f;&#xff0c;&#x6bd4;&#x5982;file, dir, socket. android
    </p>
    <p>
      &#x5f53;&#x4e2d;&#x6709;&#x4e00;&#x4e2a;&#x7279;&#x6b8a;&#x7684;object class, &#x90a3;&#x5c31;&#x662f;binder.
    </p>
    <p>
      write &#x4ee3;&#x8868;&#x5728;object class&#x5f53;&#x4e2d;&#x53ef;&#x4ee5;&#x8fdb;&#x884c;&#x7684;&#x64cd;&#x4f5c;&#x3002;
    </p>
    <p>
      allow zygote init:process sigchld
    </p>
    <p>
      &#x8868;&#x793a;&#x5141;&#x8bb8;zygote&#x7c7b;&#x578b;&#x7684;&#x8fdb;&#x7a0b;&#x5411;&#x7c7b;&#x578b;&#x662f;init&#x7684;&#x8fdb;&#x7a0b;&#x53d1;&#x9001;sigchld&#x4fe1;&#x53f7;
    </p>
    <p>
      allow zygote appdomain:dir { getattr search }
    </p>
    <p>
      &#x8868;&#x793a;&#x5141;&#x8bb8;zygote&#x7c7b;&#x578b;&#x7684;&#x8fdb;&#x7a0b;&#x5411;&#x7c7b;&#x578b;&#x4e3a;appdomain&#x7684;&#x76ee;&#x5f55;&#x6267;&#x884c;getattr&#x548c;search&#x64cd;&#x4f5c;
    </p>
  </body>
</html></richcontent>
<node CREATED="1482304381248" ID="ID_447500049" MODIFIED="1571898971238">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#ff3300" size="4"><b>type&#x548c;attribute</b></font></i>
    </p>
    <p>
      type type_id [alias alias_id,] [attribute_id]
    </p>
    <p>
      type shell, domain &#x5b9a;&#x4e49;&#x4e00;&#x4e2a;shell type,&#x5e76;&#x4e14;&#x6307;&#x5b9a;&#x8be5;type&#x7684;
    </p>
    <p>
      &#x5c5e;&#x6027;&#x662f;domain
    </p>
    <p>
      
    </p>
    <p>
      type&#x8ddf;attribute&#x53ef;&#x4ee5;&#x770b;&#x505a;&#x662f;&#x5c5e;&#x4e8e;&#x540c;&#x4e00;&#x4e2a;&#x547d;&#x540d;&#x7a7a;&#x95f4;&#x7684;&#xff0c;attribute&#x76f8;&#x5f53;&#x4e8e;&#x4e00;&#x4e2a;group,
    </p>
    <p>
      &#x5b9a;&#x4e49;&#x67d0;&#x4e2a;type&#x7684;attribute&#x76f8;&#x5f53;&#x4e8e;&#x8bf4;&#x660e;&#x8be5;type&#x662f;&#x5c5e;&#x4e8e;&#x8be5;attribute&#x7684;group&#x5f53;&#x4e2d;&#x7684;
    </p>
    <p>
      
    </p>
    <p>
      &#x8fd9;&#x6837;&#x7684;&#x597d;&#x5904;&#x662f;&#x5f53;&#x6211;&#x4eec;&#x7cfb;&#x7edf;&#x5f53;&#x4e2d;&#x6709;&#x5927;&#x91cf;&#x7684;type&#x9700;&#x8981;allow&#x8bed;&#x53e5;&#x6765;&#x8d4b;&#x4e88;&#x6743;&#x9650;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x53ef;&#x4ee5;&#x5c06;&#x8fd9;&#x4e9b;type&#x7684;&#x5c5e;&#x6027;
    </p>
    <p>
      &#x8bbe;&#x7f6e;&#x6210;&#x76f8;&#x540c;&#x7684;&#x5c5e;&#x6027;id&#xff0c; &#x7136;&#x540e;&#x7528;&#x4e00;&#x4e2a;allow&#x8bed;&#x53e5;&#xff0c;&#x5c06;source type&#x914d;&#x7f6e;&#x6210;&#x8be5;attribute id&#x5373;&#x53ef;
    </p>
    <p>
      
    </p>
    <p>
      <b>#&#x5b9a;&#x4e49;&#x4e24;&#x4e2a;type&#xff0c;&#x5206;&#x522b;&#x662f;A_t&#x548c;B_t&#xff0c;&#x5b83;&#x4eec;&#x90fd;&#x7ba1;&#x7406;&#x5230;attribute_test</b>
    </p>
    <p>
      type A_t attribute_test;
    </p>
    <p>
      type B_t attribute_test;
    </p>
    <p>
      <b>#&#x5199;&#x4e00;&#x4e2a;allow&#x8bed;&#x53e5;&#xff0c;&#x76f4;&#x63a5;&#x9488;&#x5bf9;attribute_test</b>
    </p>
    <p>
      allow attribute_test C_t:file {read write};
    </p>
    <p>
      <b>#&#x4e0a;&#x9762;&#x8fd9;&#x4e2a;allow&#x8bed;&#x53e5;&#x5728;&#x7f16;&#x8bd1;&#x540e;&#x7684;&#x5b89;&#x5168;&#x7b56;&#x7565;&#x6587;&#x4ef6;&#x4e2d;&#x4f1a;&#x88ab;&#x5982;&#x4e0b;&#x4e24;&#x6761;&#x8bed;&#x53e5;&#x66ff;&#x4ee3;&#xff1a;</b>
    </p>
    <p>
      allow A_t C_t:file {read write};
    </p>
    <p>
      allow B_t C_t:file {read write};
    </p>
  </body>
</html></richcontent>
<node CREATED="1574041728771" ID="ID_447325489" MODIFIED="1574041848304">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <span style="font-family: Liberation Serif,serif; color: #CC0000; font-size: 12.0pt" lang="EN-US"><font size="12.0pt" color="#CC0000" face="Liberation Serif,serif"><b>/dev/rt5670_volume_device</b></font></span><font size="12.0pt" color="#CC0000" face="Liberation Serif,serif"><b><span>&#xa0;&#xa0; </span><span style="font-family: Liberation Serif,serif; color: #CC0000; font-size: 12.0pt" lang="EN-US">u:object_r:hdmiinvolume_device:s0</span></b></font>
    </p>
    <p>
      
    </p>
    <p>
      <span style="font-family: Liberation Serif,serif; color: #CC0000; font-size: 12.0pt" lang="EN-US"><font size="12.0pt" color="#CC0000" face="Liberation Serif,serif"><b>type hdmiinvolume_device, dev_type; </b></font></span>
    </p>
    <p>
      
    </p>
    <p>
      <span style="font-family: Liberation Serif,serif; color: red; font-size: 12.0pt" lang="EN-US"><font size="12.0pt" color="red" face="Liberation Serif,serif"><b>allow mediaserver hdmiinvolume_device:chr_file { read write ioctl open };</b></font></span>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482304537199" ID="ID_569679899" MODIFIED="1482304617373">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>rule_name</b>
    </p>
    <p>
      allow
    </p>
    <p>
      allowaudit
    </p>
    <p>
      dontaudit
    </p>
    <p>
      neverallow
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1571896799148" ID="ID_1154982478" MODIFIED="1571896950116">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff3300"><b>/system/sepolicy/private/security_classes &#x6587;&#x4ef6;&#x91cc;&#x9762;&#x5b9a;&#x4e49;&#x4e86;object class&#x7684;&#x79cd;&#x7c7b;</b></font>
    </p>
    <p>
      
    </p>
    <p>
      class filesystem
    </p>
    <p>
      class file
    </p>
    <p>
      class dir
    </p>
    <p>
      class fd
    </p>
    <p>
      class lnk_file
    </p>
    <p>
      class chr_file
    </p>
    <p>
      class blk_file
    </p>
    <p>
      class sock_file
    </p>
    <p>
      class fifo_file
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1571897191909" ID="ID_1828473705" MODIFIED="1571897634026">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      perm_set&#x6307;&#x7684;&#x662f;&#x67d0;&#x79cd;object class&#x6240;&#x62e5;&#x6709;&#x7684;&#x64cd;&#x4f5c;
    </p>
    <p>
      
    </p>
    <p>
      &#x7cfb;&#x7edf;&#x5f53;&#x4e2d;&#x4f7f;&#x7528;&#x7684;object class&#x5bf9;&#x5e94;&#x7684;perm_set&#x4e00;&#x822c;&#x90fd;&#x88ab;&#x4e8b;&#x5148;&#x58f0;&#x660e;&#x597d;&#x4e86;&#xff0c;&#x58f0;&#x660e;perm_set&#x7684;&#x65b9;&#x5f0f;&#x6709;2&#x79cd;:
    </p>
    <p>
      
    </p>
    <p>
      <font color="#ff3300"><b>&#x4e00;&#x79cd;&#x662f;common&#x547d;&#x4ee4;&#xff1a; common common_name {permission_name ...}</b></font>
    </p>
    <p>
      common&#x5b9a;&#x4e49;&#x7684;perm_set&#x53ef;&#x4ee5;&#x88ab;class&#x6240;&#x5b9a;&#x4e49;&#x7684;perm_set&#x7ee7;&#x627f;&#x4e0b;&#x6765;
    </p>
    <p>
      
    </p>
    <p>
      common file {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;ioctl read write create getattr ...
    </p>
    <p>
      }
    </p>
    <p>
      
    </p>
    <p>
      <font color="#ff3300"><b>class&#x547d;&#x4ee4;&#x7684;&#x901a;&#x7528;&#x683c;&#x5f0f;:&#xa0;&#xa0;class class_name [ inherits common_name ] { permission_name ... }</b></font>
    </p>
    <p>
      
    </p>
    <p>
      class dir inherits file {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;add_name remove_name reparent search ...
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1572848534886" ID="ID_1508042515" MODIFIED="1572848725712">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ff0033">RBAC</font></b>
    </p>
    <p>
      
    </p>
    <p>
      RBAC&#x8ddf;TEAC&#x7684;&#x5173;&#x7cfb;&#xff0c;RBAC&#x53ef;&#x4ee5;&#x8bf4;&#x662f;&#x9488;&#x5bf9;TEAC&#x7684;&#x52a0;&#x5f3a;&#xff0c;TEAC&#x53ea;&#x4f1a;&#x9488;&#x5bf9;type&#x6216;&#x8005;domain&#x8fdb;&#x884c;
    </p>
    <p>
      &#x6743;&#x9650;&#x68c0;&#x67e5;&#xff0c;RBAC&#x5219;&#x662f;&#x9488;&#x5bf9;user&#x8ddf;role&#x7684;&#x3002;SELinux&#x9996;&#x5148;&#x68c0;&#x67e5;TE&#x662f;&#x5426;&#x6ee1;&#x8db3;&#x6761;&#x4ef6;&#xff0c;&#x7136;&#x540e;&#x518d;&#x68c0;&#x67e5;RBAC&#x662f;&#x5426;&#x6ee1;&#x8db3;
    </p>
    <p>
      &#x6761;&#x4ef6;&#xff0c;RBAC&#x901a;&#x8fc7;constrain&#x5728;user&#x548c;role&#x4e0a;&#x6dfb;&#x52a0;&#x9650;&#x5236;
    </p>
  </body>
</html></richcontent>
<node CREATED="1572848804606" ID="ID_643188914" MODIFIED="1572849342497">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>role&#x8ddf;user&#x7684;&#x5b9a;&#x4e49;</b>
    </p>
    <p>
      
    </p>
    <p>
      role r;&#xa0;&#xa0;&#x8be5;&#x8bed;&#x53e5;&#x5c31;&#x5b9a;&#x4e49;&#x4e86;role
    </p>
    <p>
      role r types domain; &#x5c06;&#x5b9a;&#x4e49;&#x7684;r&#x8ddf;attribute domain&#x5173;&#x8054;&#x8d77;&#x6765;
    </p>
    <p>
      
    </p>
    <p>
      user&#x7684;&#x5b9a;&#x4e49;&#x683c;&#x5f0f;: user seuser_id roles role_id level mls_level range mls_range
    </p>
    <p>
      &#x4e00;&#x4e2a;user&#x53ef;&#x4ee5;&#x8ddf;&#x591a;&#x4e2a;role&#x8fdb;&#x884c;&#x5173;&#x8054;&#xff0c;level&#x4e4b;&#x540e;&#x662f;&#x8be5;user&#x5177;&#x6709;&#x7684;&#x5b89;&#x5168;&#x7ea7;&#x522b;&#xff0c;
    </p>
    <p>
      s0&#x662f;&#x6700;&#x4f4e;&#x7ea7;&#x522b;&#xff0c;&#x4e5f;&#x662f;&#x9ed8;&#x8ba4;&#x7684;&#x7ea7;&#x522b;&#xff1b; range&#x540e;&#x9762;&#x8ddf;&#x7684;&#x662f;user&#x53ef;&#x4ee5;&#x8fd0;&#x884c;&#x7684;security levels&#x8303;&#x56f4;
    </p>
    <p>
      
    </p>
    <p>
      user u roles { r } level s0 range s0 - mls_systemhigh
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1572849353992" ID="ID_1926459482" MODIFIED="1572850098095">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Roles&#x548c;User&#x4e4b;&#x95f4;&#x7684;&#x4ea4;&#x4e92;</b>
    </p>
    <p>
      
    </p>
    <p>
      &#x5141;&#x8bb8;&#x4ece;&#x4e00;&#x4e2a;role&#x5207;&#x6362;&#x5230;&#x53e6;&#x4e00;&#x4e2a;role (SELinux&#x4f7f;&#x7528;Transition&#x8868;&#x8fbe;&#x5207;&#x6362;)
    </p>
    <p>
      allow from_role_id to_role_id
    </p>
    <p>
      
    </p>
    <p>
      &#x89d2;&#x8272;&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;
    </p>
    <p>
      dominance { role super_r {role sysadm_r; role secadm_r;} }
    </p>
    <p>
      &#x8fd9;&#x53e5;&#x8bdd;&#x8868;&#x793a;super_r &#x7edf;&#x6cbb;&#x89d2;&#x8272; sysadm_r &#x8ddf; secadm_r
    </p>
    <p>
      super_r&#x5c06;&#x4f1a;&#x81ea;&#x52a8;&#x7ee7;&#x627f;sysadm_r&#x8ddf;secadm_r&#x6240;&#x5173;&#x8054;&#x7684;type
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1572850139653" ID="ID_1440665285" MODIFIED="1572852044837">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#x57fa;&#x4e8e;role&#x548c;user&#x7684;&#x6743;&#x9650;&#x63a7;&#x5236;</b>
    </p>
    <p>
      
    </p>
    <p>
      &#x8bed;&#x6cd5;&#x683c;&#x5f0f;: constrain object_class_set&#xa0;&#xa0;&#xa0;perm_set&#xa0;&#xa0;&#xa0;expression;
    </p>
    <p>
      constrain file write (u1 == u2 and r1 == r2)
    </p>
    <p>
      &#x8fd9;&#x53e5;&#x8bdd;&#x8868;&#x793a;&#x53ea;&#x6709;source&#x548c;target&#x7684;user&#x76f8;&#x540c;&#xff0c;&#x5e76;&#x4e14;role&#x4e5f;&#x76f8;&#x540c;&#xff0c;&#x624d;&#x5141;&#x8bb8;&#x64cd;&#x4f5c;file
    </p>
    <p>
      
    </p>
    <p>
      constrain&#x5f53;&#x4e2d;&#x6700;&#x5173;&#x952e;&#x7684;&#x662f;expression
    </p>
    <p>
      u1, r1, t1 &#x4ee3;&#x8868;source&#x7684;user, role&#x548c;type
    </p>
    <p>
      u2, r2, t2 &#x4ee3;&#x8868;target&#x7684;user, role&#x548c;type
    </p>
    <p>
      &#x5bf9;&#x4e8e;u&#x548c;r&#x6765;&#x8bf4;&#xff0c; == &#x6216;&#x8005; != &#x8868;&#x793a;&#x76f8;&#x7b49;&#x6216;&#x8005;&#x4e0d;&#x76f8;&#x7b49;&#xff0c;&#x5bf9;&#x4e8e;t&#x6765;&#x8bf4;&#xff0c; == &#x6216;&#x8005; != &#x67d0;&#x4e2a;attribute&#x7684;&#x65f6;&#x5019;
    </p>
    <p>
      &#x8868;&#x793a;type&#x662f;&#x5c5e;&#x4e8e;&#x6216;&#x8005;
    </p>
    <p>
      dom,domby,incomp,eq&#x5173;&#x952e;&#x5b57;&#x4ec5;&#x4ec5;&#x9488;&#x5bf9;role, &#x8868;&#x793a;&#x7edf;&#x6cbb;&#xff0c;&#x88ab;&#x7edf;&#x6cbb;&#xff0c;&#x6ca1;&#x5173;&#x7cfb;&#x548c;&#x76f8;&#x540c;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1574042014964" ID="ID_443501368" MODIFIED="1574042157950" TEXT="Labeling&#x4ecb;&#x7ecd;">
<node CREATED="1574042163504" ID="ID_1439050251" MODIFIED="1574042401413">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5728;SELinux&#x5f53;&#x4e2d;&#xff0c;&#x521d;&#x59cb;&#x5316;&#x548c;&#x5206;&#x914d;SContext&#x7ed9;&#x8fdb;&#x7a0b;&#x6216;&#x8005;&#x6587;&#x4ef6;&#x7684;&#x5de5;&#x4f5c;&#x53eb;&#x505a;security labeling
    </p>
    <p>
      
    </p>
    <p>
      1) sid&#x548c;sid_context
    </p>
    <p>
      init&#x8fdb;&#x7a0b;&#x5c06;&#x7f16;&#x8bd1;&#x597d;&#x7684;&#x5b89;&#x5168;&#x7b56;&#x7565;&#x6587;&#x4ef6;&#x4f20;&#x9012;&#x7ed9;&#x5185;&#x6838;&#x7684;LSM&#x6a21;&#x5757;(Linux Security Model)
    </p>
    <p>
      LSM&#x521d;&#x59cb;&#x5316;&#x9700;&#x8981;&#x4e24;&#x4e2a;&#x6587;&#x4ef6;&#xff0c;initial_sids&#x548c;initial_sid_context
    </p>
    <p>
      initial_sids&#x7c7b;&#x4f3c;&#x4e8e;key&#x503c;&#xff0c;&#x901a;&#x8fc7;key&#x503c;&#x5feb;&#x901f;&#x5339;&#x914d;SContext
    </p>
    <p>
      inital_sid_context&#x662f;sid&#x6700;&#x521d;&#x7684;&#x503c;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1574066586067" ID="ID_1840646603" MODIFIED="1574066649359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff3300"><b>Domain/Type Transition &#x548c; &#x5b8f;</b></font>
    </p>
    <p>
      &#x8fd9;&#x90e8;&#x5206;&#x6bd4;&#x8f83;&#x590d;&#x6742;&#xff0c;&#x53c2;&#x8003;&#x94fe;&#x63a5; <a href="https://blog.csdn.net/innost/article/details/19299937">https://blog.csdn.net/innost/article/details/19299937</a>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1482301284954" ID="ID_1734328306" MODIFIED="1482302033796">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>SELinux Policy&#x8bed;&#x8a00;</b>
    </p>
    <p>
      security context&#x5b89;&#x5168;&#x4e0a;&#x4e0b;&#x6587;&#x7684;&#x6982;&#x5ff5;
    </p>
    <p>
      user:role:type[:range]
    </p>
    <p>
      user&#x7528;&#x6237;&#xff0c;SEAndroid&#x5f53;&#x4e2d;&#x5b9a;&#x4e49;&#x4e86;&#x4e00;&#x4e2a;&#x7528;&#x6237;&#x4e3a;u
    </p>
    <p>
      role&#x89d2;&#x8272;&#xff0c;&#x5b83;&#x662f;SELinux&#x5f53;&#x4e2d;&#x4e00;&#x79cd;&#x6bd4;&#x8f83;&#x9ad8;&#x5c42;&#x6b21;&#x7684;&#x6743;&#x9650;&#x7ba1;&#x7406;&#x601d;&#x8def;&#xff0c;&#x5373;Role Based Access Control&#x3002;
    </p>
    <p>
      &#x4e00;&#x4e2a;&#x7528;&#x6237;&#x53ef;&#x4ee5;&#x5c5e;&#x4e8e;&#x591a;&#x4e2a;&#x89d2;&#x8272;&#x3002;&#x4e00;&#x822c;&#x6587;&#x4ef6;&#x7684;&#x89d2;&#x8272;&#x90fd;&#x662f;object_r,&#x8fdb;&#x7a0b;&#x7684;&#x89d2;&#x8272;&#x90fd;&#x662f;r
    </p>
    <p>
      type, &#x5bf9;&#x4e8e;&#x8fdb;&#x7a0b;&#x6765;&#x8bf4;type&#x4ee3;&#x8868;&#x7684;&#x662f;domain, MAC&#x7684;&#x57fa;&#x7840;&#x7ba1;&#x7406;&#x601d;&#x8def;&#x662f;&#x57fa;&#x4e8e;Type Enforcement Accesc Control&#x7684;
    </p>
    <p>
      &#x5373;TE
    </p>
  </body>
</html></richcontent>
<node CREATED="1571886447743" ID="ID_471698793" MODIFIED="1571889082794">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      a. &#x5728;SELinux&#x5f53;&#x4e2d;&#xff0c;&#x6bcf;&#x79cd;&#x4e1c;&#x897f;&#x90fd;&#x4f1a;&#x88ab;&#x8d4b;&#x4e88;&#x4e00;&#x4e2a;&#x5b89;&#x5168;&#x5c5e;&#x6027;&#xff0c;&#x5b98;&#x65b9;&#x7684;&#x8bf4;&#x6cd5;&#x53eb;&#x505a;Security Context , &#x7b80;&#x79f0;SContext&#xff0c;
    </p>
    <p>
      SContext&#x662f;&#x4e00;&#x4e2a;&#x5b57;&#x7b26;&#x4e32;&#xff0c;&#x4e3b;&#x8981;&#x7531;&#x4e09;&#x90e8;&#x5206;&#x7ec4;&#x6210;&#xff0c;&#x5728;SEAndroid&#x7cfb;&#x7edf;&#x4e2d;&#xff0c;
    </p>
    <p>
      &#x901a;&#x8fc7;
    </p>
    <p>
      <i><font color="#006633"><b>ps -AZ &#x547d;&#x4ee4;&#x53ef;&#x4ee5;&#x67e5;&#x770b;&#x8fdb;&#x7a0b;&#x7684;SContext </b></font></i>
    </p>
    <p>
      <i><font color="#006633"><b>ls&#xa0;&#xa0;-Z&#xa0;&#xa0;&#xa0;&#xa0;&#x547d;&#x4ee4;&#x53ef;&#x4ee5;&#x67e5;&#x770b;&#x6587;&#x4ef6;&#x7684;SContext</b></font></i>
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
<node CREATED="1571887111033" ID="ID_806337647" MODIFIED="1571887127364">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/SEAndroid&#x793a;&#x4f8b;&#x6587;&#x4ef6;&#x4e00;.png"/>
  </body>
</html></richcontent>
<node CREATED="1571888035228" ID="ID_1471415465" MODIFIED="1571888099681">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      u&#x662f;user&#x7684;&#x610f;&#x601d;&#xff0c;SEAndroid&#x4e2d;&#x5b9a;&#x4e49;&#x4e86;&#x4e00;&#x4e2a;SELinux&#x7528;&#x6237;&#xff0c;&#x503c;&#x662f;u
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1571888137096" ID="ID_646361651" MODIFIED="1571888465042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      r&#x662f;role&#x7684;&#x610f;&#x601d;&#xff0c;&#x89d2;&#x8272;&#x4e4b;&#x610f;&#xff0c;&#x8fd9;&#x662f;&#x4e00;&#x79cd;Role Based Access Control(&#x57fa;&#x4e8e;&#x89d2;&#x8272;&#x7684;&#x8bbf;&#x95ee;&#x63a7;&#x5236;&#xff0c;RBAC)
    </p>
    <p>
      &#x4e00;&#x4e2a;u&#x53ef;&#x4ee5;&#x5c5e;&#x4e8e;&#x591a;&#x4e2a;role, &#x4e0d;&#x540c;&#x7684;role&#x5177;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x6743;&#x9650;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1571888484720" ID="ID_406339563" MODIFIED="1571888662720">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      init, &#x4ee3;&#x8868;&#x8be5;&#x8fdb;&#x7a0b;&#x6240;&#x5c5e;&#x7684;Domain&#x662f;init, MAC&#x7684;&#x57fa;&#x7840;&#x7ba1;&#x7406;&#x601d;&#x8def;&#x4e0d;&#x662f;&#x9488;&#x5bf9;RBAC&#x662f;&#x9488;&#x5bf9;Type Enforcement Access Control(TE)
    </p>
    <p>
      <font color="#ff0033"><b>&#x5bf9;&#x8fdb;&#x7a0b;&#x800c;&#x8a00;type&#x5c31;&#x662f;domain</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1571888706459" ID="ID_463149671" MODIFIED="1571888975929">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      S0 &#x8ddf;SELinux&#x8bbe;&#x8ba1;&#x7684;<font color="#ff0033"><b>Multi-Levels Security (MLS)</b></font>&#x673a;&#x5236;&#x6709;&#x5173;&#xff0c;&#x5373;MLS&#x5c06;&#x7cfb;&#x7edf;&#x7684;&#x8fdb;&#x7a0b;&#x548c;&#x6587;&#x4ef6;&#x8fdb;&#x884c;&#x4e86;&#x5206;&#x7ea7;&#xff0c;
    </p>
    <p>
      &#x4e0d;&#x540c;&#x7ea7;&#x522b;&#x7684;&#x8d44;&#x6e90;&#x9700;&#x8981;&#x5bf9;&#x5e94;&#x7ea7;&#x522b;&#x7684;&#x8fdb;&#x7a0b;&#x624d;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1571889116432" ID="ID_55261878" MODIFIED="1571889125693">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/SEAndroid&#x793a;&#x4f8b;&#x56fe;&#x7247;2.png"/>
  </body>
</html></richcontent>
<node CREATED="1571889153527" ID="ID_12427855" MODIFIED="1571889163320" TEXT="u&#x662f;&#x6587;&#x4ef6;&#x7684;user"/>
<node CREATED="1571889167047" ID="ID_1572794096" MODIFIED="1571889206265">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      object_r&#x662f;&#x6587;&#x4ef6;&#x7684;role&#xff0c; &#x6587;&#x4ef6;&#x662f;&#x56fa;&#x5b9a;&#x6b7b;&#x7684;&#xff0c;&#x7edf;&#x4e00;&#x7528;object_r&#x4ee3;&#x8868;&#x6587;&#x4ef6;&#x7684;&#x89d2;&#x8272;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1571889208922" ID="ID_1860552069" MODIFIED="1571889241664">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      rootfs&#x662f;&#x6587;&#x4ef6;&#x7684;type, &#x8ddf;&#x8fdb;&#x7a0b;&#x7684;domain&#x662f;&#x4e00;&#x4e2a;&#x610f;&#x601d;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1571889249215" ID="ID_703807606" MODIFIED="1571889274344">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff0033"><b>s0 MLS&#x7684;&#x7ea7;&#x522b;</b></font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1599555776779" ID="ID_1753220505" MODIFIED="1599555792268">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      [&#160;&#160;589.912069] type=1400 audit(8231862.498:1004): avc: denied { write } for pid=7121 comm=&quot;C3Dev-1-ReqQueu&quot; name=&quot;manual_af_set_lenspos&quot; dev=&quot;sysfs&quot; ino=26561 scontext=u:r:cameraserver:s0 tcontext=u:object_r:sysfs:s0 tclass=file permissive=1
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1484377644917" FOLDED="true" ID="ID_1430971308" MODIFIED="1535360604961" POSITION="left" TEXT="8.Android Studio&#x4f7f;&#x7528;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1484377660789" HGAP="6" ID="ID_1943217630" MODIFIED="1491046273718" VSHIFT="-117">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#x4f7f;&#x7528;android studio&#x6765;&#x9605;&#x8bfb;android&#x6e90;&#x4ee3;&#x7801;
    </p>
    <p>
      a. &#x751f;&#x6210;IDE&#x5de5;&#x5177;&#x6587;&#x4ef6;
    </p>
    <p>
      mmm development/tools/idegen/
    </p>
    <p>
      &#x7f16;&#x8bd1;&#x5b8c;&#x6210;&#x4e4b;&#x540e;&#x4f1a;&#x751f;&#x6210;&#x6587;&#x4ef6;idegen.jar
    </p>
    <p>
      
    </p>
    <p>
      b. &#x751f;&#x6210;Android Studio&#x914d;&#x7f6e;&#x6587;&#x4ef6;
    </p>
    <p>
      bash development/tools/idegen/idegen.sh
    </p>
    <p>
      &#x4e3b;&#x8981;&#x5c31;&#x662f;&#x751f;&#x6210;Android.iws Android.ipr android.iml
    </p>
    <p>
      
    </p>
    <p>
      c.&#x6253;&#x5f00;android studio&#x5bfc;&#x5165;&#x5de5;&#x7a0b;&#x6587;&#x4ef6;android.ipr
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491046245928" HGAP="12" ID="ID_389646716" MODIFIED="1491046283862" TEXT="make idegen &amp;&amp; development/tools/idegen/idegen.sh" VSHIFT="11"/>
</node>
<node CREATED="1484720898460" FOLDED="true" ID="ID_346512524" MODIFIED="1543386526486" POSITION="right" TEXT="9.Android&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x53ca;&#x70e7;&#x5199;">
<node CREATED="1484720921741" ID="ID_332037652" MODIFIED="1484740146382">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.ubuntu&#x7cfb;&#x7edf;&#xff0c;&#x51c6;&#x5907;&#x5de5;&#x5177;make_ext4fs&#x3001;simg2img&#x3001;mkusering.sh&#x3002;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;make_ext4fs&#x3001;simg2img&#x3001;mkusering.sh&#x8fd9;&#x4e09;&#x4e2a;&#x5de5;&#x5177;&#x53ef;&#x4ee5;&#x5728;&#x6e90;&#x7801;&#x7f16;&#x8bd1;&#x4e4b;&#x540e;&#x7684; out/host/linux_x86/bin&#x76ee;&#x5f55;&#x4e0b;&#x83b7;&#x53d6;&#xff0c;&#x5e76;&#x5c06;&#x8fd9;&#x4e09;&#x4e2a;&#x547d;&#x4ee4;&#x590d;&#x5236;&#x5230;ubuntu&#x7cfb;&#x7edf;/usr/bin&#x76ee;&#x5f55;&#x3002;
    </p>
    <p>
      2.&#x89e3;&#x538b;system.img&#x4e3a;system.img.ext4
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#x547d;&#x4ee4;&#xff1a;simg2img&#xa0;&#xa0;system.img&#xa0;&#xa0;system.img.ext4
    </p>
    <p>
      3.&#x521b;&#x5efa;system.img.ext4&#x6302;&#x8f7d;&#x76ee;&#x5f55;tmp
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#x547d;&#x4ee4;&#xff1a;mkdir tmp
    </p>
    <p>
      4.&#x6302;&#x8f7d;system.img.ext4&#x5230;tmp&#x76ee;&#x5f55;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#x547d;&#x4ee4;&#xff1a;mount -t ext4 -o loop&#xa0;&#xa0;system.img.ext4 tmp
    </p>
    <p>
      5.&#x8fdb;&#x5165;tmp&#x76ee;&#x5f55;&#xff0c;&#x6839;&#x636e;&#x9700;&#x6c42;&#x4fee;&#x6539;tmp&#x4e2d;&#x7684;&#x76ee;&#x5f55;&#xa0;
    </p>
    <p>
      6.&#x5c06;tmp&#x76ee;&#x5f55;&#x6253;&#x5305;&#x4e3a;&#x65b0;&#x7684;system.img
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#x547d;&#x4ee4;&#xff1a;make_ext4fs -s -l 239M -a system system.img tmp
    </p>
    <p>
      &#xa0;&#xa0;&#x5173;&#x4e8e;make_ext4fs&#x3001;simg2img&#x3001;mkusering.sh&#x7684;&#x53c2;&#x6570;&#x542b;&#x4e49;&#x53ef;&#x4ee5;&#x5728;&#x7ec8;&#x7aef;&#x4e2d;&#x76f4;&#x63a5;&#x8f93;&#x5165;&#x547d;&#x4ee4;&#xff0c;&#x5e76;&#x56de;&#x8f66;&#x67e5;&#x770b;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1492247580941" FOLDED="true" ID="ID_1395858297" MODIFIED="1534898565879" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#b10909">10. bbbandroid&#x9879;&#x76ee;&#x5b66;&#x4e60;&#x5f00;&#x53d1;</font></i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1492247642557" ID="ID_142995514" MODIFIED="1492247671357">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#x7f16;&#x8bd1;
    </p>
    <p>
      &#x53c2;&#x8003;&#x7f51;&#x5740;http://bbbandroid.sourceforge.net/build.html
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1497439750076" FOLDED="true" ID="ID_636173960" MODIFIED="1583733179242" POSITION="right" TEXT="12. android ION&#x6846;&#x67b6;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1497439770180" FOLDED="true" ID="ID_1800164131" MODIFIED="1502794290654">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>ION&#x5b9a;&#x4e49;&#x4e86;&#x56db;&#x79cd;&#x4e0d;&#x540c;&#x7684;heap,&#x5b9e;&#x73b0;&#x4e0d;&#x540c;&#x7684;&#x5185;&#x5b58;&#x5206;&#x914d;&#x7b56;&#x7565;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1497440844738" ID="ID_1999533562" MODIFIED="1497440851091">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ION_HEAP_TYPE_SYSTEM : &#x901a;&#x8fc7;vmalloc&#x5206;&#x914d;&#x5185;&#x5b58;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1497440871707" ID="ID_1294028365" MODIFIED="1497440879442">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ION_HEAP_TYPE_SYSTEM_CONTIG: &#x901a;&#x8fc7;kmalloc&#x5206;&#x914d;&#x5185;&#x5b58;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1497440906201" ID="ID_1113501747" MODIFIED="1497440915594">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ION_HEAP_TYPE_CARVEOUT: &#x5728;&#x4fdd;&#x7559;&#x5185;&#x5b58;&#x5757;&#x4e2d;&#xff08;reserve memory&#x5206;&#x914d;&#x5185;&#x5b58;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1497440917913" ID="ID_1981588105" MODIFIED="1497440945274">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ION_HEAP_TYPE_CUSTOM: &#x7531;&#x5ba2;&#x6237;&#x81ea;&#x5df1;&#x5b9a;&#x4e49;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1498117154864" ID="ID_1166414303" MODIFIED="1498117293582">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Heap: &#x7528;&#x6765;&#x8868;&#x793a;&#x5185;&#x5b58;&#x5206;&#x914d;&#x7684;&#x76f8;&#x5173;&#x4fe1;&#x606f;&#xff0c;&#x5305;&#x62ec;id, type, name&#x7b49;&#x3002;&#x7528;struct ion_heap&#x8868;&#x793a;
    </p>
    <p>
      Client: Ion&#x7684;&#x4f7f;&#x7528;&#x8005;&#xff0c;&#x7528;&#x6237;&#x7a7a;&#x95f4;&#x548c;&#x5185;&#x6838;&#x63a7;&#x4ef6;&#x8981;&#x4f7f;&#x7528;ION&#x7684;buffer,&#x5fc5;&#x987b;&#x5148;&#x521b;&#x5efa;&#x4e00;&#x4e2a;client,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#x4e00;&#x4e2a;client&#x53ef;&#x4ee5;&#x6709;&#x591a;&#x4e2a;buffer&#xff0c;&#x7528;struct ion_buffer&#x8868;&#x793a;
    </p>
    <p>
      Handle: &#x5c06;buffer&#x8be5;&#x62bd;&#x8c61;&#x51fa;&#x6765;&#xff0c;&#x53ef;&#x4ee5;&#x8ba4;&#x4e3a;ION&#x7528;handle&#x6765;&#x7ba1;&#x7406;buffe
    </p>
    <p>
      &#x7528;struct ion_handle&#x8868;&#x793a;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1492429390150" FOLDED="true" ID="ID_1126491415" MODIFIED="1641519926586" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>10.Android Camera HAL </b>
    </p>
    <p>
      <b>https://source.android.com/devices/camera/camera3</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1492429588556" FOLDED="true" ID="ID_1170241637" MODIFIED="1598851409822">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#dd1919">camera hal1</font></i></b>
    </p>
    <p>
      camera hal1&#x662f;&#x88ab;&#x8bbe;&#x8ba1;&#x6210;&#x4e00;&#x4e2a;&#x9ed1;&#x76d2;&#x5b50;&#x7684;&#xff0c;&#x62e5;&#x6709;&#x9ad8;&#x5c42;&#x63a7;&#x5236;&#x548c;&#x4e0b;&#x9762;&#x7684;
    </p>
    <p>
      &#x4e09;&#x79cd;&#x64cd;&#x4f5c;&#x6a21;&#x5f0f;
    </p>
    <p>
      Preview
    </p>
    <p>
      Video Record
    </p>
    <p>
      Still Capture
    </p>
  </body>
</html></richcontent>
<node CREATED="1492430482477" ID="ID_1168344426" MODIFIED="1492430702484">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.android7.0 &#x4ecd;&#x7136;&#x7ee7;&#x7eed;&#x652f;&#x6301;hal1, &#x9664;&#x6b64;&#x4e4b;&#x5916;
    </p>
    <p>
      android camera &#x670d;&#x52a1;&#x4ecd;&#x7136;&#x652f;&#x6301;hal1&#x548c;hal3&#x7684;&#x5b9e;&#x73b0;&#xff0c;
    </p>
    <p>
      &#x5f53;&#x4f60;&#x5e0c;&#x671b;&#x652f;&#x6301;&#x529f;&#x80fd;&#x7b80;&#x5355;&#x7684;&#x524d;&#x7f6e;&#x6444;&#x50cf;&#x5934;&#x7684;&#x65f6;&#x5019;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;hal1,
    </p>
    <p>
      &#x5f53;&#x4f60;&#x5e0c;&#x671b;&#x652f;&#x6301;&#x529f;&#x80fd;&#x66f4;&#x590d;&#x6742;&#x7684;&#x540e;&#x7f6e;&#x6444;&#x50cf;&#x5934;&#x7684;&#x65f6;&#x5019;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;hal3
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1492653017734" FOLDED="true" ID="ID_500027607" MODIFIED="1606807865867">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ea0c0c">&#x4e00;&#x4e9b;&#x672f;&#x8bed;:</font></b>
    </p>
    <p>
      <b>camera API1</b>
    </p>
    <p>
      app&#x5c42;&#x9762;&#x7684;framework&#x6846;&#x67b6;&#xff0c;&#x8fd0;&#x884c;&#x5728;&#x65e9;&#x671f;&#x7684;android4.4&#x4e0a;&#x9762;,
    </p>
    <p>
      &#x901a;&#x8fc7;android.hardware.Camera&#x66b4;&#x9732;&#x51fa;&#x6765;
    </p>
    <p>
      <b>Camera API2</b>
    </p>
    <p>
      &#x8fd0;&#x884c;&#x5728;android5.0&#x5373;&#x4ee5;&#x540e;&#x7684;&#x5e73;&#x53f0;&#x4e0a;&#x9762;
    </p>
    <p>
      android.hardware.camera2
    </p>
    <p>
      <b>Camera HAL</b>
    </p>
    <p>
      camera module&#x5c42;&#xff0c;&#x7531;&#x5177;&#x4f53;&#x7684;&#x5382;&#x5bb6;&#x5b9e;&#x73b0;&#xff0c;app&#x5c42;&#x9762;&#x7684;framework&#x662f;
    </p>
    <p>
      &#x57fa;&#x4e8e;hal&#x5c42;&#x6784;&#x5efa;&#x51fa;&#x6765;&#x7684;
    </p>
    <p>
      <b>Camera HAL3.1</b>
    </p>
    <p>
      android4.4&#x5f53;&#x4e2d;release&#x51fa;&#x6765;&#x7684;hal&#x5c42;&#x7684;&#x7248;&#x672c;
    </p>
    <p>
      <b>Camera HAL3.2</b>
    </p>
    <p>
      Android5.0&#x5f53;&#x4e2d;release&#x51fa;&#x6765;&#x7684;hal&#x5c42;&#x7248;&#x672c;
    </p>
    <p>
      <b>Camera API1 CTS</b>
    </p>
    <p>
      camera&#x517c;&#x5bb9;&#x6027;&#x6d4b;&#x8bd5;&#x5957;&#x4ef6;,&#x57fa;&#x4e8e;camera api1
    </p>
    <p>
      <b>Camera API2 CTS</b>
    </p>
    <p>
      camera&#x517c;&#x5bb9;&#x6027;&#x6d4b;&#x8bd5;&#x5957;&#x4ef6;&#xff0c;&#x57fa;&#x4e8e;camera api2
    </p>
  </body>
</html></richcontent>
<node CREATED="1492654584536" FOLDED="true" ID="ID_494604736" MODIFIED="1606807863462">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      camera framwork api2&#x66b4;&#x9732;&#x4e86;&#x66f4;&#x5e95;&#x5c42;&#x7684;camera&#x63a7;&#x5236;&#x63a5;&#x53e3;&#x7ed9;app,
    </p>
    <p>
      &#x5305;&#x62ec;&#x9ad8;&#x6548;&#x7684;&#x96f6;&#x62f7;&#x8d1d;burst/streaming&#x6d41;&#x548c;&#x5bf9;&#x5355;&#x5e27;&#x7684;
    </p>
    <p>
      exposure, gain, white balance gains, color conversion, denoising, sharpening
    </p>
    <p>
      &#x7b49;&#x53c2;&#x6570;&#x7684;&#x63a7;&#x5236;&#x3002;
    </p>
  </body>
</html></richcontent>
<node CREATED="1496283080255" ID="ID_845987155" MODIFIED="1496283099972">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>camera api2&#x7684;&#x4ee3;&#x7801;&#x4f4d;&#x7f6e;</b>
    </p>
    <p>
      <span style="display: inline !important; text-transform: none; word-spacing: 0px; font-size: 14px; font-family: microsoft yahei; white-space: normal; font-style: normal; letter-spacing: normal; background-color: rgb(255, 255, 255); float: none; text-indent: 0px; color: rgb(0, 0, 0); font-weight: normal; text-align: left" http-equiv="content-type" content="text/html; charset=utf-8"><font face="microsoft yahei" color="rgb(0, 0, 0)" size="14px">ICameraService.aidl:frameworks/base/core/java/android/hardware</font></span><font face="microsoft yahei" color="rgb(0, 0, 0)" size="14px"><span class="Apple-converted-space">&#xa0;</span><br align="left" style="text-indent: 0px; word-spacing: 0px; background-color: rgb(255, 255, 255); white-space: normal; letter-spacing: normal; text-transform: none"/><span style="display: inline !important; text-transform: none; word-spacing: 0px; font-size: 14px; font-family: microsoft yahei; font-style: normal; white-space: normal; background-color: rgb(255, 255, 255); letter-spacing: normal; float: none; text-indent: 0px; color: rgb(0, 0, 0); font-weight: normal; text-align: left">CameraService.cpp:frameworks/av/services/camera/libcameraservice</span><span class="Apple-converted-space">&#xa0;</span><br align="left" style="text-indent: 0px; word-spacing: 0px; background-color: rgb(255, 255, 255); white-space: normal; letter-spacing: normal; text-transform: none"/><span style="display: inline !important; text-transform: none; word-spacing: 0px; font-size: 14px; font-family: microsoft yahei; font-style: normal; white-space: normal; background-color: rgb(255, 255, 255); letter-spacing: normal; float: none; text-indent: 0px; color: rgb(0, 0, 0); font-weight: normal; text-align: left">CameraManager.java:frameworks/base/core/java/android/hardware/camera2</span></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1496283396140" ID="ID_1381189423" MODIFIED="1496283631290">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      java&#x5c42;&#x5728;&#x672c;&#x5730;&#x901a;&#x8fc7;binder&#x673a;&#x5236;&#x83b7;&#x53d6;&#x4e86;&#x4e00;&#x4e2a;cameraservice&#x670d;&#x52a1;&#xff0c;
    </p>
    <p>
      &#x5728;cameraservice&#x5f53;&#x4e2d;&#x901a;&#x8fc7;&#x4ee3;&#x7406;ICameraDeviceUser&#x6765;&#x5b9e;&#x73b0;&#xff0c;&#x901a;&#x8fc7;AIDL
    </p>
    <p>
      &#x5b9e;&#x73b0;&#x4e00;&#x4e2a;ICameraDeviceUser&#x63a5;&#x53e3;&#xff0c;&#x4ece;&#x800c;&#x5728;java&#x5c42;&#x901a;&#x8fc7;camerauser&#x4ee3;&#x7406;&#x8fdb;&#x884c;&#x901a;&#x4fe1;
    </p>
    <p>
      &#x4ee3;&#x7801;&#x4f4d;&#x7f6e;
    </p>
    <p>
      <span style="display: inline !important; text-transform: none; word-spacing: 0px; font-size: 14px; font-family: microsoft yahei; white-space: normal; font-style: normal; letter-spacing: normal; background-color: rgb(255, 255, 255); float: none; text-indent: 0px; color: rgb(0, 0, 0); font-weight: normal; text-align: left" http-equiv="content-type" content="text/html; charset=utf-8"><font face="microsoft yahei" color="rgb(0, 0, 0)" size="14px">ICameraDeviceUser.aidl:frameworks/base/core/java/android/hardware/camera2</font></span><font face="microsoft yahei" color="rgb(0, 0, 0)" size="14px"><span class="Apple-converted-space">&#xa0;</span><br align="left" style="text-indent: 0px; word-spacing: 0px; background-color: rgb(255, 255, 255); white-space: normal; letter-spacing: normal; text-transform: none"/><span style="display: inline !important; text-transform: none; word-spacing: 0px; font-size: 14px; font-family: microsoft yahei; font-style: normal; white-space: normal; background-color: rgb(255, 255, 255); letter-spacing: normal; float: none; text-indent: 0px; color: rgb(0, 0, 0); font-weight: normal; text-align: left">ICameraDeviceUser.cpp:frameworks/av/camera/camera2</span><span class="Apple-converted-space">&#xa0;</span><br align="left" style="text-indent: 0px; word-spacing: 0px; background-color: rgb(255, 255, 255); white-space: normal; letter-spacing: normal; text-transform: none"/><span style="display: inline !important; text-transform: none; word-spacing: 0px; font-size: 14px; font-family: microsoft yahei; font-style: normal; white-space: normal; background-color: rgb(255, 255, 255); letter-spacing: normal; float: none; text-indent: 0px; color: rgb(0, 0, 0); font-weight: normal; text-align: left">CameraDeviceImpl.java:frameworks/base/core/java/android/hardware/camera2/impl</span></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1496285737756" ID="ID_1102669095" MODIFIED="1496286751490">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b><font color="#208456">framework&#x5c42;&#x6253;&#x5f00;&#x76f8;&#x673a;&#x7684;&#x6d41;&#x7a0b;:</font></b></i>
    </p>
    <p>
      IBinder cameraServiceBinder = ServiceManager.getService(CAMERA_SERVICE_BINDER_NAME);
    </p>
    <p>
      ICameraService cameraServiceRaw = ICameraService.Stub.asInterface(cameraServiceBinder);
    </p>
    <p>
      ICameraService cameraService = CameraServiceBinderDecorator.newInstance(cameraServiceRaw);
    </p>
    <p>
      mCameraService = cameraService;
    </p>
    <p>
      
    </p>
    <p>
      android.hardware.camera2.impl.CameraDeviceImpl deviceImpl =
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;new android.hardware.camera2.impl.CameraDeviceImpl(
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;cameraId,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;callback,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;handler,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;characteristics);
    </p>
    <p>
      BinderHolder holder = new BinderHolder()
    </p>
    <p>
      ICameraDeviceCallbacks callbacks = deviceImpl.getCallbacks();
    </p>
    <p>
      cameraService.connectDevice(callbacks, id,mContext.getOpPackageName(), USE_CALLING_UID, holder);
    </p>
    <p>
      cameraUser = ICameraDeviceUser.Stub.asInterface(holder.getBinder());
    </p>
    <p>
      deviceImpl.setRemoteDevice(cameraUser)
    </p>
    <p>
      device = deviceImpl;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1492656434946" ID="ID_664487457" MODIFIED="1492657128099">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Android5.0&#x5305;&#x62ec;&#x540e;&#x9762;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1496650692468" FOLDED="true" ID="ID_1529457093" MODIFIED="1536301550910" TEXT="camera api1">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1496650702938" ID="ID_1766165661" MODIFIED="1496652359648">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      base/core/java/android/hardware/Camera.java&#x91cc;&#x9762;&#x4f1a;
    </p>
    <p>
      &#x8c03;&#x7528;native&#x51fd;&#x6570;&#xff0c;&#x8fdb;&#x884c;jni&#x7684;&#x8c03;&#x7528;&#x5230;&#x4f4d;&#x4e8e;&#x6587;&#x4ef6;
    </p>
    <p>
      frameworks/base/core/jni/android_hardware_Camera.cpp&#x91cc;&#x9762;
    </p>
    <p>
      &#x5b9a;&#x4e49;&#x7684;&#x672c;&#x5730;&#x51fd;&#x6570;&#x5f53;&#x4e2d;&#x3002;
    </p>
    <p>
      &#x5728;android_hardware_Camera_native_setup&#x5f53;&#x4e2d;&#x901a;&#x8fc7;&#x8c03;&#x7528;sp&lt;Camera&gt; camera = Camera::connect
    </p>
    <p>
      &#x8ddf;CameraService&#x901a;&#x8fc7;binder&#x5efa;&#x7acb;&#x4e86;&#x4e92;&#x76f8;&#x7684;&#x5ba2;&#x6237;&#x4ee3;&#x7406;&#x8bbf;&#x95ee;&#x673a;&#x5236;&#xff0c;&#x6211;&#x4eec;&#x4ece;&#x800c;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;
    </p>
    <p>
      cameraservice&#x91cc;&#x9762;&#x5b9a;&#x4e49;&#x7684;startPreview&#x548c;autoFocus&#x7b49;&#x51fd;&#x6570;&#x4e86;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      frameworks/av/services/camera/libcameraservice/api1/CameraClient.cpp&#x5f53;&#x4e2d;&#x7684;initialize&#x4f1a;&#x76f4;&#x63a5;&#x8ddf;
    </p>
    <p>
      CameraHardwareInterface&#x8fdb;&#x884c;&#x4ea4;&#x6d41;&#xff0c;&#x518d;&#x76f4;&#x63a5;&#x8ddf;hal&#x5c42;&#x8fdb;&#x884c;&#x4ea4;&#x6d41;
    </p>
    <p>
      frameworks/av/services/camera/libcameraservice/device1/CameraHardwareInterface.h
    </p>
    <p>
      &#x76f4;&#x63a5;&#x8ddf;hal&#x5c42;&#x8fdb;&#x884c;&#x901a;&#x4fe1;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1496707116451" ID="ID_139126017" MODIFIED="1496707128567">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/android-camera-framework.png"/>
  </body>
</html></richcontent>
</node>
<node CREATED="1535010899004" ID="ID_739069034" MODIFIED="1535010909964">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/ape_fwk_camera2.png"/>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1497428548995" ID="ID_831054097" MODIFIED="1497428591873">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/exif&#x5f53;&#x4e2d;&#x4fdd;&#x5b58;&#x7684;&#x56fe;&#x7247;&#x65cb;&#x8f6c;&#x6807;&#x5fd7;.png"/>
  </body>
</html></richcontent>
</node>
<node CREATED="1530841569353" ID="ID_686994364" MODIFIED="1530844480892">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct camera_metadata {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;metadata_size_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;size;&#xa0;&#xa0;&#xa0;&#xa0;//&#x6574;&#x4e2a;metadata&#x6570;&#x636e;&#x5927;&#x5c0f;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint32_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;version; //&#x7248;&#x672c;&#x53f7;&#xff0c;&#x6211;&#x4eec;&#x4e0d;&#x7528;&#x7ba1;&#x5b83;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint32_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;flags;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;metadata_size_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;entry_count;&#xa0;&#xa0; //&#x5df2;&#x7ecf;&#x6dfb;&#x52a0;TAG&#x7684;&#x5165;&#x53e3;&#x6570;&#x91cf;,&#xff08;&#x5373;&#x5185;&#x5b58;&#x5757;&#x4e2d;&#x5df2;&#x7ecf;&#x5305;&#x542b;&#x591a;&#x5c11;TAG&#x4e86;&#xff09;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;metadata_size_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;entry_capacity;//&#x6700;&#x5927;&#x80fd;&#x5bb9;&#x7eb3;TAG&#x7684;&#x5165;&#x53e3;&#x6570;&#x91cf;&#xff08;&#x5373;&#x6700;&#x5927;&#x80fd;&#x653e;&#x591a;&#x5c11;tag&#xff09;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;metadata_uptrdiff_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;entries_start; // Offset from camera_metadata entry&#x6570;&#x636e;&#x533a;&#x57df;&#x76f8;&#x5bf9;&#x5f00;&#x59cb;&#x5904;&#x7684;&#x504f;&#x79fb;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;metadata_size_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;data_count;&#xa0;&#xa0;&#xa0;&#xa0;//&#x8bb0;&#x5f55;&#x6570;&#x636e;&#x6bb5;&#x5f53;&#x524d;&#x5df2;&#x7528;&#x7684;&#x5185;&#x5b58;&#x7a7a;&#x95f4;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;metadata_size_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;data_capacity; //&#x603b;&#x7684;&#x6570;&#x636e;&#x6bb5;&#x5185;&#x5b58;&#x7a7a;&#x95f4;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;metadata_uptrdiff_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;data_start; // Offset from camera_metadata&#xa0; data&#x6570;&#x636e;&#x533a;&#x76f8;&#x5bf9;&#x5f00;&#x59cb;&#x5904;&#x7684;&#x504f;&#x79fb;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint8_t&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;reserved[]; &#x4fdd;&#x7559;
    </p>
    <p>
      };
    </p>
    <p>
      
    </p>
    <p>
      typedef struct camera_metadata_buffer_entry {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint32_t tag;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint32_t count;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;union {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;uint32_t offset;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;uint8_t&#xa0;&#xa0;value[4];
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;} data;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint8_t&#xa0;&#xa0;type;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint8_t&#xa0;&#xa0;reserved[3];
    </p>
    <p>
      } camera_metadata_buffer_entry_t;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1535015297963" FOLDED="true" ID="ID_208278175" MODIFIED="1606807858627">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#e8291f"><b>Android 9 Multicamera Support</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1536197599490" FOLDED="true" ID="ID_525145164" MODIFIED="1606807857274" TEXT="1.&#x4ee3;&#x7801;&#x6d41;&#x7a0b;&#x5206;&#x6790;">
<node CREATED="1536198069764" FOLDED="true" ID="ID_1926744974" MODIFIED="1606807855243">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><i>Status CameraService::connect(</i></font>
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const sp&lt;ICameraClient&gt;&amp; cameraClient,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int api1CameraId,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const String16&amp; clientPackageName,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int clientUid,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int clientPid,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;sp&lt;ICamera&gt;* device<font size="4"><i>)</i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1538272491942" ID="ID_1567553604" MODIFIED="1538272862351">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">sp&lt;Client&gt; client = nullptr;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1536198333048" FOLDED="true" ID="ID_609221105" MODIFIED="1566110120151">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><i>connectHelper&lt;ICameraClient,Client&gt;</i></font>
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; <font size="4"><i>&#xa0;(</i></font>cameraClient, id, api1CameraId,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;CAMERA_HAL_API_VERSION_UNSPECIFIED, clientPackageName, clientUid, clientPid, API_1,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*legacyMode*/ false, /*shimUpdateOnly*/ false,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/client<font size="4"><i>) </i></font>
    </p>
    <p>
      
    </p>
    <p>
      <font size="4" color="#cb0707"><i>template&lt;class CALLBACK, class CLIENT&gt;</i></font>
    </p>
    <p>
      <font size="4" color="#c81717"><i>Status CameraService::connectHelper(</i></font><i><font size="4">const sp&lt;CALLBACK&gt;&amp; cameraCb, const String8&amp; cameraId, </font></i>
    </p>
    <p>
      <font size="4"><i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int api1CameraId, int halVersion, const String16&amp; clientPackageName, int clientUid, </i></font>
    </p>
    <p>
      <font size="4"><i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int clientPid, apiLevel effectiveApiLevel, bool legacyMode, bool shimUpdateOnly, </i></font>
    </p>
    <p>
      <font size="4"><i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/sp&lt;CLIENT&gt;&amp; device</i></font><i><font size="4" color="#d11212">)</font></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1536202412485" ID="ID_1204584507" MODIFIED="1536202472371">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      sp&lt;BasicClient&gt; clientTmp = nullptr;
    </p>
    <p>
      std::shared_ptr&lt;resource_policy::ClientDescriptor&lt;String8, sp&lt;BasicClient&gt;&gt;&gt; partial;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1536202539624" ID="ID_1117220175" MODIFIED="1536202593612">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      handleEvictionsLocked(cameraId, originalClientPid, effectiveApiLevel,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;IInterface::asBinder(cameraCb), clientName8, /*out*/&amp;clientTmp,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/&amp;partial))
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1538273228088" ID="ID_961530657" MODIFIED="1538273244021" TEXT="sp&lt;BasicClient&gt; tmp = nullptr;"/>
<node CREATED="1538273247322" ID="ID_356246693" MODIFIED="1538277168845">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      makeClient(this, cameraCb, clientPackageName, cameraId, facing, clientPid,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;clientUid, getpid(), legacyMode, halVersion, deviceVersion, effectiveApiLevel,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/&amp;tmp))
    </p>
    <p>
      &#x5728;&#x51fd;&#x6570;makeClient&#x91cc;&#x9762;&#xff0c;&#x5bf9;&#x4e8e;hal3&#xff0c;&#x4f1a;&#x8d70;&#x5982;&#x4e0b;&#x7684;&#x6d41;&#x7a0b;
    </p>
    <ol>
      <li>
        sp&lt;hardware::camera2::ICameraDeviceCallbacks&gt; tmp = static_cast&lt;hardware::camera2::ICameraDeviceCallbacks*&gt;(cameraCb.get());
      </li>
      <li>
        *client = new CameraDeviceClient(cameraService, tmp, packageName, cameraId,facing, clientPid, clientUid, servicePid);
      </li>
    </ol>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      client = static_cast&lt;CLIENT*&gt;(tmp.get());
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1538277247177" ID="ID_717294254" MODIFIED="1538277249685" TEXT="err = client-&gt;initialize(mCameraProviderManager);"/>
<node CREATED="1538277265207" ID="ID_563493882" MODIFIED="1538277267941" TEXT="device = client;"/>
</node>
<node CREATED="1538272868379" ID="ID_1783441534" MODIFIED="1538272902686">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">*device = client;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1538276553937" FOLDED="true" ID="ID_1921305147" MODIFIED="1566110126640">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3" color="#f51717"><b>&#x5bf9;&#x4e8e;hal3&#x6765;&#x8bf4;&#xff0c;&#x8fde;&#x63a5;service&#x8d70;&#x7684;&#x662f;&#x5982;&#x4e0b;&#x7684;&#x6d41;&#x7a0b;:</b></font>
    </p>
    <p>
      
    </p>
    <p>
      Status CameraService::connectDevice(
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const sp&lt;hardware::camera2::ICameraDeviceCallbacks&gt;&amp; cameraCb,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const String16&amp; cameraId,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const String16&amp; clientPackageName,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int clientUid,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;sp&lt;hardware::camera2::ICameraDeviceUser&gt;* device)
    </p>
  </body>
</html></richcontent>
<node CREATED="1538276724293" ID="ID_14677516" MODIFIED="1538276737751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      sp&lt;CameraDeviceClient&gt; client = nullptr;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1538276741157" FOLDED="true" ID="ID_1210746798" MODIFIED="1566110116608">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      connectHelper&lt;hardware::camera2::ICameraDeviceCallbacks,CameraDeviceClient&gt;(cameraCb, id,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;CAMERA_HAL_API_VERSION_UNSPECIFIED, clientPackageName,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;clientUid, USE_CALLING_PID, API_2,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*legacyMode*/ false, /*shimUpdateOnly*/ false,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/client);
    </p>
  </body>
</html></richcontent>
<node CREATED="1562662168756" ID="ID_1343478090" MODIFIED="1562748938598">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      template&lt;class KEY, class VALUE, class LISTENER=DefaultEventListener&lt;KEY, VALUE&gt;&gt;
    </p>
    <p>
      class ClientManager {
    </p>
    <p>
      }&#xff1b;
    </p>
    <p>
      
    </p>
    <p>
      class ClientManager &#x8be5;&#x7c7b;&#x5c01;&#x88c5;&#x4e86;&#x57fa;&#x4e8e;LRU&#x7b97;&#x6cd5;&#x7684;&#x6d3b;&#x8dc3;client&#x5217;&#x8868;&#xff0c;&#x5bf9;&#x4e8e;&#x5904;&#x7406;&#x5171;&#x4eab;&#x8d44;&#x6e90;&#x8bbf;&#x95ee;&#xff0c;
    </p>
    <p>
      &#x5b9e;&#x73b0;&#x4e86;&#x4e00;&#x79cd;&#x9a71;&#x9010;&#x7b97;&#x6cd5;&#x3002;
    </p>
    <p>
      &#x5f53;&#x6211;&#x4eec;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;&#x65b0;&#x7684;descriptor&#x4e4b;&#x540e;&#xff0c;&#x9a71;&#x9010;&#x884c;&#x4e3a;&#x5982;&#x4e0b;&#xff1a;
    </p>
    <p>
      &#x6dfb;&#x52a0;&#x4e00;&#x4e2a;descriptor, &#x8be5;descriptor&#x8ddf;&#x5df2;&#x6709;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x5177;&#x6709;&#x76f8;&#x540c;&#x7684;key&#x503c;&#xff0c;&#x90a3;&#x4e48;&#x4f4e;&#x4f18;&#x5148;&#x7ea7;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x4f1a;&#x88ab;
    </p>
    <p>
      &#x79fb;&#x9664;&#x6389;&#x3002;
    </p>
    <p>
      &#x65b0;&#x6dfb;&#x52a0;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x5e26;&#x6709; conflicting keys&#x5217;&#x8868;&#xff0c;&#x5982;&#x679c;&#x7cfb;&#x7edf;&#x5f53;&#x4e2d;&#x6709;&#x63cf;&#x8ff0;&#x7b26;&#x7684;key&#x503c;&#x4f4d;&#x4e8e;&#x8fd9;&#x4e2a;&#x5217;&#x8868;&#x5f53;&#x4e2d;&#xff0c;
    </p>
    <p>
      &#x5e76;&#x4e14;&#x8be5;&#x63cf;&#x8ff0;&#x7b26;&#x7684;&#x4f18;&#x5148;&#x7ea7;&#x7b49;&#x4e8e;&#x6216;&#x8005;&#x5c0f;&#x4e8e;&#x6dfb;&#x52a0;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x4f18;&#x5148;&#x7ea7;&#xff0c;&#x90a3;&#x4e48;&#x8be5;&#x63cf;&#x8ff0;&#x7b26;&#x5c31;&#x4f1a;&#x88ab;&#x79fb;&#x9664;&#x6389;&#x3002;
    </p>
    <p>
      &#x5982;&#x679c;&#x6240;&#x6709;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x7684;cost&#x52a0;&#x8d77;&#x6765;&#x8d85;&#x8fc7;&#x4e86;&#x8be5;ClientManager&#x5141;&#x8bb8;&#x7684;&#x503c;&#xff0c;&#x90a3;&#x4e48;&#x76f8;&#x5e94;&#x7684;&#x9a71;&#x9010;&#x7b56;&#x7565;&#x4f1a;&#x88ab;&#x4f7f;&#x7528;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562811195770" ID="ID_983275974" MODIFIED="1562842627677">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>sp&lt;CLIENT&gt; client = nullptr;</b>
    </p>
    <p>
      &#x5373;sp&lt;CameraDeviceClient&gt;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562811312280" ID="ID_404188946" MODIFIED="1562811690073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      sp&lt;BasicClient&gt; clientTmp = nullptr;
    </p>
    <p>
      std::shared_ptr&lt;resource_policy::ClientDescriptor&lt;String8, sp&lt;BasicClient&gt;&gt;&gt; partial;
    </p>
    <p>
      &#x8d44;&#x6e90;&#x63cf;&#x8ff0;&#x7b26;&#x5e94;&#x8be5;&#x662f;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562811867569" FOLDED="true" ID="ID_984380264" MODIFIED="1562841760346">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>handleEvictionsLocked(</b>cameraId, originalClientPid, effectiveApiLevel,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;IInterface::asBinder(cameraCb), clientName8, <i><b><font color="#ff0033">/*out*/&amp;clientTmp</font></b></i><font color="#ff0033">,</font>
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; <i><b><font color="#ff0033">/*out*/&amp;partial</font></b></i><b>)</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1562812051666" ID="ID_1896354624" MODIFIED="1562838119827">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      typedef std::shared_ptr&lt;resource_policy::ClientDescriptor&lt;String8,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;sp&lt;CameraService::BasicClient&gt;&gt;&gt; DescriptorPtr;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562812112002" ID="ID_1320000873" MODIFIED="1562837277472">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      std::vector&lt;DescriptorPtr&gt; evictedClients;
    </p>
    <p>
      <b>DescriptorPtr clientDescriptor;</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562824725210" ID="ID_230265383" MODIFIED="1562824795707">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      std::vector&lt;int&gt; ownerPids(mActiveClientManager.getAllOwners());
    </p>
    <p>
      ownerPids.push_back(clientPid);
    </p>
    <p>
      std::vector&lt;int&gt; priorityScores(ownerPids.size());
    </p>
    <p>
      std::vector&lt;int&gt; states(ownerPids.size());
    </p>
    <p>
      
    </p>
    <p>
      &#x591a;&#x4e2a;vector&#x7528;&#x4e8e;&#x4fdd;&#x5b58;&#x5f53;&#x524d;&#x7684;&#x6240;&#x6709;&#x7684;client&#x7684;pid&#x503c;&#xff0c;&#x5bf9;&#x5e94;&#x7684;priority&#x503c;&#xff0c;
    </p>
    <p>
      &#x72b6;&#x6001;&#x503c;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562825310338" ID="ID_1255675716" MODIFIED="1562825334596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      status_t err = ProcessInfoService::getProcessStatesScoresFromPids(
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ownerPids.size(), &amp;ownerPids[0], /*out*/&amp;states[0],
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/&amp;priorityScores[0]);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562828241691" ID="ID_1402569365" MODIFIED="1562828304295">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      std::map&lt;int,resource_policy::ClientPriority&gt; pidToPriorityMap;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;for (size_t i = 0; i &lt; ownerPids.size() - 1; i++) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;pidToPriorityMap.emplace(ownerPids[i],
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;resource_policy::ClientPriority(priorityScores[i], states[i]));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;mActiveClientManager.updatePriorities(pidToPriorityMap);
    </p>
    <p>
      &#x6784;&#x5efa;&#x4e00;&#x4e2a;client pid &#x548c; client priority &#x7684;map&#x8868;&#xff0c;&#x4f7f;&#x7528;&#x8be5;map&#x66f4;&#x65b0;mActiveClientManager
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562837344377" ID="ID_1279341908" MODIFIED="1562837369132">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      auto state = getCameraState(cameraId);
    </p>
    <p>
      &#x83b7;&#x53d6;&#x8981;&#x6253;&#x5f00;&#x7684;camera id&#x7684;&#x72b6;&#x6001;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562837386729" ID="ID_758691915" MODIFIED="1562837434401">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      clientDescriptor = CameraClientManager::makeClientDescriptor(cameraId,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;sp&lt;BasicClient&gt;{nullptr}, static_cast&lt;int32_t&gt;(state-&gt;getCost()),
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;state-&gt;getConflicting(),
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;priorityScores[priorityScores.size() - 1],
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;clientPid,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;states[states.size() - 1]);
    </p>
    <p>
      &#x6784;&#x5efa;&#x7533;&#x8bf7;client&#x7684;&#x63cf;&#x8ff0;&#x7b26;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562841185999" ID="ID_1812612549" MODIFIED="1562841215884">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x627e;&#x5230;&#x6709;&#x51b2;&#x7a81;&#x7684;&#x63cf;&#x8ff0;&#x7b26;
    </p>
    <p>
      auto evicted = mActiveClientManager.wouldEvict(clientDescriptor);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562841562052" ID="ID_700199612" MODIFIED="1562841600199">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x4e0b;&#x9762;&#x5927;&#x91cf;&#x7684;&#x4ee3;&#x7801;&#x662f;&#x6839;&#x636e;&#x51b2;&#x7a81;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x5bf9;
    </p>
    <p>
      &#x8fde;&#x63a5;&#x7684;camera clients&#x505a;&#x6e05;&#x7406;&#x5de5;&#x4f5c;&#xff0c;&#x8fd9;&#x91cc;&#x7565;&#x8fc7;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562841630480" ID="ID_258264180" MODIFIED="1562841636674" TEXT="*partial = clientDescriptor;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1562841707150" ID="ID_902456851" MODIFIED="1562841731287">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      if (clientTmp.get() != nullptr) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// Handle special case for API1 MediaRecorder where the existing client is returned
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;device = static_cast&lt;CLIENT*&gt;(clientTmp.get());
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return ret;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      &#x7528;&#x4e8e;&#x5904;&#x7406;api1&#x7684;&#xff0c;&#x4e0d;&#x7528;&#x7406;&#x4f1a;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562841811892" ID="ID_1027697412" MODIFIED="1562841815605" TEXT="sp&lt;BasicClient&gt; tmp = nullptr;"/>
<node CREATED="1562841862736" ID="ID_1922079714" MODIFIED="1562842304717">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>makeClient(</b>this, cameraCb, clientPackageName, cameraId, facing, clientPid,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;clientUid, getpid(), legacyMode, halVersion, deviceVersion, effectiveApiLevel,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/&amp;tmp<b>) </b>
    </p>
    <p>
      
    </p>
    <p>
      <i>Status CameraService::makeClient(const sp&lt;CameraService&gt;&amp; cameraService, </i>
    </p>
    <p>
      <i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const sp&lt;IInterface&gt;&amp; cameraCb, const String16&amp; packageName, const String8&amp; cameraId, </i>
    </p>
    <p>
      <i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int facing, int clientPid, uid_t clientUid, int servicePid, bool legacyMode, </i>
    </p>
    <p>
      <i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int halVersion, int deviceVersion, apiLevel effectiveApiLevel, </i>
    </p>
    <p>
      <i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;/*out*/sp&lt;BasicClient&gt;* client)</i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1562842320045" ID="ID_963988829" MODIFIED="1562842360266">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      api2 hal3
    </p>
    <p>
      
    </p>
    <p>
      sp&lt;hardware::camera2::ICameraDeviceCallbacks&gt; tmp =
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; static_cast&lt;hardware::camera2::ICameraDeviceCallbacks*&gt;(cameraCb.get());
    </p>
    <p>
      
    </p>
    <p>
      *client = new CameraDeviceClient(cameraService, tmp, packageName, cameraId,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;facing, clientPid, clientUid, servicePid);
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1562842427997" ID="ID_582775852" MODIFIED="1562842463893">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      client = static_cast&lt;CLIENT*&gt;(tmp.get());
    </p>
    <p>
      
    </p>
    <p>
      &#x6620;&#x5c04;&#x56de;CameraDeviceClient
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562842650563" ID="ID_1584848608" MODIFIED="1562842653792" TEXT="client-&gt;initialize(mCameraProviderManager)"/>
</node>
<node CREATED="1538276801766" FOLDED="true" ID="ID_544033918" MODIFIED="1566110125470">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#6600ff" size="4"><b>*device = client</b></font>
    </p>
    <p>
      
    </p>
    <p>
      &#x53ef;&#x4ee5;&#x770b;&#x5230;CameraDeviceClient&#x662f;&#x76f4;&#x63a5;&#x7ee7;&#x627f;&#x81ea;BnCameraDeviceUser&#x7684;&#xff0c;
    </p>
    <p>
      &#x6240;&#x4ee5;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x8fd4;&#x56de;&#x7ed9;device
    </p>
  </body>
</html></richcontent>
<node CREATED="1562652335221" ID="ID_587831906" MODIFIED="1562652349242">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/CameraDeviceClient.png"/>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1536203209819" FOLDED="true" ID="ID_1631683599" MODIFIED="1566110127888">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      status_t CameraService::enumerateProviders()
    </p>
  </body>
</html></richcontent>
<node CREATED="1536213070379" ID="ID_1209650645" MODIFIED="1536213072920" TEXT="std::vector&lt;std::string&gt; deviceIds;"/>
<node CREATED="1536213083875" ID="ID_1324336524" MODIFIED="1536213086255" TEXT="deviceIds = mCameraProviderManager-&gt;getCameraDeviceIds();"/>
</node>
<node CREATED="1536213343587" FOLDED="true" ID="ID_1316616040" MODIFIED="1566110131944">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      status_t CameraProviderManager::addProviderLocked(const std::string&amp; newProvider, bool expected)
    </p>
    <p>
      
    </p>
    <p>
      &#x8be5;&#x51fd;&#x6570;&#x7528;&#x6765;get&#x6ce8;&#x518c;&#x5230;&#x7cfb;&#x7edf;&#x5f53;&#x4e2d;&#x7684;provider&#x670d;&#x52a1;
    </p>
    <p>
      interface = mServiceProxy-&gt;getService(newProvider);
    </p>
    <p>
      sp&lt;ProviderInfo&gt; providerInfo =
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;new ProviderInfo(newProvider, interface, this);
    </p>
    <p>
      &#x5229;&#x7528;&#x83b7;&#x5f97;&#x7684;&#x670d;&#x52a1;&#x63a5;&#x53e3;&#x751f;&#x6210;&#x4e00;&#x4e2a;ProviderInfo
    </p>
    <p>
      
    </p>
    <p>
      providerInfo-&gt;initialize(); &#x8c03;&#x7528;&#x8be5;providerinfo&#x7684;&#x521d;&#x59cb;&#x5316;&#x63a5;&#x53e3;
    </p>
    <p>
      &#x4e0b;&#x9762;&#x5206;&#x6790;&#x8be5;initialize&#x7684;&#x63a5;&#x53e3;
    </p>
  </body>
</html></richcontent>
<node CREATED="1536214055123" FOLDED="true" ID="ID_1584834967" MODIFIED="1566110130712">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      status_t CameraProviderManager::ProviderInfo::initialize()
    </p>
  </body>
</html></richcontent>
<node CREATED="1536214144716" ID="ID_948050407" MODIFIED="1536214261877">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hardware::Return&lt;Status&gt; status = mInterface-&gt;setCallback(this);
    </p>
    <p>
      &#x5411;&#x670d;&#x52a1;&#x7aef;&#x7684;CameraProver&#x8bbe;&#x7f6e;callback&#x63a5;&#x53e3;&#xff0c;&#x63a5;&#x53e3;&#x7c7b;&#x578b;&#x662f;ICameraProviderCallback&#xff0c;
    </p>
    <p>
      &#x7531;&#x4e8e;ProviderInfo&#x7ee7;&#x627f;&#x4e86;&#x8be5;&#x63a5;&#x53e3;&#xff0c;&#x6240;&#x4ee5;&#x8fd9;&#x91cc;&#x4f20;&#x5165;this&#x6307;&#x9488;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1536214331238" ID="ID_1704775372" MODIFIED="1536214369273">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hardware::Return&lt;bool&gt; linked = mInterface-&gt;linkToDeath(this, /*cookie*/ mId);
    </p>
    <p>
      &#x6ce8;&#x518c;provider&#x670d;&#x52a1;&#x7aef;death&#x4e4b;&#x540e;&#x7684;&#x901a;&#x77e5;&#x51fd;&#x6570;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1536214605984" ID="ID_1949790365" MODIFIED="1536221956782">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      std::vector&lt;std::string&gt; devices;
    </p>
    <p>
      hardware::Return&lt;void&gt; ret = mInterface-&gt;getCameraIdList([&amp;status, &amp;devices](
    </p>
    <p>
      Status idStatus,
    </p>
    <p>
      const hardware::hidl_vec&lt;hardware::hidl_string&gt;&amp; cameraDeviceNames) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;status = idStatus;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (status == Status::OK) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;for (size_t i = 0; i &lt; cameraDeviceNames.size(); i++) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;devices.push_back(cameraDeviceNames[i]);
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;} });
    </p>
    <p>
      
    </p>
    <p>
      &#x4ece;provider&#x7aef;&#x83b7;&#x53d6;&#x5e95;&#x5c42;&#x7684;camera&#x7684;&#x8bbe;&#x5907;&#x5217;&#x8868;&#xff0c;&#x7136;&#x540e;&#x4fdd;&#x5b58;&#x5230;&#x5185;&#x90e8;&#x6210;&#x5458;&#x53d8;&#x91cf;mDevices&#x5f53;&#x4e2d;
    </p>
    <p>
      
    </p>
    <p>
      mDevice&#x5b9e;&#x9645;&#x4e0a;&#x5b58;&#x50a8;&#x7684;&#x662f;DeviceInfo3, DeviceInfo3&#x91cc;&#x9762;&#x4fdd;&#x5b58;&#x7740;&#x670d;&#x52a1;&#x7aef;&#x7684;CameraDevice
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1539284331624" ID="ID_906183995" MODIFIED="1539539632967">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <pre><a href="http://androidxref.com/8.1.0_r33/s?defs=using&amp;project=hardware"><font size="4" color="#009966"><b>using</b></font></a><font size="4" color="#009966"><b>&#xa0;<a href="http://androidxref.com/8.1.0_r33/s?defs=RequestMetadataQueue&amp;project=hardware">RequestMetadataQueue</a>&#xa0;= <a href="http://androidxref.com/8.1.0_r33/s?defs=MessageQueue&amp;project=hardware">MessageQueue</a>&lt;<a href="http://androidxref.com/8.1.0_r33/s?defs=uint8_t&amp;project=hardware">uint8_t</a>, <a href="http://androidxref.com/8.1.0_r33/s?defs=kSynchronizedReadWrite&amp;project=hardware">kSynchronizedReadWrite</a>&gt;</b></font></pre>
    <pre><a href="http://androidxref.com/8.1.0_r33/s?defs=using&amp;project=hardware"><font size="4" color="#009966"><b>using</b></font></a><font size="4" color="#009966"><b>&#xa0;<a href="http://androidxref.com/8.1.0_r33/s?defs=ResultMetadataQueue&amp;project=hardware">ResultMetadataQueue</a>&#xa0;= <a href="http://androidxref.com/8.1.0_r33/s?defs=MessageQueue&amp;project=hardware">MessageQueue</a>&lt;<a href="http://androidxref.com/8.1.0_r33/s?defs=uint8_t&amp;project=hardware">uint8_t</a>, <a href="http://androidxref.com/8.1.0_r33/s?defs=kSynchronizedReadWrite&amp;project=hardware">kSynchronizedReadWrite</a>&gt;</b></font>
</pre>
    <p>
      MessageQueue&#x5b9a;&#x4e49;&#x5728;&#x6587;&#x4ef6;system/libfmq/include/fmq/MessageQueue.h&#x5f53;&#x4e2d;
    </p>
    <pre><a class="l" name="37" href="http://androidxref.com/8.1.0_r33/xref/system/libfmq/include/fmq/MessageQueue.h#37">
</a><a href="http://androidxref.com/8.1.0_r33/s?defs=template&amp;project=system"><font size="4">template</font></a><font size="4"> &lt;<a href="http://androidxref.com/8.1.0_r33/s?defs=typename&amp;project=system">typename</a> T, <a href="http://androidxref.com/8.1.0_r33/s?defs=MQFlavor&amp;project=system">MQFlavor</a> <a href="http://androidxref.com/8.1.0_r33/s?defs=flavor&amp;project=system">flavor</a>&gt;
<b>struct</b> <a class="xs" name="MessageQueue">
</a><a href="http://androidxref.com/8.1.0_r33/s?refs=MessageQueue&amp;project=system" class="xs">MessageQueue</a> {</font></pre>
    <p>
      <font size="4">}</font>
    </p>
    <p>
      
    </p>
    <p>
      <tt>/<a href="http://androidxref.com/8.1.0_r33/xref/system/">system</a>/<a href="http://androidxref.com/8.1.0_r33/xref/system/libhidl/">libhidl</a>/<a href="http://androidxref.com/8.1.0_r33/xref/system/libhidl/base/">base</a>/<a href="http://androidxref.com/8.1.0_r33/xref/system/libhidl/base/include/">include</a>/<a href="http://androidxref.com/8.1.0_r33/xref/system/libhidl/base/include/hidl/">hidl</a>/<a href="http://androidxref.com/8.1.0_r33/xref/system/libhidl/base/include/hidl/MQDescriptor.h">MQDescriptor.h&#x5b9a;&#x4e49;&#x4e86;kSynchronizedReadWrite </a></tt>
    </p>
    <pre><b><font size="2">enum</font></b><font size="2">&#xa0;<a href="http://androidxref.com/8.1.0_r33/s?defs=MQFlavor&amp;project=system">MQFlavor</a>&#xa0;: <a href="http://androidxref.com/8.1.0_r33/s?defs=uint32_t&amp;project=system">uint32_t</a>&#xa0;{
&#xa0;&#xa0;/*
&#xa0;&#xa0;&#xa0;* kSynchronizedReadWrite represents the wait-free synchronized flavor of the
&#xa0;&#xa0;&#xa0;* FMQ. It is intended to be have a single reader and single writer.
&#xa0;&#xa0;&#xa0;* Attempts to <a href="http://androidxref.com/8.1.0_r33/s?path=overflow/">overflow</a>/<a href="http://androidxref.com/8.1.0_r33/s?path=overflow/underflow">underflow</a>&#xa0;returns a failure.
&#xa0;&#xa0;&#xa0;*/
&#xa0; <a href="http://androidxref.com/8.1.0_r33/s?defs=kSynchronizedReadWrite&amp;project=system">kSynchronizedReadWrite</a>&#xa0;= 0x01,
&#xa0;&#xa0;/*
&#xa0;&#xa0;&#xa0;* kUnsynchronizedWrite represents the flavor of FMQ where writes always
&#xa0;&#xa0;&#xa0;* succeed. This flavor allows one writer and many readers. A read operation
&#xa0;&#xa0;&#xa0;* can detect an overwrite and reset the read counter.
&#xa0;&#xa0;&#xa0;*/
&#xa0; <a href="http://androidxref.com/8.1.0_r33/s?defs=kUnsynchronizedWrite&amp;project=system">kUnsynchronizedWrite</a>&#xa0;= 0x02
};</font></pre>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1536283010301" FOLDED="true" ID="ID_664150876" MODIFIED="1566110137716" TEXT="2.&#x591a;camera&#x7684;&#x7ba1;&#x7406;">
<node CREATED="1536283099862" FOLDED="true" ID="ID_60478480" MODIFIED="1566110136188">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>void CameraHidlTest::configurePreviewStreams3_4(</b>const std::string &amp;name, int32_t deviceVersion,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;sp&lt;ICameraProvider&gt; provider,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<font color="#e21010">const AvailableStream *previewThreshold</font>,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const std::unordered_set&lt;std::string&gt;&amp; physicalIds,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;sp&lt;device::V3_4::ICameraDeviceSession&gt; *session3_4 /*out*/,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<font color="#ad11e6">V3_2::Stream *previewStream /*out*/</font>,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;<font color="#3408f2">device::V3_4::HalStreamConfiguration *halStreamConfig</font>&#xa0;/*out*/,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;bool *supportsPartialResults /*out*/,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;uint32_t *partialResultCount /*out*/<b>) </b>
    </p>
    <p>
      
    </p>
    <p>
      <b>&#x53ea;&#x6784;&#x5efa;&#x4e24;&#x4e2a;stream&#x7684;&#x914d;&#x7f6e; &#xff0c; &#x8fd4;&#x56de;&#x7b2c;&#x4e00;&#x4e2a;stream</b>
    </p>
    <p>
      <b>physicalIds&#x5148;&#x524d;&#x505a;&#x4e86;&#x6e05;&#x7406;&#xff0c;&#x53ea;&#x5305;&#x542b;&#x4e86;2&#x4e2a;&#x7269;&#x7406;id&#x53f7;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1536285735507" ID="ID_1704938492" MODIFIED="1536301689015">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e00b0b" size="3"><i>struct AvailableStream { </i></font>
    </p>
    <p>
      <font color="#e00b0b" size="3"><i>&#xa0;&#xa0;&#xa0;&#xa0;int32_t width; </i></font>
    </p>
    <p>
      <font color="#e00b0b" size="3"><i>&#xa0;&#xa0;&#xa0;&#xa0;int32_t height; </i></font>
    </p>
    <p>
      <font color="#e00b0b" size="3"><i>&#xa0;&#xa0;&#xa0;&#xa0;int32_t format; </i></font>
    </p>
    <p>
      <font color="#e00b0b" size="3"><i>}; </i></font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#e00b0b" size="3"><i>AvailableStream previewThreshold = {kMaxPreviewWidth, kMaxPreviewHeight, </i></font>
    </p>
    <p>
      <font color="#e00b0b" size="3"><i>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; static_cast&lt;int32_t&gt;(PixelFormat::YCBCR_420_888)};</i></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1536286623539" ID="ID_878837005" MODIFIED="1536288386350">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#af0ded">struct Stream {</font></b>
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;int32_t id __attribute__ ((aligned(4)));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;StreamType streamType __attribute__ ((aligned(4)));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint32_t width __attribute__ ((aligned(4)));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint32_t height __attribute__ ((aligned(4)));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;::android::hardware::graphics::common::V1_0::PixelFormat format __attribute__ ((aligned(4)));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;uint64_t usage __attribute__ ((aligned(8)));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;int32_t dataSpace __attribute__ ((aligned(4)));
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;StreamRotation rotation __attribute__ ((aligned(4)));
    </p>
    <p>
      <b><font color="#be19ed">};</font></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1536286779349" ID="ID_96019941" MODIFIED="1536288443207">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#390ced">struct HalStreamConfiguration { </font>
    </p>
    <p>
      <font color="#390ced">&#xa0;&#xa0;&#xa0;&#xa0;vec&lt;HalStream&gt; streams; </font>
    </p>
    <p>
      <font color="#390ced">}; </font>
    </p>
    <p>
      
    </p>
    <p>
      V3_4
    </p>
    <p>
      
    </p>
    <p>
      struct HalStream {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;/**
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* The definition of HalStream from the prior version.
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;@3.3::HalStream v3_3;
    </p>
    <p>
      
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;/**
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* The physical camera id the current Hal stream belongs to.
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* If current camera device isn't a logical camera, or the Hal stream isn't
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* from a physical camera of the logical camera, this must be an empty
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* string.
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* A logical camera is a camera device backed by multiple physical camera
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* devices.
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* When not empty, this field is the &lt;id&gt; field of one of the full-qualified device
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* instance names returned by getCameraIdList().
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;string physicalCameraId;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1536287716977" ID="ID_1739103931" MODIFIED="1536288300883">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct HalStream {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;/**
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;* The definition of HalStream from the prior version.
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;*/&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;@3.2::HalStream v3_2;
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;DataspaceFlags overrideDataSpace;
    </p>
    <p>
      
    </p>
    <p>
      }
    </p>
    <p>
      
    </p>
    <p>
      struct HalStream {
    </p>
    <p>
      &#xa0;&#xa0;int32_t id;
    </p>
    <p>
      &#xa0;&#xa0;android.hardware.graphics.common@1.0::PixelFormat overrideFormat;
    </p>
    <p>
      &#xa0;&#xa0;BufferUsageFlags producerUsage;
    </p>
    <p>
      &#xa0;&#xa0;BufferUsageFlags consumerUsage;
    </p>
    <p>
      &#xa0;&#xa0;uint32_t maxBuffers;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1536289530909" FOLDED="true" ID="ID_806623483" MODIFIED="1566110138855" TEXT="3.&#x591a;camera&#x652f;&#x6301;&#x7684;&#x8981;&#x6c42;">
<node CREATED="1536289547573" ID="ID_1997152171" MODIFIED="1536307268714">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      androidp &#x5f53;&#x4e2d;&#x591a;multicamera&#x7684;&#x652f;&#x6301;&#x90fd;&#x653e;&#x5728;&#x4e86;device v3_4&#x91cc;&#x9762;&#x4e86;&#xff0c;
    </p>
    <p>
      &#x8981;&#x6c42;vendor&#x5c42;&#x7684;hal&#x5b9e;&#x73b0;&#x8981;&#x652f;&#x6301;device v3.4&#xff0c;
    </p>
    <p>
      &#x5728;&#x5224;&#x65ad;&#x5e95;&#x5c42;&#x7684;&#x8bbe;&#x5907;&#x662f;&#x5426;&#x652f;&#x6301;multi camera&#x7684;&#x65f6;&#x5019;&#x4f1a;&#x5224;&#x65ad;
    </p>
    <p>
      ANDROID_REQUEST_AVAILABLE_CAPABILITIES &#x8fd9;&#x4e2a;tag&#x91cc;&#x9762;&#x6709;&#x6ca1;&#x6709;<font color="#e81313">ANDROID_REQUEST_AVAILABLE_CAPABILITIES_LOGICAL_MULTI_CAMERA</font>
    </p>
    <p>
      &#x5b57;&#x6bb5;&#x7684;&#x652f;&#x6301;&#xff0c;&#x8be5;&#x5b57;&#x6bb5;&#x662f;&#x4ece;androidP &#x5f15;&#x5165;&#x7684;
    </p>
    <p>
      
    </p>
    <p>
      ANDROID_LOGICAL_MULTI_CAMERA_PHYSICAL_IDS &#x5305;&#x542b;&#x67d0;&#x4e2a;logical multicamera&#x5185;&#x90e8;&#x5305;&#x542b;&#x7684;physical camera id&#x7684;&#x5217;&#x8868;
    </p>
    <p>
      ANDROID_REQUEST_AVAILABLE_PHYSICAL_CAMERA_REQUEST_KEYS
    </p>
    <p>
      
    </p>
    <p>
      ANDROID_SCALER_AVAILABLE_STREAM_CONFIGURATIONS_OUTPUT &#x83b7;&#x53d6;output stream
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1535360655759" ID="ID_1383373227" MODIFIED="1641519917870">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#0c17eb" size="5">Android8.0 &#x4e0b;&#x57fa;&#x4e8e;aidl&#x6a21;&#x5f0f;camera api2&#x8fde;&#x63a5;camera service </font>
    </p>
    <p>
      <font color="#0c17eb" size="5">&#x7684;&#x8fc7;&#x7a0b;&#x5206;&#x6790;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1535360791084" FOLDED="true" ID="ID_623549504" MODIFIED="1566110143270">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      java&#x5c42;
    </p>
    <p>
      &#x5728;&#x6587;&#x4ef6;frameworks/base/core/java/android/hardware/camera2/CameraManager.java&#x6587;&#x4ef6;&#x5f53;&#x4e2d;&#xff0c;
    </p>
    <p>
      &#x51fd;&#x6570;
    </p>
    <p>
      private CameraDevice openCameraDeviceUserAsync(String cameraId,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;CameraDevice.StateCallback callback, Handler handler, final int uid)
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;throws CameraAccessException &#x91cc;&#x9762;&#x6709;&#x8fde;&#x63a5;camera service&#x7684;&#x64cd;&#x4f5c;
    </p>
    <p>
      
    </p>
    <p>
      ICameraService cameraService = CameraManagerGlobal.get().getCameraService()
    </p>
  </body>
</html></richcontent>
<node CREATED="1535361017615" ID="ID_924622420" MODIFIED="1535362651105">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      public ICameraService getCameraService() {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;synchronized(mLock) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;connectCameraServiceLocked();
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (mCameraService == null &amp;&amp; !sCameraServiceDisabled) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;Log.e(TAG, "Camera service is unavailable");
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return mCameraService;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      <b>&#x770b;&#x4e00;&#x4e0b;connectCameraServiceLocked&#x51fd;&#x6570;&#x662f;&#x600e;&#x4e48;&#x64cd;&#x4f5c;&#x7684;: </b>
    </p>
    <p>
      <b>IBinder cameraServiceBinder = ServiceManager.getService(CAMERA_SERVICE_BINDER_NAME); </b>
    </p>
    <p>
      <b>ICameraService cameraService = ICameraService.Stub.asInterface(cameraServiceBinder);</b>
    </p>
    <p>
      
    </p>
    <p>
      ICameraService&#x662f;&#x7ecf;&#x8fc7;ICameraService.aidl&#x7ecf;&#x8fc7;&#x5de5;&#x5177;&#x751f;&#x6210;&#x7684;&#xff0c;&#x76ee;&#x524d;&#x751f;&#x6210;&#x6709;3&#x79cd;&#x6587;&#x4ef6;&#xff0c;&#x5206;&#x522b;&#x662f;
    </p>
    <p>
      ICameraService.java , ICameraService.cpp, ICameraService.h
    </p>
    <p>
      ICameraService.cpp&#x91cc;&#x9762;&#x6709;<font size="4" color="#ec0e0e">BnCameraService</font>&#x7684;&#x5177;&#x4f53;&#x5b9e;&#x73b0;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1563436341648" ID="ID_1064593109" MODIFIED="1563436403193">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Framework&#x5c42;&#x6d4b;&#x8bd5;&#x5de5;&#x5177;:
    </p>
    <p>
      CameraBinderTests.cpp
    </p>
    <p>
      
    </p>
    <p>
      TestCameraDeviceCallbacks
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1597282132969" FOLDED="true" ID="ID_828032923" MODIFIED="1606807849356">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font face="Times New Roman" color="#009999">Metadata&#25509;&#21475;&#20998;&#26512;</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1597282478785" ID="ID_1431824491" MODIFIED="1597282509792">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ff0000">APK&#23618;&#35843;&#29992;&#31034;&#20363;</font></b>
    </p>
    <p>
      private void setUpCaptureRequestBuilder(CaptureRequest.Builder builder) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;builder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1598852430554" ID="ID_262514136" MODIFIED="1598852465256">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="rgb(51, 51, 51)" face="Helvetica Neue, Helvetica, Tahoma, Arial, STXihei, Microsoft YaHei, &#x5bf0;&#xe1bf;&#x848b;&#x95c6;&#x5474;&#x7ca6;, sans-serif" size="16px"><span style="letter-spacing: normal; display: inline !important; float: none; background-color: rgb(254, 254, 254); text-align: start; text-indent: 16px; text-transform: none; font-weight: 400; font-style: normal; font-family: Helvetica Neue, Helvetica, Tahoma, Arial, STXihei, Microsoft YaHei, &#x5bf0;&#xe1bf;&#x848b;&#x95c6;&#x5474;&#x7ca6;, sans-serif; color: rgb(51, 51, 51); word-spacing: 0px; font-size: 16px; white-space: normal"><b>system/media/camera/src/Camera_metadata_tag_info.c</b></span></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1598852524918" ID="ID_1545284728" MODIFIED="1598852527810" TEXT="https://blog.csdn.net/armwind/article/details/52027010"/>
</node>
</node>
<node CREATED="1496325792494" FOLDED="true" ID="ID_1061517957" MODIFIED="1562650418230" POSITION="left" TEXT="11. android binder&#x5b66;&#x4e60;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1496325970164" FOLDED="true" ID="ID_173538414" MODIFIED="1535360569211" TEXT="mediaserver&#x8be6;&#x89e3;">
<node CREATED="1496325982101" ID="ID_687050765" MODIFIED="1496327154695">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e81b1b">main&#x51fd;&#x6570;&#x6240;&#x5728;&#x6587;&#x4ef6; </font>
    </p>
    <p>
      <font color="#e81b1b">frameworks/av/media/mediaserver/main_mediaserver.cpp </font>
    </p>
    <p>
      
    </p>
    <p>
      &#x6211;&#x4eec;&#x6ce8;&#x610f;&#x5230;&#x5728;main&#x51fd;&#x6570;&#x5f53;&#x4e2d;&#xff0c;&#x9996;&#x5148;&#x58f0;&#x660e;&#x4e86;ProcessState&#x53d8;&#x91cf;
    </p>
    <p>
      sp&lt;ProcessState&gt; proc(ProcessState::self());
    </p>
    <p>
      sp&lt;IServiceManager&gt; sm = defaultServiceManager();
    </p>
  </body>
</html></richcontent>
<node CREATED="1496331415309" ID="ID_1250615424" MODIFIED="1496331472098">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x6211;&#x4eec;&#x6765;&#x770b;&#x770b;defaultServiceManager&#x51fd;&#x6570;&#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x8be5;&#x5b9e;&#x73b0;&#x4f4d;&#x4e8e;
    </p>
    <p>
      IServiceManager.cpp&#x5f53;&#x4e2d;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1508830276520" ID="ID_825992261" MODIFIED="1508830404364">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      MediaServer&#x662f;&#x7cfb;&#x7edf;&#x5f53;&#x4e2d;&#x8bf8;&#x591a;&#x91cd;&#x8981;&#x7684;&#x670d;&#x52a1;&#x7684;&#x6816;&#x606f;&#x5730;&#xff0c;&#x5305;&#x62ec;
    </p>
    <p>
      AudioFlinger
    </p>
    <p>
      AudioPolicyService &#x5173;&#x4e8e;&#x97f3;&#x9891;&#x7b56;&#x7565;&#x7684;&#x91cd;&#x8981;&#x670d;&#x52a1;
    </p>
    <p>
      MediaPlayerService &#x591a;&#x5a92;&#x4f53;&#x7cfb;&#x7edf;&#x5f53;&#x4e2d;&#x7684;&#x91cd;&#x8981;&#x670d;&#x52a1;
    </p>
    <p>
      CameraService
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1496327176688" FOLDED="true" ID="ID_156865957" MODIFIED="1535360570694" TEXT="ProcessState&#x7c7b;&#x8be6;&#x89e3;">
<node CREATED="1496327227205" ID="ID_51944443" MODIFIED="1496327265105">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#x6211;&#x4eec;&#x9996;&#x5148;&#x770b;&#x5230;ProcessState&#x7c7b;&#x7684;self&#x51fd;&#x6570;&#x7684;&#x76ee;&#x7684;&#x5c31;&#x662f;&#x751f;&#x6210;&#x4e00;&#x4e2a;ProcessState&#x7c7b;
    </p>
    <p>
      sp&lt;ProcessState&gt; ProcessState::self()
    </p>
    <p>
      {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;Mutex::Autolock _l(gProcessMutex);
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;if (gProcess != NULL) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return gProcess;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;gProcess = new ProcessState;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;return gProcess;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1496327269038" ID="ID_613730162" MODIFIED="1496327436565">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#x6211;&#x4eec;&#x518d;&#x6765;&#x770b;ProcessState&#x7c7b;&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;</b>
    </p>
    <p>
      ProcessState::ProcessState()
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;: mDriverFD(open_driver())
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;, mVMStart(MAP_FAILED)
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;, mManagesContexts(false)
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;, mBinderContextCheckFunc(NULL)
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;, mBinderContextUserData(NULL)
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;, mThreadPoolStarted(false)
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;, mThreadPoolSeq(1)
    </p>
    <p>
      {&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;if (mDriverFD &gt;= 0) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// mmap the binder, providing a chunk of virtual address space to receive transactions.
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;mVMStart = mmap(0, BINDER_VM_SIZE, PROT_READ, MAP_PRIVATE | MAP_NORESERVE, mDriverFD, 0);
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (mVMStart == MAP_FAILED) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// *sigh*
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ALOGE("Using /dev/binder failed: unable to mmap transaction memory.\n");
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;close(mDriverFD);
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;mDriverFD = -1;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      }&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x8be5;&#x6784;&#x9020;&#x51fd;&#x6570;&#x8c03;&#x7528;&#x4e86;open_driver&#x6253;&#x5f00;&#x4e86;&#x5e95;&#x5c42;&#x7684;binder&#x8bbe;&#x5907;&#xff0c;&#x5e76;&#x4e14;&#x4f7f;&#x7528;mmap&#x51fd;&#x6570;&#x5c06;binder&#x8bbe;&#x5907;&#x7684;
    </p>
    <p>
      &#x6587;&#x4ef6;&#x7a7a;&#x95f4;&#x6620;&#x5c04;&#x5230;&#x4e86;&#x5185;&#x5b58;&#x7a7a;&#x95f4;mVMStart&#x5f53;&#x4e2d;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1497404600624" ID="ID_1154712373" MODIFIED="1497404608831">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/android-binder.png"/>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1502162415873" FOLDED="true" ID="ID_1595158135" MODIFIED="1536301509927" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Android Media&#x6846;&#x67b6;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1502162443745" ID="ID_155688899" MODIFIED="1502168598161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      https://source.android.com/devices/media/
    </p>
    <p>
      Stagefright &#x4e00;&#x4e2a;native&#x5c42;&#x9762;&#x7684;&#x5a92;&#x4f53;&#x64ad;&#x653e;&#x5f15;&#x64ce;&#xff0c;&#x5185;&#x5d4c;&#x6709;&#x8f6f;&#x4ef6;&#x89e3;&#x7801;&#x5668;&#xff0c;
    </p>
    <p>
      &#x53ef;&#x4ee5;&#x64ad;&#x653e;&#x5f53;&#x524d;&#x6d41;&#x884c;&#x7684;&#x5a92;&#x4f53;&#x683c;&#x5f0f;&#x3002;
    </p>
    <p>
      Stagefright audio and video playback features&#x5305;&#x62ec;&#x8ddf;OpenMAX code
    </p>
    <p>
      &#x7684;&#x878d;&#x5408;&#xff0c;session&#x7ba1;&#x7406;&#xff0c;&#x65f6;&#x95f4;&#x540c;&#x6b65;&#x6e32;&#x67d3;&#xff0c;&#x4f20;&#x8f93;&#x63a7;&#x5236;&#x548c;DRM&#x3002;
    </p>
    <p>
      Stagefright&#x4e5f;&#x652f;&#x6301;&#x8ddf;&#x5ba2;&#x6237;&#x63d0;&#x4f9b;&#x7684;&#x786c;&#x4ef6;codec&#x8fdb;&#x884c;&#x878d;&#x5408;&#xff0c;&#x4e3a;&#x4e86;&#x8bbe;&#x7f6e;&#x4e00;&#x4e2a;&#x786c;&#x4ef6;&#x7684;&#x901a;&#x8def;
    </p>
    <p>
      &#x53bb;&#x7f16;&#x7801;&#x548c;&#x89e3;&#x7801;&#x5a92;&#x4f53;&#x6587;&#x4ef6;&#xff0c;&#x4f60;&#x5fc5;&#x987b;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x57fa;&#x4e8e;&#x786c;&#x4ef6;&#x7684;codec&#xff0c;&#x4f5c;&#x4e3a;OpenMax IL (Integration Layer)
    </p>
    <p>
      &#x7684;&#x4e00;&#x4e2a;&#x7ec4;&#x4ef6;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1508830905479" FOLDED="true" ID="ID_1540724775" MODIFIED="1536301513897" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>15.Android&#x667a;&#x80fd;&#x6307;&#x9488;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1508830947463" ID="ID_1790727205" MODIFIED="1508831014355">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.&#x5b9e;&#x73b0;&#x667a;&#x80fd;&#x6307;&#x9488;&#x9700;&#x8981;&#x4e24;&#x4e2a;&#x524d;&#x63d0;:</b>
    </p>
    <p>
      &#x4e00;&#x4e2a;&#x662f;&#x9700;&#x8981;&#x5b9e;&#x73b0;&#x4e00;&#x4e2a;&#x8d1f;&#x8d23;&#x63d0;&#x4f9b;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x5668;&#x7684;&#x516c;&#x5171;&#x7c7b;
    </p>
    <p>
      &#x53e6;&#x4e00;&#x4e2a;&#x662f;&#x9700;&#x8981;&#x5b9e;&#x73b0;&#x64cd;&#x4f5c;&#x8be5;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x7684;&#x667a;&#x80fd;&#x6307;&#x9488;&#x7c7b;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1508831065637" ID="ID_1776320046" MODIFIED="1508840606171">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.&#x8f7b;&#x91cf;&#x7ea7;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x5668;class LightRefBase&#xff0c; &#x8ddf;&#x5b83;&#x914d;&#x5408;&#x7684;&#x667a;&#x80fd;&#x6307;&#x9488;&#x7c7b;&#x662f;class sp</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1508840680642" ID="ID_759890415" MODIFIED="1508840744926">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#1544e7">template&lt;typename T&gt; </font></b>
    </p>
    <p>
      <b><font color="#1544e7">sp&lt;T&gt;::sp(T* other) </font></b>
    </p>
    <p>
      <b><font color="#1544e7">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;: m_ptr(other) { </font></b>
    </p>
    <p>
      <b><font color="#1544e7">&#xa0;&#xa0;&#xa0;&#xa0;if (other) </font></b>
    </p>
    <p>
      <b><font color="#1544e7">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;other-&gt;incStrong(this); </font></b>
    </p>
    <p>
      <b><font color="#1544e7">} </font></b>
    </p>
    <p>
      
    </p>
    <p>
      <b><font color="#1544e7">template&lt;typename T&gt; </font></b>
    </p>
    <p>
      <b><font color="#1544e7">sp&lt;T&gt;::sp(const sp&lt;T&gt;&amp; other) </font></b>
    </p>
    <p>
      <b><font color="#1544e7">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;: m_ptr(other.m_ptr) { </font></b>
    </p>
    <p>
      <b><font color="#1544e7">&#xa0;&#xa0;&#xa0;&#xa0;if (m_ptr) </font></b>
    </p>
    <p>
      <b><font color="#1544e7">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;m_ptr-&gt;incStrong(this); </font></b>
    </p>
    <p>
      <b><font color="#1544e7">}</font></b>
    </p>
    <p>
      <b><font color="#c60c0c">&#x53ef;&#x4ee5;&#x770b;&#x5230;&#x667a;&#x80fd;&#x6307;&#x9488;&#x5728;&#x521d;&#x59cb;&#x5316;&#x7684;&#x65f6;&#x5019;&#x90fd;&#x4f1a;&#x8c03;&#x7528;&#x6a21;&#x677f;&#x7684;incStrong&#x51fd;&#x6570;</font></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1526114786080" ID="ID_1550945198" MODIFIED="1526114823334">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      class LightRefBase
    </p>
    <p>
      {
    </p>
    <p>
      public:
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;inline LightRefBase() : mCount(0) { }
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;inline void incStrong(__attribute__((unused)) const void* id) const {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;__sync_fetch_and_add(&amp;mCount, 1);
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;inline void decStrong(__attribute__((unused)) const void* id) const {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;if (__sync_fetch_and_sub(&amp;mCount, 1) == 1) {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;delete static_cast&lt;const T*&gt;(this);
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;//! DEBUGGING ONLY: Get current strong ref count.
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;inline int32_t getStrongCount() const {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return mCount;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;
    </p>
    <p>
      
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;typedef LightRefBase&lt;T&gt; basetype;
    </p>
    <p>
      
    </p>
    <p>
      protected:
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;inline ~LightRefBase() { }
    </p>
    <p>
      
    </p>
    <p>
      private:
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;friend class ReferenceMover;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;inline static void moveReferences(void* d, void const* s, size_t n,
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const ReferenceConverterBase&amp; caster) { }
    </p>
    <p>
      
    </p>
    <p>
      private:
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;mutable volatile int32_t mCount;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1526114879197" ID="ID_336440835" MODIFIED="1526114915554">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#e80f0f">&#x53ea;&#x63d0;&#x4f9b;&#x6700;&#x57fa;&#x672c;&#x7684;&#x5f15;&#x7528;&#x8ba1;&#x6570;mCount</font></i></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1508834285766" ID="ID_1188299794" MODIFIED="1508847063108">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.&#x5f3a;&#x6307;&#x9488;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x5668;&#x662f;class RefBase, &#x914d;&#x5408;&#x5b83;&#x7684;&#x667a;&#x80fd;&#x6307;&#x9488;&#x7c7b;&#x662f;class sp, </b>
    </p>
    <p>
      <b><font color="#dc1b1b">&#x6ce8;&#x610f;sp&#x662f;&#x4e00;&#x4e2a;&#x5f3a;&#x6307;&#x9488;&#xff0c;&#x914d;&#x5408;RefBase&#x7684;&#x8fd8;&#x6709;&#x4e00;&#x4e2a;&#x5f31;&#x6307;&#x9488;&#x53eb;&#x505a;calss wp</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1508836115940" ID="ID_1123331860" MODIFIED="1508841521333">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>class RefBase::weakref_impl : public RefBase::weakref_type&#xa0;&#xa0;----&gt;</b><font size="4" color="#c81212">weakref_impl&#x53ef;&#x4ee5;&#x770b;&#x6210;&#x662f;weakref_type&#x7684;&#x5b9e;&#x73b0;</font>
    </p>
    <p>
      {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0; <b><font color="#dc0a0a">public:</font></b>
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0; <font color="#126546">std::atomic&lt;int32_t&gt;&#xa0;&#xa0;&#xa0;&#xa0;mStrong; &#x5bf9;&#x8c61;&#x7684;&#x5f3a;&#x5f15;&#x7528;&#x8ba1;&#x6570;</font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;std::atomic&lt;int32_t&gt;&#xa0;&#xa0;&#xa0;&#xa0;mWeak; &#x5bf9;&#x8c61;&#x7684;&#x5f31;&#x5f15;&#x7528;&#x8ba1;&#x6570;</font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;RefBase* const&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;mBase;&#xa0;&#xa0;&#x6307;&#x5411;&#x5176;&#x5bbf;&#x4e3b;&#x7c7b;</font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;std::atomic&lt;int32_t&gt;&#xa0;&#xa0;&#xa0;&#xa0;mFlags; &#x6307;&#x793a;&#x7ef4;&#x62a4;&#x5bf9;&#x8c61;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x7684;&#x7b56;&#x7565;&#xff0c;&#x9ed8;&#x8ba4;&#x7684;&#x503c;&#x662f;0,&#x53ef;&#x4ee5;&#x53d6;&#x5982;&#x4e0b;&#x7684;&#x679a;&#x4e3e;&#x503c; </font>
    </p>
    <p>
      <font color="#103fe4">enum {&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </font>
    </p>
    <p>
      <font color="#103fe4">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;OBJECT_LIFETIME_STRONG&#xa0;&#xa0;= 0x0000,&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </font>
    </p>
    <p>
      <font color="#103fe4">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;OBJECT_LIFETIME_WEAK&#xa0;&#xa0;&#xa0;&#xa0;= 0x0001,&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </font>
    </p>
    <p>
      <font color="#103fe4">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;OBJECT_LIFETIME_MASK&#xa0;&#xa0;&#xa0;&#xa0;= 0x0001&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; </font>
    </p>
    <p>
      <font color="#103fe4">&#xa0;&#xa0;&#xa0;&#xa0;};&#xa0;&#xa0;&#xa0; </font><font color="#126546">&#xa0;&#xa0; </font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;mutable Mutex mMutex; </font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;</font><b><font color="#d01f23">ref_entry* mStrongRefs; </font></b>
    </p>
    <p>
      <b><font color="#d01f23">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ref_entry* mWeakRefs;</font></b><font color="#126546">&#xa0; &#x5b58;&#x50a8;&#x5b9e;&#x9645;&#x7684;&#x7c7b;&#x5bf9;&#x8c61;&#x7684;</font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;bool mTrackEnabled; </font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// Collect stack traces on addref and removeref, instead of deleting the stack references </font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// on removeref that match the address ones. </font>
    </p>
    <p>
      <font color="#126546">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;bool mRetain;</font>
    </p>
    <p>
      <font color="#1c39f3">struct ref_entry </font>
    </p>
    <p>
      <font color="#1c39f3">&#xa0;&#xa0;&#xa0;&#xa0;{ </font>
    </p>
    <p>
      <font color="#1c39f3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;ref_entry* next; </font>
    </p>
    <p>
      <font color="#1c39f3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;const void* id; </font>
    </p>
    <p>
      <font color="#1c39f3">#if DEBUG_REFS_CALLSTACK_ENABLED </font>
    </p>
    <p>
      <font color="#1c39f3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;CallStack stack; </font>
    </p>
    <p>
      <font color="#1c39f3">#endif </font>
    </p>
    <p>
      <font color="#1c39f3">&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;int32_t ref; </font>
    </p>
    <p>
      <font color="#1c39f3">&#xa0;&#xa0;&#xa0;&#xa0;};</font>
    </p>
    <p>
      
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<node CREATED="1508839523315" ID="ID_879569915" MODIFIED="1508839532093">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="binder/weakref_type.gif"/>
  </body>
</html></richcontent>
</node>
<node CREATED="1508841363627" ID="ID_1552578554" MODIFIED="1508841550202">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void RefBase::incStrong(const void* id) const&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      {&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;weakref_impl* const refs = mRefs;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;refs-&gt;incWeak(id);&#xa0;&#xa0;<b><font color="#b41111">//&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x5c06;&#x5b9e;&#x9645;&#x7684;&#x5bf9;&#x8c61;&#x6307;&#x9488;&#x5b58;&#x50a8;&#x5230;&#x4e86;weakref_impl&#x91cc;&#x9762;&#x7684;ref_entry&#x7684;&#x94fe;&#x8868;&#x91cc;&#x9762;&#x4e86;</font></b>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;refs-&gt;addStrongRef(id);&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;const int32_t c = refs-&gt;mStrong.fetch_add(1, std::memory_order_relaxed);&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;ALOG_ASSERT(c &gt; 0, "incStrong() called on %p after last strong ref", refs);&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      #if PRINT_REFS&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;ALOGD("incStrong of %p from %p: cnt=%d\n", this, id, c);&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      #endif&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;if (c != INITIAL_STRONG_VALUE)&#xa0;&#xa0;{&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;return;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;}&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;int32_t old = refs-&gt;mStrong.fetch_sub(INITIAL_STRONG_VALUE,&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;std::memory_order_relaxed);&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;// A decStrong() must still happen after us.&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;ALOG_ASSERT(old &gt; INITIAL_STRONG_VALUE, "0x%x too small", old);&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;refs-&gt;mBase-&gt;onFirstRef();&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0; &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1508838266267" ID="ID_1300052966" MODIFIED="1508839379997">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>class RefBase</b>
    </p>
    <p>
      {
    </p>
    <p>
      <font color="#d80f0f">private: </font>
    </p>
    <p>
      <font color="#d80f0f">&#xa0;&#xa0;&#xa0;&#xa0;weakref_impl* const mRefs;&#xa0;&#xa0;&#xa0;----&gt;</font><b><font color="#152aeb">&#x5728;RefBase&#x7684;&#x6784;&#x9020;&#x51fd;&#x6570;&#x91cc;&#x9762;&#x88ab;new&#x51fa;&#x6765;</font></b>
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1508841964965" ID="ID_1534603519" MODIFIED="1508841988599">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="16px" color="rgb(69, 69, 69)" face="PingFang SC, Microsoft YaHei, SimHei, Arial, SimSun"><span style="font-weight: normal; margin-right: 0px; margin-top: 0px; padding-left: 0px; padding-top: 0px; font-style: normal; padding-right: 0px; margin-left: 0px; padding-bottom: 0px; margin-bottom: 0px"><strong style="background-color: rgb(255, 255, 255); white-space: normal; font-size: 16px; word-spacing: 0px; color: rgb(69, 69, 69); text-indent: 0px; text-transform: none; font-style: normal; text-align: start; font-weight: bold; font-family: PingFang SC, Microsoft YaHei, SimHei, Arial, SimSun; letter-spacing: normal" http-equiv="content-type" content="text/html; charset=utf-8"><b><em style="font-style: italic"><i>&#x8fd9;&#x91cc;&#x603b;&#x7ed3;&#x4e00;&#x4e0b;&#x5f3a;&#x6307;&#x9488;&#x7c7b;sp&#x5728;&#x5176;&#x6784;&#x9020;&#x51fd;&#x6570;&#x91cc;&#x9762;&#x6240;&#x505a;&#x7684;&#x4e8b;&#x60c5;&#x5c31;&#x662f;&#x5206;&#x522b;&#x4e3a;&#x76ee;&#x6807;&#x5bf9;&#x8c61;&#x7684;&#x5f3a;&#x5f15;&#x7528;&#x8ba1;&#x6570;&#x548c;&#x5f31;&#x5f15;&#x548c;&#x8ba1;&#x6570;&#x589e;&#x52a0;&#x4e86;1&#x3002;</i></em></b></strong></span></font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1528247495355" FOLDED="true" ID="ID_1749217998" MODIFIED="1578317857674" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#320bf1"><b>HIDL</b></font>
    </p>
    <p>
      hal interface definition language("hide-L") is an interface definition language to specify
    </p>
    <p>
      a interface between hal and its users
    </p>
    <p>
      hidl&#x7684;&#x5b9e;&#x9645;&#x76ee;&#x7684;&#x5c31;&#x662f;&#x8ba9;hal&#x5c42;&#x548c;framework&#x5c42;&#x53ef;&#x4ee5;&#x5206;&#x5f00;&#xff0c;&#x8fd9;&#x6837;framework&#x5c31;&#x53ef;&#x4ee5;&#x5355;&#x72ec;&#x5347;&#x7ea7;&#xff0c;hal&#x53ef;&#x4ee5;
    </p>
    <p>
      &#x7531;oem&#x5382;&#x5546;&#x5355;&#x72ec;&#x5347;&#x7ea7;
    </p>
  </body>
</html></richcontent>
<node CREATED="1528253778288" ID="ID_1358551860" MODIFIED="1528255640311">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hidl&#x4ee3;&#x7801;&#x7684;&#x7ec4;&#x7ec7;&#x7ed3;&#x6784;&#x5f62;&#x5f0f;
    </p>
    <p>
      
    </p>
    <p>
      hidl&#x4ee3;&#x7801;&#x7531;&#x7528;&#x6237;&#x5b9a;&#x4e49;&#x7c7b;&#x578b;&#xff0c; &#x63a5;&#x53e3; &#x548c; &#x5305;&#x7ec4;&#x6210;&#xff1a;
    </p>
    <p>
      
    </p>
    <p>
      User-defined types(UDTs) HIDL&#x63d0;&#x4f9b;&#x4e00;&#x7cfb;&#x5217;&#x7684;&#x57fa;&#x672c;&#x7684;&#x6570;&#x636e;&#x8bbf;&#x95ee;&#xff0c;&#x8fd9;&#x4e9b;&#x6570;&#x636e;&#x53ef;&#x4ee5;&#x7ec4;&#x6210;
    </p>
    <p>
      &#x66f4;&#x590d;&#x6742;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x5f62;&#x5f0f;&#xff0c; udts&#x53ef;&#x4ee5;&#x88ab;&#x4f20;&#x9012;&#x7ed9;interface&#x5f53;&#x4e2d;&#x7684;method.
    </p>
    <p>
      udts&#x53ef;&#x4ee5;&#x5728;package&#x5c42;&#x9762;&#x8fdb;&#x884c;&#x5b9a;&#x4e49;(&#x7531;&#x6240;&#x6709;&#x7684;interface&#x5171;&#x4eab;)&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x5728;interface&#x5c42;&#x9762;
    </p>
    <p>
      &#x8fdb;&#x884c;&#x5b9a;&#x4e49;
    </p>
    <p>
      
    </p>
    <p>
      Interface: &#x63a5;&#x53e3;&#x5305;&#x542b;UDT&#x548c;method&#x58f0;&#x660e;&#xff0c; interface&#x4e5f;&#x53ef;&#x4ee5;&#x4ece;&#x5176;&#x4ed6;&#x7684;interface&#x7ee7;&#x627f;&#x800c;&#x6765;
    </p>
    <p>
      
    </p>
    <p>
      Packages: &#x7531;&#x76f8;&#x5173;&#x7684;interface&#x548c;udt&#x7ec4;&#x5408;&#x800c;&#x6210;&#xff0c;&#x4e00;&#x4e2a;pakcage&#x7531;name&#x548c;version&#x6807;&#x8bc6;&#x800c;&#x6210;&#xff0c;&#x5e76;&#x4e14;&#x5305;&#x542b;&#x5982;&#x4e0b;&#x7684;&#x4e1c;&#x897f;:
    </p>
    <p>
      &#x6570;&#x636e;&#x7c7b;&#x578b;&#x5b9a;&#x4e49;&#x6587;&#x4ef6;: types.hal
    </p>
    <p>
      &#x96f6;&#x4e2a;&#x6216;&#x8005;&#x591a;&#x4e2a;interface&#x6587;&#x4ef6;: &#x5728;&#x5404;&#x81ea;&#x7684;.hal&#x6587;&#x4ef6;&#x91cc;&#x9762;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1528271580610" ID="ID_1266680919" MODIFIED="1528272600462">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4">HIDL&#x7684;&#x4ee3;&#x7801;&#x5e03;&#x5c40;:</font></b>
    </p>
    <p>
      HIDL&#x7684;&#x4ee3;&#x7801;&#x5305;&#x62ec;&#x6838;&#x5fc3;&#x5305;&#x548c;vendor&#x5c42;&#x5305;
    </p>
    <p>
      
    </p>
    <p>
      &#x6838;&#x5fc3;HIDL&#x63a5;&#x53e3;&#x4ee3;&#x7801;&#x662f;&#x7531;google&#x6307;&#x5b9a;&#x7684;&#xff0c;&#x8fd9;&#x4e9b;&#x5305;&#x4ee5;android.hardware.&#x5f00;&#x5934;
    </p>
    <p>
      &#x6240;&#x6709;&#x7684;&#x6838;&#x5fc3;&#x5305;&#x90fd;&#x653e;&#x7f6e;&#x5728;hardware/interface&#x76ee;&#x5f55;&#x4e0b;&#x9762;,&#x653e;&#x7f6e;&#x7684;&#x5177;&#x4f53;&#x76ee;&#x5f55;&#x5982;&#x4e0b;&#x6240;&#x793a;:
    </p>
    <p>
      The package android.hardware.[name1].[name2]&#x2026; at version $m.$n is under hardware/interfaces/name1/name2/&#x2026;/$m.$n/;
    </p>
    <p>
      
    </p>
    <p>
      &#x975e;&#x6838;&#x5fc3;&#x4ee3;&#x7801;&#x662f;&#x7531;vendor&#x521b;&#x5efa;&#x7684;&#xff0c;&#x547d;&#x540d;&#x89c4;&#x5219;&#x662f;vendor.$(VENDOR).hardware, &#x5bf9;&#x5e94;&#x7684;&#x8def;&#x5f84;&#x662f;vendor/$(VENDOR)/hardware
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1528273017674" ID="ID_1072636160" MODIFIED="1528278456798">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Fully-qualified user-defined-type names</b>
    </p>
    <p>
      
    </p>
    <p>
      &#x5728;hidl&#x91cc;&#x9762;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;type&#x90fd;&#x62e5;&#x6709;&#x4e00;&#x4e2a;fully-qualified&#x540d;&#x79f0;&#xff0c;&#x8be5;&#x540d;&#x79f0;&#x5305;&#x62ec;&#x8be5;type&#x672c;&#x8eab;&#x7684;&#x540d;&#x79f0;&#xff0c;
    </p>
    <p>
      &#x8be5;type&#x6240;&#x5728;&#x7684;&#x5305;&#x7684;&#x540d;&#x79f0;&#x548c;&#x8be5;&#x5305;&#x7684;version&#x53f7;&#x3002;
    </p>
    <p>
      &#x5728;&#x5b9a;&#x4e49;&#x8be5;type&#x7684;&#x65f6;&#x5019;&#x53ea;&#x4f1a;&#x51fa;&#x73b0;&#x8be5;type&#x7684;&#x540d;&#x79f0;&#xff0c;&#x5728;&#x58f0;&#x660e;&#x8be5;type&#x7684;&#x4e00;&#x4e2a;&#x5b9e;&#x4f8b;&#x7684;&#x65f6;&#x5019;&#x624d;&#x4f1a;&#x51fa;&#x73b0;&#x8be5;
    </p>
    <p>
      type&#x7684;fully-qualified&#x540d;&#x79f0;
    </p>
    <p>
      &#x6bd4;&#x5982;&#x5728;&#x6587;&#x4ef6;types.hal&#x5f53;&#x4e2d;&#x4f1a;&#x5b9a;&#x4e49;&#x5982;&#x4e0b;&#x7684;type
    </p>
    <p>
      struct NfcData {
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;vec&lt;uint8_t&gt; data;
    </p>
    <p>
      };
    </p>
    <p>
      &#x4f46;&#x662f;&#x5728;&#x58f0;&#x660e;&#x8be5;type&#x7684;&#x5b9e;&#x4f8b;&#x7684;&#x65f6;&#x5019;&#x662f;&#x4f7f;&#x7528;&#x7684;&#x5982;&#x4e0b;:
    </p>
    <p>
      android.hardware.nfc@1.0::NfcData
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534410536867" FOLDED="true" ID="ID_616726503" MODIFIED="1566110154238">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Package</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534410646974" ID="ID_1930615208" MODIFIED="1534410753783">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1. package&#x7684;&#x540d;&#x79f0;&#x53ef;&#x4ee5;&#x62e5;&#x6709;&#x5b50;&#x540d;&#x79f0;&#xff0c;&#x6bd4;&#x5982;package.subpackage
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534410757580" ID="ID_249279210" MODIFIED="1534411053861">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5bf9;&#x4e8e;packages&#x6765;&#x8bf4;&#xff0c;&#x5b83;&#x7684;&#x6839;&#x76ee;&#x5f55;&#x662f;hardware/interfaces&#x6216;&#x8005;vendor/vendorName
    </p>
    <p>
      package&#x7684;&#x540d;&#x79f0;&#x662f;&#x7531;&#x4f4d;&#x4e8e;&#x6839;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x7684;&#x4e00;&#x4e2a;&#x6216;&#x8005;&#x591a;&#x4e2a;&#x5b50;&#x76ee;&#x5f55;&#x7684;&#x540d;&#x79f0;&#x7ec4;&#x6210;&#x7684;&#xff0c;
    </p>
    <p>
      &#x6240;&#x6709;&#x7684;&#x7528;&#x6765;&#x5b9a;&#x4e49;&#x4e00;&#x4e2a;package&#x7684;&#x6587;&#x4ef6;&#x90fd;&#x5728;&#x4e00;&#x4e2a;&#x76ee;&#x5f55;&#x91cc;&#x9762;
    </p>
    <p>
      &#x6bd4;&#x5982;android.hardware.example.extension.light@2.0 &#x5bf9;&#x5e94;&#x7684;&#x8def;&#x5f84;&#x662f;
    </p>
    <p>
      hardware/interfaces/example/extension/light/2.0
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534411153454" ID="ID_854689978" MODIFIED="1534987949222">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4" color="#da2121">android.hardware.* hardware/interfaces/* </font></b>
    </p>
    <p>
      <b><font size="4" color="#da2121">android.frameworks.* frameworks/hardware/interfaces/* </font></b>
    </p>
    <p>
      <b><font size="4" color="#da2121">android.system.* &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;system/hardware/interfaces/* </font></b>
    </p>
    <p>
      <b><font size="4" color="#da2121">android.hidl.* &#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;system/libhidl/transport/*</font></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534411260885" ID="ID_856250476" MODIFIED="1534411518042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      package&#x8def;&#x5f84;&#x4e0b;&#x9762;&#x4f1a;&#x5305;&#x542b;&#x4e00;&#x7cfb;&#x5217;&#x7684;.hal&#x6587;&#x4ef6;&#xff0c;&#x6bcf;&#x4e2a;&#x6587;&#x4ef6;&#x5fc5;&#x987b;&#x5305;&#x542b;&#x4e00;&#x4e2a;package&#x8bed;&#x53e5;
    </p>
    <p>
      &#x7528;&#x6765;&#x547d;&#x540d;&#x8be5;&#x6587;&#x4ef6;&#x6240;&#x5c5e;&#x7684;&#x5305;&#x7684;&#x540d;&#x79f0;&#x548c;&#x7248;&#x672c;&#x53f7;&#xff0c;
    </p>
    <p>
      types.hal&#x4e0d;&#x662f;&#x7528;&#x4e8e;&#x5b9a;&#x4e49;&#x63a5;&#x53e3;&#x7684;&#xff0c;&#x662f;&#x7528;&#x6765;&#x5b9a;&#x4e49;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x7684;&#xff0c;&#x8be5;&#x6570;&#x636e;&#x7c7b;&#x578b;&#x5728;&#x5f53;&#x524d;&#x76ee;&#x5f55;
    </p>
    <p>
      &#x4e0b;&#x7684;&#x6240;&#x6709;&#x7684;interface&#x90fd;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1534411537263" FOLDED="true" ID="ID_1942815485" MODIFIED="1566110157750">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Interface definition</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1528278465645" ID="ID_1776476652" MODIFIED="1528358430854">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Interface&#x7684;&#x5b9a;&#x4e49;
    </p>
    <p>
      &#x9664;&#x4e86;types.hal&#x6587;&#x4ef6;&#xff0c;&#x5176;&#x4ed6;&#x7684;.hal&#x6587;&#x4ef6;&#x5b9a;&#x4e49;&#x4e86;interface,&#x4e00;&#x4e2a;&#x5178;&#x578b;&#x7684;&#x63a5;&#x53e3;&#x5b9a;&#x4e49;&#x5982;&#x4e0b;&#x6240;&#x793a;:
    </p>
    <p>
      
    </p>
    <p>
      interface IBar extends IFoo { // IFoo is another interface
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;// embedded types
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;struct MyStruct {/*...*/};
    </p>
    <p>
      
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;// interface methods
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;create(int32_t id) generates (MyStruct s);
    </p>
    <p>
      &#xa0;&#xa0;&#xa0;&#xa0;close();
    </p>
    <p>
      };
    </p>
    <p>
      
    </p>
    <p>
      &#x6ca1;&#x6709;extends&#x5173;&#x952e;&#x5b57;&#x7684;&#x63a5;&#x53e3;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x9690;&#x5f62;&#x5730;&#x7ee7;&#x627f;&#x4e86;android.hidl.base@1.0::IBase
    </p>
    <p>
      IBase&#x5b9a;&#x4e49;&#x4e86;&#x4e00;&#x4e9b;&#x5176;&#x4ed6;&#x7684;&#x63a5;&#x53e3;&#x4e0d;&#x80fd;&#x58f0;&#x660e;&#x7684;&#x65b9;&#x6cd5;:
    </p>
    <p>
      
    </p>
    <p>
      ping
    </p>
    <p>
      interfaceChain
    </p>
    <p>
      interfaceDescriptor
    </p>
    <p>
      notifySyspropsChanged
    </p>
    <p>
      linkToDeath
    </p>
    <p>
      unlinkToDeath
    </p>
    <p>
      setHALInstrumentation
    </p>
    <p>
      getDebugInfo
    </p>
    <p>
      debug
    </p>
    <p>
      getHashChain
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534820430514" FOLDED="true" ID="ID_673128991" MODIFIED="1566110156501">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><i><b>&#x63a5;&#x53e3;&#x7ee7;&#x627f; </b></i></font>
    </p>
    <p>
      <font size="4"><i><b>interface inheritance</b></i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534871751051" ID="ID_260813232" MODIFIED="1534872198772">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x4e00;&#x4e2a;interface&#x53ea;&#x80fd;&#x6269;&#x5c55;&#x53e6;&#x4e00;&#x4e2a;interface, &#x4e0d;&#x80fd;&#x8fdb;&#x884c;&#x591a;&#x4e2a;&#x6269;&#x5c55;&#x3002;
    </p>
    <p>
      &#x5f53;&#x4e00;&#x4e2a;package&#x7684;&#x7248;&#x672c;&#x53f7;&#x7684;minor&#x662f;&#x975e;0&#x7684;&#xff0c;&#x90a3;&#x4e48;&#x8be5;package&#x91cc;&#x9762;&#x7684;&#x6240;&#x6709;&#x7684;interface
    </p>
    <p>
      &#x53ea;&#x80fd;&#x6269;&#x5c55;&#x8be5;package&#x7684;&#x5148;&#x524d;&#x7248;&#x672c;&#x7684;&#x91cc;&#x9762;&#x7684;&#x5bf9;&#x5e94;&#x7684;interface.
    </p>
    <p>
      &#x6bd4;&#x5982;&#x4f4d;&#x4e8e;4.0&#x7248;&#x672c;&#x7684;package derivative&#x91cc;&#x9762;&#x7684;&#x63a5;&#x53e3;IBar, &#x6269;&#x5c55;&#x4f4d;&#x4e8e;&#x7248;&#x672c;1.2&#x7684;original&#x5305;&#x91cc;&#x9762;&#x7684;&#x63a5;&#x53e3;IFoo,
    </p>
    <p>
      &#x90a3;&#x4e48;&#x5f53;1.3&#x7248;&#x672c;&#x7684;&#x5305;original&#x88ab;&#x521b;&#x5efa;&#x51fa;&#x6765;&#x4e4b;&#x540e;&#xff0c;4.1&#x7248;&#x672c;&#x7684;IBar&#x662f;&#x4e0d;&#x80fd;&#x6269;&#x5c55;1.3&#x7248;&#x672c;&#x7684;IFoo&#x7684;&#xff0c;&#x5b83;&#x53ea;&#x80fd;&#x6269;&#x5c55;
    </p>
    <p>
      4.0&#x7248;&#x672c;&#x91cc;&#x9762;&#x7684;IBar&#x63a5;&#x53e3;&#x3002;
    </p>
    <p>
      5.0&#x7248;&#x672c;&#x7684;IBar&#x5219;&#x53ef;&#x4ee5;&#x4e4b;&#x9645;&#x6269;&#x5c55;1.3&#x7248;&#x672c;&#x7684;IFoo&#x63a5;&#x53e3;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1534819583030" FOLDED="true" ID="ID_609910735" MODIFIED="1566110159809">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>import&#x8bed;&#x53e5;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534819670195" ID="ID_1110136136" MODIFIED="1534820002233">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      import&#x8bed;&#x53e5;&#x662f;&#x4e00;&#x79cd;&#x673a;&#x5236;&#xff0c;&#x7528;&#x6765;&#x8bbf;&#x95ee;package interface&#x4ee5;&#x53ca;&#x4f4d;&#x4e8e;&#x4e00;&#x4e2a;package&#x91cc;&#x9762;&#x7684;type&#x5b9a;&#x4e49;&#xff0c;
    </p>
    <p>
      &#x4e00;&#x4e2a;import&#x8bed;&#x53e5;&#x8fde;&#x63a5;&#x4e86;&#x4e24;&#x4e2a;&#x5b9e;&#x4f53;&#xff0c;
    </p>
    <p>
      &#x4e00;&#x4e2a;&#x5b9e;&#x4f53;&#x662f;&#x4f7f;&#x7528;import&#x8bed;&#x53e5;&#x7684;&#x5b9e;&#x4f53;&#xff0c;&#x8be5;&#x5b9e;&#x4f53;&#x53ef;&#x4ee5;&#x662f;package&#x6216;&#x8005;&#x662f;interface
    </p>
    <p>
      &#x53e6;&#x4e00;&#x4e2a;&#x5b9e;&#x4f53;&#x662f;&#x88ab;import&#x8fdb;&#x6765;&#x7684;&#x5b9e;&#x4f53;&#xff0c;&#x8be5;&#x5b9e;&#x4f53;&#x4e5f;&#x53ef;&#x4ee5;&#x662f;package&#x6216;&#x8005;&#x662f;interface
    </p>
    <p>
      
    </p>
    <p>
      &#x5f53;import&#x8bed;&#x53e5;&#x662f;&#x4f4d;&#x4e8e;type.hal&#x6587;&#x4ef6;&#x5f53;&#x4e2d;&#xff0c;import&#x8fdb;&#x6765;&#x7684;&#x4e1c;&#x897f;&#x53ef;&#x4ee5;&#x88ab;&#x6574;&#x4e2a;package&#x770b;&#x5230;
    </p>
    <p>
      &#x5f53;import&#x8bed;&#x53e5;&#x4f4d;&#x4e8e;interface&#x5b9a;&#x4e49;&#x7684;&#x6587;&#x4ef6;&#x5f53;&#x4e2d;&#xff0c;&#x90a3;&#x4e48;&#x8fd9;&#x5c31;&#x662f;&#x4e00;&#x4e2a;interface&#x5c42;&#x9762;&#x7684;&#x4e1c;&#x897f;&#x4e86;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534820008528" ID="ID_1622706521" MODIFIED="1534820312143">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      import&#x8fdb;&#x6765;&#x7684;&#x5b9e;&#x4f53;&#x7684;&#x9009;&#x62e9;:
    </p>
    <p>
      &#x8ddf;&#x5728;import&#x8bed;&#x53e5;&#x540e;&#x9762;&#x7684;&#x5b9e;&#x4f53;&#x7684;&#x540d;&#x79f0;&#x53ef;&#x4ee5;&#x4e0d;&#x5fc5;&#x662f;fully-qualified&#x7684;&#x540d;&#x79f0;&#xff0c;
    </p>
    <p>
      &#x5982;&#x679c;&#x8be5;&#x540d;&#x79f0;&#x662f;&#x4e00;&#x4e2a;&#x7b80;&#x7565;&#x7684;&#x540d;&#x79f0;&#xff0c;&#x90a3;&#x4e48;&#x53ea;&#x5339;&#x914d;&#x5f53;&#x524d;package&#x91cc;&#x9762;&#x7684;&#x5b9e;&#x4f53;&#xff1b;
    </p>
    <p>
      &#x5982;&#x679c;&#x8be5;&#x540d;&#x79f0;&#x662f;&#x4e00;&#x4e2a;fully-qualified&#x7684;&#x540d;&#x79f0;&#xff0c;&#x90a3;&#x4e48;&#x9700;&#x8981;&#x6839;&#x636e;&#x4e0b;&#x9762;&#x7684;&#x89c4;&#x5219;&#x8fdb;&#x884c;&#x5339;&#x914d;&#x7684;&#x5de5;&#x4f5c;:
    </p>
    <ul>
      <li>
        <strong>Whole-package imports</strong>. If the value is a package name and a version (syntax described below), then the entire package is imported into the importing entity.
      </li>
      <li>
        <strong>Partial imports</strong>. If the value is:

        <ul>
          <li>
            An interface, the package's <code>types.hal</code>&#xa0;and that interface are imported into the importing entity.
          </li>
          <li>
            A UDT defined in <code>types.hal</code>, then only that UDT is imported into the importing entity (other types in <code>types.hal</code>&#xa0;are not imported).
          </li>
        </ul>
      </li>
      <li>
        <strong>Types-only imports</strong>. If the value uses the syntax of a partial import described above, but with the keyword <code>types</code>&#xa0;instead of an Interface name, only the UDTs in <code>types.hal</code>&#xa0;of the designated package are imported.
      </li>
    </ul>
  </body>
</html></richcontent>
</node>
<node CREATED="1534820376631" ID="ID_1848006740" MODIFIED="1534820418202">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <pre class="prettyprint"><font size="4"><b>&#x4e00;&#x4e9b;&#x4f8b;&#x5b50;&#x7684;&#x8bf4;&#x660e;</b></font>
import&#xa0;android.hardware.nfc@1.0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;// import a whole package<br/>import&#xa0;android.hardware.example@1.0::IQuux;&#xa0;// import an interface and types.hal<br/>import&#xa0;android.hardware.example@1.0::types;&#xa0;// import just types.ha</pre>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1534872359671" ID="ID_230820125" MODIFIED="1534872395340">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#ff0000"><b>vendor&#x6269;&#x5c55;</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534873555509" FOLDED="true" ID="ID_1341724371" MODIFIED="1566110162914">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b><i>Interface&#x7684;&#x5e03;&#x5c40;&#x603b;&#x7ed3;</i></b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534873628085" FOLDED="true" ID="ID_928796871" MODIFIED="1566110161728" TEXT="interface hashing">
<node CREATED="1534873752319" ID="ID_1923058597" MODIFIED="1534874152296">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5e03;&#x5c40;&#xff1a;
    </p>
    <p>
      &#x6bcf;&#x4e2a;&#x5305;&#x7684;&#x6839;&#x76ee;&#x5f55;&#xff0c;android.hardware&#x5bf9;&#x5e94;&#x4e8e;hardware/interfaces, vendor.foo&#x5bf9;&#x5e94;&#x4e8e;vendor/foo/hardware/interfaces
    </p>
    <p>
      &#x5fc5;&#x987b;&#x5305;&#x542b;&#x4e00;&#x4e2a;current.txt&#x6587;&#x4ef6;&#xff0c;&#x8be5;&#x6587;&#x4ef6;&#x91cc;&#x9762;&#x5305;&#x542b;&#x7740;&#x6240;&#x6709;&#x5df2;&#x7ecf;release&#x51fa;&#x6765;&#x7684;HIDL&#x7684;&#x63a5;&#x53e3;&#x6587;&#x4ef6;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534874156685" ID="ID_851577076" MODIFIED="1534877963475">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Hash with hidl-gen:
    </p>
    <p>
      &#x53ef;&#x4ee5;&#x624b;&#x52a8;&#x5411;current.txt&#x91cc;&#x9762;&#x6dfb;&#x52a0;&#x54c8;&#x5e0c;&#x503c;&#x6216;&#x8005;&#x901a;&#x8fc7;&#x5de5;&#x5177;hidl-gen&#x6765;&#x8fdb;&#x884c;&#x6dfb;&#x52a0;&#xff0c;
    </p>
    <p>
      &#x751f;&#x6210;hash&#x503c;&#x7684;&#x547d;&#x4ee4;:
    </p>
    <p>
      hidl-gen -L hash -r vendor.awesome:vendor/awesome/hardware/interfaces -r
    </p>
    <p>
      android.hardware:hardware/interfaces -r android.hidl:system/libhidl/transport vendor.awesome.nfc@1.0
    </p>
    <p>
      9626fd18...f9d298a6 vendor.awesome.nfc@1.0::types
    </p>
    <p>
      07ac2dc9...11e3cf57 vendor.awesome.nfc@1.0::INfc
    </p>
    <p>
      f2fe5442...72655de6 vendor.awesome.nfc@1.0::INfcClientCallback
    </p>
    <p>
      
    </p>
    <p>
      hidl-gen -L hash -r vendor.awesome:vendor/awesome/hardware/interfaces -r android.hardware:hardware/interfaces -r
    </p>
    <p>
      android.hidl:system/libhidl/transport vendor.awesome.nfc@1.0&#xa0; &gt;&gt; vendor/awesome/hardware/interfaces/current.txt
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534878206346" ID="ID_970612689" MODIFIED="1534878489288">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x6bcf;&#x4e2a;&#x7531;hidl-gen&#x4ea7;&#x751f;&#x7684;interface&#x5b9a;&#x4e49;&#x5e93;&#x90fd;&#x5305;&#x542b;&#x6709;&#x54c8;&#x5e0c;&#x503c;&#xff0c;&#x8be5;&#x54c8;&#x5e0c;&#x503c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x63a5;&#x53e3;
    </p>
    <p>
      IBase::getHashChain&#x83b7;&#x5f97;&#x3002;&#x5f53;hidl-gen&#x5728;&#x7f16;&#x8bd1;&#x63a5;&#x53e3;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x5b83;&#x4f1a;&#x9996;&#x5148;&#x67e5;&#x770b;&#x5305;&#x7684;&#x6839;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x7684;current.txt
    </p>
    <p>
      &#x6587;&#x4ef6;&#x6765;&#x68c0;&#x67e5;&#x5f53;&#x524d;&#x7684;interface&#x662f;&#x5426;&#x5df2;&#x7ecf;&#x88ab;&#x4fee;&#x6539;&#x3002;
    </p>
    <ol>
      <li>
        &#x5982;&#x679c;&#x6ca1;&#x6709;hash&#x503c;&#x88ab;&#x53d1;&#x73b0;&#xff0c;&#x90a3;&#x4e48;&#x7f16;&#x8bd1;&#x7ee7;&#x7eed;
      </li>
      <li>
        &#x5982;&#x679c;hash&#x88ab;&#x627e;&#x5230;&#xff0c;&#x90a3;&#x4e48;&#x4f1a;&#x5c06;hash&#x503c;&#x8ddf;&#x5f53;&#x524d;&#x7684;&#x63a5;&#x53e3;&#x8fdb;&#x884c;&#x6bd4;&#x5bf9;&#x3002;&#x5982;&#x679c;&#x6bd4;&#x5bf9;&#x7684;&#x7ed3;&#x679c;&#x662f;&#x6b63;&#x786e;&#x7684;&#xff0c;&#x90a3;&#x4e48;&#x7f16;&#x8bd1;&#x4f1a;&#x7ee7;&#x7eed;&#x8fdb;&#x884c;&#x3002;&#x5982;&#x679c;&#x6bd4;&#x5bf9;&#x7684;&#x7ed3;&#x679c;&#x662f;&#x4e0d;&#x6b63;&#x786e;&#x7684;&#xff0c;&#x8bf4;&#x660e;interface&#x88ab;&#x4fee;&#x6539;&#x8fc7;&#xff0c;&#x5bf9;&#x4e8e;ABI&#x5c42;&#x9762;&#x7684;&#x4fee;&#x6539;&#x5fc5;&#x987b;&#x5728;&#x7f16;&#x8bd1;&#x4e4b;&#x524d;&#x5bf9;current.txt&#x8fdb;&#x884c;&#x4fee;&#x6539;&#xff0c;&#x5982;&#x679c;&#x662f;&#x5176;&#x4ed6;&#x7684;&#x4fee;&#x6539;&#x90a3;&#x4e48;&#x5e94;&#x8be5;&#x5bf9;interface&#x7684;&#x7248;&#x672c;&#x8fdb;&#x884c;&#x5347;&#x7ea7;&#x4e86;&#x3002;
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1534879706330" FOLDED="true" ID="ID_855756407" MODIFIED="1572226019856">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>&#x670d;&#x52a1;&#x548c;&#x6570;&#x636e;&#x4f20;&#x8f93;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534879761767" ID="ID_1772700705" MODIFIED="1534879842794">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#3300ff">&#x8be5;&#x90e8;&#x5206;&#x4e3b;&#x8981;&#x63cf;&#x8ff0;&#x5982;&#x4f55;&#x53d1;&#x73b0;&#x548c;&#x6ce8;&#x518c;&#x670d;&#x52a1;&#xff0c;&#x4ee5;&#x53ca;&#x5982;&#x4f55;&#x901a;&#x8fc7;&#x5b9a;&#x4e49;&#x5728;.hal&#x6587;&#x4ef6;&#x91cc;&#x9762;&#x7684; </font>
    </p>
    <p>
      <font color="#3300ff">&#x63a5;&#x53e3;&#x5411;&#x670d;&#x52a1;&#x53d1;&#x9001;&#x6570;&#x636e;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534879902590" ID="ID_1924313945" MODIFIED="1534887559786">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#x6ce8;&#x518c;&#x670d;&#x52a1;:</b>
    </p>
    <p>
      HIDL&#x63a5;&#x53e3;&#x670d;&#x52a1;(&#x7528;&#x6765;&#x5b9e;&#x73b0;&#x63a5;&#x53e3;&#x7684;&#x5b9e;&#x4f53;)&#x53ef;&#x4ee5;&#x88ab;&#x6ce8;&#x518c;&#x6210;&#x4e3a;&#x6709;&#x540d;&#x79f0;&#x7684;&#x670d;&#x52a1;&#x3002;
    </p>
    <p>
      &#x6ce8;&#x518c;&#x7684;&#x540d;&#x79f0;&#x4e0d;&#x9700;&#x8981;&#x8ddf;&#x63a5;&#x53e3;&#x6216;&#x8005;&#x5305;&#x76f8;&#x5173;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x6307;&#x5b9a;&#x540d;&#x79f0;&#xff0c;&#x90a3;&#x4e48;"default"&#x5c31;&#x4f1a;&#x88ab;&#x4f7f;&#x7528;&#x3002;
    </p>
    <p>
      &#x63a5;&#x53e3;&#x6ce8;&#x518c;&#x6210;&#x670d;&#x52a1;&#x7684;&#x8303;&#x4f8b;&#x4ee3;&#x7801;&#x5982;&#x4e0b;:
    </p>
    <p>
      status_t status = myFoo-&gt;registerAsService();
    </p>
    <p>
      status_t anotherStatus = anotherFoo-&gt;registerAsService("another_foo_service");&#xa0;&#xa0;// <font color="#ff0033">if needed </font>
    </p>
    <p>
      
    </p>
    <p>
      &#x63a5;&#x53e3;&#x7684;&#x7248;&#x672c;&#x53f7;&#x5728;&#x6ce8;&#x518c;&#x7684;&#x65f6;&#x5019;&#x4e0d;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x6307;&#x5b9a;&#xff0c;&#x5df2;&#x7ecf;&#x9ed8;&#x8ba4;&#x5305;&#x542b;&#x5728;&#x4e86;&#x63a5;&#x53e3;&#x5f53;&#x4e2d;&#x4e86;&#xff0c;&#x83b7;&#x53d6;&#x63a5;&#x53e3;&#x7684;&#x7248;&#x672c;&#x53f7;&#x7684;
    </p>
    <p>
      &#x65b9;&#x6cd5;&#x5982;&#x4e0b;&#x6240;&#x793a;:
    </p>
    <p>
      android::hardware::IInterface::getInterfaceVersion()
    </p>
    <p>
      
    </p>
    <p>
      server object&#x4e0d;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x6ce8;&#x518c;&#xff0c;&#x5b83;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;HIDL&#x65b9;&#x6cd5;&#x91cc;&#x9762;&#x7684;&#x53c2;&#x6570;&#x4f20;&#x9012;&#x5230;&#x53e6;&#x5916;&#x7684;&#x8fdb;&#x7a0b;&#x5f53;&#x4e2d;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534887567692" ID="ID_1559147902" MODIFIED="1534892686403">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x53d1;&#x73b0;&#x670d;&#x52a1;:
    </p>
    <p>
      &#x7531;&#x5ba2;&#x6237;&#x4ee3;&#x7801;&#x53d1;&#x8d77;&#x7684;&#x8bf7;&#x6c42;&#x5305;&#x62ec;interface&#x7684;&#x540d;&#x79f0;&#x8ddf;&#x7248;&#x672c;&#x53f7;&#xff0c;&#x901a;&#x8fc7;&#x8c03;&#x7528;getService()&#x51fd;&#x6570;&#x83b7;&#x53d6;&#x670d;&#x52a1;
    </p>
    <p>
      &#x5b9e;&#x4f8b;&#x4ee3;&#x7801;&#x5982;&#x4e0b;:
    </p>
    // C++<br/>sp&lt;V1_1::IFooService&gt;&#xa0;service =&#xa0;V1_1::IFooService::getService();<br/>sp&lt;V1_1::IFooService&gt;&#xa0;alternateService =&#xa0;V1_1::IFooService::getService("another_foo_service");<br/>// Java<br/>V1_1.IFooService&#xa0;service =&#xa0;V1_1.IFooService.getService(true&#xa0;/* retry */);<br/>V1_1.IFooService&#xa0;alternateService =&#xa0;V1_1.IFooService.getService("another",&#xa0;true&#xa0;/* retry */);

    <p>
      &#x4e0d;&#x540c;&#x7684;&#x7248;&#x672c;&#x7684;interface&#x4f1a;&#x88ab;&#x5f53;&#x6210;&#x5206;&#x79bb;&#x5f00;&#x6765;&#x7684;interface&#x8fdb;&#x884c;&#x6ce8;&#x518c;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      Vendor Interface Object&#x5bf9;&#x4e8e;&#x8fd4;&#x56de;&#x7684;&#x63a5;&#x53e3;&#x91cc;&#x9762;&#x7684;&#x662f;&#x54ea;&#x4e9b;&#x4f20;&#x8f93;&#x65b9;&#x6cd5;&#x4e5f;&#x6709;&#x5f71;&#x54cd;&#xff0c;&#x6bd4;&#x5982;&#x4f4d;&#x4e8e;package android.hardware.foo@1.0
    </p>
    <p>
      &#x91cc;&#x9762;&#x7684;&#x63a5;&#x53e3;IFoo, &#x901a;&#x8fc7;&#x8c03;&#x7528;IFoo::getService&#x8fd4;&#x56de;&#x7684;&#x63a5;&#x53e3;&#x4f7f;&#x7528;&#x7684;&#x4f20;&#x8f93;&#x65b9;&#x6cd5;&#xff0c;&#x4f1a;&#x4f18;&#x5148;&#x4f7f;&#x7528;&#x5728;device manifest&#x91cc;&#x9762;&#x58f0;&#x660e;&#x7684;&#x4f4d;&#x4e8e;
    </p>
    <p>
      android.hardware.foo&#x91cc;&#x9762;&#x7684;&#x5165;&#x53e3;&#xff0c;&#x5982;&#x679c;&#x58f0;&#x660e;&#x7684;&#x5165;&#x53e3;&#x6ca1;&#x6709;&#x5bf9;&#x5e94;&#x7684;&#x4f20;&#x8f93;&#x65b9;&#x6cd5;&#xff0c;&#x90a3;&#x4e48;nullptr&#x5c31;&#x4f1a;&#x88ab;&#x8fd4;&#x56de;
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534892695788" ID="ID_1039243205" MODIFIED="1534893299645">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Service death notifications
    </p>
    <p>
      
    </p>
    <p>
      &#x5982;&#x679c;&#x5ba2;&#x6237;&#x7aef;&#x4ee3;&#x7801;&#x60f3;&#x5f97;&#x5230;framework&#x63a8;&#x9001;&#x7684;service died &#x901a;&#x77e5;&#xff0c;&#x5fc5;&#x987b;&#x505a;&#x5982;&#x4e0b;&#x7684;&#x52a8;&#x4f5c;:
    </p>
    <p>
      1.Subclass the HIDL class/interface hidl_death_recipient (in C++ code, not in HIDL).
    </p>
    <p>
      2.Override its serviceDied() method.
    </p>
    <p>
      3.Instantiate an object of the hidl_death_recipient subclass.
    </p>
    <p>
      4.Call the linkToDeath() method on the service to monitor, passing in the IDeathRecipient's interface object.
    </p>
    <p>
      Note that this method does not take ownership of the death recipient or the proxy on which it is called.
    </p>
    <p>
      &#x793a;&#x4f8b;&#x4ee3;&#x7801;&#x5982;&#x4e0b;:
    </p>
    class&#xa0;IMyDeathReceiver&#xa0;:&#xa0;hidl_death_recipient {<br/>&#xa0; virtual&#xa0; void&#xa0;serviceDied(uint64_t cookie,<br/>&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;wp&lt;IBase&gt;&amp;&#xa0; service)&#xa0;override&#xa0;{<br/>&#xa0;&#xa0;&#xa0;&#xa0;log("RIP service %d!",&#xa0;cookie);&#xa0;&#xa0;// Cookie should be 42<br/>&#xa0; }<br/>};<br/>....<br/>IMyDeathReceiver&#xa0; deathReceiver =&#xa0;new&#xa0;IMyDeathReceiver();<br/>m_importantService-&gt;linkToDeath(deathReceiver,&#xa0; 42);
  </body>
</html></richcontent>
</node>
<node CREATED="1534893820145" ID="ID_256923480" MODIFIED="1534900183052">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Data Transfer</b></font>
    </p>
    <p>
      data&#x53ef;&#x80fd;&#x4f1a;&#x901a;&#x8fc7;&#x5b9a;&#x4e49;&#x5728;&#x63a5;&#x53e3;&#x6587;&#x4ef6;.hal&#x91cc;&#x9762;&#x7684;&#x65b9;&#x6cd5;&#x4f20;&#x8f93;&#x7ed9;service, &#x6709;&#x4e24;&#x79cd;&#x7c7b;&#x578b;&#x7684;&#x65b9;&#x6cd5;:
    </p>
    <p>
      <font color="#ff0033">Blocking method</font>&#x4f1a;&#x7b49;&#x5f85;&#xff0c;&#x76f4;&#x5230;server&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x7ed3;&#x679c;
    </p>
    <p>
      <font color="#ff0033">Oneway method</font>&#x53ea;&#x5728;&#x4e00;&#x4e2a;&#x65b9;&#x5411;&#x53d1;&#x9001;&#x6570;&#x636e;&#x5e76;&#x4e14;&#x4e0d;&#x4f1a;block&#x4f4f;&#x3002;&#x5982;&#x679c;&#x53d1;&#x9001;&#x7684;&#x6570;&#x636e;&#x8d85;&#x8fc7;&#x4e86;&#x7f13;&#x5b58;&#x7684;&#x9650;&#x5236;&#xff0c;
    </p>
    <p>
      &#x8c03;&#x7528;&#x53ef;&#x80fd;&#x4f1a;&#x88ab;&#x963b;&#x585e;&#x4f4f;&#x6216;&#x8005;&#x4f1a;&#x8fd4;&#x56de;&#x4e00;&#x4e2a;&#x9519;&#x8bef;&#x7684;&#x6807;&#x8bc6;&#x7b26;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      &#x5982;&#x679c;&#x4e00;&#x4e2a;&#x65b9;&#x6cd5;&#x4e0d;&#x8fd4;&#x56de;&#x4efb;&#x4f55;&#x503c;&#x5e76;&#x4e14;&#x6ca1;&#x6709;&#x88ab;&#x58f0;&#x660e;&#x6210;Oneway, &#x90a3;&#x4e48;&#x8be5;&#x65b9;&#x6cd5;&#x4ecd;&#x7136;&#x662f;&#x963b;&#x585e;&#x5f0f;&#x7684;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      <font color="#ff0000">callback&#xff1a;callback&#x5206;&#x4e3a;&#x540c;&#x6b65;&#x56de;&#x8c03;&#x8ddf;&#x5f02;&#x6b65;&#x56de;&#x8c03;</font>
    </p>
    <p>
      &#x540c;&#x6b65;&#x56de;&#x8c03;&#x7528;&#x4e8e;&#x90a3;&#x4e9b;&#x4f1a;&#x8fd4;&#x56de;&#x590d;&#x6742;&#x6570;&#x636e;&#x7684;HIDL&#x65b9;&#x6cd5;&#x5f53;&#x4e2d;&#xff0c;&#x8be5;&#x56de;&#x8c03;&#x51fd;&#x6570;&#x662f;&#x6709;client&#x6765;&#x63d0;&#x4f9b;&#x7684;&#xff0c;&#x7528;&#x4e8e;&#x63d0;&#x4f9b;&#x6570;&#x636e;&#x7684;&#x4f20;&#x8f93;&#x3002;
    </p>
    <p>
      &#x5f02;&#x6b65;&#x56de;&#x8c03;&#x5141;&#x8bb8;HIDL&#x65b9;&#x6cd5;&#x7684;&#x670d;&#x52a1;&#x7aef;&#x4e5f;&#x53ef;&#x4ee5;&#x53d1;&#x8d77;&#x4e00;&#x4e2a;&#x8c03;&#x7528;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      Per-transaction limits
    </p>
    <p>
      
    </p>
    <p>
      Method implementations
    </p>
    <p>
      HIDL&#x4f1a;&#x751f;&#x6210;&#x5934;&#x6587;&#x4ef6;&#xff0c;&#x8be5;&#x6587;&#x4ef6;&#x91cc;&#x9762;&#x4f1a;&#x7528;&#x76ee;&#x6807;&#x8bed;&#x8a00;(c++/Java)&#x58f0;&#x660e;&#x5fc5;&#x8981;&#x7684;type, methods &#x548c; callbacks&#x3002;
    </p>
    <p>
      &#x5bf9;&#x4e8e;&#x5ba2;&#x6237;&#x7aef;&#x548c;&#x670d;&#x52a1;&#x7aef;&#x6765;&#x8bf4;&#xff0c;HIDL&#x5b9a;&#x4e49;&#x7684;&#x65b9;&#x6cd5;&#x539f;&#x578b;&#x90fd;&#x662f;&#x76f8;&#x540c;&#x7684;&#x3002;HIDL&#x5728;&#x8c03;&#x7528;&#x7aef;&#x4e3a;&#x8fdc;&#x7a0b;&#x65b9;&#x6cd5;&#x8c03;&#x7528;&#x7684;&#x4f20;&#x8f93;&#x63d0;&#x4f9b;&#x4e86;&#x4e00;&#x4e2a;proxy
    </p>
    <p>
      &#x7684;&#x5b9e;&#x73b0;&#xff0c;&#x5728;&#x88ab;&#x8c03;&#x7528;&#x7aef;&#x63d0;&#x4f9b;&#x4e86;&#x63a5;&#x6536;&#x7684;&#x5b9e;&#x73b0;&#x7528;&#x4e8e;&#x5c06;&#x65b9;&#x6cd5;&#x548c;&#x53c2;&#x6570;&#x4f20;&#x9012;&#x7ed9;&#x5b9e;&#x73b0;&#x65b9;&#x7684;&#x51fd;&#x6570;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      Non-RPC data transfer
    </p>
    <p>
      HIDL&#x5728;&#x4e0d;&#x4f7f;&#x7528;&#x8fdc;&#x7a0b;&#x8c03;&#x7528;&#x7684;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x6709;&#x4e24;&#x79cd;&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x5b9e;&#x73b0;&#x6570;&#x636e;&#x7684;&#x4f20;&#x8f93;&#xff0c;&#x5373;shared memory&#x548c;Fast Message Queue(FMQ),
    </p>
    <p>
      &#x8fd9;&#x4e24;&#x79cd;&#x65b9;&#x6cd5;&#x90fd;&#x53ea;&#x652f;&#x6301;c++
    </p>
  </body>
</html></richcontent>
<node CREATED="1534897244302" ID="ID_805994043" MODIFIED="1534897571958">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Fast Message Queue (FMQ)
    </p>
    <p>
      HIDL&#x5728;&#x4f7f;&#x7528;&#x8fdc;&#x7a0b;&#x8c03;&#x7528;&#x7684;&#x65f6;&#x5019;&#x7cfb;&#x7edf;&#x7684;&#x5f00;&#x9500;&#x4f1a;&#x6bd4;&#x8f83;&#x5927;&#xff0c;&#x6240;&#x4ee5;&#x8fd9;&#x91cc;&#x5f15;&#x8fdb;&#x4e86;FMQ&#x7cfb;&#x7edf;&#x6765;&#x964d;&#x4f4e;&#x7cfb;&#x7edf;&#x7684;&#x5f00;&#x9500;&#x3002;
    </p>
    <p>
      FMQ&#x7528;&#x9700;&#x6c42;&#x7684;&#x5c5e;&#x6027;&#x6765;&#x521b;&#x5efa;&#x6d88;&#x606f;&#x961f;&#x5217;&#xff0c;MQDescriptorSync &#x6216;&#x8005; MQDescriptorUnsync&#x5b9e;&#x4f53;&#x4f1a;&#x901a;&#x8fc7;
    </p>
    <p>
      HIDL&#x7684;&#x8fdc;&#x7a0b;&#x8c03;&#x7528;&#x6765;&#x4f20;&#x9012;&#x7ed9;&#x53e6;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#xff0c;&#x8fd9;&#x6837;&#x53e6;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#x5c31;&#x53ef;&#x4ee5;&#x8bbf;&#x95ee;&#x6d88;&#x606f;&#x961f;&#x5217;&#x4e86;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      &#x6d88;&#x606f;&#x961f;&#x5217;&#x6709;&#x4e24;&#x79cd;&#x7c7b;&#x578b;:
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1534899668941" ID="ID_492774086" MODIFIED="1534899697537">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>HIDL Memory Block</b></font>
    </p>
    <p>
      
    </p>
    <p>
      &#x6709;&#x7a7a;&#x518d;&#x770b;&#x3002;&#x3002;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534900290583" ID="ID_1190827014" MODIFIED="1534900310943">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>&#x7ebf;&#x7a0b;&#x6a21;&#x578b;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534900939506" FOLDED="true" ID="ID_1325269962" MODIFIED="1566110164006">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#ff0033">Server&#x7aef;&#x7684;&#x7ebf;&#x7a0b;&#x6a21;&#x578b;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534900980363" ID="ID_852114959" MODIFIED="1534901438442">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x9664;&#x4e86;passthrouth&#x6a21;&#x5f0f;&#xff0c; &#x7528;&#x4e8e;&#x5b9e;&#x73b0;HIDL&#x63a5;&#x53e3;&#x7684;server&#x7aef;&#x662f;&#x4f4d;&#x4e8e;&#x4e0d;&#x540c;&#x7684;&#x8fdb;&#x7a0b;&#x5f53;&#x4e2d;&#x7684;&#x3002;
    </p>
    <p>
      &#x670d;&#x52a1;&#x7aef;&#x7684;&#x8fdb;&#x7a0b;&#x91cc;&#x9762;&#x53ef;&#x80fd;&#x4f1a;&#x6709;&#x4e00;&#x4e2a;&#x6216;&#x8005;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;&#x7528;&#x6765;&#x5904;&#x7406;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#x65b9;&#x6cd5;&#x8c03;&#x7528;&#x3002;
    </p>
    <p>
      &#x8fd9;&#x4e9b;&#x7ebf;&#x7a0b;&#x90fd;&#x662f;&#x4f4d;&#x4e8e;&#x670d;&#x52a1;&#x7aef;&#x7684;&#x7ebf;&#x7a0b;&#x6c60;&#x91cc;&#x9762;&#x7684;&#x3002;&#x670d;&#x52a1;&#x7aef;&#x53ef;&#x4ee5;&#x51b3;&#x5b9a;&#x7ebf;&#x7a0b;&#x6c60;&#x91cc;&#x9762;&#x7684;&#x7ebf;&#x7a0b;&#x7684;&#x6570;&#x91cf;&#xff0c;
    </p>
    <p>
      &#x5982;&#x679c;&#x7ebf;&#x7a0b;&#x6c60;&#x91cc;&#x9762;&#x53ea;&#x6709;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#xff0c;&#x90a3;&#x4e48;&#x670d;&#x52a1;&#x7aef;&#x4f1a;&#x987a;&#x5e8f;&#x6267;&#x884c;&#x5ba2;&#x6237;&#x7aef;&#x7684;&#x65b9;&#x6cd5;&#x8c03;&#x7528;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1534901572598" ID="ID_1109009668" MODIFIED="1572226024633">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#0033ff"><b>&#x5c06;&#x4f20;&#x7edf;&#x7684;HAL&#x6a21;&#x5757;&#x8f6c;&#x6362;&#x6210;hidl&#x6a21;&#x5f0f;&#x7684;hal&#x6a21;&#x5757;&#x7684;&#x65b9;&#x6cd5;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534905285722" ID="ID_282153012" MODIFIED="1534905413693">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x8f6c;&#x6362;&#x65e7;&#x7684;hal&#x5c42;&#x7684;&#x5934;&#x6587;&#x4ef6;: hardware/libhardware/include/hardware, &#x4f7f;&#x7528;c2hal&#x5de5;&#x5177;
    </p>
    <code class="devsite-terminal"><font size="4"><b>make c2hal</b></font></code><font size="4"><b>&#xa0;</b></font> <i>c2hal -r android.hardware:hardware/interfaces -randroid.hidl:system/libhidl/transport -p android.hardware.nfc@1.0 &#xa0;&#xa0;&#xa0;&#xa0;hardware/libhardware/include/hardware/nfc.h</i>
  </body>
</html></richcontent>
</node>
<node CREATED="1534905744596" ID="ID_1730855325" MODIFIED="1534906006585">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      implementing the hal
    </p>
    <p>
      
    </p>
    <p>
      &#x521b;&#x5efa;&#x4e86;.hal&#x6587;&#x4ef6;&#x4e4b;&#x540e;&#xff0c;&#x5fc5;&#x987b;&#x521b;&#x5efa;makefile&#x6587;&#x4ef6;&#xff0c;&#x6587;&#x4ef6;./hardware/interfaces/update-makefiles.sh
    </p>
    <p>
      &#x53ef;&#x4ee5;&#x4e3a;&#x4f4d;&#x4e8e;
    </p>
    <p>
      <code>hardware/interfaces &#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x7684;hal&#x6587;&#x4ef6;&#x81ea;&#x52a8;&#x4ea7;&#x751f;makefile&#x6587;&#x4ef6;&#xff0c; </code>
    </p>
    <p>
      &#x5f53;makefile&#x5b8c;&#x5907;&#x4e4b;&#x540e;&#xff0c;&#x5c31;&#x53ef;&#x4ee5;&#x7740;&#x624b;&#x751f;&#x6210;&#x5934;&#x6587;&#x4ef6;&#x4e86;&#xff0c;&#x5e76;&#x7528;c++&#x6216;&#x8005;java&#x6765;&#x5b9e;&#x73b0;&#x5bf9;&#x5e94;&#x7684;&#x63a5;&#x53e3;&#x4e86;
    </p>
  </body>
</html></richcontent>
<node CREATED="1534906213575" ID="ID_1430120961" MODIFIED="1534906248938">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#9900ff"><b>HIDL C++</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1534906285565" ID="ID_1664254107" MODIFIED="1534907374716">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x8be5;&#x90e8;&#x5206;&#x63cf;&#x8ff0;&#x4e86;c++&#x5b9e;&#x73b0;&#x4e0b;&#x7684;hidl interface&#x3002;
    </p>
    <p>
      &#x5305;&#x62ec;&#x5229;&#x7528;hidl-gen&#x7f16;&#x8bd1;&#x5668;&#x901a;&#x8fc7;.hal&#x6587;&#x4ef6;&#x751f;&#x6210;&#x7684;&#x6587;&#x4ef6;&#x7684;&#x63cf;&#x8ff0;&#xff0c;
    </p>
    <p>
      &#x8fd9;&#x4e9b;&#x6587;&#x4ef6;&#x5982;&#x4f55;&#x88ab;&#x6253;&#x5305;&#xff0c;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534988989246" ID="ID_312304733" MODIFIED="1534989006220">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/treble_cpp_legacy_hal_progression.png"/>
  </body>
</html></richcontent>
<node CREATED="1535093358311" ID="ID_1571936114" MODIFIED="1535094224082">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Passthrough &#x6a21;&#x5f0f;&#x7684;&#x5934;&#x6587;&#x4ef6;</i></b>
    </p>
    <p>
      
    </p>
    <p>
      &#x5047;&#x8bbe;&#x5f53;&#x524d;&#x7684;&#x63a5;&#x53e3;&#x540d;&#x79f0;&#x53eb;&#x505a;Foo, &#x5f53;&#x8be5;&#x63a5;&#x53e3;&#x7684;.hal&#x6587;&#x4ef6;&#x88ab;&#x7f16;&#x8bd1;&#xff0c;hidl-gen&#x9664;&#x4e86;&#x4ea7;&#x751f;&#x7528;&#x4e8e;binder&#x901a;&#x4fe1;&#x7684;&#x5934;&#x6587;&#x4ef6;&#x8fd8;&#x4f1a;&#x4ea7;&#x751f;&#x989d;&#x5916;&#x7684;
    </p>
    <p>
      passthrough&#x5934;&#x6587;&#x4ef6;BsFoo.h,&#xa0; &#x8be5;&#x6587;&#x4ef6;&#x5b9a;&#x4e49;&#x4e86;&#x53ef;&#x4ee5;&#x88ab;dlopen&#x7684;&#x51fd;&#x6570;&#x3002;&#x56e0;&#x4e3a;passthrough hal&#x8ddf;&#x8c03;&#x7528;&#x8005;&#x662f;&#x8fd0;&#x884c;&#x5728;&#x540c;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#x5f53;&#x4e2d;&#x7684;&#xff0c;
    </p>
    <p>
      hal&#x91cc;&#x9762;&#x7684;&#x5927;&#x90e8;&#x5206;&#x51fd;&#x6570;&#x53ef;&#x4ee5;&#x88ab;&#x76f4;&#x63a5;&#x8c03;&#x7528;&#x3002;oneway&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x5728;&#x4e00;&#x4e2a;&#x5355;&#x72ec;&#x7684;&#x7ebf;&#x7a0b;&#x91cc;&#x9762;&#x8fd0;&#x884c;&#xff0c;&#x8fd9;&#x610f;&#x5473;&#x7740;&#x8be5;&#x65b9;&#x6cd5;&#x5fc5;&#x987b;&#x662f;&#x7ebf;&#x7a0b;&#x5b89;&#x5168;&#x7684;&#x3002;
    </p>
    <p>
      BsFoo.h&#x4f1a;&#x5c06;hidl&#x4ea7;&#x751f;&#x7684;&#x65b9;&#x6cd5;&#x505a;&#x4e00;&#x5c42;&#x5c01;&#x88c5;&#x7528;&#x4ee5;&#x63d0;&#x4f9b;&#x5176;&#x4ed6;&#x7684;&#x4e00;&#x4e9b;&#x7279;&#x6027;(&#x6bd4;&#x5982;&#x8ba9;oneway&#x65b9;&#x6cd5;&#x8fd0;&#x884c;&#x5728;&#x53e6;&#x4e00;&#x4e2a;&#x7ebf;&#x7a0b;&#x5f53;&#x4e2d;)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1535094232680" ID="ID_1066307313" MODIFIED="1535102731150">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Binderizing passthrouth HALs</b>
    </p>
    <p>
      
    </p>
    <p>
      &#x4f60;&#x53ef;&#x4ee5;binder&#x5316;&#x4e00;&#x4e2a;&#x652f;&#x6301;passthrough&#x6a21;&#x5f0f;&#x7684;hal&#x5b9e;&#x73b0;&#xff0c;&#x6bd4;&#x5982;&#x6709;&#x4e00;&#x4e2a;&#x63a5;&#x53e3;a..b.c.d@M.N::IFoo, &#x6709;&#x4e24;&#x4e2a;&#x5305;&#x4f1a;&#x88ab;
    </p>
    <p>
      &#x521b;&#x5efa;:
    </p>
    <p>
      <b>a.b.c.d@M.N::IFoo-impl</b>(&#x5bf9;&#x4e8e;camera provider&#x6765;&#x8bf4;&#x5c31;&#x662f;android.hardware.camera.provider@2.4-impl)&#xff0c;&#x8fd9;&#x4e2a;&#x5305;&#x91cc;&#x9762;
    </p>
    <p>
      &#x5305;&#x542b;&#x4e86;hal&#x5c42;&#x7684;&#x5b9e;&#x73b0;&#x4ee5;&#x53ca;&#x4e00;&#x4e2a;&#x66b4;&#x9732;&#x7ed9;&#x5916;&#x754c;&#x7684;&#x63a5;&#x53e3;&#x51fd;&#x6570;IFoo* HIDL_FETCH_IFoo(const char* name)&#x3010;&#x5bf9;&#x4e8e;camera provider&#x6765;&#x8bf4;
    </p>
    <p>
      &#x5c31;&#x662f;ICameraProvider* HIDL_FETCH_ICameraProvider(const char* name)&#x3011;&#x5728;legacy&#x8bbe;&#x5907;&#x4e0a;&#xff0c;&#x8be5;&#x5305;&#x662f;&#x76f4;&#x63a5;&#x901a;&#x8fc7;dlopen&#x6253;&#x5f00;&#x7684;&#xff0c;
    </p>
    <p>
      &#x5e76;&#x4e14;&#x901a;&#x8fc7;HIDL_FETCH_IFoo&#x6765;&#x5b9e;&#x4f8b;&#x5316;(HIDL_FETCH_ICameraProvider&#x5c31;&#x662f;&#x76f4;&#x63a5;new&#x4e86;&#x4e00;&#x4e2a;CameraProvider)
    </p>
    <p>
      
    </p>
    <p>
      <b>a.b.c.d@M.N::IFoo-service</b>(android.hardware.camera.provider@2.4-service) &#x8be5;&#x5305;&#x7684;&#x4f5c;&#x7528;&#x5c31;&#x662f;&#x6253;&#x5f00;&#x4e0a;&#x9762;&#x6240;&#x8bf4;&#x7684;passthrough&#x6a21;&#x5f0f;&#x7684;
    </p>
    <p>
      hal&#xff0c;&#x5e76;&#x4e14;&#x5c06;&#x5176;&#x6ce8;&#x518c;&#x6210;&#x4e00;&#x4e2a;binder&#x670d;&#x52a1;&#xff0c; &#x8fd9;&#x6837;&#x8be5;hal&#x7684;&#x5b9e;&#x73b0;&#x5c31;&#x53ef;&#x4ee5;&#x88ab;&#x5f53;&#x505a;passthrough&#x6a21;&#x5f0f;&#x4f7f;&#x7528;&#xff0c;&#x4e5f;&#x53ef;&#x4ee5;&#x4f5c;&#x4e3a;binder service&#x6765;&#x4f7f;&#x7528;&#x4e86;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      &#x901a;&#x8fc7;&#x8c03;&#x7528;sp&lt;IFoo&gt; IFoo::getService(string name, bool getStub)&#x5c31;&#x53ef;&#x4ee5;&#x83b7;&#x53d6;IFoo&#x7684;&#x5b9e;&#x4f8b;&#xff0c;&#x5728;CameraProviderManager&#x91cc;&#x9762;&#x5c31;&#x662f;&#x8c03;&#x7528;
    </p>
    <p>
      CameraProvider::getService&#x6765;&#x83b7;&#x53d6;&#x5f53;&#x524d;&#x7684;camera provider&#x5b9e;&#x4f8b;&#x7684;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1534989251665" ID="ID_175406384" MODIFIED="1534989262847" TEXT="OverVIew">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1534989267282" ID="ID_1989230039" MODIFIED="1534990274999">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Create the hal client
    </p>
    <p>
      
    </p>
    <p>
      a. &#x5c06;hal&#x5c42;&#x7684;&#x5e93;&#x5305;&#x542b;&#x5728;makefile&#x5f53;&#x4e2d;, &#x4e24;&#x79cd;&#x5199;&#x6cd5;
    </p>
    <p>
      Make: LOCAL_SHARED_LIBRARIES += android.hardware.nfc@1.0
    </p>
    <p>
      Soong: shared_libs: [ &#x2026;, android.hardware.nfc@1.0 ]
    </p>
    <p>
      
    </p>
    <p>
      b.&#x5728;&#x5b9e;&#x73b0;&#x7684;&#x6587;&#x4ef6;&#x5f53;&#x4e2d;&#x5305;&#x542b;hal&#x5c42;&#x7684;&#x5934;&#x6587;&#x4ef6;
    </p>
    <p>
      #include &lt;android/hardware/nfc/1.0/IFoo.h&gt;
    </p>
    <p>
      &#x2026;
    </p>
    <p>
      // in code:
    </p>
    <p>
      sp&lt;IFoo&gt; client = IFoo::getService();
    </p>
    <p>
      client-&gt;doThing();
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534990279560" ID="ID_1834170861" MODIFIED="1574056870885">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x521b;&#x5efa;&#x670d;&#x52a1;&#x7aef;
    </p>
    <p>
      
    </p>
    <p>
      a. &#x4e3a;&#x4e86;&#x521b;&#x5efa;&#x670d;&#x52a1;&#x7aef;&#xff0c;&#x5fc5;&#x987b;&#x62e5;&#x6709;&#x4ee3;&#x8868;hal&#x5c42;&#x7684;.hal&#x6587;&#x4ef6;&#xff0c;&#x800c;&#x4e14;&#x8981;&#x5229;&#x7528;hidl-gen&#x6765;&#x751f;&#x6210;hal&#x5c42;&#x7684;makefile&#x6587;&#x4ef6;(&#x4f7f;&#x7528;-Lmakefile &#x6216;&#x8005; -Landroidbp&#x547d;&#x4ee4;
    </p>
    <p>
      ,./hardware/interfaces/update-makefiles.sh&#x91cc;&#x9762;&#x5c31;&#x6709;&#x4f7f;&#x7528;&#x7684;&#x8303;&#x4f8b;&#xff0c;&#x53ef;&#x4ee5;&#x53c2;&#x8003;&#x4e00;&#x4e0b;)
    </p>
    <p>
      &#x4f7f;&#x7528;c2hal&#x5de5;&#x5177;&#x53ef;&#x4ee5;&#x5c06;&#x4f20;&#x7edf;&#x7684;hal&#x5c42;&#x7684;&#x5934;&#x6587;&#x4ef6;&#x8f6c;&#x6362;&#x6210;.hal&#x7684;&#x6587;&#x4ef6;
    </p>
    <p>
      &#x4e0b;&#x9762;&#x662f;&#x4e00;&#x4e2a;&#x8f6c;&#x6362;makefile&#x6587;&#x4ef6;&#x7684;&#x4f7f;&#x7528;&#x8303;&#x4f8b;
    </p>
    <p>
      <i><font size="4">PACKAGE=android.hardware.nfc@1.0 </font></i>
    </p>
    <p>
      <i><font size="4">LOC=hardware/interfaces/nfc/1.0/default/ </font></i>
    </p>
    <p>
      <i><font size="4">m -j hidl-gen </font></i>
    </p>
    <p>
      <i><font size="4">hidl-gen -o $LOC -Lc++-impl -randroid.hardware:hardware/interfaces \ </font></i>
    </p>
    <p>
      <i><font size="4">&#xa0;&#xa0;&#xa0;&#xa0;-randroid.hidl:system/libhidl/transport $PACKAGE </font></i>
    </p>
    <p>
      <i><font size="4">hidl-gen -o $LOC -Landroidbp-impl -randroid.hardware:hardware/interfaces \ </font></i>
    </p>
    <p>
      <i><font size="4">&#xa0;&#xa0;&#xa0;&#xa0;-randroid.hidl:system/libhidl/transport $PACKAGE </font></i>
    </p>
    <p>
      
    </p>
    <p>
      <i><font size="4">hidl-gen -o $LOC -Ljava&#xa0;-randroid.hardware:hardware/interfaces&#xa0; -randroid.hidl:system/libhidl/transport $PACKAGE </font></i>
    </p>
    <p>
      
    </p>
    <p>
      <i><font size="4">b.&#x5c06;&#x670d;&#x52a1;&#x7aef;&#x6ce8;&#x518c; </font></i>
    </p>
    <p>
      <i><font size="4">#include &lt;hidl/LegacySupport.h&gt; </font></i>
    </p>
    <p>
      <i><font size="4">int main(int /* argc */, char* /* argv */ []) { </font></i>
    </p>
    <p>
      <i><font size="4">&#xa0;&#xa0;&#xa0;&#xa0;return defaultPassthroughServiceImplementation&lt;INfc&gt;("nfc"); </font></i>
    </p>
    <p>
      <i><font size="4">}</font></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1535332772473" ID="ID_964896449" MODIFIED="1535332796947">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>&#x914d;&#x7f6e;sepolicy</b></font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1535332852354" ID="ID_981245756" MODIFIED="1535332887314">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#e42323"><b>Packages</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1535332977179" ID="ID_1672950939" MODIFIED="1535333367169">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x9664;&#x4e86;&#x6781;&#x5c11;&#x7684;&#x4f8b;&#x5916;&#xff0c; hidl&#x4ea7;&#x751f;&#x7684;&#x5305;&#x4f4d;&#x4e8e;&#x76ee;&#x5f55;hardware/interfaces&#x4e0b;&#x9762;&#x6216;&#x8005;&#x662f;vendor/&#x76ee;&#x5f55;&#x4e0b;&#x9762;
    </p>
    <p>
      hardware/interfaces&#x5bf9;&#x5e94;&#x4e8e;android.hardware&#x547d;&#x540d;&#x7a7a;&#x95f4;
    </p>
    <p>
      hidl-gen&#x5c06;.hal&#x6587;&#x4ef6;&#x7f16;&#x8bd1;&#x6210;&#x4e00;&#x7cfb;&#x5217;&#x7684;.h&#x548c;.cpp&#x6587;&#x4ef6;&#xff0c;&#x5ba2;&#x6237;&#x7aef;&#x548c;&#x670d;&#x52a1;&#x7aef;&#x90fd;&#x4f1a;&#x94fe;&#x63a5;&#x7531;&#x8fd9;&#x4e9b;.h&#x548c;.cpp&#x5f62;&#x6210;&#x7684;&#x5305;&#x3002;
    </p>
    <p>
      &#x6784;&#x5efa;&#x8be5;&#x5171;&#x4eab;&#x5e93;&#x7684;&#x6587;&#x4ef6;Android.bp&#x662f;&#x7531;&#x811a;&#x672c;hardware/interfaces/update-makefiles.sh&#x4ea7;&#x751f;&#x7684;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1535333632276" ID="ID_849877538" MODIFIED="1535333659274">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/treble_cpp_compiler_generated_files.png"/>
  </body>
</html></richcontent>
<node CREATED="1562650185340" ID="ID_410825469" MODIFIED="1562650351681">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FooAll.cpp &#x5305;&#x542b; HwBinder &#x4ee3;&#x7406;&#x548c; HwBinder&#x5b58;&#x6839;&#x7684;&#x5b9e;&#x73b0;&#x7684;&#x7c7b;&#x3002;&#x5f53;&#x5ba2;&#x6237;&#x7aef;&#x8c03;&#x7528;&#x63a5;&#x53e3;&#x65b9;&#x6cd5;&#x65f6;&#xff0c;
    </p>
    <p>
      &#x4ee3;&#x7406;&#x4f1a;&#x81ea;&#x52a8;&#x4ece;&#x5ba2;&#x6237;&#x7aef;&#x5c01;&#x9001;&#x53c2;&#x6570;&#xff0c;&#x5e76;&#x5c06;&#x4e8b;&#x52a1;&#x53d1;&#x9001;&#x5230;&#x7ed1;&#x5b9a;&#x5185;&#x6838;&#x9a71;&#x52a8;&#x7a0b;&#x5e8f;&#xff0c;&#x8be5;&#x5185;&#x6838;&#x9a71;&#x52a8;&#x7a0b;&#x5e8f;
    </p>
    <p>
      &#x4f1a;&#x5c06;&#x4e8b;&#x52a1;&#x4f20;&#x9001;&#x5230;&#x53e6;&#x4e00;&#x7aef;&#x7684;&#x5b58;&#x6839;&#xff08;&#x8be5;&#x5b58;&#x6839;&#x968f;&#x540e;&#x8c03;&#x7528;&#x5b9e;&#x9645;&#x7684;&#x670d;&#x52a1;&#x5668;&#x5b9e;&#x73b0;&#xff09;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1535337111390" ID="ID_1947008732" MODIFIED="1535337137958">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Interfaces</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1535337145478" ID="ID_1971442744" MODIFIED="1535337167335">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Data Types</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1535337174702" ID="ID_1806955038" MODIFIED="1535337198387">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Functions</b></font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1572227434542" ID="ID_1848744393" MODIFIED="1572227458953">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#0000ff"><b>HIDL JAVA</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1562641412415" ID="ID_1168268494" MODIFIED="1572226510322">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">HIDL &#x6587;&#x4ef6;&#x7684;&#x7f16;&#x8bd1;</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1562641581282" ID="ID_506375662" MODIFIED="1562641870382">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5728;&#x5bf9;&#x5e94;&#x7684;hidl&#x6587;&#x4ef6;&#x7684;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x6267;&#x884c;mm&#x547d;&#x4ee4;&#xff0c;&#x6216;&#x8005;&#x5728;&#x6839;&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x6267;&#x884c;
    </p>
    <p>
      make PQName, &#x5728;<b>out/soong/.interfaces/hardware/interfaces</b>&#x4e0b;&#x751f;&#x6210;&#x5bf9;&#x5e94;&#x7684;&#x6a21;&#x5757;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1535337818557" ID="ID_472946994" MODIFIED="1535337854183" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#0c26e7"><b>ConfigStore HAL</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534888567661" FOLDED="true" ID="ID_1436064826" MODIFIED="1543386502226" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Vendor Interface Object(VINTF object)</b></font>
    </p>
    <p>
      &#x7528;&#x4e8e;&#x805a;&#x5408;&#x8bbe;&#x5907;&#x7684;&#x76f8;&#x5173;&#x4fe1;&#x606f;&#xff0c;&#x5e76;&#x63d0;&#x4f9b;&#x76f8;&#x5173;&#x7684;api&#x6765;&#x4f9b;&#x7b2c;&#x4e09;&#x65b9;&#x8fdb;&#x884c;&#x67e5;&#x8be2;
    </p>
  </body>
</html></richcontent>
<node CREATED="1534889480816" ID="ID_1467867287" MODIFIED="1534889518980">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="camera/treble_vintf_mm.png"/>
  </body>
</html></richcontent>
</node>
<node CREATED="1534889605380" ID="ID_1904382881" MODIFIED="1534890476669">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Manifests&#x548c;matrices</b>
    </p>
    <p>
      
    </p>
    <p>
      &#x5bf9;&#x4e8e;android8.0&#x6765;&#x8bf4;&#xff0c;&#x6709;&#x4e00;&#x4e2a;&#x8fd0;&#x884c;&#x65f6;&#x7684;api&#x53ef;&#x4ee5;&#x7528;&#x6765;&#x54a8;&#x8be2;&#x8bbe;&#x5907;&#x7684;&#x80fd;&#x529b;&#xff0c;&#x5e76;&#x5c06;&#x8fd9;&#x4e9b;&#x4fe1;&#x606f;
    </p>
    <p>
      &#x53d1;&#x9001;&#x7ed9;OTA&#x66f4;&#x65b0;&#x670d;&#x52a1;&#x5668;&#x6216;&#x8005;&#x662f;&#x5176;&#x4ed6;&#x6709;&#x5174;&#x8da3;&#x7684;&#x7b2c;&#x4e09;&#x65b9;(CTS)&#x3002;&#x6709;&#x4e9b;&#x4fe1;&#x606f;&#x662f;&#x8fd0;&#x884c;&#x65f6;&#x83b7;&#x53d6;&#x7684;&#xff0c;&#x6709;&#x4e9b;&#x5219;&#x662f;&#x9759;&#x6001;&#x5b9a;&#x4e49;&#x7684;&#x3002;
    </p>
    <p>
      device manifest&#x5b9a;&#x4e49;&#x4e86;&#x8bbe;&#x5907;&#x53ef;&#x4ee5;&#x63d0;&#x4f9b;&#x7ed9;framework&#x7684;&#x9759;&#x6001;&#x7ec4;&#x4ef6;
    </p>
    <p>
      framework compatibility matrix&#x5219;&#x5b9a;&#x4e49;&#x4e86;framework&#x671f;&#x671b;&#x8bbe;&#x5907;&#x63d0;&#x4f9b;&#x7684;&#x7ec4;&#x4ef6;
    </p>
    <p>
      framework manifest&#x63cf;&#x8ff0;&#x4e86;framework&#x53ef;&#x4ee5;&#x63d0;&#x4f9b;&#x7ed9;device&#x7684;&#x9ad8;&#x5c42;&#x670d;&#x52a1;
    </p>
    <p>
      device compatibility matrix&#x63cf;&#x8ff0;&#x4e86;device&#x5e0c;&#x671b;&#x4ece;framework&#x83b7;&#x53d6;&#x7684;&#x670d;&#x52a1;
    </p>
    <p>
      
    </p>
    <p>
      &#x7b80;&#x800c;&#x8a00;&#x4e4b;manifest&#x548c;matrix&#x63cf;&#x8ff0;&#x4e86;&#x63d0;&#x4f9b;&#x4ec0;&#x4e48;&#x548c;&#x9700;&#x8981;&#x4ec0;&#x4e48;
    </p>
  </body>
</html></richcontent>
<node CREATED="1534890582888" ID="ID_879198928" MODIFIED="1543386497733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      manifest
    </p>
    <p>
      VINTF object&#x4ece;device manifest&#x548c;framework manifest&#x5f53;&#x4e2d;&#x83b7;&#x53d6;&#x4fe1;&#x606f;&#xff0c;&#x5728;&#x8fd0;&#x884c;&#x65f6;&#x4ece;&#x8bbe;&#x5907;&#x5f53;&#x4e2d;&#x83b7;&#x53d6;&#x4fe1;&#x606f;&#x3002;
    </p>
    <p>
      device manifest&#x548c;framework manifest&#x5206;&#x4eab;&#x76f8;&#x540c;&#x7684;xml&#x683c;&#x5f0f;&#x3002;
    </p>
    <p>
      
    </p>
    <p>
      device manifest&#x7531;vendor manifest&#x548c;ODM manifest&#x7ec4;&#x6210;&#xff1a;
    </p>
    <p>
      <font color="#ff0033">vendor manifest&#x6307;&#x5b9a;HALs,VNDK&#x7b49;soc&#x901a;&#x7528;&#x7684;&#x7248;&#x672c;</font>&#xff0c;&#x901a;&#x5e38;&#x5efa;&#x8bae;&#x653e;&#x7f6e;&#x5728;&#x76ee;&#x5f55;
    </p>
    <p>
      device/${VENDOR}/${DEVICE}/manifest.xml&#x4e0b;&#x9762;&#x3002;ODM manifest&#x4f1a;&#x8986;&#x76d6;&#x6389;vendor manifest,
    </p>
    <p>
      &#x5e76;&#x4e14;&#x4f1a;&#x88ab;&#x5f53;&#x524d;&#x7684;&#x4ea7;&#x54c1;&#x6307;&#x5b9a;&#x5177;&#x4f53;&#x7684;HALs.
    </p>
    <p>
      
    </p>
    <p>
      framework manifest(&#x7531;google&#x63d0;&#x4f9b;)&#x88ab;&#x653e;&#x7f6e;&#x5728;&#x6e90;&#x4ee3;&#x7801;&#x7684;&#x76ee;&#x5f55;/system/libhidl/manifest.xml&#x5f53;&#x4e2d;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1534891294009" ID="ID_289006845" MODIFIED="1534891511293">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Compatibility Matrices
    </p>
    <p>
      
    </p>
    <p>
      Framework compatibility matrix (FCM)&#x63cf;&#x8ff0;&#x4e86;&#x8fd0;&#x884c;&#x5728;&#x7279;&#x5b9a;&#x8bbe;&#x5907;&#x4e0a;&#x7684;framework&#x7684;&#x9700;&#x6c42;&#xff0c;
    </p>
    <p>
      matrix&#x6587;&#x4ef6;&#x8ddf;system.img&#x662f;&#x5173;&#x8054;&#x8d77;&#x6765;&#x7684;
    </p>
    <p>
      
    </p>
    <p>
      Device compatibility matrix (DCM)&#x63cf;&#x8ff0;&#x4e86;&#x8bbe;&#x5907;&#x5bf9;&#x4e8e;framework&#x7684;&#x8981;&#x6c42;
    </p>
    <p>
      
    </p>
    <p>
      matrix&#x7684;&#x8bed;&#x6cd5;&#xff0c;&#x53c2;&#x8003;&#x94fe;&#x63a5; https://source.android.com/devices/architecture/vintf/comp-matrices
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1506408352929" FOLDED="true" ID="ID_1882094916" MODIFIED="1583733176575" POSITION="right" TEXT="13. android &#x5171;&#x4eab;&#x5185;&#x5b58;">
<node CREATED="1506408366358" ID="ID_541543196" MODIFIED="1506408378534" TEXT="ashmem &#x865a;&#x62df;&#x5730;&#x5740;&#x8fde;&#x7eed;&#x7684;&#x5171;&#x4eab;&#x5185;&#x5b58;"/>
<node CREATED="1506408382550" ID="ID_816489210" MODIFIED="1506408402224" TEXT="pmem &#x7269;&#x7406;&#x5730;&#x5740;&#x8fde;&#x7eed;&#x7684;&#x5171;&#x4eab;&#x5185;&#x5b58;"/>
</node>
<node CREATED="1508405934501" FOLDED="true" ID="ID_145164834" MODIFIED="1583733174856" POSITION="right" TEXT="14. android debug">
<node CREATED="1508405945445" ID="ID_1833291569" MODIFIED="1508405949218" TEXT="https://sites.google.com/a/itspaclub.com/www/android-debug/7-how-to-debug-native-code/7-6-android-tombstones"/>
</node>
<node CREATED="1537406665769" ID="ID_1431826577" MODIFIED="1537406718429" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#009999"><b><i>VTS&#x6d4b;&#x8bd5;</i></b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1543386542819" FOLDED="true" ID="ID_1329610924" MODIFIED="1566110177671" POSITION="right" TEXT="16. android &#x989c;&#x8272;&#x7a7a;&#x95f4;">
<node CREATED="1543386709074" ID="ID_1088319198" MODIFIED="1543386918478">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x4ece;android8.1 &#x5f00;&#x59cb;&#x652f;&#x6301;&#x989c;&#x8272;&#x7ba1;&#x7406;&#x3002;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1543386921099" ID="ID_1466144956" MODIFIED="1543388291321">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5177;&#x6709;&#x5bbd;&#x8272;&#x57df;&#x663e;&#x793a;&#x80fd;&#x529b;&#x7684;&#x8bbe;&#x7f6e;&#x5e94;&#x8be5;&#x652f;&#x6301;&#x5b89;&#x5353;&#x7684;&#x989c;&#x8272;&#x7ba1;&#x7406;&#xff0c;&#x5728;&#x4f7f;&#x80fd;&#x8fd9;&#x4e2a;feature&#x4e4b;&#x524d;&#xff0c;&#x786e;&#x4fdd;&#x8bbe;&#x5907;
    </p>
    <p>
      &#x6ee1;&#x8db3;&#x5982;&#x4e0b;&#x7684;&#x8981;&#x6c42;:
    </p>
    <ol>
      <li>
        &#x8bbe;&#x5907;&#x663e;&#x793a;&#x6ee1;&#x8db3;&#x8bbe;&#x5907;&#x7684;&#x8981;&#x6c42;&#xff0c;&#x5305;&#x62ec;&#x652f;&#x6301;Display-P3&#x989c;&#x8272;&#x7a7a;&#x95f4;&#x3002;&#x4e3a;&#x4e86;&#x51cf;&#x5c11;cpu&#x548c;gpu&#x7684;&#x5f71;&#x54cd;&#xff0c;&#x9700;&#x8981;&#x5728;&#x663e;&#x793a;pipeline&#x5f53;&#x4e2d;&#x652f;&#x6301;&#x6269;&#x5c55;&#x7684;sRGB&#x8ddf;HDR10
      </li>
      <li>
        &#x652f;&#x6301;&#x6821;&#x51c6;&#x6d41;&#x7a0b;&#x7684;&#x663e;&#x793a;&#x8bbe;&#x5907;&#xff0c;&#x6821;&#x51c6;&#x6570;&#x636e;&#x81f3;&#x5c11;&#x5e94;&#x5f53;&#x80fd;&#x591f;&#x8ba9;&#x8be5;&#x8bbe;&#x5907;&#x80fd;&#x591f;&#x7cbe;&#x786e;&#x5f97;&#x663e;&#x793a;sRGB&#x5185;&#x5bb9;&#x548c;D65, D73&#x767d;&#x8272;&#x70b9;(&#x4ee5;&#x540e;&#x53ef;&#x80fd;&#x4f1a;&#x589e;&#x52a0;&#x5bf9;ICC&#x7279;&#x6027;&#x7684;&#x652f;&#x6301;)
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1543387340880" ID="ID_672198295" MODIFIED="1543388678715">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5b9e;&#x65bd;&#x989c;&#x8272;&#x7ba1;&#x7406;
    </p>
    <p>
      &#x4e3a;&#x4e86;&#x5b9e;&#x73b0;&#x989c;&#x8272;&#x7ba1;&#x7406;&#xff0c;&#x5fc5;&#x987b;&#x9996;&#x5148;&#x66f4;&#x65b0;hardware composer 2(HWC2)&#x9a71;&#x52a8;&#x4ee5;&#x7406;&#x89e3;&#x989c;&#x8272;&#x6a21;&#x5f0f;&#x548c;&#x5c06;
    </p>
    <p>
      &#x989c;&#x8272;&#x6a21;&#x5f0f;&#x5e94;&#x7528;&#x5230;&#x8bbe;&#x5907;&#x4e0a;&#xff0c;&#x7279;&#x522b;&#x5f97;HWC2&#x5fc5;&#x987b;&#x80fd;&#x591f;&#x62a5;&#x544a;sRGB&#x6a21;&#x5f0f;&#x8ddf;Display-P3&#x6a21;&#x5f0f;&#xff0c;&#x4f7f;&#x7528;&#x63a5;&#x53e3;
    </p>
    <p>
      HWCDisplay::GetColorModes
    </p>
    <p>
      
    </p>
    <p>
      &#x4e0b;&#x4e00;&#x6b65;&#x662f;&#x4f7f;&#x80fd;OpenGL&#x7684;&#x76f8;&#x5173;&#x6269;&#x5c55;&#x8ddf;&#x5e93;&#xff0c;&#x5c06;OpenGL color space&#x7ffb;&#x8bd1;&#x6210;<b>hal data spaces</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1578317864266" FOLDED="true" ID="ID_1247173122" MODIFIED="1608029066826" POSITION="right" TEXT="18. android OTA&#x5347;&#x7ea7;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1578319300945" FOLDED="true" ID="ID_828055449" MODIFIED="1606807955227">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#ff0033">A/B System Update</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1583997119818" FOLDED="true" ID="ID_586946798" MODIFIED="1606807953915">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#3300ff"><b>Implementing A/B Updates </b></font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#ff0033"><b>https://source.android.com/devices/tech/ota/ab/ab_implement </b></font>
    </p>
    <p>
      <font color="#ff0033"><b>https://source.android.com/devices/tech/ota/ab</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1583997220034" FOLDED="true" ID="ID_1001772490" MODIFIED="1606807952875">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21378;&#21830;&#24819;&#23454;&#29616;A/B&#27169;&#24335;&#19979;&#30340;&#31995;&#32479;&#26356;&#26032;&#65292;&#24517;&#39035;&#20445;&#35777;bootloader&#24050;&#32463;&#23454;&#29616;&#20102;
    </p>
    <p>
      boot_control HAL&#25509;&#21475;&#24182;&#19988;&#20250;&#23558;correct parameters&#20256;&#36882;&#32473;&#20869;&#26680;
    </p>
  </body>
</html></richcontent>
<node CREATED="1583997323461" ID="ID_613299699" MODIFIED="1583997414089">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      boot_control HAL&#30340;&#25509;&#21475;&#23450;&#20041;&#22312;&#25991;&#20214; hardware/libhardware/include/hardware/boot_control.h&#25991;&#20214;
    </p>
    <p>
      &#21487;&#20197;&#20351;&#29992;system/extras/bootctl&#21644;system/extras/tests/bootloader&#24037;&#20855;&#27979;&#35797;&#35813;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1583997534514" FOLDED="true" ID="ID_588990955" MODIFIED="1606807950894" TEXT="bootloader&#x5e94;&#x5f53;&#x5b9e;&#x73b0;&#x5982;&#x4e0b;&#x7684;&#x72b6;&#x6001;&#x673a;">
<node CREATED="1583997556873" ID="ID_850040626" MODIFIED="1583997565352">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/ab-updates-state-machine-01.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1578319314001" FOLDED="true" ID="ID_129406941" MODIFIED="1606807956219">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#ff0000"><b>non A/B System Update</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1578324144899" FOLDED="true" ID="ID_459925636" MODIFIED="1606807949211">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#x5206;&#x533a;&#xff0c;&#x5728;&#x6ca1;&#x6709;A/B&#x7cfb;&#x7edf;&#x7684;&#x5b89;&#x5353;&#x8bbe;&#x5907;&#x4e0a;&#xff0c;
    </p>
    <p>
      FLASH&#x7a7a;&#x95f4;&#x88ab;&#x5206;&#x6210;&#x5982;&#x4e0b;&#x51e0;&#x4e2a;&#x90e8;&#x5206;
    </p>
  </body>
</html></richcontent>
<node CREATED="1578324212270" ID="ID_905114939" MODIFIED="1578324296431">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      boot&#x5206;&#x533a;
    </p>
    <p>
      &#x5305;&#x542b;linux&#x5185;&#x6838;&#x4ee3;&#x7801;&#x548c;ram&#x5f62;&#x5f0f;&#x7684;&#x6700;&#x5c0f;&#x6839;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#xff0c;boot
    </p>
    <p>
      &#x4f1a;&#x52a0;&#x8f7d;system&#x5206;&#x533a;&#x548c;&#x5176;&#x4ed6;&#x7684;&#x5206;&#x533a;&#xff0c;&#x7136;&#x540e;&#x542f;&#x52a8;&#x7cfb;&#x7edf;&#x8fd0;&#x884c;&#x65f6;&#x73af;&#x5883;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578324334227" ID="ID_1811911423" MODIFIED="1578324370663">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      system&#x5206;&#x533a;&#x5305;&#x542b;&#x4e86;&#x7cfb;&#x7edf;&#x7ea7;&#x522b;&#x7684;app&#x548c;&#x5e93;&#xff0c;
    </p>
    <p>
      &#x4e00;&#x822c;&#x662f;&#x53ea;&#x8bfb;&#x7684;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578324396560" ID="ID_1637325290" MODIFIED="1578324427207">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      vendor&#x5206;&#x533a;
    </p>
    <p>
      &#x4e5f;&#x662f;&#x5305;&#x542b;&#x4e86;&#x7cfb;&#x7edf;&#x5e94;&#x7528;&#x548c;&#x7cfb;&#x7edf;&#x5e93;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578324455913" ID="ID_1983478059" MODIFIED="1578324518751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      data&#x5206;&#x533a;&#xff0c;&#x5305;&#x542b;&#x7740;&#x5e94;&#x7528;&#x7684;&#x6570;&#x636e;&#xff0c;&#x8be5;&#x5206;&#x533a;&#x4e0d;&#x4f1a;&#x56e0;&#x4e3a;
    </p>
    <p>
      OTA&#x5347;&#x7ea7;&#x800c;&#x88ab;&#x4fee;&#x6539;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1578384949680" FOLDED="true" ID="ID_4640491" MODIFIED="1608029065578">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      update_engine_client --payload=file:///storage/udisk/payload.bin --update --headers=&quot;
    </p>
    <p>
      
    </p>
    <p>
      &#160;update_engine: [0107/080340:INFO:delta_performer.cc(1575)] Verifying payload using public key: /etc/update_engine/update-payload-key.pub.pem
    </p>
    <p>
      &#160;update_engine: [0107/080340:ERROR:delta_performer.cc(1589)] VerifyPayload failure: payload_hash_calculator_.raw_hash() == update_check_response_hash
    </p>
    <p>
      &#160;update_engine: [0107/080340:ERROR:download_action.cc(361)] Download of file:///storage/emulated/0/Movies/payload.bin failed due to payload verification error.
    </p>
  </body>
</html></richcontent>
<node CREATED="1583481749891" ID="ID_608327682" MODIFIED="1583481792764">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>#!/system/bin/sh</b>
    </p>
    <p>
      <font color="#ff0000"><b>header=`cat /data/payload_properties.txt` </b></font>
    </p>
    <p>
      <font color="#ff0000"><b>update_engine_client --payload=&quot;file:///storage/emulated/0/Movies/payload.bin&quot; --update --headers=&quot;${header}&quot;</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1590547094894" ID="ID_1263605535" MODIFIED="1590547255701">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      update_engine&#21482;&#20250;&#21319;&#32423;&#26356;&#26032;&#32534;&#35793;&#20986;&#26469;&#30340;&#23433;&#35013;&#21253;&#65292;&#22914;&#26524;&#38656;&#35201;&#22238;&#36864;&#23433;&#35013;&#21253;&#65292;
    </p>
    <p>
      &#21482;&#33021;&#20462;&#25913;update_engine&#30340;&#28304;&#20195;&#30721;&#20102;
    </p>
    <p>
      &#36890;&#36807;&#20462;&#25913;delta_performer.cc &#25991;&#20214;&#20989;&#25968; ValidateManifest&#65292;&#23558;&#21028;&#26029;GetBuildTimestamp&#37096;&#20998;&#30340;
    </p>
    <p>
      &#20195;&#30721;&#27880;&#37322;&#25481;&#65292;&#23601;&#21487;&#20197;&#38450;&#27490;update_engine&#26816;&#27979;&#23433;&#35013;&#21253;&#30340;&#32534;&#35793;&#26102;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1578385044632" ID="ID_1627453950" MODIFIED="1578385053728">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <a href="https://source.android.com/devices/tech/ota/tools">https://source.android.com/devices/tech/ota/tools</a>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578548616611" ID="ID_1167590729" MODIFIED="1578548628321">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <a href="https://blog.csdn.net/guyongqiangx/article/details/71516768">https://blog.csdn.net/guyongqiangx/article/details/71516768</a>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578557114526" ID="ID_1486143847" MODIFIED="1578557118150" TEXT="https://source.android.com/security/verifiedboot/boot-flow"/>
<node CREATED="1583485201040" FOLDED="true" ID="ID_1421247340" MODIFIED="1608029064505">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Verified Boot</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1583485287872" FOLDED="true" ID="ID_1669837324" MODIFIED="1608029061161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Android 4.4 &#28155;&#21152;&#20102;&#23545;&#20110;verified boot&#30340;&#25903;&#25345;&#65292;&#24182;&#19988;dm-verity&#21151;&#33021;&#34987;
    </p>
    <p>
      &#28155;&#21152;&#21040;&#20102;&#20869;&#26680;&#24403;&#20013;&#65292;&#36825;&#34987;&#31216;&#20026;Verified Boot1
    </p>
  </body>
</html></richcontent>
<node CREATED="1583487183429" FOLDED="true" ID="ID_643384346" MODIFIED="1608029057392">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4">dm-verity&#20171;&#32461;</font></b>
    </p>
    <p>
      
    </p>
    <p>
      <b><font size="4">https://source.android.com/security/verifiedboot/dm-verity</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1583487211681" ID="ID_630848227" MODIFIED="1583487554751">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Android 4.4&#20197;&#21450;&#26356;&#39640;&#30340;&#29256;&#26412;&#25903;&#25345;Verified Boot, &#35813;&#29305;&#24615;&#26159;&#20381;&#36182;&#20110;&#20869;&#26680;&#30340;device-mapper-verity feature&#30340;&#65292;&#35813;feature
    </p>
    <p>
      &#25552;&#20379;&#20102;&#23545;&#20110;&#22359;&#35774;&#22791;&#30340;&#36879;&#26126;&#24335;&#30340;&#34701;&#21512;&#26816;&#26597;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1583488266710" FOLDED="true" ID="ID_1104500356" MODIFIED="1606807927467">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      dm-verity&#35753;&#25105;&#20204;&#21487;&#20197;&#20197;&#24213;&#23618;&#35774;&#22791;&#30340;&#35270;&#35282;&#26469;&#30475;&#22359;&#35774;&#22791;&#65292;&#24182;&#19988;&#21487;&#20197;&#20915;&#23450;&#26159;&#21542;&#28385;&#36275;&#26399;&#26395;&#30340;&#37197;&#32622;&#12290;
    </p>
    <p>
      &#36890;&#36807;&#20351;&#29992;&#21152;&#23494;&#29256;&#26412;&#30340;&#21704;&#24076;&#26641;&#26469;&#36798;&#21040;&#27492;&#30446;&#30340;&#65292;&#23545;&#20110;&#27599;&#19968;&#20010;4K&#22823;&#23567;&#30340;&#22359;&#65292;&#37117;&#34987;&#20998;&#37197;&#20102;&#19968;&#20010;SHA256&#21704;&#24076;&#20540;
    </p>
  </body>
</html></richcontent>
<node CREATED="1583906710048" ID="ID_1290114526" MODIFIED="1583906896338">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hash&#20540;&#26159;&#20197;&#19968;&#31181;&#26641;&#29366;&#30340;&#24418;&#24335;&#23384;&#20648;&#36215;&#26469;&#30340;&#65292;&#39030;&#23618;&#30340;root hash&#24517;&#39035;&#26159;&#21487;&#20449;&#36182;&#30340;&#65292;&#36825;&#26679;&#21487;&#20197;&#20445;&#35777;
    </p>
    <p>
      &#35813;&#26641;&#24403;&#20013;&#20854;&#20182;&#33410;&#28857;&#30340;&#21487;&#20449;&#24230;&#12290;&#23545;&#20219;&#20309;&#19968;&#20010;&#23384;&#20648;&#22359;&#30340;&#30772;&#22351;&#65292;&#31561;&#21516;&#20110;&#23545;&#21152;&#23494;hash&#30340;&#30772;&#22351;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1583907026402" ID="ID_1560224080" MODIFIED="1583907130370">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26377;&#19968;&#20010;public key&#34987;&#25918;&#32622;&#22312;&#20102;boot&#20998;&#21306;&#65292;key&#24517;&#39035;&#30001;&#35774;&#22791;&#21378;&#21830;&#36827;&#34892;&#30830;&#35748;&#65292;
    </p>
    <p>
      &#36890;&#36807;&#35813;key&#21487;&#20197;hash value&#26641;&#30340;&#31614;&#21517;&#65292;&#20197;&#27492;&#26469;&#30830;&#35748;&#31995;&#32479;&#20998;&#21306;&#26159;&#22788;&#20110;&#34987;&#20445;&#25252;&#30340;&#29366;&#24577;&#65292;
    </p>
    <p>
      &#24182;&#19988;&#27809;&#26377;&#34987;&#20462;&#25913;&#36807;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1583907801528" ID="ID_686061367" MODIFIED="1583907822426">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/dm-verity-hash-table.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1583994174099" FOLDED="true" ID="ID_469930247" MODIFIED="1606807925924">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#3300ff"><i><b>&#29983;&#25104;&#24102;&#26377;hash tree&#30340;&#31995;&#32479;&#38236;&#20687;&#30340;&#26041;&#27861;</b></i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1583994251794" ID="ID_1414927140" MODIFIED="1583994266839" TEXT="1. &#x751f;&#x6210;ext4&#x683c;&#x5f0f;&#x7684;system&#x955c;&#x50cf;"/>
<node CREATED="1583994271741" ID="ID_1376877523" MODIFIED="1583994288032" TEXT="2.&#x4e3a;system&#x955c;&#x50cf;&#x751f;&#x6210;hash tree"/>
<node CREATED="1583994295485" FOLDED="true" ID="ID_1890447316" MODIFIED="1606807925051" TEXT="3.&#x4e3a;hash tree&#x6784;&#x5efa;dm-verity table">
<node CREATED="1583994531267" ID="ID_474836020" MODIFIED="1583994657042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35813;table&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#23558;&#22359;&#35774;&#22791;&#20197;&#21450;&#35813;&#22359;&#35774;&#22791;&#23545;&#24212;&#30340;hash tree&#30340;&#20301;&#32622;&#23545;&#24212;&#36215;&#26469;&#65292;
    </p>
    <p>
      &#35813;mapping table&#21487;&#20197;&#29992;&#20110;<b>fstabe&#30340;&#29983;&#25104;&#20197;&#21450;&#21551;&#21160;&#38454;&#27573;&#20351;&#29992;</b>&#12290;
    </p>
    <p>
      &#35813;table&#36824;&#20250;&#27880;&#26126;block&#30340;&#22823;&#23567;&#12289;hash tree&#30340;&#36215;&#22987;&#22320;&#22336;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1583994314519" ID="ID_225544855" MODIFIED="1583994341949" TEXT="4.&#x7ed9;dm-verity table&#x8fdb;&#x884c;&#x7b7e;&#x540d;&#xff0c;&#x751f;&#x6210;&#x4e00;&#x4e2a;&#x7b7e;&#x540d;"/>
<node CREATED="1583994352121" ID="ID_1093466203" MODIFIED="1583994382653" TEXT="5.&#x5c06;&#x7b7e;&#x540d;&#x3001;dm-verity table&#x4e00;&#x540c;&#x7ed1;&#x5b9a;&#x8fdb;&#x5165;&#x5230;verity metadata&#x91cc;&#x9762;"/>
<node CREATED="1583994390703" ID="ID_1798277244" MODIFIED="1583994413848" TEXT="6.&#x5c06;metadata&#x3001;hash tree&#x6dfb;&#x52a0;&#x5230;system&#x955c;&#x50cf;&#x4e4b;&#x540e;"/>
</node>
</node>
<node CREATED="1583925083701" FOLDED="true" ID="ID_594508701" MODIFIED="1608029056225">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" color="#ff0000"><i>https://blog.csdn.net/u011280717/article/details/51867673</i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1584000507262" FOLDED="true" ID="ID_1876675320" MODIFIED="1608029054409" TEXT="dm-verity&#x7684;&#x5de5;&#x4f5c;&#x6d41;&#x7a0b;">
<node CREATED="1584000523301" ID="ID_1070854808" MODIFIED="1584000773740">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/dm-verity&#x7684;&#x5de5;&#x4f5c;&#x6d41;&#x7a0b;.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1584005031975" FOLDED="true" ID="ID_839086019" MODIFIED="1608029055434">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>&#20855;&#20307;&#20195;&#30721;&#20998;&#26512;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1584005056836" FOLDED="true" ID="ID_1010571873" MODIFIED="1608029049697" TEXT="system/core/fs_mgr/fs_mgr_verity.cpp">
<node CREATED="1584005081905" FOLDED="true" ID="ID_960456396" MODIFIED="1608029048529">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35813;&#25991;&#20214;&#20013;&#30340; fs_mgr_setup_verity&#20989;&#25968;&#24403;&#20013;
    </p>
    <p>
      fec_open(&amp;f, fstab-&gt;blk_device, O_RDONLY, FEC_VERITY_DISABLE,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;FEC_DEFAULT_ROOTS)
    </p>
    <p>
      if (fec_verity_get_metadata(f, &amp;verity) &lt; 0) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PERROR &lt;&lt; &quot;Failed to get verity metadata '&quot; &lt;&lt; fstab-&gt;blk_device &lt;&lt; &quot;'&quot;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// Allow verity disabled when the device is unlocked without metadata
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (fs_mgr_is_device_unlocked()) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;retval = FS_MGR_SETUP_VERITY_SKIPPED;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LWARNING &lt;&lt; &quot;Allow invalid metadata when the device is unlocked&quot;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;goto out;
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      #ifdef ALLOW_ADBD_DISABLE_VERITY
    </p>
    <p>
      &#160;&#160;&#160;&#160;if (verity.disabled) {&#160; <font color="#ff0000"><b>&#36825;&#37324;&#22914;&#20309;&#36827;&#34892;disable&#25805;&#20316;&#65311;</b></font>
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;retval = FS_MGR_SETUP_VERITY_DISABLED;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LINFO &lt;&lt; &quot;Attempt to cleanly disable verity - only works in USERDEBUG&quot;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;goto out;
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
    <p>
      #endif
    </p>
  </body>
</html></richcontent>
<node CREATED="1584087092101" ID="ID_1886585526" MODIFIED="1584087213654">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      fs_mgr_setup_verity&#20989;&#25968;&#24212;&#35813;&#26159;&#22312;&#20989;&#25968;int fs_mgr_mount_all(struct fstab *fstab, int mount_mode)&#24403;&#20013;
    </p>
    <p>
      &#34987;&#35843;&#29992;&#21040;&#30340;&#65292;&#35813;&#20989;&#25968;&#21028;&#26029;fstab&#37324;&#38754;&#30340;flag&#26631;&#24535;&#65292;&#20174;&#32780;&#36827;&#34892;&#21028;&#26029;
    </p>
    <p>
      if (fstab-&gt;recs[i].fs_mgr_flags &amp; <b><font color="#ff0033">MF_AVB) {&#160;&#160;android8.1 &#24212;&#35813;&#20351;&#29992;&#30340;&#26159;AVB&#30340;&#27169;&#24335;</font></b>
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!avb_handle) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;avb_handle = FsManagerAvbHandle::Open(*fstab);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (!avb_handle) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LERROR &lt;&lt; &quot;Failed to open FsManagerAvbHandle&quot;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return FS_MGR_MNTALL_FAIL;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (avb_handle-&gt;SetUpAvbHashtree(&amp;fstab-&gt;recs[i], true /* wait_for_verity_dev */) ==
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SetUpAvbHashtreeResult::kFail) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LERROR &lt;&lt; &quot;Failed to set up AVB on partition: &quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&lt; fstab-&gt;recs[i].mount_point &lt;&lt; &quot;, skipping!&quot;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Skips mounting the device. */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} else if ((fstab-&gt;recs[i].fs_mgr_flags &amp; MF_VERIFY) &amp;&amp; is_device_secure()) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int rc = fs_mgr_setup_verity(&amp;fstab-&gt;recs[i], true);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (__android_log_is_debuggable() &amp;&amp;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(rc == FS_MGR_SETUP_VERITY_DISABLED ||
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;rc == FS_MGR_SETUP_VERITY_SKIPPED)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LINFO &lt;&lt; &quot;Verity disabled&quot;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} else if (rc != FS_MGR_SETUP_VERITY_SUCCESS) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;LERROR &lt;&lt; &quot;Could not set up verified partition, skipping!&quot;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;continue;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1621585778888" ID="ID_1340639062" MODIFIED="1621585791508">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20294;Android 5.0&#24320;&#22987;&#25903;&#25345;dm-verity&#21518;&#65292;system.img&#19981;&#20877;&#25552;&#20379;&#65292;&#32780;&#26159;&#25552;&#20379;&#20102;&#19977;&#20010;&#25991;&#20214;system.new.dat&#65292;system.patch.dat&#65292;system.transfer.list&#65292;&#22240;&#27492;&#25105;&#20204;&#39318;&#20808;&#38656;&#35201;&#36890;&#36807;&#19978;&#36848;&#30340;&#19977;&#20010;&#25991;&#20214;&#24471;&#21040;system.img&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1583485800955" ID="ID_79211215" MODIFIED="1584087808154">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4" color="#3300ff">Android7.0</font></b>&#160;&#20197;&#21069;&#21363;&#20351;&#22312;&#21551;&#21160;&#36807;&#31243;&#24403;&#20013;&#26816;&#27979;&#21040;&#38236;&#20687;&#26377;&#25439;&#22351;&#65292;&#20063;&#19981;&#20250;&#38459;&#27490;&#35774;&#22791;&#30340;&#27491;&#24120;&#21551;&#21160;&#65292;
    </p>
    <p>
      &#20174;Android 7.0&#24320;&#22987;&#20005;&#26684;&#24378;&#21046;verified boot&#38459;&#27490;&#26377;&#38382;&#39064;&#30340;&#35774;&#22791;&#21551;&#21160;&#65292;android7.0&#36824;&#28155;&#21152;&#20102;
    </p>
    <p>
      &#21069;&#21521;&#38169;&#35823;&#26816;&#27979;<b><font color="#ff0033">FEC</font></b>&#29992;&#20110;&#26816;&#27979;&#25968;&#25454;&#19978;&#30340;&#25439;&#22351;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1583485999802" FOLDED="true" ID="ID_1599978580" MODIFIED="1608029043913">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4" color="#3300ff">Android 8.0</font></b>&#20197;&#21450;&#26356;&#39640;&#30340;&#29256;&#26412;&#24050;&#32463;&#21253;&#21547;&#20102;Android Verified Boot(AVB), &#35813;&#27169;&#22359;&#26159;&#21442;&#32771;verified boot&#23454;&#29616;&#30340;,
    </p>
    <p>
      &#19982;project treble&#20849;&#21516;&#23454;&#26045;&#12290;&#38500;&#20102;&#19982;project treble&#20849;&#21516;&#24037;&#20316;&#65292;AVB&#23558;&#20998;&#21306;&#25351;&#32441;&#26684;&#24335;&#26631;&#20934;&#21270;&#20102;&#24182;&#19988;&#28155;&#21152;&#20102;
    </p>
    <p>
      &#22238;&#28378;&#20445;&#25252;&#29305;&#24615;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1584151853770" FOLDED="true" ID="ID_1416811293" MODIFIED="1608029043001">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#3300ff">&#35895;&#27468;&#23448;&#26041;&#32593;&#31449; </font></b>
    </p>
    <p>
      
    </p>
    <p>
      <b><font color="#3300ff">https://source.android.com/security/verifiedboot/avb</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1584153448982" FOLDED="true" ID="ID_1774759335" MODIFIED="1608029041946">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Build System Integration</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1585813994209" ID="ID_84364771" MODIFIED="1585814018904">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <a href="https://android.googlesource.com/platform/external/avb/+/master/README.md#Build-System-Integration">https://android.googlesource.com/platform/external/avb/+/master/README.md#Build-System-Integration </a>
    </p>
    <p>
      &#35814;&#32454;&#20171;&#32461;&#20102;AVB2.0&#30340;&#31995;&#32479;&#22266;&#20214;&#30340;&#32452;&#25104;&#20197;&#21450;&#32534;&#35793;&#24037;&#20855;&#30340;&#32534;&#35793;&#27969;&#31243;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1584177004209" FOLDED="true" ID="ID_1825272025" MODIFIED="1608029038881">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4" color="#3300ff">Handling dm-verity Errors</font> </b>
    </p>
    <p>
      
    </p>
    <p>
      <font size="4" color="#ff0000">&#36825;&#37324;&#35828;&#30340;&#24456;&#37325;&#35201;&#65292;&#36319;dm-verity&#27169;&#22359;&#30340;&#29366;&#24577;&#36716;&#25442;&#26377;&#20851;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1584177873361" FOLDED="true" ID="ID_1909615166" MODIFIED="1608029037384">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#35774;&#35745;&#19978;&#26469;&#35828;&#65292;hashtree&#30340;&#39564;&#35777;&#38169;&#35823;&#24212;&#24403;&#30001;&#25805;&#20316;&#31995;&#32479;&#32780;&#19981;&#26159;bootloader&#26469;&#26816;&#27979;&#12290;
    </p>
    <p>
      &#22312;&#20989;&#25968;avb_slot_verity&#37324;&#38754;&#65292;AVB&#25351;&#23450;&#20102;&#21442;&#25968;hashtree_error_mode&#26469;&#21578;&#30693;&#20989;&#25968;&#22914;&#20309;&#22788;&#29702;
    </p>
    <p>
      hashtree&#26657;&#39564;&#38169;&#35823;&#30340;&#38382;&#39064;&#65292;&#35813;&#21442;&#25968;&#30340;&#20540;&#21487;&#20197;&#36890;&#36807;bootloader&#21551;&#21160;&#20869;&#26680;&#26102;&#36890;&#36807;&#21551;&#21160;cmd&#26469;&#20256;&#36882;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1584178177593" ID="ID_27104092" MODIFIED="1584178201323">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/android-avb-hashtree&#x9519;&#x8bef;&#x68c0;&#x6d4b;&#x7b56;&#x7565;&#x914d;&#x7f6e;.PNG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1585813780818" FOLDED="true" ID="ID_1938942748" MODIFIED="1606807913652">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#20309;&#31105;&#29992;avbmeta&#30340;verity&#21151;&#33021;&#65311;
    </p>
    <p>
      
    </p>
    <ol>
      <li>
        &#20351;&#29992;adb&#21629;&#20196;&#65292;&#21069;&#25552;&#26159;&#31995;&#32479;&#25104;&#21151;&#21551;&#21160;
      </li>
      <li>
        ota&#30340;&#26102;&#20505;&#38656;&#35201;&#22312;avb meta image&#37324;&#38754;&#23558;disable-verity flag&#35774;&#32622;&#36215;&#26469;&#65292;&#36890;&#36807;&#26597;&#38405;&#36164;&#26009;&#30693;&#36947;&#31995;&#32479;&#26159;&#20351;&#29992; avb_tool make_vbmeta_image&#26469;&#32534;&#35793;&#30340;&#65292;&#21487;&#20197;&#23558;&#36873;&#39033; --set_hashtree_disabled_flag&#20256;&#36882;&#32473;&#35813;&#21629;&#20196;&#65292;&#22312;makefile&#37324;&#38754;&#32473;&#21464;&#37327;<font size="14px" color="rgb(0, 0, 0)" face="Source Code Pro, monospace">BOARD_AVB_MAKE_VBMETA_IMAGE_ARGS</font>&#160;&#36171;&#20540;&#35813;&#36873;&#39033;&#21363;&#21487;&#20570;&#21040;
      </li>
      <li>
        &#32534;&#35793;OTA&#21253;&#30340;&#26102;&#20505;&#38656;&#35201;&#23558;<b><font color="#ff0000">vbmeta</font></b>&#36825;&#20010;&#22266;&#20214;&#38236;&#20687;&#20063;&#21253;&#21547;&#36827;&#21435;
      </li>
    </ol>
  </body>
</html></richcontent>
<node CREATED="1585816376909" ID="ID_698481035" MODIFIED="1585816389685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <pre class="u-pre u-monospace MetadataMessage" style="text-align: start; white-space: pre-wrap; margin-top: 0px; padding-top: 12px; margin-right: 0px; letter-spacing: normal; margin-left: 0px; text-transform: none; word-spacing: 0px; background-color: rgb(250, 250, 250); text-indent: 0px; padding-left: 12px; font-size: 10pt; font-style: normal; padding-right: 12px; margin-bottom: 0px; font-weight: 500; padding-bottom: 12px; font-family: Source Code Pro, monospace; color: rgb(0, 0, 0)">avbtool: add --set_hashtree_disabled_flag option to make_vbmeta_image command.

This enables people to set

 BOARD_AVB_MAKE_VBMETA_IMAGE_ARGS=&quot;--set_hashtree_disabled_flag&quot;

in their environment and then the images they build are baked with the
HASHTREE_DISABLED bit set and as a result they don't need to manually
disable dm-verity via e.g. 'adb disable-verity'. Note that this is
already possible through the existing --flags option, e.g.

 BOARD_AVB_MAKE_VBMETA_IMAGE_ARGS=&quot;--flags 1&quot;

but it's much nicer to be explicit about it.</pre>
  </body>
</html></richcontent>
</node>
<node CREATED="1585816492869" ID="ID_946595007" MODIFIED="1585816503904">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/&#x7981;&#x7528;vbmeta&#x7684;&#x9a8c;&#x8bc1;&#x529f;&#x80fd;.PNG" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1585813330107" ID="ID_1583012704" MODIFIED="1585814055586">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      avbtool info_image --image vbmeta.img &gt; vbmeta.img.info
    </p>
    <p>
      
    </p>
    <p>
      &#26597;&#30475;&#32534;&#35793;&#29983;&#25104;&#30340;vbmeta.img&#37324;&#38754;&#30340;&#37197;&#32622;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1583996331489" FOLDED="true" ID="ID_321891500" MODIFIED="1608029031081">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#3300ff"><b>&#35895;&#27468;&#23448;&#26041;&#24314;&#35758;&#30340;boot&#27969;&#31243;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1583996584870" FOLDED="true" ID="ID_1651296112" MODIFIED="1608029029552">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/verified-boot-flow-01.png" />
  </body>
</html></richcontent>
<node CREATED="1583996606958" ID="ID_860404337" MODIFIED="1583996799236">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#35774;&#22791;&#20351;&#29992;A/B&#27169;&#24335;&#26469;&#26356;&#26032;&#65292;&#27969;&#31243;&#22270;&#36319;&#22270;&#20013;&#26631;&#35782;&#30340;&#26377;&#19968;&#20123;&#19981;&#21516;&#12290;&#39318;&#20808;&#29992;&#20110;&#21551;&#21160;&#30340;slot&#22312;&#26356;&#26032;<b>Rollback Protection metadata</b>
    </p>
    <p>
      &#20043;&#21069;&#65292;&#24517;&#39035;&#29992;<b>Boot Control HAL</b>&#26631;&#35760;&#20026;SUCCESSFUL
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1578307232859" ID="ID_1460251219" MODIFIED="1641885931756" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4">17. android input system</font>
    </p>
  </body>
</html>
</richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1578307251051" FOLDED="true" ID="ID_853138179" MODIFIED="1641885937119">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20195;&#30721;&#27969;&#31243;&#20998;&#26512;&#65306;
    </p>
    <p>
      &#20174;InputManager&#24320;&#22987;&#36827;&#34892;&#20998;&#26512;
    </p>
  </body>
</html></richcontent>
<node CREATED="1578307330751" ID="ID_1744035212" MODIFIED="1641885860367">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>InputManager::InputManager(</b></i>
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const sp&lt;EventHubInterface&gt;&amp; eventHub,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const sp&lt;InputReaderPolicyInterface&gt;&amp; readerPolicy,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const sp&lt;InputDispatcherPolicyInterface&gt;&amp; dispatcherPolicy) {
    </p>
    <p>
      &#160;&#160;&#160; <font color="#ff0000">mDispatcher = new InputDispatcher(dispatcherPolicy); </font>
    </p>
    <p>
      <font color="#ff0000">&#160;&#160;&#160;&#160;mReader = new InputReader(eventHub, readerPolicy, mDispatcher); </font>
    </p>
    <p>
      <font color="#ff0000">&#160;&#160;&#160;&#160;initialize();</font>
    </p>
    <p>
      <b><i>}</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1578307451435" ID="ID_523631737" MODIFIED="1641885869060">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void InputManager::initialize() {
    </p>
    <p>
      &#160;&#160;&#160;&#160;mReaderThread = new InputReaderThread(mReader);
    </p>
    <p>
      &#160;&#160;&#160;&#160;mDispatcherThread = new InputDispatcherThread(mDispatcher);
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<node CREATED="1578360561048" ID="ID_1643768080" MODIFIED="1641885872413">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30475;&#19968;&#19979;InputReaderThread:
    </p>
    <p>
      InputReaderThread&#20250;&#36827;&#20837;&#19968;&#20010;threadLoop
    </p>
    <p>
      
    </p>
    <p>
      bool InputReaderThread::threadLoop() {
    </p>
    <p>
      &#160;&#160;&#160; <b><i><font color="#ff0000">mReader-&gt;loopOnce();</font></i></b>
    </p>
    <p>
      &#160;&#160;&#160;&#160;return true;
    </p>
    <p>
      }
    </p>
    <p>
      
    </p>
    <p>
      &#19979;&#38754;&#20998;&#26512;loopOnce()&#20989;&#25968;&#30340;&#19968;&#20123;&#20851;&#38190;&#20195;&#30721;
    </p>
  </body>
</html></richcontent>
<node CREATED="1578360919142" ID="ID_657024654" MODIFIED="1641885875556">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      size_t count = mEventHub-&gt;getEvents(timeoutMillis, mEventBuffer, EVENT_BUFFER_SIZE);
    </p>
    <p>
      
    </p>
    <p>
      eventhub&#20351;&#29992;poll&#26426;&#21046;&#30417;&#21548;&#39537;&#21160;&#30340;input&#26102;&#38388;
    </p>
    <p>
      Eventhub&#20250;&#22635;&#20805;RawEvent&#37324;&#38754;&#30340;&#22914;&#19979;&#30340;&#25104;&#21592;&#21464;&#37327;
    </p>
    <p>
      event-&gt;deviceId = deviceId;
    </p>
    <p>
      event-&gt;type = iev.type;
    </p>
    <p>
      event-&gt;code = iev.code;
    </p>
    <p>
      event-&gt;value = iev.value;
    </p>
    <p>
      event += 1;
    </p>
  </body>
</html></richcontent>
<node CREATED="1578366324960" ID="ID_697649708" MODIFIED="1641885881267">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20998;&#26512;&#19968;&#19979;EventHub&#22914;&#20309;&#21152;&#36733;&#25353;&#38190;kl&#25991;&#20214;&#30340;&#65292;&#30475;&#20989;&#25968;
    </p>
    <p>
      <b>EventHub::openDeviceLocked(const char *devicePath)</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1578366543653" ID="ID_1976289050" MODIFIED="1578366564974">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int fd = open(devicePath, O_RDWR | O_CLOEXEC | O_NONBLOCK);
    </p>
    <p>
      open&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578366568334" ID="ID_1577662181" MODIFIED="1578366641310">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#ff0033">&#33719;&#21462;InputDeviceIdentifier&#30340;name</font></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578366657631" ID="ID_1821786518" MODIFIED="1578366684130">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      InputDeviceIdentifier identifier;
    </p>
    <p>
      ioctl(fd, EVIOCGNAME(sizeof(buffer) - 1), &amp;buffer)
    </p>
    <p>
      identifier.name.setTo(buffer)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578366723374" ID="ID_1843578825" MODIFIED="1578366731016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Device* device = new Device(fd, deviceId, String8(devicePath), identifier);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578366743599" FOLDED="true" ID="ID_1813188163" MODIFIED="1606807835287">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      loadConfigurationLocked(device)
    </p>
  </body>
</html></richcontent>
<node CREATED="1578366839460" ID="ID_591284805" MODIFIED="1578367082928">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      device-&gt;configurationFile = getInputDeviceConfigurationFilePathByDeviceIdentifier(
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;device-&gt;identifier, INPUT_DEVICE_CONFIGURATION_FILE_TYPE_CONFIGURATION)
    </p>
    <p>
      
    </p>
    <p>
      &#35813;&#20989;&#25968;&#23450;&#20041;&#22312; frameworks/native/libs/input/InputDevice.cpp
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578368380990" ID="ID_1922650964" MODIFIED="1578368493750">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#27809;&#26377;&#25214;&#21040;idc configuration &#25991;&#20214;&#65292;&#20250;&#25171;&#21360;&#38169;&#35823;&#20449;&#24687;
    </p>
    <p>
      device-&gt;configurationFile.isEmpty()
    </p>
    <p>
      &quot;No input device configuration file found for device&quot;
    </p>
    <p>
      
    </p>
    <p>
      &#22914;&#26524;&#25214;&#21040;&#20102;&#37197;&#32622;&#25991;&#20214;&#65292;&#21017;&#36827;&#34892;&#21152;&#36733;
    </p>
    <p>
      status_t status = PropertyMap::load(device-&gt;configurationFile,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &amp;device-&gt;configuration)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1578367667409" ID="ID_290099477" MODIFIED="1641885899222">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      keyMapStatus = loadKeyMapLocked(device)
    </p>
    <p>
      
    </p>
    <p>
      <span style="margin-right: 0px; text-transform: none; margin-bottom: 0px; text-align: left; text-indent: 0px; margin-left: 0px; white-space: pre; font-weight: 400; color: rgb(178, 148, 187); font-family: Source Code Pro, DejaVu Sans Mono, Ubuntu Mono, Anonymous Pro, Droid Sans Mono, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, PingFang SC, Microsoft YaHei, sans-serif; font-size: 14px; padding-top: 0px; padding-bottom: 0px; letter-spacing: normal; padding-left: 0px; padding-right: 0px; word-spacing: 0px; font-style: normal; background-color: rgb(29, 31, 33); margin-top: 0px" class="hljs-keyword"><font color="rgb(178, 148, 187)" face="Source Code Pro, DejaVu Sans Mono, Ubuntu Mono, Anonymous Pro, Droid Sans Mono, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, PingFang SC, Microsoft YaHei, sans-serif" size="14px">return</font></span><span style="text-transform: none; text-indent: 0px; text-align: left; font-weight: 400; white-space: pre; font-family: Source Code Pro, DejaVu Sans Mono, Ubuntu Mono, Anonymous Pro, Droid Sans Mono, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, PingFang SC, Microsoft YaHei, sans-serif; color: rgb(197, 200, 198); font-size: 14px; float: none; display: inline !important; letter-spacing: normal; word-spacing: 0px; font-style: normal; background-color: rgb(29, 31, 33)"><font color="rgb(197, 200, 198)" face="Source Code Pro, DejaVu Sans Mono, Ubuntu Mono, Anonymous Pro, Droid Sans Mono, Menlo, Monaco, Consolas, Inconsolata, Courier, monospace, PingFang SC, Microsoft YaHei, sans-serif" size="14px">&#160;device-&gt;keyMap.load(device-&gt;identifier, device-&gt;configuration);</font></span>
    </p>
  </body>
</html></richcontent>
<node CREATED="1578368061323" ID="ID_1478704644" MODIFIED="1641885901227">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35813;&#20989;&#25968;&#26368;&#32456;&#26159;&#35843;&#29992;&#21040;&#20102;&#20301;&#20110;native/libs/input/Keyboard.cpp&#37324;&#38754;&#30340;&#20989;&#25968;
    </p>
    <p>
      
    </p>
    <p>
      status_t KeyMap::load(const InputDeviceIdentifier&amp; deviceIdenfifier,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const PropertyMap* deviceConfiguration)
    </p>
  </body>
</html></richcontent>
<node CREATED="1578368537612" ID="ID_1710216543" MODIFIED="1578368586807">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      if (deviceConfiguration) { <b><i><font color="#ff0000">&#22914;&#26524;&#26377;&#37197;&#32622;&#25991;&#20214;&#65292;&#20250;&#26681;&#25454;&#37197;&#32622;&#25991;&#20214;&#26469;&#21152;&#36733;kl&#21644;kcm&#25991;&#20214;</font></i></b>
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;String8 keyLayoutName;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (deviceConfiguration-&gt;tryGetProperty(String8(&quot;keyboard.layout&quot;),
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;keyLayoutName)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;status_t status = loadKeyLayout(deviceIdenfifier, keyLayoutName);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (status == NAME_NOT_FOUND) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ALOGE(&quot;Configuration for keyboard device '%s' requested keyboard layout '%s' but &quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;it was not found.&quot;,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deviceIdenfifier.name.string(), keyLayoutName.string());
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;String8 keyCharacterMapName;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (deviceConfiguration-&gt;tryGetProperty(String8(&quot;keyboard.characterMap&quot;),
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;keyCharacterMapName)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;status_t status = loadKeyCharacterMap(deviceIdenfifier, keyCharacterMapName);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (status == NAME_NOT_FOUND) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ALOGE(&quot;Configuration for keyboard device '%s' requested keyboard character &quot;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;map '%s' but it was not found.&quot;,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;deviceIdenfifier.name.string(), keyLayoutName.string());
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (isComplete()) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return OK;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1578368620653" ID="ID_1844340802" MODIFIED="1578368983795">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#27809;&#26377;&#37197;&#32622;&#25991;&#20214;&#30340;&#24773;&#20917;&#19979;&#65292;&#20250;&#25353;&#29031;&#20248;&#20808;&#32423;&#20381;&#27425;&#23547;&#25214;kl&#21644;kcm&#25991;&#20214;&#65306;
    </p>
    <p>
      
    </p>
    <p>
      // Try searching by device identifier.
    </p>
    <p>
      &#160;&#160;&#160;&#160;if (<b>probeKeyMap(deviceIdenfifier, String8::empty()</b>)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return OK;
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;// Fall back on the Generic key map.
    </p>
    <p>
      &#160;&#160;&#160;&#160;// TODO Apply some additional heuristics here to figure out what kind of
    </p>
    <p>
      &#160;&#160;&#160;&#160;//&#160;&#160;&#160;&#160;&#160;&#160;generic key map to use (US English, etc.) for typical external keyboards.
    </p>
    <p>
      &#160;&#160;&#160;&#160;if (<b>probeKeyMap(deviceIdenfifier, String8(&quot;Generic&quot;)</b>)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return OK;
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;// Try the Virtual key map as a last resort.
    </p>
    <p>
      &#160;&#160;&#160;&#160;if (<b>probeKeyMap(deviceIdenfifier, String8(&quot;Virtual&quot;)</b>)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return OK;
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#20174;eventhub&#33719;&#21462;&#30340;&#26085;&#24535;
    </p>
    <p>
      
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub: add device 5: /dev/input/event3
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;bus:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0019
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;vendor&#160;&#160;&#160;&#160;&#160;&#160;0001
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;product&#160;&#160;&#160;&#160;&#160;0001
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;version&#160;&#160;&#160;&#160;&#160;&#160;0100
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;name:&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;gpio-keys&quot;
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;location:&#160;&#160;&#160;&quot;gpio-keys/input0&quot;
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;unique id:&#160;&#160;&quot;&quot;
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;descriptor: &quot;d2c52ff0f656fac4cd7b7a118d575e0109a9fe1c&quot;
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 I EventHub:&#160;&#160;&#160;driver:&#160;&#160;&#160;&#160;&#160;v1.0.1
    </p>
    <p>
      385&#160;&#160;1265&#160;&#160;1364 D EventHub: No input device configuration file found for device 'gpio-keys'.
    </p>
    <p>
      387&#160;&#160;1265&#160;&#160;1364 W EventHub: Unable to disable kernel key repeat for /dev/input/event3: Function not implemented
    </p>
    <p>
      387&#160;&#160;1265&#160;&#160;1364 I EventHub: wakeMechanism=EPOLLWAKEUP, usingClockIoctl=true
    </p>
    <p>
      387&#160;&#160;1265&#160;&#160;1364 I EventHub: New device: id=5, fd=119, path='/dev/input/event3', name='gpio-keys', classes=0x1, configuration='', <b>keyLayout='/system/usr/keylayout/Generic.kl', keyCharacterMap='/system/usr/keychars/Generic.kcm',</b>&#160; builtinKeyboard=false,
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1578363179374" ID="ID_1223575485" MODIFIED="1641885879218">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ff0033">processEventsLocked(mEventBuffer, count)</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1578364048594" ID="ID_856046512" MODIFIED="1641885885594">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      processEventsForDeviceLocked(deviceId, rawEvent, batchSize)
    </p>
    <p>
      &#26368;&#20027;&#35201;&#30340;&#20989;&#25968;&#26159;&#36825;&#20010;
    </p>
    <p>
      &#35813;&#20989;&#25968;&#38543;&#21518;&#20250;&#35843;&#29992;&#21040; <b><i><font color="#cc0000">InputDevice::process(const RawEvent* rawEvents, size_t count)</font></i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1578364777077" ID="ID_1434200966" MODIFIED="1641885888287">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void InputDevice::process(const RawEvent* rawEvents, size_t count) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;size_t numMappers = mMappers.size();
    </p>
    <p>
      &#160;&#160;&#160; <b>mapper-&gt;process(rawEvent);&#160; mapper&#20250;&#26144;&#23556;&#21040;&#20855;&#20307;&#30340;mapper&#31867;&#22411;&#36827;&#34892;&#20107;&#20214;&#30340;&#22788;&#29702;</b>
    </p>
    <p>
      }
    </p>
    <p>
      
    </p>
    <p>
      &#25105;&#20204;&#30475;&#21040;&#26368;&#32456;&#26159;&#30001;mapper&#26469;&#23545;event&#36827;&#34892;&#22788;&#29702;&#30340;&#65292;&#20294;&#26159;&#36825;&#20010;mapper&#26159;&#20174;&#21738;&#37324;&#26469;&#30340;&#65311;
    </p>
    <p>
      mapper&#23454;&#38469;&#20195;&#34920;&#31995;&#32479;&#25509;&#21463;&#30340;key&#20540;&#26144;&#23556;&#65292;&#26159;&#22312;InputReader::addDeviceLocked&#30340;&#26102;&#20505;&#28155;&#21152;&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1578365161315" ID="ID_1498968346" MODIFIED="1578365169804">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/android-input-mapper.PNG" />
  </body>
</html></richcontent>
</node>
<node CREATED="1578365298131" ID="ID_1427521881" MODIFIED="1641885892361">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;keyboard&#31867;&#22411;&#30340;&#38190;&#20540;&#26469;&#35828;&#65292;&#20250;&#35843;&#29992;&#21040;KeyboardInputMapper::process()&#36827;&#34892;&#22788;&#29702;
    </p>
    <p>
      &#26368;&#32456;&#20250;&#35843;&#29992;&#21040;
    </p>
    <p>
      
    </p>
    <p>
      <i><font color="#ff0033">void KeyboardInputMapper::processKey(nsecs_t when, bool down, int32_t scanCode, </font></i>
    </p>
    <p>
      <i><font color="#ff0033">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int32_t usageCode)</font></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1578365510572" ID="ID_293344945" MODIFIED="1578365521383">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      if (getEventHub()-&gt;mapKey(getDeviceId(), scanCode, usageCode, mMetaState,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&amp;keyCode, &amp;keyMetaState, &amp;policyFlags)) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;keyCode = AKEYCODE_UNKNOWN;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;keyMetaState = mMetaState;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;policyFlags = 0;
    </p>
    <p>
      &#160;&#160;&#160;&#160;}
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1578359936288" ID="ID_179243895" MODIFIED="1578360384096">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      InputReader&#30340;&#20316;&#29992;&#65306;
    </p>
    <ol>
      <li>
        &#20174;EventHub&#35835;&#21462;&#20107;&#20214;events
      </li>
      <li>
        &#26681;&#25454;&#35835;&#21462;&#21040;&#30340;events&#29983;&#25104;inputEvent
      </li>
      <li>
        &#23558;inputEvent&#21457;&#36865;&#32473;event&#30417;&#21548;&#32773;&#65292;&#21363;QueuedInputListener,&#20869;&#37096;&#25104;&#21592;&#21517;<b><i><font color="#ff0000">mQueuedListener</font></i></b>, &#160;QueueInputListener&#20250;&#23558;&#20107;&#20214;&#20877;&#20256;&#36882;&#32473;InputDispatcher
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1641885940164" ID="ID_295649403" MODIFIED="1641885951318">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Touch&#35774;&#22791;
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node CREATED="1589424488998" ID="ID_1863609399" MODIFIED="1642053563695" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4" face="Times New Roman">19. SurfaceFlinger&#23398;&#20064;</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1589867000156" ID="ID_33565339" MODIFIED="1589867015442" TEXT="Graphic&#x67b6;&#x6784;&#x4ecb;&#x7ecd;">
<node CREATED="1642058955784" ID="ID_791630124" MODIFIED="1642058972191">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Overview</b>
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1642059027514" ID="ID_1342375309" MODIFIED="1642059059667">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Application developers draw images to the screen in three ways:
    </p>
    <p>
      &#160;<a href="https://source.android.com/devices/graphics/arch-sh#canvas">Canvas</a>, <a href="https://source.android.com/devices/graphics/arch-egl-opengl">OpenGL ES</a>, or <a href="https://source.android.com/devices/graphics/arch-vulkan">Vulkan</a>.
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1642059582229" ID="ID_1018159981" MODIFIED="1642059593733">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Android&#26174;&#21345;&#32452;&#20214;
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1642059751384" ID="ID_1631405431" MODIFIED="1642059782511">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26080;&#35770;&#24320;&#21457;&#32773;&#20351;&#29992;&#20160;&#20040;&#28210;&#26579; API&#65292;&#19968;&#20999;&#20869;&#23481;&#37117;&#20250;&#28210;&#26579;&#21040;&#160; <strong>Surface</strong>&#160;&#19978;&#12290;<b><font color="#3333ff">Surface &#34920;&#31034;&#32531;&#20914;&#21306;&#38431;&#21015;&#20013;&#30340;&#29983;&#20135;&#26041;&#65292;&#32780;&#32531;&#20914;&#21306;&#38431;&#21015;&#36890;&#24120;&#20250;&#34987; SurfaceFlinger &#28040;&#32791;&#12290;</font></b>&#22312; Android &#24179;&#21488;&#19978;&#21019;&#24314;&#30340;&#27599;&#20010;&#31383;&#21475;&#37117;&#30001; Surface &#25552;&#20379;&#25903;&#25345;&#12290;&#25152;&#26377;&#34987;&#28210;&#26579;&#30340;&#21487;&#35265; Surface &#37117;&#34987; SurfaceFlinger &#21512;&#25104;&#21040;&#23631;&#24149;&#12290;
    </p>
    <p>
      &#19979;&#22270;&#26174;&#31034;&#20102;&#20851;&#38190;&#32452;&#20214;&#22914;&#20309;&#21327;&#21516;&#24037;&#20316;
    </p>
  </body>
</html>
</richcontent>
<node CREATED="1642060037924" ID="ID_776621794" MODIFIED="1642060048374">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/Surface&#x6e32;&#x67d3;&#x7ec4;&#x4ef6;.png" />
  </body>
</html>
</richcontent>
<node CREATED="1642060163051" ID="ID_70267190" MODIFIED="1642060240680">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <h3 data-text="Image Stream Producers" role="presentation" id="image-stream-producers">
      Image Stream Producers
    </h3>
    <p>
      &#22270;&#24418;&#32531;&#23384;&#30340;&#29983;&#20135;&#32773;&#65292;&#27604;&#22914;OpenGL ES&#12289;Video Decoder
    </p>
  </body>
</html>
</richcontent>
</node>
<node CREATED="1642060296856" ID="ID_1196094854" MODIFIED="1642060857722">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <h3 data-text="Image stream consumers" role="presentation" id="image-stream-consumers">
      <span aria-level="3" class="devsite-heading" role="heading">Image stream consumers</span>
    </h3>
    <p>
      &#22270;&#24418;&#32531;&#23384;&#30340;&#28040;&#36153;&#32773;&#65292;&#26368;&#24120;&#35265;&#30340;&#28040;&#36153;&#32773;&#26159;SurfaceFlinger
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1589867023949" ID="ID_751597182" MODIFIED="1642058088972">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20302;&#23618;&#27425;&#32452;&#20214;&#20171;&#32461;
    </p>
  </body>
</html></richcontent>
<node CREATED="1589867190900" ID="ID_829320825" MODIFIED="1642058092518" TEXT="BufferQueue and gralloc">
<node CREATED="1589867278131" FOLDED="true" ID="ID_1007285125" MODIFIED="1608029012842">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      BufferQueue&#29992;&#20110;&#36830;&#25509;&#26174;&#31034;&#25968;&#25454;&#30340;producer&#21644;consumer&#65292;
    </p>
    <p>
      buffer&#30340;&#20998;&#37197;&#26159;&#36890;&#36807;gralloc&#20869;&#23384;&#20998;&#37197;&#22120;&#26469;&#36827;&#34892;&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1589902831215" ID="ID_1855957717" MODIFIED="1589903140914">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#29983;&#20135;&#32773;&#38656;&#35201;buffer&#30340;&#26102;&#20505;&#65292;&#23427;&#20351;&#29992;dequeueBuffer()&#35843;&#29992;&#30003;&#35831;buffer&#65292;
    </p>
    <p>
      &#29983;&#20135;&#32773;&#22635;&#20805;&#32531;&#20914;&#21306;&#65292;&#24182;&#36890;&#36807;&#35843;&#29992;queueBuffer()&#23558;&#32531;&#20914;&#21306;&#37325;&#26032;&#25918;&#22238;&#21040;&#38431;&#21015;&#20013;&#12290;
    </p>
    <p>
      &#28040;&#36153;&#32773;&#21017;&#36890;&#36807;accquireBuffer()&#26469;&#33719;&#21462;BufferQueue&#37324;&#38754;&#30340;&#32531;&#20914;&#21306;&#65292;&#28982;&#21518;&#20351;&#29992;
    </p>
    <p>
      &#35813;&#25968;&#25454;&#65292;&#26368;&#21518;&#36890;&#36807;&#35843;&#29992;releaseBuffer()&#37322;&#25918;&#32531;&#20914;&#21306;&#12290;
    </p>
    <p>
      <b><font color="#ec0e0e">sync framework</font></b>&#25511;&#21046;&#32531;&#20914;&#21306;&#22312;graphic pipeline&#37324;&#38754;&#30340;&#31227;&#21160;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1589903352226" ID="ID_1305604457" MODIFIED="1589903399014">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Times New Roman" size="4" color="#1721f5">&#20351;&#29992;systrace&#26469;&#36319;&#36394;BufferQueue</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1589902460424" ID="ID_221965602" MODIFIED="1589902555185">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Times New Roman" size="4" color="#eb0404"><i>gralloc&#36127;&#36131;buffer&#30340;&#20998;&#37197;&#65292;&#24182;&#19988;&#23454;&#29616;&#20102;&#20004;&#31181;HIDL&#30340;&#25509;&#21475;</i></font>
    </p>
    <p>
      <code http-equiv="content-type" content="text/html; charset=utf-8" translate="no" dir="ltr">hardware/interfaces/graphics/allocator/</code>&#160;and <code translate="no" dir="ltr">hardware/interfaces/graphics/mapper/</code>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1589867691389" FOLDED="true" ID="ID_17522568" MODIFIED="1608029011360">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SurfaceFlinger, Hardware Composer,
    </p>
    <p>
      and virtual displays
    </p>
  </body>
</html></richcontent>
<node CREATED="1589867768045" ID="ID_950685792" MODIFIED="1589867934339">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      surfaceflinger&#29992;&#20110;&#25509;&#25910;&#20174;&#22810;&#20010;&#28304;&#22836;&#26469;&#30340;&#25968;&#25454;&#65292;&#23558;&#23427;&#20204;&#21512;&#24182;&#65292;
    </p>
    <p>
      &#28982;&#21518;&#23558;&#23427;&#20204;&#21457;&#36865;&#32473;display&#36827;&#34892;&#26174;&#31034;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      hardware composite hal (hwc) &#21017;&#20915;&#23450;&#30528;&#20351;&#29992;&#30828;&#20214;&#20197;&#26368;&#26377;&#25928;&#29575;&#30340;&#26041;&#24335;&#23545;
    </p>
    <p>
      &#25968;&#25454;&#36827;&#34892;&#22797;&#21512;&#25805;&#20316;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      virtual display&#20351;&#24471;&#22312;&#25972;&#20010;&#31995;&#32479;&#24403;&#20013;&#37117;&#21487;&#20197;&#33719;&#21462;&#22797;&#21512;&#20043;&#21518;&#30340;&#25968;&#25454;&#36755;&#20986;&#65292;&#21487;&#20197;&#29992;&#26469;
    </p>
    <p>
      &#36827;&#34892;&#24405;&#23631;&#25805;&#20316;&#25110;&#32773;&#26159;&#23558;&#23631;&#24149;&#25968;&#25454;&#36890;&#36807;&#32593;&#32476;&#36827;&#34892;&#21457;&#36865;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1589882048122" FOLDED="true" ID="ID_1794393529" MODIFIED="1608029009761">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Times New Roman">SurfaceFlinger&#30340;&#20316;&#29992;&#23601;&#26159;&#25509;&#25910;buffer&#65292;&#21512;&#25104;buffer&#65292;&#23558;buffer&#36865;&#21040;&#26174;&#31034;&#27169;&#22359;&#36827;&#34892;&#26174;&#31034;&#12290; </font>
    </p>
    <p>
      <font face="Times New Roman">WindowManager&#21521;SurfaceFlinger&#25552;&#20379;buffer&#21644;window metadata&#12290;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1589888434672" ID="ID_1584433429" MODIFIED="1589889420399">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SurfaceFlinger&#21487;&#20197;&#36890;&#36807;&#20004;&#31181;&#26041;&#24335;&#25509;&#25910;buffers:
    </p>
    <p>
      &#19968;&#31181;&#26159;&#36890;&#36807;BufferQueue&#21644;SurfaceControl
    </p>
    <p>
      &#21478;&#19968;&#31181;&#26159;&#36890;&#36807;ASurfaceControl
    </p>
    <p>
      
    </p>
    <p>
      &#24403;app&#34987;&#25918;&#32622;&#21040;&#21069;&#21488;&#20043;&#21518;&#65292;&#23427;&#20174;WindowManager&#35831;&#27714;buffer&#65292;
    </p>
    <p>
      WindowManager&#28982;&#21518;&#20174;SurfaceFlinger&#35831;&#27714;&#19968;&#20010;layer&#12290;
    </p>
    <p>
      &#19968;&#20010;layer&#23601;&#26159;&#19968;&#20010;surface&#30340;&#32452;&#21512;&#65292;&#21253;&#21547;&#30528;BufferQueue&#21644;SurfaceControl&#12290;
    </p>
    <p>
      SurfaceControl &#21253;&#21547;&#30528;layer metadata&#12290;
    </p>
    <p>
      SurfaceFlinger&#21019;&#24314;&#20102;layer,&#23558;layer&#21457;&#36865;&#32473;WindowManager&#12290; WindowManager &#28982;&#21518;&#23558;surface&#21457;&#36865;&#32473;app,
    </p>
    <p>
      WindowManger&#20250;&#20445;&#30041;SurfaceControl&#26469;&#25805;&#32437;app&#22312;&#23631;&#24149;&#19978;&#30340;&#26174;&#31034;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1589871188490" FOLDED="true" ID="ID_1852887379" MODIFIED="1608029015162">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Surface, canvas, and SurfaceHolder.
    </p>
  </body>
</html></richcontent>
<node CREATED="1589871494133" ID="ID_1395328135" MODIFIED="1589871680124">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Surface&#29992;&#20110;&#20135;&#29983;buffer&#32473;surfaceflinger&#36827;&#34892;&#28040;&#36153;
    </p>
    <p>
      
    </p>
    <p>
      Canvas APIs &#25552;&#20379;&#20102;&#19968;&#31181;&#36719;&#20214;&#26041;&#27861;&#65288;&#30828;&#20214;&#21152;&#36895;&#25903;&#25345;&#65289;&#65292;&#29992;&#20110;&#30452;&#25509;&#22312;surface&#19978;&#36827;&#34892;&#32472;&#21046;&#65288;OpenGL ES&#30340;&#20302;&#32423;&#26367;&#20195;&#21697;&#65289;
    </p>
    <p>
      
    </p>
    <p>
      &#20219;&#20309;&#36319;&#35270;&#22270;&#26377;&#20851;&#30340;&#19996;&#35199;&#37117;&#23569;&#19981;&#20102;SurfaceHolder&#65292;&#35813;&#32452;&#20214;&#30340;&#30446;&#30340;&#26159;&#35774;&#32622;&#21644;&#33719;&#21462;surface&#30340;&#21442;&#25968;&#65288;&#27604;&#22914;&#22823;&#23567;&#36319;&#26684;&#24335;&#65289;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1589871958854" FOLDED="true" ID="ID_1233105700" MODIFIED="1608029016736" TEXT="EGLSurface and OpenGL ES">
<node CREATED="1589872049694" ID="ID_1859297318" MODIFIED="1589872398368">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      android&#20351;&#29992;OpenGL ES&#26469;&#28210;&#26579;&#26174;&#21345;&#65292;&#20351;&#29992;EGL&#24211;&#26469;&#21019;&#24314;GLES&#19978;&#19979;&#25991;&#24182;&#19988;&#25552;&#20379;
    </p>
    <p>
      windowing system&#29992;&#26469;&#35753;GLES&#25191;&#34892;&#28210;&#26579;&#21160;&#20316;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      ANativeWindow&#26159;&#19968;&#31181;C/C++&#31561;&#25928;&#20110;Java Surface &#31867;&#30340;&#23454;&#29616;&#65292;&#21487;&#20197;&#20174;native&#23618;&#21019;&#24314;&#19968;&#20010;EGL windows
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1589872485383" FOLDED="true" ID="ID_648362724" MODIFIED="1608029017696">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Vulkan
    </p>
  </body>
</html></richcontent>
<node CREATED="1589872503893" ID="ID_165221228" MODIFIED="1589872704057">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Vulkan&#26159;&#19968;&#31181;&#20302;&#24320;&#38144;&#12289;&#36328;&#24179;&#21488;&#30340;&#39640;&#24615;&#33021;3D&#22270;&#24418;API&#65292;
    </p>
    <p>
      vulkan&#32473;app&#25552;&#20379;&#19968;&#31181;&#21019;&#24314;&#39640;&#36136;&#37327;&#12289;&#23454;&#26102;&#24615;&#30340;&#22270;&#24418;API&#65292;
    </p>
    <p>
      vulkan&#30340;&#20248;&#28857;&#21253;&#25324;&#20943;&#23567;CPU&#24320;&#38144;&#20197;&#21450;&#25903;&#25345;SPIR-V Binary Intermediate&#35821;&#35328;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1589867041759" FOLDED="true" ID="ID_86563497" MODIFIED="1608029021448">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39640;&#23618;&#27425;&#32452;&#20214;&#20171;&#32461;
    </p>
  </body>
</html></richcontent>
<node CREATED="1589872849988" FOLDED="true" ID="ID_1816220453" MODIFIED="1608029018680" TEXT="SurfaceView and GLSurfaceView. ">
<node CREATED="1589872875544" ID="ID_973037572" MODIFIED="1589873063093">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SurfaceView&#23558;surface&#21644;view&#32452;&#21512;&#36215;&#26469;&#20102;&#65292;SurfaceView&#30340;view&#32452;&#20214;&#30001;SurfaceFlinger&#36827;&#34892;&#21512;&#25104;&#65292;
    </p>
    <p>
      &#20351;&#24471;&#28210;&#26579;&#21487;&#20197;&#22312;&#36319;app UI &#28210;&#26579;&#38548;&#31163;&#30340;&#32447;&#31243;&#37324;&#38754;&#36827;&#34892;
    </p>
    <p>
      
    </p>
    <p>
      GLSurfaceView&#21017;&#25552;&#20379;&#20102;&#24110;&#21161;&#20989;&#25968;&#26469;&#31649;&#29702;EGL&#19978;&#19979;&#25991;&#65292;&#32447;&#31243;&#38388;&#20132;&#20114;&#20197;&#21450;&#36319;activity&#29983;&#21629;&#21608;&#26399;&#36827;&#34892;&#20132;&#20114;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1589873129630" FOLDED="true" ID="ID_1869400053" MODIFIED="1608029019576" TEXT="SurfaceTexture">
<node CREATED="1589873137642" ID="ID_360517241" MODIFIED="1589873287416">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SurfaceTexture&#23558;surface&#21644;GLES&#36827;&#34892;&#20102;&#32452;&#21512;&#65292;&#29992;&#26469;&#21019;&#24314;BufferQueue
    </p>
    <p>
      &#32473;APP&#36827;&#34892;&#28040;&#36153;&#65292;APP&#35843;&#29992;EGL api&#35753;buffer&#20316;&#20026;&#22806;&#37096;&#30340;&#32441;&#29702;&#32473;GLES&#20351;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1589874441481" FOLDED="true" ID="ID_1248502840" MODIFIED="1608029020617" TEXT="TextureView">
<node CREATED="1589874505070" ID="ID_1654793807" MODIFIED="1589874809741">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      TextureView&#23558;view&#36319;SurfaceTexture&#36827;&#34892;&#32452;&#21512;&#65292;
    </p>
    <p>
      TextureView&#23558;SurfaceTexture&#36827;&#34892;&#21253;&#35065;&#65292;&#24182;&#19988;&#36127;&#36131;&#23545;&#22238;&#35843;&#36827;&#34892;&#30456;&#24212;&#21644;&#36127;&#36131;&#33719;&#21462;buffer&#65292;
    </p>
    <p>
      &#24403;&#36827;&#34892;&#32472;&#21046;&#30340;&#26102;&#20505;&#65292;TextureView&#26681;&#25454;view state&#30340;&#25351;&#31034;&#22312;&#26368;&#36817;&#25509;&#25910;&#30340;buffer&#25968;&#25454;&#19978;&#36827;&#34892;
    </p>
    <p>
      &#25805;&#20316;&#65292;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1589869002626" ID="ID_1530763175" MODIFIED="1589869011456" TEXT="adb shell dumpsys window displays"/>
<node CREATED="1590048029537" ID="ID_993132978" MODIFIED="1590048074260">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <div charset="utf-8">
      <div>
        <p>
          <font face="&#x96b6;&#x4e66;" size="4">screencap&#21629;&#20196;&#21442;&#25968;&#22914;&#19979; </font>
        </p>
        <blockquote>
          <p>
            <font face="&#x96b6;&#x4e66;" size="4">screencap [-hp] [-d display-id] [FILENAME]<br face="&#x96b6;&#x4e66;" size="4" />-h: this message<br face="&#x96b6;&#x4e66;" size="4" />-p: save the file as a png<br face="&#x96b6;&#x4e66;" size="4" />-d: specify the display id to capture, default 0 </font>
          </p>
        </blockquote>
        <p>
          <font face="&#x96b6;&#x4e66;" size="4">T2:/ $ screencap -d 1 -p /sdcard/ff.png<br face="&#x96b6;&#x4e66;" size="4" />&#20351;&#29992;&#36825;&#20010;&#21629;&#20196;&#21363;&#21487;&#25130;&#21462;&#21103;&#23631;&#65292;-d&#21518;&#38754;&#23545;&#24212;&#30340;&#26159;&#23631;&#24149;id&#65292;0&#20026;&#20027;&#23631;&#65292;1&#20026;&#21103;&#23631;&#65292;<br face="&#x96b6;&#x4e66;" size="4" />&#20351;&#29992;Runtime.getRuntime().exec&#21629;&#20196;&#21363;&#21487;<br face="&#x96b6;&#x4e66;" size="4" />&#27880;&#65306;&#26041;&#27861;&#20108;&#27809;&#26377;&#36827;&#34892;&#23581;&#35797;&#65292;&#24212;&#35813;&#38656;&#35201;&#31995;&#32479;&#31614;&#21517;&#25165;&#21487;&#20197; </font>
        </p>
      </div>
      <font face="&#x96b6;&#x4e66;" size="4"><br face="&#x96b6;&#x4e66;" size="4" />
      </font>
    </div>
  </body>
</html></richcontent>
</node>
<node CREATED="1589954520492" ID="ID_1202540977" MODIFIED="1642053578293" TEXT="DRM/KMS &#x7814;&#x7a76;">
<node CREATED="1589954572422" ID="ID_179384859" MODIFIED="1642053632845">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" face="&#x6977;&#x4f53;"><b>&#24635;&#20307;&#20171;&#32461;</b></font>
    </p>
    <p>
      
    </p>
    <p>
      <font size="4" face="Times New Roman">DRM&#65288;direct rendering manager&#65289;</font>&#26159;&#24341;&#29992;&#36827;&#26469;&#35299;&#20915;&#23884;&#20837;&#24335;GPU&#22270;&#24418;&#21345;&#38382;&#39064;&#30340;
    </p>
    <p>
      <font size="4" face="Times New Roman">KMS&#65288;kernel mode setting&#65289;</font>&#26159;DRM API&#30340;&#23376;&#38598;&#65292;&#29992;&#20110;&#35774;&#32622;&#32473;&#23450;display&#19978;&#30340;&#27169;&#24335;&#65292;kms&#25552;&#20379;&#20102;&#19968;&#31181;
    </p>
    <p>
      &#37197;&#32622;&#26174;&#21345;&#30340;&#26174;&#31034;pipeline&#30340;&#26041;&#24335;
    </p>
    <p>
      &#28210;&#26579;&#21644;&#27169;&#24335;&#35774;&#32622;&#26159;&#34987;&#20998;&#25104;2&#31181;&#19981;&#21516;&#30340;API&#30340;&#65292;&#36890;&#36807;&#35774;&#22791;&#33410;&#28857;<font color="#ff0000"><b>&#160; /dev/dri/renderX</b></font>&#21644;<font color="#ff0000"><b>/dev/dri/controlDX</b></font>&#36827;&#34892;&#35775;&#38382;
    </p>
  </body>
</html></richcontent>
<node CREATED="1589961712570" ID="ID_504162052" MODIFIED="1642053638300">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/kmv-pipeline-overview.PNG" />
  </body>
</html></richcontent>
<node CREATED="1589961778234" ID="ID_905913243" MODIFIED="1589961839209">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39640;&#36890;&#22312;Encoder&#21644;Connector&#20043;&#38388;&#21152;&#20102;&#19968;&#20010;Bridge,
    </p>
    <p>
      Bridge&#30340;&#20316;&#29992;&#26159;&#21442;&#19982;mode&#35774;&#32622;&#12289;&#30005;&#28304;&#31649;&#29702;&#12289;connection&#26816;&#27979;&#31561;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1590040434961" ID="ID_593481873" MODIFIED="1642053592661">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="&#x96b6;&#x4e66;" size="5">&#39537;&#21160;&#20195;&#30721;&#20171;&#32461; </font>
    </p>
    <p>
      
    </p>
    <p>
      &#20174;&#32593;&#19978;&#25628;&#32034;&#21040;&#30340;&#36164;&#26009;&#26469;&#30475;&#65292;DPU&#30340;&#39537;&#21160;&#24050;&#32463;&#21512;&#24182;&#21040;&#20102;&#20869;&#26680;&#24403;&#20013;&#65292;
    </p>
    <p>
      &#20294;&#26159;&#22312;&#30446;&#21069;&#20351;&#29992;&#30340;&#20195;&#30721;&#37324;&#38754;&#20173;&#28982;&#26159;MDP&#30340;&#39537;&#21160;&#20195;&#30721;&#24418;&#24335;
    </p>
  </body>
</html></richcontent>
<node CREATED="1590040486480" FOLDED="true" ID="ID_1523710083" MODIFIED="1608028997745" TEXT="MDP5 &#x4ecb;&#x7ecd;">
<node CREATED="1590040497944" ID="ID_772876487" MODIFIED="1590040741948">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Times New Roman" size="4">For MDP5, the mapping is: </font>
    </p>
    <p>
      
    </p>
    <p>
      <font face="Times New Roman" size="4">plane&#160;&#160;&#160;-&gt; PIPE{RGBn,VIGn}&#160;&#160;&#160;&#160;\ </font>
    </p>
    <p>
      <font face="Times New Roman" size="4">crtc&#160;&#160;&#160;&#160;-&gt; LM (layer mixer)&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|-&gt; MDP &quot;device&quot; </font>
    </p>
    <p>
      <font face="Times New Roman" size="4">encoder -&gt; INTF&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/ </font>
    </p>
    <p>
      <font face="Times New Roman" size="4">connector -&gt; HDMI/DSI/eDP/etc&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;--&gt; other device(s) </font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1590043597538" ID="ID_198730199" MODIFIED="1590043616151" TEXT="SDE msm8996/msm8998"/>
<node CREATED="1590041125460" FOLDED="true" ID="ID_477644486" MODIFIED="1608028996369">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>DPU795 Overviews</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1590041344464" ID="ID_1360579062" MODIFIED="1590041398163">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      DPU
    </p>
    <p>
      &#25552;&#20379;&#30828;&#20214;&#21152;&#36895;&#30340;&#22270;&#20687;&#22788;&#29702;&#65292;&#24555;&#36895;&#20256;&#36755;&#22270;&#20687;&#25968;&#25454;&#21040;&#26174;&#31034;&#25509;&#21475;&#65292;
    </p>
    <p>
      &#22686;&#24378;&#30340;&#23631;&#19978;&#22270;&#20687;&#36136;&#37327;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1590041402337" ID="ID_589390516" MODIFIED="1590041492941">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Source Surface processor(source surface processor pipes)
    </p>
    <p>
      
    </p>
    <p>
      &#20026;&#28304;source&#25552;&#20379;&#26684;&#24335;&#36716;&#25442;&#21644;&#36136;&#37327;&#25552;&#21319;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1590041496072" ID="ID_892443915" MODIFIED="1590041557979">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LM(Layer Mixer)
    </p>
    <p>
      
    </p>
    <p>
      &#23558;source surface&#36827;&#34892;blends &#21644; mixes&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1590041585829" ID="ID_1402594044" MODIFIED="1590041649887">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      DSPP&#65288;Destination Surface Processor&#65289;
    </p>
    <p>
      
    </p>
    <p>
      &#22522;&#20110;panel&#30340;&#29305;&#24615;&#23545;&#22270;&#20687;&#36827;&#34892;&#36716;&#25442;&#12289;&#30699;&#27491;&#21644;&#35843;&#25972;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1590041736495" ID="ID_1603574252" MODIFIED="1590041749128">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      DSC &#26174;&#31034;&#27969;&#21387;&#32553;&#25216;&#26415;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1590041795362" ID="ID_1765900803" MODIFIED="1590041837471">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Write Back&#25216;&#26415;</b></font>
    </p>
    <p>
      &#23558;&#21457;&#36865;&#32473;display&#25509;&#21475;&#30340;&#22270;&#20687;&#30452;&#25509;&#20889;&#22238;&#21040;&#20869;&#23384;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1590049694297" ID="ID_532477291" MODIFIED="1642053615034">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#cc0033" face="&#x6977;&#x4f53;" size="4"><b>Android&#21452;&#23631;&#24322;&#26174;&#30340;&#23454;&#29616;&#26041;&#24335;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1590049761370" FOLDED="true" ID="ID_627120558" MODIFIED="1608028993113" TEXT="Presentation&#x65b9;&#x5f0f;">
<node CREATED="1590049801736" ID="ID_601846220" MODIFIED="1590049831302">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21442;&#32771;&#38142;&#25509;&#65306;
    </p>
    <p>
      https://developer.android.com/reference/android/app/Presentation
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1590049866614" ID="ID_102014919" MODIFIED="1590139201322">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35895;&#27468;&#23448;&#26041;&#31034;&#20363;APK&#20195;&#30721;
    </p>
    <p>
      evelopment/samples/ApiDemos/src/com/example/android/apis/app/PresentationActivity.java
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1590049775520" ID="ID_839716293" MODIFIED="1590049796654" TEXT="RK DualScreen&#x65b9;&#x5f0f;&#xff08;RK&#x5e73;&#x53f0;&#xff1f;&#xff09;"/>
</node>
<node CREATED="1607480714147" FOLDED="true" ID="ID_489629177" MODIFIED="1642058083992">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" face="Times New Roman" color="#0000ff">Android8.0 SurfaceFlinger&#27979;&#35797;&#31243;&#24207;SurfaceInterceptor_test.cpp&#20998;&#26512;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1607480817660" FOLDED="true" ID="ID_1306048507" MODIFIED="1642058082639" TEXT="&#x7f51;&#x7edc;&#x53c2;&#x8003;&#x8d44;&#x6599;&#x94fe;&#x63a5;">
<node CREATED="1607480829964" ID="ID_1199866483" MODIFIED="1607480832483" TEXT="http://static.kancloud.cn/alex_wsc/android_depp/412978"/>
<node CREATED="1608026295777" ID="ID_87990812" MODIFIED="1608026298968" TEXT="https://blog.csdn.net/xu_chang/article/details/50178407"/>
</node>
<node CREATED="1607480836238" FOLDED="true" ID="ID_1625663739" MODIFIED="1642058080368" TEXT="&#x4ee3;&#x7801;&#x5206;&#x6790;">
<node CREATED="1607480848970" FOLDED="true" ID="ID_1155581260" MODIFIED="1608028984468">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>SurfaceComposerClient&#31867;&#20171;&#32461;</b>
    </p>
    <p>
      
    </p>
    <p>
      &#35813;&#31867;&#30340;&#38544;&#21547;&#24847;&#24605;&#26159;&#35813;&#31867;&#20250;&#36319;surfaceflinger&#26377;&#25152;&#20132;&#20114;&#65292;&#22240;&#20026;SurfaceFlinger&#27966;&#29983;&#20110;SurfaceComposer
    </p>
    <p>
      &#22312;SurfaceComposerClient&#30340;&#26500;&#36896;&#20989;&#25968;&#24403;&#20013;&#65292;&#20250;&#39318;&#20808;&#36890;&#36807;&#35843;&#29992;
    </p>
    <p>
      <font color="#ff0000"><b>sp&lt;ISurfaceComposer&gt; sm(getComposerService())</b></font>&#160; &#33719;&#21462;&#36319;SurfaceFlinger&#27807;&#36890;&#30340;&#36890;&#36947;
    </p>
    <p>
      &#28982;&#21518; <font color="#ff0000"><b>sm-&gt;createConnection()</b></font>&#20989;&#25968;
    </p>
    <p>
      <font color="#ff0000"><b>sp&lt;ISurfaceFlingerClient&gt;SurfaceFlinger::createConnection()</b></font>&#160; &#35813;&#20989;&#25968;&#23454;&#38469;&#19978;&#26159;&#21019;&#24314;&#20102;&#19968;&#20010;BClient,
    </p>
    <p>
      BClient&#27966;&#29983;&#20110;SurfaceFlingerClient, Bclient&#30340;&#20316;&#29992;&#26159;&#25509;&#21463;&#23458;&#25143;&#31471;&#30340;&#35831;&#27714;&#65292;&#28982;&#21518;&#25226;&#35831;&#27714;&#25552;&#20132;&#32473;SF&#65292;
    </p>
    <p>
      BClient&#21033;&#29992;&#20102;SurfaceFlinger&#20869;&#37096;&#21019;&#24314;&#30340;&#19968;&#20010;SharedClient&#37324;&#38754;&#30340;&#20849;&#20139;&#20869;&#23384;&#21019;&#24314;&#20102;ControlBlock&#23545;&#35937;&#65292;
    </p>
    <p>
      &#19968;&#20010;SharedClient&#37324;&#38754;&#26377;31&#20010;&#26174;&#31034;&#23618;&#65292;&#27599;&#20010;&#26174;&#31034;&#23618;&#37324;&#38754;&#26377;2&#20010;buffer&#65292;&#29992;&#26469;&#23454;&#29616;page flip
    </p>
    <p>
      
    </p>
    <p>
      &#26368;&#21518;&#22312;SurfaceComposerClient&#30340;&#26500;&#36896;&#20989;&#25968;&#37324;&#38754;&#35843;&#29992;_init&#20989;&#25968;&#65292;init&#20989;&#25968;&#20027;&#35201;&#23601;&#26159;&#21021;&#22987;&#21270;SurfaceComposerClient&#37324;&#38754;&#30340;
    </p>
    <p>
      &#19968;&#20123;&#25104;&#21592;&#21464;&#37327;
    </p>
    <p>
      mClient&#34987;&#36171;&#20540;&#25104;BClient
    </p>
    <p>
      mSignalServer&#34987;&#36171;&#20540;&#25104;sm
    </p>
    <p>
      mControl&#34987;&#36171;&#20540;&#25104;SharedClient&#65292;&#26159;surface&#31995;&#32479;&#30340;ControlBlock&#23545;&#35937;
    </p>
  </body>
</html></richcontent>
<node CREATED="1607485462948" ID="ID_1513608244" MODIFIED="1607485471776">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/SurfaceComposerClient&#x7275;&#x626f;&#x5230;&#x7684;&#x7c7b;.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1607491600250" ID="ID_323304461" MODIFIED="1607497054318">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">sp&lt;SurfaceControl&gt; SurfaceComposerClient::createSurface( </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const String8&amp; name, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;uint32_t w, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;uint32_t h, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;PixelFormat format, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;uint32_t flags, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;SurfaceControl* parent, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;uint32_t windowType, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;uint32_t ownerUid) </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">{ </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;sp&lt;SurfaceControl&gt; sur; </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;if (mStatus == NO_ERROR) { </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sp&lt;IBinder&gt; handle; </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#ff0033">&#23545;&#24212;&#30340;&#26159;LayerBasicClient::Surface, &#35813;Surface&#26159;&#19968;&#20010;&#25903;&#25345;Binder&#36890;&#20449;&#30340;&#31867;&#65292;&#27966;&#29983;&#20110;ISurface; </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#ff0033">LayerBasicClient&#20195;&#34920;&#26174;&#31034;&#23618;&#65292;&#19981;&#21516;&#31867;&#22411;&#30340;&#26174;&#31034;&#23618;&#20250;&#21019;&#24314;&#19981;&#21516;&#31867;&#22411;&#30340;LayerBasiceClient </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#ff0033">layer-&gt;getSurface() &#20250;&#33719;&#21462;&#21040;Surface&#21477;&#26564;</font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sp&lt;IBinder&gt; parentHandle; </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sp&lt;IGraphicBufferProducer&gt; gbp; </font>
    </p>
    <p>
      
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (parent != nullptr) { </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;parentHandle = parent-&gt;getHandle(); </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;status_t err = mClient-&gt;createSurface(name, w, h, format, flags, parentHandle, </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;windowType, ownerUid, &amp;handle, &amp;gbp); </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ALOGE_IF(err, &quot;SurfaceComposerClient::createSurface error %s&quot;, strerror(-err)); </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (err == NO_ERROR) { </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sur = new SurfaceControl(this, handle, gbp); </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#ff0000">SurfaceControl&#21487;&#20197;&#30475;&#20570;&#26159;&#19968;&#20010;wrapper&#31867;&#65292;&#20854;&#20869;&#37096;&#30340;mClient&#31867;&#20445;&#23384;&#20102;SurfaceComposerClient&#25351;&#38024;&#65292; </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#ff0000">mSurface&#25104;&#21592;&#20445;&#23384;&#20102;createSurface&#36820;&#22238;&#30340;ISurface&#31867;&#23545;&#35937;</font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;} </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">&#160;&#160;&#160;&#160;return sur; </font>
    </p>
    <p>
      <font size="4" face="Times New Roman" color="#0000cc">} </font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1641520138985" FOLDED="true" ID="ID_1556837581" MODIFIED="1641885605193" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Times New Roman" size="4"><b>21 Sensor&#27169;&#22359;&#23398;&#20064;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1641520210691" FOLDED="true" ID="ID_15621839" MODIFIED="1641885603771" TEXT="1.&#x5173;&#x4e8e;&#x624b;&#x673a;&#x5750;&#x6807;&#x7cfb;&#x7684;&#x5b9a;&#x4e49;">
<node CREATED="1641520259491" FOLDED="true" ID="ID_1795558162" MODIFIED="1641885601389">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#20110;sensor api&#30340;&#22352;&#26631;&#31995;&#32479;
    </p>
  </body>
</html></richcontent>
<node CREATED="1641522371694" ID="ID_561599142" MODIFIED="1641522383091">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/sensor&#x5750;&#x6807;&#x7cfb;.PNG" />
  </body>
</html></richcontent>
<node CREATED="1641533165159" ID="ID_588323468" MODIFIED="1641533283114">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#23558;&#25163;&#26426;&#30340;&#23631;&#24149;&#27491;&#23545;&#33258;&#24049;&#65292;&#22402;&#30452;&#65292;&#37027;&#20040;&#35835;&#21462;&#21152;&#36895;&#24230;&#35745;&#65292;&#25105;&#20204;&#21487;&#20197;&#30475;&#21040;&#21152;&#36895;&#24230;&#35745;&#30340;
    </p>
    <p>
      Y&#36724;&#36755;&#20986;&#30340;&#20540;&#26159;9.8&#24038;&#21491;&#65307;<b>&#23454;&#38469;&#19978;&#21152;&#36895;&#24230;&#36755;&#20986;&#30340;&#20540;&#26159;&#23454;&#38469;&#20316;&#29992;&#21152;&#36895;&#24230;&#30340;&#21453;&#26041;&#21521;&#30340;&#20540;</b>&#65307;
    </p>
    <p>
      &#22312;google pixel&#25163;&#26426;&#19978;&#39564;&#35777;&#26159;&#22914;&#27492;&#30340;&#65292;&#20174;&#19979;&#22270;&#30340;bmi085&#33455;&#29255;&#30340;&#31034;&#24847;&#22270;&#20063;&#21487;&#20197;&#30475;&#21040;&#26159;&#22914;&#27492;
    </p>
  </body>
</html></richcontent>
<node CREATED="1641533746791" ID="ID_1017493527" MODIFIED="1641533754422">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/bmi085&#x8f74;&#x5411;&#x793a;&#x610f;&#x56fe;.PNG" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1641535042640" ID="ID_429837970" MODIFIED="1641535970810">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>android sensor overivew&#37096;&#20998;&#25552;&#21040;&#65292;&#24212;&#29992;&#23618;&#19981;&#33021;&#20551;&#23450;&#35774;&#22791;&#30340;&#33258;&#28982;&#26041;&#21521;&#65288;&#40664;&#35748;&#26041;&#21521;&#65289;&#26159;&#31446;&#30452;&#26041;&#21521;&#65292; </b>
    </p>
    <p>
      <b>&#27604;&#22914;&#24179;&#26495;&#30005;&#33041;&#30340;&#33258;&#28982;&#26041;&#21521;&#23601;&#26159;&#27178;&#23631;&#26041;&#21521;&#65292;&#24635;&#32780;&#35328;&#20043;&#65292;sensor&#30340;&#22352;&#26631;&#31995;&#26159;&#22522;&#20110;&#35774;&#22791;&#30340;&#33258;&#28982;&#26041;&#21521;&#26469;&#35828;&#30340;&#12290;</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1641547021049" ID="ID_1517080071" MODIFIED="1641547308799">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24212;&#29992;&#31243;&#24207;&#38656;&#35201;&#23558;&#20256;&#24863;&#22120;&#25968;&#25454;&#21644;&#23631;&#24149;&#30340;&#26174;&#31034;&#30456;&#21305;&#37197;&#65292;&#37027;&#20040;&#38656;&#35201;&#20351;&#29992;<b>getRotation()</b>&#26041;&#27861;&#30830;&#23450;&#23631;&#24149;&#26059;&#36716;&#65292;
    </p>
    <p>
      &#28982;&#21518;&#20351;&#29992;<b>remapCoordinateSystem()</b>&#26041;&#27861;&#23558;&#20256;&#24863;&#22120;&#22352;&#26631;&#26144;&#23556;&#21040;&#23631;&#24149;&#22352;&#26631;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      <font color="#ff0000" face="Times New Roman" size="4">&#32463;&#36807;&#25105;&#30340;&#27979;&#35797;getRotation()&#26041;&#27861;&#30830;&#23450;&#30340;&#26159;APP&#30340;&#30028;&#38754;&#24067;&#23616;&#36319;&#23631;&#24149;&#40664;&#35748;&#33258;&#28982;&#26041;&#21521;&#20043;&#38388;&#30340;&#26059;&#36716;&#35282;&#24230;&#65292;&#27604;&#22914; </font>
    </p>
    <p>
      <font color="#ff0000" face="Times New Roman" size="4">APP&#24378;&#21046;&#24403;&#21069;&#30340;&#30028;&#38754;&#26159;&#27178;&#23631;&#30028;&#38754;&#65292;&#20294;&#26159;&#24403;&#21069;&#25163;&#26426;&#26159;&#31446;&#30452;&#26041;&#21521;&#25343;&#30528;&#30340;&#65292;&#20294;&#26159;getRotation()&#26041;&#27861;&#20173;&#28982;&#20250;&#22238;&#20256; </font>
    </p>
    <p>
      <font color="#ff0000" face="Times New Roman" size="4">ROTATION_90&#25110;&#32773;ROTATION_270</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1641522469473" ID="ID_1636573958" MODIFIED="1641522477637">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/&#x53f3;&#x624b;&#x7b1b;&#x5361;&#x5c14;&#x76f4;&#x89d2;&#x5750;&#x6807;&#x7cfb;.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1641522482257" ID="ID_1607212524" MODIFIED="1641522488891">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="android-app/pitch-roll-yaw.jpg" />
  </body>
</html></richcontent>
<node CREATED="1641522494627" ID="ID_1418353205" MODIFIED="1641522528772">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#25353;&#29031;&#22352;&#26631;&#36724;&#39034;&#26102;&#38024;&#26059;&#36716;&#21363;&#20026;&#27491;&#26041;&#21521;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1606807994251" ID="ID_96506234" MODIFIED="1606808018214" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4" face="Times New Roman">20. android gtest&#27979;&#35797;&#26694;&#26550;</font></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1622104808522" FOLDED="true" ID="ID_154226236" MODIFIED="1641519951400" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>Android NDK&#23398;&#20064;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1622104847477" ID="ID_1573296460" MODIFIED="1622104851721" TEXT="JNI&#x7f16;&#x7a0b;">
<node CREATED="1622104855373" ID="ID_229422962" MODIFIED="1622104859626" TEXT="&#x53c2;&#x8003;&#x8d44;&#x6599;">
<node CREATED="1622104863071" ID="ID_885554768" MODIFIED="1622104866206" TEXT="https://www.jianshu.com/p/1b3d70615259"/>
</node>
<node CREATED="1622105101297" ID="ID_1619816150" MODIFIED="1622622350453">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21160;&#24577;&#21152;&#36733;
    </p>
    <p>
      
    </p>
    <p>
      JNINativeMethod method_table[]
    </p>
    <p>
      JNI_OnLoad
    </p>
    <p>
      JNI_OnUnload
    </p>
  </body>
</html></richcontent>
<node CREATED="1622602018899" ID="ID_185386058" MODIFIED="1622602139132">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <pre>extern &quot;C&quot; <a href="http://androidxref.com/8.1.0_r33/s?defs=jint&amp;project=frameworks">jint</a> <a name="JNI_OnLoad" class="xf">
</a><a href="http://androidxref.com/8.1.0_r33/s?refs=JNI_OnLoad&amp;project=frameworks" class="xf">JNI_OnLoad</a>(<a href="http://androidxref.com/8.1.0_r33/s?defs=JavaVM&amp;project=frameworks">JavaVM</a>* <a name="vm" class="xa">
</a><a href="http://androidxref.com/8.1.0_r33/s?refs=vm&amp;project=frameworks" class="xa">vm</a>, void* /* reserved */)
{
   <a href="http://androidxref.com/8.1.0_r33/s?defs=JNIEnv&amp;project=frameworks">JNIEnv</a>* <a name="env" class="xl">
</a><a class="xl" href="http://androidxref.com/8.1.0_r33/s?refs=env&amp;project=frameworks">env</a> = <a href="http://androidxref.com/8.1.0_r33/s?defs=NULL&amp;project=frameworks">NULL</a>;
   <a href="http://androidxref.com/8.1.0_r33/s?defs=jint&amp;project=frameworks">jint</a> <a name="result" class="xl">
</a><a class="xl" href="http://androidxref.com/8.1.0_r33/s?refs=result&amp;project=frameworks">result</a> = -1;

    if (<a class="d" href="http://androidxref.com/8.1.0_r33/xref/frameworks/base/services/core/jni/onload.cpp#vm">vm</a>-&gt;<a href="http://androidxref.com/8.1.0_r33/s?defs=GetEnv&amp;project=frameworks">GetEnv</a>((void**) &amp;<a class="d" href="http://androidxref.com/8.1.0_r33/xref/frameworks/base/services/core/jni/onload.cpp#env">env</a>, <a href="http://androidxref.com/8.1.0_r33/s?defs=JNI_VERSION_1_4&amp;project=frameworks">JNI_VERSION_1_4</a>) != <a href="http://androidxref.com/8.1.0_r33/s?defs=JNI_OK&amp;project=frameworks">JNI_OK</a>) {
       <a href="http://androidxref.com/8.1.0_r33/s?defs=ALOGE&amp;project=frameworks">ALOGE</a>(&quot;GetEnv failed!&quot;);
       return <a class="d" href="http://androidxref.com/8.1.0_r33/xref/frameworks/base/services/core/jni/onload.cpp#result">result</a>;
}</pre>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      return jniRegisterNativeMethods(env, &quot;com/android/server/usb/UsbHostManager&quot;,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;method_table, NELEM(method_table)); <b>&#21160;&#24577;&#21152;&#36733;&#30340;JAVA&#25509;&#21475;&#31867;&#35201;&#30830;&#23450;&#65307;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1622603649245" ID="ID_1695890398" MODIFIED="1622604566200">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#31181;cmd&#23545;&#24212;&#19968;&#20010;callback,
    </p>
    <p>
      callback &#23545;&#24212;&#21040; JNI &#30340; C/C++ &#23618;&#160;&#160;----&gt; &#24322;&#27493;&#36890;&#30693;&#32473;JAVA&#23618;&#20351;&#29992;json&#26684;&#24335;&#65311;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1622632368861" ID="ID_661273049" MODIFIED="1622632383038">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><code style="font-family: Courier New, Monaco, Courier, monospace" class="cCode"><span style="color: #000000"><font face="Courier New, Monaco, Courier, monospace" color="#000000">AttachCurrentThread()</font></span></code></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1622684405645" ID="ID_1143426929" MODIFIED="1622684410304">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      http://hank5000.github.io/blog/2015/11/02/jni-register-callback/
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1623237622683" ID="ID_173681272" MODIFIED="1623237638872">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <pre class="default s-code-block hljs cpp"><code>std::list&lt;Student&gt;::iterator it;
<span class="hljs-keyword">for</span> (it = data.<span class="hljs-built_in">begin</span>(); it != data.<span class="hljs-built_in">end</span>(); ++it){
    std::cout &lt;&lt; it-&gt;name;
}</code></pre>
  </body>
</html></richcontent>
</node>
<node CREATED="1624361818673" ID="ID_672938401" MODIFIED="1624361835780">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      https://raccoon.onyxbits.de/blog/run-java-app-android/
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1622534646667" ID="ID_1099201185" MODIFIED="1622534678378">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>NDK&#24403;&#20013;&#20351;&#29992;CMake</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1622534783225" ID="ID_1103764278" MODIFIED="1622534888239">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#24819;&#22312;NDK&#24037;&#20855;&#38142;&#37324;&#38754;&#20351;&#29992;CMake&#24037;&#20855;&#65292;&#21017;&#38656;&#35201;&#29992;&#21040;CMake&#30340;toolchain file,
    </p>
    <p>
      toolchain file&#26159;CMake&#35774;&#35745;&#29992;&#26469;&#23450;&#21046;&#21270;&#20132;&#21449;&#32534;&#35793;&#30340;&#34892;&#20026;&#30340;&#65292;toolchain&#25991;&#20214;&#36335;&#24452;&#20301;&#20110;
    </p>
    <p>
      <b><code translate="no" dir="ltr"><font color="#ff0066">&lt;NDK&gt;/build/cmake/android.toolchain.cmake</font></code></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1622534915113" ID="ID_386160136" MODIFIED="1622535020731">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32534;&#35793;&#21442;&#25968;&#65292;&#27604;&#22914;ABI&#65292; minSdkVersion&#31561;&#31561;&#65292;&#37117;&#22312;&#21629;&#20196;&#34892;&#19979;&#36827;&#34892;&#35774;&#32622;&#65292;
    </p>
    <p>
      &#23545;&#20110;&#25903;&#25345;&#30340;&#21442;&#25968;&#21015;&#34920;&#65292;&#21487;&#20197;&#21442;&#32771;&#38142;&#25509;
    </p>
    <p>
      https://developer.android.com/ndk/guides/cmake#command-line_1
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1622535072808" ID="ID_1602020948" MODIFIED="1622535090208">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21629;&#20196;&#34892;&#20030;&#20363;
    </p>
    <pre is-upgraded="" class="clear-for-copy"><code dir="ltr"><span class="pln">$ cmake </span><span class="pun">\</span><span class="pln"><br />&#160; &#160; </span><span class="pun">-</span><span class="pln">DCMAKE_TOOLCHAIN_FILE</span><span class="pun">=</span><span class="pln">$NDK</span><span class="pun">/</span><span class="pln">build</span><span class="pun">/</span><span class="pln">cmake</span><span class="pun">/</span><span class="pln">android</span><span class="pun">.</span><span class="pln">toolchain</span><span class="pun">.</span><span class="pln">cmake </span><span class="pun">\</span><span class="pln"><br />&#160; &#160; </span><span class="pun">-</span><span class="pln">DANDROID_ABI</span><span class="pun">=</span><span class="pln">$ABI </span><span class="pun">\</span><span class="pln"><br />&#160; &#160; </span><span class="pun">-</span><span class="pln">DANDROID_NATIVE_API_LEVEL</span><span class="pun">=</span><span class="pln">$MINSDKVERSION </span><span class="pun">\</span><span class="pln"><br />&#160; &#160; $OTHER_ARGS<br /></span></code></pre>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1622794173069" ID="ID_440874005" MODIFIED="1622794250488">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ff0000">Android&#28304;&#20195;&#30721;&#21644;NDK&#24403;&#20013;&#30340;C++&#24211;</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1622794270237" ID="ID_1414952345" MODIFIED="1622797638535">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21442;&#32771;&#38142;&#25509;
    </p>
    <p>
      https://haili-tian.blog.csdn.net/article/details/109864831
    </p>
    <p>
      
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;1) libc++ [Shared] </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;2) libc++_static [Static] </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;external/libcxx/Android.bp </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;&#160;&#160;libc++_static.a --(whole_static_libs)--&gt; libc++abi.a </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;&#160;&#160;libc++.so&#160;&#160;&#160;&#160;&#160;&#160;&#160;--(whole_static_libs)--&gt; libc++_static.a </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160; </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;3) libc++abi [Static] </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;external/libcxxabi/Android.bp </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;&#160;&#160;libc++abi.a </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160; </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;4) libstdc++.so </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;5) libstdc++.a </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;bionic/libc/Android.bp </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;&#160;&#160;libstdc++.so </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;&#160;&#160;libstdc++.a </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160; </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;6) c++_static </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;7) c++_shared </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;prebuilts/ndk/current/sources/cxx-stl/llvm-libc++/Android.mk </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;&#160;&#160;c++_static </font>
    </p>
    <p>
      <font face="Microsoft New Tai Lue" size="4">&#160;&#160;&#160;&#160;&#160;&#160;c++_shared </font>
    </p>
    <p>
      
    </p>
    <p>
      <font face="Times New Roman" size="3">libc++abi&#34987;&#25171;&#21253;&#22312;libc++&#20013;&#65292;&#19968;&#33324;&#19981;&#21333;&#29420;&#20351;&#29992;&#12290;&#25152;&#20197;&#65292;Android Source&#20013;&#26377;&#19979;&#21015;stl&#24211;&#30456;&#20851;&#30340;Module&#65306; </font>
    </p>
    <p>
      
    </p>
    <p>
      <font face="Times New Roman" size="3">&#160;&#160;&#160;&#160;libc++/libc++_static&#65306; llvm c++ stl&#24211;&#12290;&#36825;&#26159;Android&#29256;&#26412;&#20869;&#32622;&#30340;&#19982;Android&#21457;&#24067;&#32465;&#23450;&#30340;&#24211;&#12290; </font>
    </p>
    <p>
      <font face="Times New Roman" size="3">&#160;&#160;&#160; libstdc++&#65306;&#20165;&#20165;&#21253;&#21547;new/delete&#30340;&#24211;&#65292;&#38750;&#23436;&#20840;stl&#65292;&#23436;&#20840;stl&#38656;&#20351;&#29992;&#19978;&#38754;&#30340;libc++&#12290;&#36825;&#26159;&#19982;Android&#21457;&#24067;&#32465;&#23450;&#30340;&#24211;&#12290; </font>
    </p>
    <p>
      <font face="Times New Roman" size="3">&#160;&#160;&#160;&#160;c++_static/c++_shared&#65306;&#36825;&#20869;&#32622;&#30340;NDK&#37324;&#30340;stl&#65292;&#19982;NDK&#21457;&#24067;&#29256;&#26412;&#37324;&#30340;stl&#23545;&#24212;&#12290;</font>
    </p>
    <p>
      
    </p>
    <p>
      &#12304;&#27880;&#12305;&#34429;&#28982;Android&#28304;&#30721;&#37324;&#30340;stl&#19982;&#20869;&#32622;&#30340;NDK stl&#37117;&#26159;llvm c++ stl&#65292;&#26159;llvm&#30340;&#26576;&#19968;&#20010;Build&#65292;&#20294;&#23427;&#20204;&#24182;&#19981;&#30456;&#21516;&#65306;Android&#29256;&#26412;&#37324;&#30340;&#36319;&#38543;Android build&#21457;&#24067;&#65307;NDK&#21457;&#24067;&#30340;&#26159;&#35201;&#25903;&#25345;&#22810;&#20010;Android&#29256;&#26412;&#30340;&#12290;&#32780;&#19988;&#65292;&#23427;&#20204;&#30340;namespace&#26159;&#19981;&#21516;&#30340;&#65292;&#20855;&#20307;&#21487;&#21442;&#32771;&#12298;Android&#28304;&#30721;&#20013;c++ STL&#30340;namespace&#12299;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1622794638306" ID="ID_201992472" MODIFIED="1622794752824">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Cmake&#24403;&#20013;&#25351;&#23450;C++ Runtime</b>
    </p>
    <p>
      
    </p>
    <p>
      &#35774;&#32622;ANDROID_STL&#65292;&#35813;&#20540;&#30340;&#21442;&#25968;&#21487;&#20197;&#26159;c++_shared, c++_static, none, system
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1622794830209" ID="ID_1503380141" MODIFIED="1622796331766">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#0000ff">Android&#28304;&#20195;&#30721;&#24403;&#20013;&#25351;&#23450;STL</font></b>
    </p>
    <p>
      
    </p>
    <p>
      <b><font color="#ff0000">&#20351;&#29992;Android.mk&#30340;&#24773;&#20917;&#19979;&#65306;</font></b>
    </p>
    <p>
      &#38656;&#35201;&#20351;&#29992;LOCAL_NDK_STL_VARIANT&#25351;&#23450;NDK STL
    </p>
    <p>
      &#21487;&#36873;&#20540;&#26159; none/system/c++_static/c++_shared, &#36824;&#38656;&#35201;&#25351;&#23450;<b>LOCAL_SDK_VERSION </b>
    </p>
    <p>
      &#22914;&#26524;&#25351;&#23450;&#20102;system, &#37027;&#20040;&#20351;&#29992;&#30340;&#24211;&#23601;&#26159;libstdc++,
    </p>
    <p>
      &#22914;&#26524;&#25351;&#23450;&#20102;c++_static&#65292;&#37027;&#20040;&#38142;&#25509;&#29992;&#30340;&#24211;&#23601;&#26159;libc++_static.a&#21644;libc++abi.a
    </p>
    <p>
      &#22914;&#26524;&#25351;&#23450;&#20102;c++_shared,&#37027;&#20040;&#38142;&#25509;&#29992;&#30340;&#23601;&#26159;libc++_shared.so
    </p>
    <p>
      
    </p>
    <pre><a name="45" class="l" href="http://androidxref.com/8.1.0_r33/xref/cts/tests/camera/libctscamera2jni/Android.mk#45"><font color="#0000ff">45</font></a><font color="#0000ff"># NDK build, shared C++ runtime
<a name="46" class="l" href="http://androidxref.com/8.1.0_r33/xref/cts/tests/camera/libctscamera2jni/Android.mk#46">46</a>LOCAL_SDK_VERSION := 24
<a name="47" class="l" href="http://androidxref.com/8.1.0_r33/xref/cts/tests/camera/libctscamera2jni/Android.mk#47">47</a>LOCAL_NDK_STL_VARIANT := c++_shared</font></pre>
  </body>
</html></richcontent>
<node CREATED="1622796450125" ID="ID_1412583913" MODIFIED="1622797577377">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#3333ff">Android.bp&#37324;&#38754;&#20351;&#29992;STL, &#25353;&#29031;&#26159;&#21542;&#25351;&#23450;sdkversion, &#20998;&#20004;&#31181;&#24773;&#20917; </font></b>
    </p>
    <p>
      <font color="#333300">&#24403;&#25351;&#23450;&#20102;sdk version&#30340;&#26102;&#20505;&#65292;stl&#33021;&#21462;&#22914;&#19979;&#30340;&#20540;&#65306; </font>
    </p>
    <p>
      <font color="#ff0000">c++_shared c++_static libc++ libc++_static none &quot;&quot; </font>
    </p>
    <p>
      <font color="#3333ff">&quot;&quot; &#23545;&#24212; ndk_system </font>
    </p>
    <p>
      <font color="#3333ff">c++_shared&#23545;&#24212;ndk_libc++_shared </font>
    </p>
    <p>
      <font color="#3333ff">c++_static&#23545;&#24212;ndk_libc++_static </font>
    </p>
    <p>
      <font color="#3333ff">libc++&#23545;&#24212;ndk_libc++_shared </font>
    </p>
    <p>
      <font color="#3333ff">libc++_static&#23545;&#24212;ndk_libc++_static </font>
    </p>
    <p>
      
    </p>
    <p>
      &#27809;&#26377;&#25351;&#23450;sdk version&#30340;&#26102;&#20505;&#65292;stl&#21487;&#20197;&#21435;&#22914;&#19979;&#30340;&#20540;
    </p>
    <p>
      <font color="#ff0033">libc++&#160;&#160;libc++_static&#160;&#160;&#160;none&#160;&#160;&quot;&quot;</font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#0000ff">libc++ ----&gt; libc++ </font>
    </p>
    <p>
      <font color="#0000ff">libc++_static ----&gt; libc++_static </font>
    </p>
    <p>
      <font color="#0000ff">none ---&gt; &quot;&quot; </font>
    </p>
    <p>
      <font color="#0000ff">&quot;&quot;---&gt; libc++&#25110;&#32773;&#26159;libc++_static</font>
    </p>
    <p>
      
    </p>
    <pre><a name="22" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#22">22</a>cc_library_static {
<a name="23" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#23">23</a>    name: &quot;libvkjson_ndk&quot;,
<a name="24" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#24">24</a>    clang: true,
<a name="25" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#25">25</a>    srcs: [
<a name="26" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#26">26</a>        &quot;<a href="http://androidxref.com/8.1.0_r33/s?path=vkjson.cc&amp;project=external">vkjson.cc</a>&quot;,
<a name="27" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#27">27</a>        &quot;<a href="http://androidxref.com/8.1.0_r33/s?path=vkjson_instance.cc&amp;project=external">vkjson_instance.cc</a>&quot;,
<a name="28" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#28">28</a>    ],
<a name="29" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#29">29</a>    cppflags: [
<a name="30" class="hl" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#30">30</a>        &quot;-std=c++11&quot;,
<a name="31" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#31">31</a>        &quot;-Wno-sign-compare&quot;,
<a name="32" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#32">32</a>    ],
<a name="33" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#33">33</a>    export_include_dirs: [
<a name="34" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#34">34</a>        &quot;.&quot;,
<a name="35" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#35">35</a>    ],
<a name="36" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#36">36</a>    whole_static_libs: [
<a name="37" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#37">37</a>        &quot;cjson_ndk&quot;,
<a name="38" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#38">38</a>    ],
<a name="39" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#39">39</a>    header_libs: [
<a name="40" class="hl" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#40">40</a>        &quot;vulkan_headers_ndk&quot;,
<a name="41" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#41">41</a>    ],
<a name="42" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#42">42</a>    <b>sdk_version: &quot;24&quot;,</b>
<a name="43" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#43">43</a>    <b>stl: &quot;libc++_static&quot;,</b>
<a name="44" class="l" href="http://androidxref.com/8.1.0_r33/xref/external/vulkan-validation-layers/libs/vkjson/Android.bp#44">44</a>}</pre>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</map>
