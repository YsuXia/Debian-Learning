<map version="1.0.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1432001536510" ID="ID_24966842" LINK="file" MODIFIED="1455007293417">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#009999"><b>Linux&#35774;&#22791;&#39537;&#21160;</b></font></i>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node COLOR="#cc0033" CREATED="1432001536510" FOLDED="true" ID="ID_1355499788" MODIFIED="1486719849121" POSITION="right" TEXT="&#x7b2c;&#x4e00;&#x7ae0;&#x8bbe;&#x5907;&#x9a71;&#x52a8;&#x4ecb;&#x7ecd;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1432001536510" ID="ID_413707106" MODIFIED="1486555597552" TEXT="&#x9a71;&#x52a8;&#x7684;&#x89d2;&#x8272;">
<node CREATED="1432001536510" FOLDED="true" ID="ID_755263179" MODIFIED="1486555599156">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21010;&#20998;&#39537;&#21160;&#30340;&#26426;&#21046;&#30340;&#21644;&#31574;&#30053;&#65306;
    </p>
    <p>
      &#39537;&#21160;&#30340;&#26426;&#21046;&#65306;&#39537;&#21160;&#25552;&#20379;&#30340;&#33021;&#21147;
    </p>
    <p>
      &#39537;&#21160;&#30340;&#31574;&#30053;&#65306;&#22914;&#20309;&#33719;&#24471;&#33021;&#21147;
    </p>
  </body>
</html></richcontent>
<node CREATED="1432001536510" ID="ID_303312917" MODIFIED="1432002140179" TEXT="&#x7f16;&#x5199;&#x9a71;&#x52a8;&#x5c3d;&#x91cf;&#x4e0d;&#x8981;&#x6d89;&#x53ca;&#x7b56;&#x7565;&#x7684;&#x90e8;&#x5206;"/>
</node>
<node CREATED="1432001536510" FOLDED="true" ID="ID_577086635" MODIFIED="1486555599157" TEXT="&#x7b56;&#x7565;&#x900f;&#x660e;&#x7684;&#x9a71;&#x52a8;&#x6240;&#x5177;&#x6709;&#x7684;&#x7279;&#x5f81;">
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x652f;&#x6301;&#x540c;&#x6b65;&#x548c;&#x5f02;&#x6b65;"/>
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x591a;&#x6b21;&#x6253;&#x5f00;&#x7684;&#x80fd;&#x529b;"/>
</node>
<node CREATED="1432001536510" FOLDED="true" ID="ID_1110536121" MODIFIED="1486555599157" TEXT="&#x5185;&#x6838;&#x89d2;&#x8272;&#x7684;&#x5212;&#x5206;">
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x8fdb;&#x7a0b;&#x7ba1;&#x7406;"/>
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x5185;&#x5b58;&#x7ba1;&#x7406;"/>
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x6587;&#x4ef6;&#x7cfb;&#x7edf;"/>
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x8bbe;&#x5907;&#x63a7;&#x5236;"/>
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x7f51;&#x7edc;"/>
</node>
<node CREATED="1432001536510" FOLDED="true" ID="ID_1354787353" MODIFIED="1486555599157" TEXT="&#x9a71;&#x52a8;&#x6a21;&#x5757;&#x7684;&#x5212;&#x5206;">
<node CREATED="1432001536510" FOLDED="true" ID="ID_35820574" MODIFIED="1475896811327" TEXT="&#x5b57;&#x7b26;&#x8bbe;&#x5907;">
<node CREATED="1432001536510" MODIFIED="1432001536510" TEXT="&#x5f53;&#x505a;&#x5b57;&#x8282;&#x6d41;&#x6765;&#x5b58;&#x53d6;&#x7684;&#x8bbe;&#x5907;"/>
<node CREATED="1432001536510" ID="ID_1351821472" MODIFIED="1432002446072">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#25991;&#20214;&#31995;&#32479;&#24403;&#20013;&#26377;&#25509;&#20837;&#28857;&#65306;
    </p>
    <p>
      /dev/tty1
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432001536510" FOLDED="true" ID="ID_810170604" MODIFIED="1475896811327" TEXT="&#x5757;&#x8bbe;&#x5907;">
<node CREATED="1432001536511" ID="ID_1434743738" MODIFIED="1432001536511" TEXT="&#x901a;&#x8fc7;&#x6587;&#x4ef6;&#x7cfb;&#x7edf;&#x7684;&#x5165;&#x53e3;&#x6765;&#x5b58;&#x53d6;"/>
<node CREATED="1432001536511" MODIFIED="1432001536511" TEXT="linux&#x5141;&#x8bb8;&#x5757;&#x8bbe;&#x5907;&#x50cf;&#x5b57;&#x7b26;&#x8bbe;&#x5907;&#x90a3;&#x6837;&#x5b58;&#x53d6;"/>
</node>
<node CREATED="1432001536511" FOLDED="true" ID="ID_981641251" MODIFIED="1475896811328">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32593;&#32476;&#25509;&#21475;:
    </p>
    <p>
      &#19968;&#20010;&#25509;&#21475;&#21487;&#20197;&#26159;&#19968;&#20010;&#35774;&#22791;
    </p>
    <p>
      &#20063;&#21487;&#20197;&#26159;&#19968;&#20010;&#36719;&#20214;&#23454;&#29616;
    </p>
  </body>
</html></richcontent>
<node CREATED="1432001536511" ID="ID_1951985114" MODIFIED="1432001536511" TEXT="&#x7ecf;&#x5e38;&#x88ab;&#x8bbe;&#x8ba1;&#x6210;&#x53ea;&#x662f;&#x5904;&#x7406;&#x62a5;&#x6587;&#x7684;&#x53d1;&#x9001;&#x548c;&#x63a5;&#x53d7;"/>
</node>
</node>
</node>
<node CREATED="1432001536511" ID="ID_1458470954" MODIFIED="1486555597556" TEXT="&#x5b89;&#x5168;&#x95ee;&#x9898;">
<node CREATED="1432001536511" MODIFIED="1432001536511" TEXT="&#x7cfb;&#x7edf;&#x4e2d;&#x7684;&#x5b89;&#x5168;&#x95ee;&#x9898;&#x662f;&#x7531;&#x5185;&#x6838;&#x5f3a;&#x5236;&#x52a0;&#x4e0a;&#x53bb;&#x7684;"/>
</node>
</node>
<node COLOR="#cc0000" CREATED="1432001536511" FOLDED="true" ID="ID_89389509" MODIFIED="1502796205074" POSITION="right" TEXT="&#x7b2c;&#x4e09;&#x7ae0;&#x5b57;&#x7b26;&#x9a71;&#x52a8;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1432001536511" FOLDED="true" ID="ID_1504972745" MODIFIED="1502348449301" TEXT="SCULL&#x7684;&#x4ecb;&#x7ecd;">
<edge COLOR="#ff0066"/>
<node CREATED="1432001536511" FOLDED="true" ID="ID_1336937959" MODIFIED="1486555599157">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      scull0&#21040;scull3
    </p>
    <p>
      &#23545;&#24212;&#30340;&#20195;&#30721;&#25991;&#20214;&#22841;&#26159;<font color="#dc0303"><i>scullc</i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1432001536511" ID="ID_886513184" MODIFIED="1432001536511" TEXT="&#x7531;&#x5168;&#x5c40;&#x7684;&#x5185;&#x5b58;&#x533a;&#x7ec4;&#x6210;"/>
<node CREATED="1432001536511" ID="ID_945918228" MODIFIED="1432001536511" TEXT="&#x7531;&#x6c38;&#x4e45;&#x7684;&#x5185;&#x5b58;&#x533a;&#x7ec4;&#x6210;"/>
</node>
<node CREATED="1432001536511" FOLDED="true" ID="ID_1823904421" MODIFIED="1486555599157" TEXT="scullpipe0&#x5230;scullpipe3">
<node CREATED="1432001536511" MODIFIED="1432001536511" TEXT="&#x884c;&#x4e3a;&#x50cf;&#x662f;&#x7ba1;&#x9053;"/>
<node CREATED="1432001536511" MODIFIED="1432001536511" TEXT="&#x5b9e;&#x73b0;&#x963b;&#x585e;&#x548c;&#x975e;&#x963b;&#x585e;"/>
</node>
<node CREATED="1432001536511" FOLDED="true" ID="ID_1605671330" MODIFIED="1486555599157" TEXT="scullsingle">
<node CREATED="1432001536511" MODIFIED="1432001536511" TEXT="&#x53ea;&#x5141;&#x8bb8;&#x4e00;&#x6b21;&#x4e00;&#x4e2a;&#x8fdb;&#x7a0b;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1432001536511" FOLDED="true" ID="ID_145566488" MODIFIED="1486555599157" TEXT="scullpriv">
<node CREATED="1432001536511" MODIFIED="1432001536511" TEXT="&#x5bf9;&#x6bcf;&#x4e2a;&#x865a;&#x62df;&#x7ec8;&#x7aef;&#x662f;&#x79c1;&#x6709;&#x7684;"/>
</node>
<node CREATED="1432001536511" FOLDED="true" ID="ID_1695524747" MODIFIED="1486555599158" TEXT="sculluid&#x548c;scullwuid">
<node CREATED="1432001536511" MODIFIED="1432001536511" TEXT="&#x53ef;&#x4ee5;&#x591a;&#x7528;&#x6237;&#x6b21;&#x6253;&#x5f00;&#x4f46;&#x662f;&#x4e00;&#x6b21;&#x53ea;&#x80fd;&#x4e00;&#x4e2a;&#x7528;&#x6237;"/>
</node>
</node>
<node COLOR="#ff3333" CREATED="1432001536511" FOLDED="true" ID="ID_991336956" MODIFIED="1502796203826">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20027;&#27425;&#32534;&#21495;&#65306;
    </p>
    <p>
      &#23383;&#31526;&#39537;&#21160;&#26159;&#36890;&#36807;&#25991;&#20214;&#31995;&#32479;&#36827;&#20837;&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1432001536511" FOLDED="true" ID="ID_1096034248" MODIFIED="1502796203106" TEXT="&#x4e3b;&#x6b21;&#x7f16;&#x53f7;">
<node CREATED="1432001536512" FOLDED="true" ID="ID_353294307" MODIFIED="1502348458005" TEXT="&#x4e3b;&#x7f16;&#x53f7;&#xff1a;&#x6807;&#x8bc6;&#x4e00;&#x4e2a;&#x8bbe;&#x5907;&#x4f7f;&#x7528;&#x54ea;&#x4e2a;&#x9a71;&#x52a8;">
<node BACKGROUND_COLOR="#33ff33" CREATED="1432105653336" ID="ID_1035150399" MODIFIED="1432105710224" TEXT="&#x4e5f;&#x6709;&#x591a;&#x4e2a;&#x9a71;&#x52a8;&#x5171;&#x4eab;&#x4e00;&#x4e2a;&#x4e3b;&#x7f16;&#x53f7;&#x7684;&#x60c5;&#x51b5;">
<edge COLOR="#3333ff"/>
</node>
</node>
<node CREATED="1432001536512" ID="ID_183491251" MODIFIED="1432001536512" TEXT="&#x6b21;&#x7f16;&#x53f7;&#xff1a;&#x6807;&#x8bc6;&#x5177;&#x4f53;&#x7684;&#x8bbe;&#x5907;"/>
</node>
<node CREATED="1432001536512" FOLDED="true" ID="ID_1042749064" MODIFIED="1502796202426" TEXT="&#x4e3b;&#x6b21;&#x7f16;&#x53f7;&#x7684;&#x5185;&#x90e8;&#x6807;&#x8bc6;">
<node COLOR="#ff6666" CREATED="1432001536512" ID="ID_1408585560" MODIFIED="1432105797516" TEXT="dev_t&#x83b7;&#x5f97;&#x4e3b;&#x6b21;&#x7f16;&#x53f7;"/>
<node CREATED="1432001536512" ID="ID_841449011" MODIFIED="1432001536512" TEXT="&#x7531;&#x4e3b;&#x6b21;&#x7f16;&#x53f7;&#x83b7;&#x5f97;dev_t"/>
</node>
<node CREATED="1432001536512" FOLDED="true" ID="ID_1653444239" MODIFIED="1502348475261" TEXT="&#x5206;&#x914d;&#x8bbe;&#x5907;&#x7f16;&#x53f7;">
<node COLOR="#cc0000" CREATED="1432001536512" FOLDED="true" ID="ID_837056629" MODIFIED="1471749036229">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;&#38745;&#24577;&#26041;&#27861;&#20998;&#37197;&#35774;&#22791;&#32534;&#21495;
    </p>
    <p>
      &#20989;&#25968;&#65306;register_chrdev_region(dev_t first, unsigned int count,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;char * name)
    </p>
    <p>
      &#22836;&#25991;&#20214;&#65306; linux/fs.h
    </p>
    <p>
      &#21517;&#31216;name&#20250;&#20986;&#29616;&#22312;/proc/devices&#30446;&#24405;&#19979;&#38754;&#21644;sysfs&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#3c5a1a" face="Verdana, Geneva, Arial, Helvetica, sans-serif" size="2">int register_chrdev_region(dev_t from, unsigned count, const char *name)<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />{<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;struct char_device_struct *cd;<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;dev_t to = from + count;<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;dev_t n, next;<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" /><br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;for (n = from; n &lt; to; n = next) {<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;next = MKDEV(MAJOR(n)+1, 0);<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (next &gt; to)<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;next = to;<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;cd = __register_chrdev_region(MAJOR(n), MINOR(n), next - n, name);<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (IS_ERR(cd))<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;goto fail;<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;}<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;return 0;<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />fail:<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;to = n;<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;for (n = from; n &lt; to; n = next) {<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;next = MKDEV(MAJOR(n)+1, 0);<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;&#160;&#160;&#160;&#160;kfree(__unregister_chrdev_region(MAJOR(n), MINOR(n), next - n));<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;}<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />&#160;&#160;&#160;return PTR_ERR(cd);<br align="start" size="2" color="#3c5a1a" style="background-color: rgb(255, 255, 255); word-spacing: 0px; text-transform: none; text-indent: 0px; letter-spacing: normal; font-variant: normal; white-space: normal; line-height: 19px" />}</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1471744094824" ID="ID_1793741047" MODIFIED="1471744149806">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#b90f11"><i>static struct char_device_struct { </i></font></b>
    </p>
    <p>
      <b><font color="#b90f11"><i>&#160;&#160;&#160;&#160;struct char_device_struct *next; </i></font></b>
    </p>
    <p>
      <b><font color="#b90f11"><i>&#160;&#160;&#160;&#160;unsigned int major; </i></font></b>
    </p>
    <p>
      <b><font color="#b90f11"><i>&#160;&#160;&#160;&#160;unsigned int baseminor; </i></font></b>
    </p>
    <p>
      <b><font color="#b90f11"><i>&#160;&#160;&#160;&#160;int minorct; </i></font></b>
    </p>
    <p>
      <b><font color="#b90f11"><i>&#160;&#160;&#160;&#160;char name[64]; </i></font></b>
    </p>
    <p>
      <b><font color="#b90f11"><i>&#160;&#160;&#160;&#160;struct cdev *cdev;&#160;&#160;&#160;&#160;&#160;&#160;/* will die */ </i></font></b>
    </p>
    <p>
      <b><font color="#b90f11"><i>} *chrdevs[CHRDEV_MAJOR_HASH_SIZE];</i></font></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node COLOR="#003399" CREATED="1432001536512" ID="ID_1712262710" MODIFIED="1454920962746">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;&#21160;&#24577;&#26041;&#27861;&#20998;&#37197;&#35774;&#22791;&#32534;&#21495;
    </p>
    <p>
      int alloc_chrdev_region(dev_t *dev, unsigned int firstminor,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int count, char *name)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1467730862286" ID="ID_928482317" MODIFIED="1467731155516">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20869;&#26680;&#20013;&#25152;&#26377;&#24050;&#20998;&#37197;&#30340;&#23383;&#31526;&#35774;&#22791;&#32534;&#21495;&#37117;&#35760;&#24405;&#22312;&#19968;&#20010;&#21517;&#20026; chrdevs &#25955;&#21015;&#34920;&#37324;&#12290;
    </p>
    <p>
      &#35813;&#25955;&#21015;&#34920;&#20013;&#30340;&#27599;&#19968;&#20010;&#20803;&#32032;&#26159;&#19968;&#20010; char_device_struct &#32467;&#26500;
    </p>
    <p>
      static struct char_device_struct {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;struct char_device_struct *next;&#160;&#160;&#160;&#160;// &#25351;&#21521;&#25955;&#21015;&#20914;&#31361;&#38142;&#34920;&#20013;&#30340;&#19979;&#19968;&#20010;&#20803;&#32032;&#30340;&#25351;&#38024;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int major;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &#20027;&#35774;&#22791;&#21495;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int baseminor;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &#36215;&#22987;&#27425;&#35774;&#22791;&#21495;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;int minorct;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &#35774;&#22791;&#32534;&#21495;&#30340;&#33539;&#22260;&#22823;&#23567;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;char name[64];&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &#22788;&#29702;&#35813;&#35774;&#22791;&#32534;&#21495;&#33539;&#22260;&#20869;&#30340;&#35774;&#22791;&#39537;&#21160;&#30340;&#21517;&#31216;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;struct file_operations *fops;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &#27809;&#26377;&#20351;&#29992;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;struct cdev *cdev;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;// &#25351;&#21521;&#23383;&#31526;&#35774;&#22791;&#39537;&#21160;&#31243;&#24207;&#25551;&#36848;&#31526;&#30340;&#25351;&#38024;
    </p>
    <p>
      &#160;&#160;&#160;} *chrdevs[CHRDEV_MAJOR_HASH_SIZE];
    </p>
    <p>
      &#20869;&#26680;&#24182;&#19981;&#26159;&#20026;&#27599;&#19968;&#20010;&#23383;&#31526;&#35774;&#22791;&#32534;&#21495;&#23450;&#20041;&#19968;&#20010; char_device_struct &#32467;&#26500;&#65292;
    </p>
    <p>
      &#32780;&#26159;&#20026;&#19968;&#32452;&#23545;&#24212;&#21516;&#19968;&#20010;&#23383;&#31526;&#35774;&#22791;&#39537;&#21160;&#30340;&#35774;&#22791;&#32534;&#21495;&#33539;&#22260;&#23450;&#20041;&#19968;&#20010; char_device_struct &#32467;&#26500;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432001536512" FOLDED="true" ID="ID_194646339" MODIFIED="1486555599158" TEXT="&#x91ca;&#x653e;&#x8bbe;&#x5907;&#x7f16;&#x53f7;">
<node CREATED="1432001536512" ID="ID_46282766" MODIFIED="1432108775378" TEXT="&#x91ca;&#x653e;&#x8bbe;&#x5907;&#xff1a;cleanup&#x51fd;&#x6578;&#x5f53;&#x4e2d;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void unregister_chrdev_region(dev_t first, unsigned int count);
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432001536512" FOLDED="true" ID="ID_1289513604" MODIFIED="1486555599158" TEXT="&#x52a8;&#x6001;&#x5206;&#x914d;&#x4e3b;&#x7f16;&#x53f7;">
<node COLOR="#990099" CREATED="1432001536512" ID="ID_852379625" MODIFIED="1454924875758" TEXT="&#x52a8;&#x6001;&#x5206;&#x914d;&#x4e3b;&#x7f16;&#x53f7;&#x7684;&#x4f18;&#x70b9;"/>
<node COLOR="#990099" CREATED="1432001536512" FOLDED="true" ID="ID_92675797" MODIFIED="1482300649478" TEXT="&#x52a8;&#x6001;&#x5206;&#x914d;&#x4e3b;&#x7f16;&#x53f7;&#x7684;&#x7f3a;&#x70b9;">
<node COLOR="#ff3333" CREATED="1432001536512" ID="ID_1680690855" MODIFIED="1454924935531">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32570;&#28857;&#19968;&#65306;&#26080;&#27861;&#25552;&#21069;&#24314;&#31435;&#35774;&#22791;&#33410;&#28857;
    </p>
    <p>
      &#22240;&#20026;&#20320;&#26080;&#27861;&#24471;&#30693;&#35774;&#22791;&#30340;&#20027;&#24207;&#21495;
    </p>
    <p>
      &#20294;&#26159;&#21487;&#20197;&#36890;&#36807;/proc/devices&#37324;&#38754;&#30340;&#25991;&#20214;&#24471;&#21040;
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#b0b0b0" DESTINATION="ID_1680690855" ENDARROW="Default" ENDINCLINATION="118;0;" ID="Arrow_ID_1139600246" SOURCE="ID_797593665" STARTARROW="None" STARTINCLINATION="118;0;"/>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node COLOR="#006666" CREATED="1432001536512" FOLDED="true" ID="ID_1467083384" MODIFIED="1482300650598" TEXT="&#x52a0;&#x8f7d;&#x52a8;&#x6001;&#x5206;&#x914d;&#x4e3b;&#x7f16;&#x53f7;&#x7684;&#x6a21;&#x5757;&#x7684;&#x65b9;&#x6cd5;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1432001536512" ID="ID_366208074" MODIFIED="1432001536512" TEXT="1.&#x8c03;&#x7528;insmod"/>
<node CREATED="1432001536512" ID="ID_797593665" MODIFIED="1438829765122">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#35835;&#21462;/proc/devices&#30446;&#24405;&#19979;&#38754;&#30340;&#32534;&#21495;&#20449;&#24687;&#65292;&#35299;&#20915;&#20102;&#26080;&#27861;&#25552;&#21069;&#24314;&#31435;&#35774;&#22791;&#33410;&#28857;&#30340;&#38382;&#39064;
    </p>
    <p>
      <b>&#24403;&#25105;&#20204;&#22312;&#33050;&#26412;&#25991;&#20214;&#24403;&#20013;&#35843;&#29992;insmod&#21629;&#20196;&#21152;&#36733;&#20102;&#39537;&#21160;&#27169;&#22359;&#20043;&#21518;&#65292; </b>
    </p>
    <p>
      <b>insmod&#21629;&#20196;&#20250;&#22312;/proc/device&#25991;&#20214;&#37324;&#38754;&#20889;&#20837;&#24403;&#21069;&#21152;&#36733;&#30340;&#39537;&#21160;&#30340; </b>
    </p>
    <p>
      <b>&#21517;&#31216;&#21644;&#23545;&#24212;&#30340;&#20027;&#33410;&#28857;&#21495;&#65292;&#25105;&#20204;&#26681;&#25454;&#36825;&#20010;&#33410;&#28857;&#21495;&#23601;&#21487;&#20197;&#35843;&#29992;mknod </b>
    </p>
    <p>
      <b>&#21629;&#20196;&#26469;&#22312;/dev&#30446;&#24405;&#19979;&#38754;&#29983;&#25104;&#30456;&#24212;&#30340;&#35774;&#22791;&#25991;&#20214;&#20102;</b>&#12290;
    </p>
  </body>
</html></richcontent>
<arrowlink DESTINATION="ID_1680690855" ENDARROW="Default" ENDINCLINATION="118;0;" ID="Arrow_ID_1139600246" STARTARROW="None" STARTINCLINATION="118;0;"/>
</node>
<node CREATED="1432001536512" ID="ID_1199466996" MODIFIED="1438829776314" TEXT="3.mknod &#x5efa;&#x7acb;&#x7279;&#x6b8a;&#x6587;&#x4ef6;"/>
</node>
<node COLOR="#006666" CREATED="1432001536512" FOLDED="true" ID="ID_657866416" MODIFIED="1482300652046">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26368;&#22909;&#30340;&#26041;&#27861;&#65306;
    </p>
    <p>
      &#38745;&#24577;&#21644;&#21160;&#24577;&#20998;&#37197;&#32508;&#21512;&#20351;&#29992;
    </p>
    <p>
      &#22312;&#32534;&#35793;&#26102;&#25110;&#32773;&#20351;&#29992;insmod&#21629;&#20196;&#26102;&#25351;&#23450;&#20027;&#35774;&#22791;&#32534;&#21495;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1454925769685" ID="ID_1462862705" MODIFIED="1454925829870">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      if (scullc_major)
    </p>
    <p>
      &#160;&#160;&#160;&#160;result = register_chrdev_region(dev, scullc_devs, &quot;scullc&quot;);
    </p>
    <p>
      else {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;result = alloc_chrdev_region(&amp;dev, 0, scullc_devs, &quot;scullc&quot;);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;scullc_major = MAJOR(dev);
    </p>
    <p>
      &#160;}&#160;&#160;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
</node>
</node>
<node CREATED="1432001536512" FOLDED="true" ID="ID_1336978487" MODIFIED="1502796199882" TEXT="&#x91cd;&#x8981;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;">
<node CREATED="1432001536512" ID="ID_479153915" MODIFIED="1477971432180">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      file_operations&#65306;
    </p>
    <p>
      &#23558;&#35774;&#22791;&#21495;&#36319;&#39537;&#21160;&#30340;&#25805;&#20316;
    </p>
    <p>
      &#32852;&#31995;&#36215;&#26469;
    </p>
  </body>
</html></richcontent>
<edge STYLE="bezier"/>
<arrowlink COLOR="#0066ff" DESTINATION="ID_1658142979" ENDARROW="Default" ENDINCLINATION="472;0;" ID="Arrow_ID_825262927" STARTARROW="None" STARTINCLINATION="410;-75;"/>
<linktarget COLOR="#ff0099" DESTINATION="ID_479153915" ENDARROW="Default" ENDINCLINATION="-160;15;" ID="Arrow_ID_911860929" SOURCE="ID_1008626152" STARTARROW="None" STARTINCLINATION="-153;15;"/>
</node>
<node CREATED="1432001536513" FOLDED="true" ID="ID_1196680412" MODIFIED="1502796198866" TEXT="file:f_op&#x5b57;&#x6bb5;">
<node CREATED="1432116064073" FOLDED="true" ID="ID_936260860" MODIFIED="1502796195730" TEXT="1.void *private_data,&#x8c03;&#x7528;open&#x65f6;&#x8fdb;&#x884c;&#x8bbe;&#x7f6e;">
<node COLOR="#ff0099" CREATED="1433831827079" ID="ID_740947904" MODIFIED="1433832217801" TEXT="1.scull_open(struct inode *inode, struct file *filp)"/>
<node CREATED="1433831838824" ID="ID_1767823674" MODIFIED="1433831866854">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.struct scull_dev *dev;
    </p>
    <p>
      dev = container_of(inode-&gt;i_cdev, struct scull_dev, cdev);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433831873094" ID="ID_1658142979" MODIFIED="1477971432181">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.filp-&gt;private_data = dev;
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#0066ff" DESTINATION="ID_1658142979" ENDARROW="Default" ENDINCLINATION="472;0;" ID="Arrow_ID_825262927" SOURCE="ID_479153915" STARTARROW="None" STARTINCLINATION="410;-75;"/>
</node>
</node>
</node>
<node CREATED="1432001536513" FOLDED="true" ID="ID_776943990" MODIFIED="1486555599158" TEXT="inode">
<node CREATED="1432001536513" ID="ID_1875008772" MODIFIED="1432001536513" TEXT="2&#x4e2a;&#x91cd;&#x8981;&#x7684;&#x6570;&#x636e;&#x7ed3;&#x6784;&#x548c;2&#x4e2a;&#x91cd;&#x8981;&#x7684;&#x5b8f;&#x5b9a;&#x4e49;"/>
</node>
</node>
<node CREATED="1432001536513" FOLDED="true" ID="ID_99749949" MODIFIED="1502796194506" TEXT="&#x5b57;&#x7b26;&#x8bbe;&#x5907;&#x7684;&#x6ce8;&#x518c;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct cdev *my_cdev = cdev_alloc();
    </p>
    <p>
      my_cdev-&gt;ops = &amp;my_fops;
    </p>
    <p>
      void cdev_init(struct cdev *cdev, struct file_operations *fops);&#160;
    </p>
    <p>
      struct cdev &#26377;&#19968;&#20010;&#25317;&#26377;&#32773;&#25104;&#21592;, &#24212;&#24403;&#35774;&#32622;&#20026; THIS_MODULE.
    </p>
    <p>
      &#23558;&#24314;&#31435;&#30340;cdev&#32467;&#26500;&#36890;&#30693;&#20869;&#26680;
    </p>
    <p>
      int cdev_add(struct cdev *dev, dev_t num, unsigned int count);
    </p>
    <p>
      num&#26159;&#36825;&#20010;&#35774;&#22791;&#21709;&#24212;&#30340;&#31532;&#19968;&#20010;&#35774;&#22791;&#21495;&#65292;count&#26159;&#24212;&#24403;&#20851;&#32852;&#21040;&#35774;&#22791;&#30340;&#35774;&#22791;&#21495;&#30340;&#25968;&#30446;&#12290;
    </p>
    <p>
      &#160;&#26087;&#30340;&#27880;&#20876;&#26041;&#27861;
    </p>
    <p>
      int register_chrdev(unsigned int major, const char *name,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct file_operations *fops);
    </p>
    <p>
      &#26087;&#30340;&#27880;&#38144;&#26041;&#27861;&#65306;
    </p>
    <p>
      int unregister_chrdev(unsigned int major, const char *name);
    </p>
    <p>
      unregister_chrdev_region | &#37322;&#25918;&#35774;&#22791;&#21495;
    </p>
    <p>
      &#22312;&#35843;&#29992; cdev_del()&#20989;&#25968;&#20174;&#31995;&#32479;&#27880;&#38144;&#23383;&#31526;&#35774;&#22791;&#20043;&#21518;&#65292;unregister_chrdev_region()&#24212;&#35813;&#34987;&#35843;&#29992;&#20197;&#37322;&#25918;&#21407;&#20808;&#30003;&#35831;&#30340;&#35774;&#22791;&#21495;&#65292;&#20854;&#20989;&#25968;&#21407;&#22411;&#20026;&#65306;
    </p>
    <p>
      &#24341;&#29992; void unregister_chrdev_region(dev_t first, unsigned int count);
    </p>
    <p>
      first&#20026;&#31532;&#19968;&#20010;&#35774;&#22791;&#21495;&#65292;count&#20026;&#30003;&#35831;&#30340;&#35774;&#22791;&#25968;&#37327;
    </p>
  </body>
</html></richcontent>
<node CREATED="1432001536513" FOLDED="true" ID="ID_1008626152" MODIFIED="1502796193554">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24314;&#31435;cdev&#32467;&#26500;&#24182;&#27880;&#20876;&#65306;
    </p>
    <p>
      &#22312;&#39537;&#21160;&#27169;&#22359;&#30340;&#27880;&#20876;&#20989;&#25968;init&#20013;
    </p>
  </body>
</html></richcontent>
<edge STYLE="bezier"/>
<arrowlink COLOR="#ff0099" DESTINATION="ID_479153915" ENDARROW="Default" ENDINCLINATION="-160;15;" ID="Arrow_ID_911860929" STARTARROW="None" STARTINCLINATION="-153;15;"/>
<node CREATED="1433831660672" ID="ID_262661610" MODIFIED="1433831996509">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.scull_setup_cdev(struct scull_dev *dev, int index)
    </p>
    <p>
      &#160;&#160;&#160;devno = MKDEV(scull_major, scull_minor + index);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433831678560" ID="ID_1043942769" MODIFIED="1433831697515">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.cdev_init(&amp;dev-&gt;cdev, &amp;scull_fops);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433831700918" ID="ID_1341259505" MODIFIED="1433831723422">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.cdev_add (&amp;dev-&gt;cdev, devno, 1);
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432001536513" ID="ID_1084941314" MODIFIED="1478697774167" TEXT="cdev&#x7ed3;&#x6784;&#x7684;&#x6ce8;&#x9500;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      void cdev_del(struct cdev *dev);
    </p>
    <p>
      &#35843;&#29992;&#20102;&#35813;&#20989;&#25968;&#20043;&#21518;&#65292;&#23601;&#19981;&#24212;&#35813;&#20877;&#27425;&#20351;&#29992;cdev&#20102;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432001536513" FOLDED="true" ID="ID_236152283" MODIFIED="1502796191930">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      scull&#30340;&#25968;&#25454;&#32467;&#26500;&#65306;&#22270;&#20363;-&gt;
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct scull_dev {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct scull_qset *data;&#160;&#160;/* Pointer to first quantum set */
    </p>
    <p>
      &#160;&#160;&#160;&#160;int quantum;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* the current quantum size */
    </p>
    <p>
      &#160;&#160;&#160;&#160;int qset;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* the current array size */
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long size;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* amount of data stored here */
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned int access_key;&#160;&#160;/* used by sculluid and scullpriv */
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct semaphore sem;&#160;&#160;&#160;&#160;&#160;/* mutual exclusion semaphore&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct cdev cdev;&#160;&#160;&#160;&#160;&#160;/* Char device structure&#160;&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      };
    </p>
    <p>
      &#160;
    </p>
    <p>
      struct scull_qset {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;void **data;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;struct scull_qset *next;
    </p>
    <p>
      &#160;};
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
    <p>
      &#160;
    </p>
  </body>
</html></richcontent>
<node CREATED="1437281815462" ID="ID_116468484" MODIFIED="1471709342999">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/scull&#x7ed3;&#x6784;.png" />
  </body>
</html></richcontent>
</node>
<node COLOR="#009900" CREATED="1437292697018" FOLDED="true" ID="ID_562626581" MODIFIED="1486555599159">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="2">struct scull_dev { </font>
    </p>
    <p>
      <font size="2">&#160;&#160;&#160;&#160;struct scull_qset *data;&#160;&#160;/* Pointer to first quantum set */ </font>
    </p>
    <p>
      <font size="2">&#160;&#160;&#160;&#160;int quantum;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* the current quantum size */ </font>
    </p>
    <p>
      <font size="2">&#160;&#160;&#160;&#160;int qset;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* the current array size */ </font>
    </p>
    <p>
      <font size="2">&#160;&#160;&#160;&#160;unsigned long size;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* amount of data stored here */ </font>
    </p>
    <p>
      <font size="2">&#160;&#160;&#160;&#160;unsigned int access_key;&#160;&#160;/* used by sculluid and scullpriv */ </font>
    </p>
    <p>
      <font size="2">&#160;&#160;&#160;&#160;struct semaphore sem;&#160;&#160;&#160;&#160;&#160;/* mutual exclusion semaphore&#160;&#160;&#160;&#160;&#160;*/ </font>
    </p>
    <p>
      <font size="2">&#160;&#160;&#160;&#160;struct cdev cdev;&#160;&#160;&#160;&#160;&#160;/* Char device structure&#160;&#160;&#160;&#160;&#160;&#160;*/ </font>
    </p>
    <p>
      <font size="2">}; </font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node COLOR="#6600ff" CREATED="1438759078292" ID="ID_311454968" MODIFIED="1454933233979">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct scull_qset {
    </p>
    <p>
      &#160;void **data;
    </p>
    <p>
      &#160;struct scull_qset *next;
    </p>
    <p>
      &#160;};&#160;&#160;&#160;&#160;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1454933175260" ID="ID_1424866307" MODIFIED="1454933227942">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct cdev {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct kobject kobj;
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct module *owner;
    </p>
    <p>
      &#160;&#160;&#160;&#160;const struct file_operations *ops;
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct list_head list;
    </p>
    <p>
      &#160;&#160;&#160;&#160;dev_t dev;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned int count;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
</node>
<node CREATED="1432001536513" FOLDED="true" ID="ID_1374754760" MODIFIED="1502796190426" TEXT="file_operations&#x7ed3;&#x6784;&#x4f53;&#x4e2d;&#x5404;&#x4e2a;&#x51fd;&#x6570;&#x5177;&#x4f53;&#x89e3;&#x6790;">
<node CREATED="1432001536513" ID="ID_1655145673" MODIFIED="1432001536513" TEXT="int (*open)(struct inode *inode, struct file *filp);"/>
<node CREATED="1432001536513" ID="ID_1487078488" MODIFIED="1438760864749" TEXT="ssize_t read(struct file *filp, char __user *buff, size_t count, loff_t &#xa;*offp); &#x5728;&#x9a71;&#x52a8;&#x5f53;&#x4e2d;&#x4e0d;&#x8981;&#x76f4;&#x63a5;&#x4f7f;&#x7528;buff,&#x800c;&#x662f;&#x5e94;&#x8be5;&#x4f7f;&#x7528;copy_to_buffer&#x548c;copy_from_buffer&#xa;&#x5728;&#x672c;&#x4f8b;&#x5b50;&#x5f53;&#x4e2d;&#xff0c;&#x6700;&#x591a;&#x8bfb;&#x53d6;quantum&#x5b57;&#x8282;&#x4e2a;&#x6570;&#x636e;"/>
<node CREATED="1432001536513" ID="ID_1682353476" MODIFIED="1438761219013" TEXT="ssize_t write(struct file *filp, const char __user *buff, size_t count, &#xa;loff_t *offp); &#xa;if (dev-&gt;size &lt; *offp)&#xa;dev-&gt;size = *offp;&#xa;"/>
<node CREATED="1454935047524" ID="ID_1064070963" MODIFIED="1454935108517">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      loff_t (*llseek) (struct file *, loff_t, int)
    </p>
    <p>
      &#22914;&#26524;&#35813;&#20989;&#25968;&#20026;NULL,&#21017;seek&#20989;&#25968;&#30340;&#34892;&#20026;&#26080;&#27861;&#39044;&#27979;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1502348761685" ID="ID_1462092267" MODIFIED="1502348889022">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20851;&#20110;unlocked_ioctl&#21644;compat_ioctl</b>
    </p>
    <p>
      unlocked_ioctl&#26159;&#26367;&#20195;&#20256;&#32479;&#30340;ioctl&#30340;&#65292;&#20256;&#32479;&#30340;ioctl&#22312;&#25191;&#34892;&#30340;&#26102;&#20505;
    </p>
    <p>
      &#20250;&#35843;&#29992;&#22823;&#20869;&#26680;&#38145;&#65292;&#25302;&#24930;&#30495;&#20010;&#31995;&#32479;&#30340;&#23454;&#26102;&#24615;&#65292;unlocked_ioctl&#21017;&#35201;&#27714;
    </p>
    <p>
      &#39537;&#21160;&#31243;&#24207;&#33258;&#24049;&#23454;&#29616;&#20114;&#26021;&#30340;&#25805;&#20316;&#12290;
    </p>
    <p>
      compat_ioctl&#21017;&#26159;&#20026;&#20102;&#28385;&#36275;&#22312;32bit&#30340;&#29992;&#25143;&#31354;&#38388;&#35843;&#29992;64bit&#20869;&#26680;&#30340;&#25805;&#20316;&#38656;&#27714;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432001536513" FOLDED="true" ID="ID_1369221128" MODIFIED="1502796189602" TEXT="scull&#x7684;&#x5185;&#x5b58;&#x4f7f;&#x7528;">
<node CREATED="1432001536513" FOLDED="true" ID="ID_1192511723" MODIFIED="1486555599159" TEXT="&#x51e0;&#x79cd;&#x52a8;&#x6001;&#x6539;&#x53d8;scull&#x5206;&#x914d;&#x7684;&#x5185;&#x5b58;&#x7684;&#x65b9;&#x6cd5;">
<node CREATED="1432001536513" ID="ID_20164375" MODIFIED="1432001536513" TEXT="1&#x7f16;&#x8bd1;&#x65f6;&#x901a;&#x8fc7;&#x6539;&#x53d8;SCULL_QUANTUM&#x548c;SCULL_QSET&#x5728;&#x5934;&#x6587;&#x4ef6;&#x4e2d;&#x7684;&#x503c;"/>
<node CREATED="1432001536513" ID="ID_849331691" MODIFIED="1432001536513" TEXT="2&#x5728;&#x6a21;&#x5757;&#x52a0;&#x8f7d;&#x65f6;&#x8bbe;&#x7f6e;scull_quantum&#x548c;scull_qset&#x7684;&#x503c;"/>
<node CREATED="1432001536513" ID="ID_1173558472" MODIFIED="1432001536513" TEXT="3.&#x5728;&#x8fd0;&#x884c;&#x65f6;&#x901a;&#x8fc7;ioctl&#x6539;&#x53d8;"/>
</node>
<node CREATED="1432001536513" ID="ID_1055152758" MODIFIED="1432001536513" TEXT="&#x4ece;&#x7528;&#x6237;&#x7a7a;&#x95f4;&#x83b7;&#x5f97;&#x6570;&#x636e;&#x65f6;&#x5185;&#x6838;&#x63d0;&#x4f9b;&#x4e86;2&#x79cd;&#x51fd;&#x6570;"/>
</node>
<node CREATED="1432001536513" FOLDED="true" ID="ID_903106643" MODIFIED="1502796188858" TEXT="&#x4f7f;&#x7528;read/write&#x51fd;&#x6570;">
<node CREATED="1432001536513" ID="ID_1229006274" MODIFIED="1432001536513" TEXT="&#x9700;&#x8981;&#x5b9e;&#x65f6;&#x66f4;&#x65b0;&#x6587;&#x4ef6;&#x6307;&#x9488;&#x7684;&#x4f4d;&#x7f6e;&#x4e00;&#x904d;&#x5185;&#x6838;&#x540c;&#x6b65;&#x5230;file&#x4e2d;"/>
<node CREATED="1432001536513" ID="ID_1555760555" MODIFIED="1432001536513" TEXT="&#x5982;&#x679c;read/write&#x5728;&#x5b8c;&#x6210;&#x4f20;&#x8f93;&#x4e4b;&#x540e;&#x7cfb;&#x7edf;&#x51fa;&#x73b0;&#x4e86;&#x9519;&#x8bef;&#xff0c;&#x5219;&#x8be5;&#x9519;&#x8bef;&#x4ee3;&#x7801;&#x5728;&#x4e0b;&#x4e00;&#x6b21;&#x8fd4;&#x56de;&#x65f6;&#x8fd4;&#x56de;"/>
<node CREATED="1432001536513" ID="ID_1443812468" MODIFIED="1432001536513" TEXT="pread&#x51fd;&#x6570;"/>
<node CREATED="1432001536513" ID="ID_758859841" MODIFIED="1432001536513" TEXT="unix&#x7248;&#x672c;&#x7684;readv&#x548c;writev&#x51fd;&#x6570;"/>
</node>
</node>
<node CREATED="1432003024602" FOLDED="true" ID="ID_1859888168" MODIFIED="1487914174678" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#23433;&#35013;&#39537;&#21160;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="14"/>
<icon BUILTIN="flag-yellow"/>
<node CREATED="1432003059320" ID="ID_115436358" MODIFIED="1432003526825" TEXT="&#x7f16;&#x5199;&#x9a71;&#x52a8;&#x7684;&#x5165;&#x53e3;&#x9700;&#x8981;&#x7684;&#x51e0;&#x4e2a;&#x5b8f;&#x5b9a;&#x4e49;"/>
<node CREATED="1432003544975" ID="ID_276954039" MODIFIED="1486555597716" TEXT="&#x6ce8;&#x610f;&#x9a71;&#x52a8;&#x7684;&#x5e76;&#x53d1;&#x63a7;&#x5236;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20960;&#20010;&#37325;&#35201;&#30340;&#24182;&#21457;&#26469;&#28304;&#65306;
    </p>
    <p>
      1.&#22810;&#36827;&#31243;
    </p>
    <p>
      2.&#20013;&#26029;
    </p>
    <p style="text-align: left">
      3.&#22810;&#22788;&#29702;&#22120;&#30340;&#24773;&#20917;
    </p>
  </body>
</html></richcontent>
<node CREATED="1432004059322" ID="ID_146018449" MODIFIED="1432004066521" TEXT="&#x5fc5;&#x987b;&#x662f;&#x53ef;&#x91cd;&#x5165;&#x7684;"/>
</node>
<node CREATED="1432004678686" ID="ID_1862245912" MODIFIED="1432004724346" TEXT="&#x627e;&#x5230;&#x5f53;&#x524d;&#x8fdb;&#x7a0b;&#x7684;&#x4fe1;&#x606f;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      printk(KERN_INFO &quot;The process is \&quot;%s\&quot; (pid %i)\n&quot;,
    </p>
    <p>
      &#160;current-&gt;comm, current-&gt;pid);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432004894109" ID="ID_27978774" MODIFIED="1432004951122">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27880;&#24847;&#20197;&quot;__&quot;&#24320;&#22836;&#30340;&#20869;&#26680;&#20989;&#25968;&#65306;
    </p>
    <p>
      &#36825;&#31181;&#20989;&#25968;&#19968;&#33324;&#26159;&#20302;&#23618;&#27425;&#30340;&#32452;&#20214;&#20989;&#25968;&#65292;
    </p>
    <p>
      &#38656;&#35201;&#23567;&#24515;&#20351;&#29992;&#25165;&#21487;&#20197;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432005651552" ID="ID_1610355633" MODIFIED="1432005672486" TEXT="&#x7f16;&#x8bd1;&#x9a71;&#x52a8;&#x7a0b;&#x5e8f;-Makefile&#x7684;&#x4e66;&#x5199;&#x6280;&#x5de7;"/>
<node CREATED="1432005676359" ID="ID_867046733" MODIFIED="1486555597717" TEXT="&#x5b89;&#x88c5;&#x9a71;&#x52a8;&#x7a0b;&#x5e8f;">
<node CREATED="1432006476865" ID="ID_98133737" MODIFIED="1432006490556" TEXT="1.&#x88c5;&#x8f7d;&#x65f6;&#x7684;&#x53c2;&#x6570;&#x914d;&#x7f6e;"/>
<node CREATED="1432006548632" ID="ID_226430229" MODIFIED="1432006797846">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.insmod&#30340;&#22823;&#20307;&#23454;&#29616;
    </p>
    <p>
      &#27880;&#24847;modprobe&#30340;&#21306;&#21035;
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.kernel/module.c &#20013;&#30340;&#20989;&#25968;sys_init_module
    </p>
    <p>
      2.&#36890;&#36807;vmalloc&#20998;&#37197;&#35013;&#36733;&#27169;&#22359;&#38656;&#35201;&#30340;&#20869;&#23384;&#31354;&#38388;
    </p>
    <p>
      3.&#35299;&#26512;&#27169;&#22359;&#30340;&#19978;&#19979;&#25991;&#24182;&#25918;&#36827;&#20869;&#26680;&#30340;&#31526;&#21495;&#34920;&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432006887718" ID="ID_1457435957" MODIFIED="1432011940949" TEXT="3.&#x7248;&#x672c;&#x4f9d;&#x8d56;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#22312;&#32534;&#35793;&#26399;&#38388;&#65292;&#20869;&#26680;&#20250;&#36890;&#36807;vermagic.o&#25991;&#20214;&#23558;&#30456;&#20851;&#30340;&#29256;&#26412;&#20449;&#24687;&#21644;&#29305;&#23450;&#30340;&#22788;&#29702;&#22120;&#30340;&#37197;&#32622;&#25918;&#32622;&#22312;&#27169;&#22359;&#24403;&#20013;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#22312;&#21152;&#36733;&#26399;&#38388;&#21457;&#29616;&#29256;&#26412;&#20449;&#24687;&#21644;&#24403;&#21069;&#30340;&#20869;&#26680;&#19981;&#21305;&#37197;&#65292;&#21017;&#25298;&#32477;&#36827;&#34892;&#21152;&#36733;&#12290;
    </p>
    <p>
      2.&#19982;&#29256;&#26412;&#30456;&#20851;&#30340;&#20449;&#24687;&#25918;&#32622;&#22312;linux/version.h&#30446;&#24405;&#19979;&#38754;&#65292;&#35813;&#22836;&#25991;&#20214;&#20250;&#34987;linux/module.h&#25991;&#20214;&#25152;&#21253;&#21547;
    </p>
    <p>
      UTS_RELEASE
    </p>
    <p>
      This macro expands to a string describing the version of this kernel tree. For
    </p>
    <p>
      example, &quot;2.6.10&quot;.
    </p>
    <p>
      LINUX_VERSION_CODE
    </p>
    <p>
      This macro expands to the binary representation of the kernel version, one byte
    </p>
    <p>
      for each part of the version release number. For example, the code for 2.6.10 is
    </p>
    <p>
      132618 (i.e., 0x02060a).* With this information, you can (almost)easily deter-
    </p>
    <p>
      mine what version of the kernel you are dealing with.
    </p>
    <p>
      KERNEL_VERSION(major,minor,release)
    </p>
    <p>
      This is the macro used to build an integer version code from the individual num-
    </p>
    <p>
      bers that build up a version number. For example, KERNEL_VERSION(2,6,10)
    </p>
    <p>
      expands to 132618. This macro is very useful when you need to compare the
    </p>
    <p>
      current version and a known checkpoint.
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432088113214" ID="ID_87416828" MODIFIED="1486555597717" TEXT="&#x5185;&#x6838;&#x7b26;&#x53f7;&#x8868;">
<node CREATED="1432088135709" ID="ID_1907481628" MODIFIED="1432088174086" TEXT="&#x6a21;&#x5757;&#x52a0;&#x8f7d;&#x540e;&#xff0c;export&#x8fc7;&#x7684;&#x7b26;&#x53f7;&#x88ab;&#x653e;&#x5230;&#x4e86;&#x5185;&#x6838;&#x7b26;&#x53f7;&#x8868;&#x5f53;&#x4e2d;"/>
<node CREATED="1432088178996" FOLDED="true" ID="ID_1085760862" MODIFIED="1486555599159" TEXT="&#x4e3b;&#x6d41;&#x7684;&#x5185;&#x6838;&#x4ee3;&#x7801;&#x90fd;&#x4f1a;&#x5b9e;&#x73b0;&#x6a21;&#x5757;&#x6808;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20030;&#20363;&#65306; each input USB device module stacks on the usbcore and input modules.
    </p>
  </body>
</html></richcontent>
<node CREATED="1432088619591" ID="ID_366536798" MODIFIED="1432088790413">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#22914;&#26524;&#19968;&#20010;&#25277;&#35937;&#26159;&#20197;&#39537;&#21160;&#30340;&#26041;&#24335;&#23454;&#29616;&#30340;
    </p>
    <p>
      &#23427;&#20250;&#20026;&#20855;&#20307;&#30340;&#24213;&#23618;&#35774;&#22791;&#25552;&#20379;&#25554;&#20214;&#20837;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432089052476" ID="ID_121937748" MODIFIED="1432089087864">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#36890;&#36807;export&#23548;&#20986;&#30340;&#31526;&#21495;&#20250;&#34987;
    </p>
    <p>
      &#25918;&#32622;&#22312;ELF section
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1432092845815" ID="ID_444477449" MODIFIED="1486555597719" TEXT="&#x521d;&#x59cb;&#x5316;&#x548c;&#x5173;&#x95ed;">
<node CREATED="1432092863080" ID="ID_474084112" MODIFIED="1432093053784" TEXT="1.&#x521d;&#x59cb;&#x5316;&#x51fd;&#x6570;&#x6ce8;&#x518c;&#x7531;&#x6a21;&#x5757;&#x63d0;&#x4f9b;&#x7684;&#x8bbe;&#x5907;&#x529f;&#x80fd;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      static int __init initialization_function(void)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;/* Initialization code here */
    </p>
    <p>
      }
    </p>
    <p>
      module_init(initialization_function);
    </p>
    <p>
      __init&#26631;&#35782;&#34920;&#26126;&#20869;&#26680;&#22312;&#21152;&#36733;&#23436;&#20043;&#21518;&#21487;&#20197;&#23558;&#36825;&#20010;&#20989;&#25968;&#21344;&#29992;&#30340;&#31354;&#38388;&#32473;&#37322;&#25918;&#25481;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432094071834" ID="ID_1731261128" MODIFIED="1432094093452" TEXT="2.&#x5982;&#x679c;&#x6ca1;&#x5b9a;&#x4e49;cleanup&#x51fd;&#x6570;&#xff0c;&#x5219;&#x6a21;&#x5757;&#x4e0d;&#x5141;&#x8bb8;&#x88ab;&#x5378;&#x8f7d;"/>
</node>
<node CREATED="1432094230793" ID="ID_1967107879" MODIFIED="1486555597719" TEXT="&#x521d;&#x59cb;&#x5316;&#x8fc7;&#x7a0b;&#x5f53;&#x4e2d;&#x7684;&#x9519;&#x8bef;&#x5904;&#x7406;">
<node CREATED="1432094673823" ID="ID_1294155116" MODIFIED="1432094689697" TEXT="1.goto&#x8bed;&#x53e5;&#x88ab;&#x5927;&#x91cf;&#x4f7f;&#x7528;"/>
</node>
<node CREATED="1432101460216" ID="ID_1474427469" MODIFIED="1486555597748" TEXT="&#x6a21;&#x5757;&#x52a0;&#x8f7d;&#x5f53;&#x4e2d;&#x7684;&#x7adf;&#x6001;&#x6761;&#x4ef6;">
<icon BUILTIN="flag"/>
<node CREATED="1432101545831" ID="ID_422648469" MODIFIED="1432101604359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#22312;&#20869;&#37096;&#21021;&#22987;&#21270;&#27809;&#26377;&#23436;&#20840;&#28385;&#36275;
    </p>
    <p>
      &#23545;&#19968;&#20010;&#35774;&#22791;&#30340;&#25903;&#25345;&#30340;&#26102;&#20505;&#65292;
    </p>
    <p>
      &#19981;&#35201;&#30331;&#35760;&#35813;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432101663927" ID="ID_1194441092" MODIFIED="1432101715747">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#24517;&#39035;&#35748;&#30495;&#32771;&#34385;&#24403;&#21021;&#22987;&#21270;&#20989;&#25968;&#22833;&#36133;&#20294;&#26159;
    </p>
    <p>
      &#20869;&#26680;&#24050;&#32463;&#22312;&#20351;&#29992;&#26576;&#20123;&#30331;&#35760;&#36807;&#30340;&#35774;&#22791;&#30340;&#24773;&#20917;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node COLOR="#cc00cc" CREATED="1432176031777" ID="ID_1432799261" MODIFIED="1503042796732" POSITION="left" TEXT="&#x7b2c;&#x56db;&#x7ae0;debugging&#x6280;&#x672f;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1432176050648" FOLDED="true" ID="ID_1785780009" MODIFIED="1495608094367">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20869;&#26680;&#24403;&#20013;&#30340;debug&#25903;&#25345;&#65306;
    </p>
    <p>
      &#20320;&#24212;&#35813;&#20351;&#29992;&#33258;&#24049;&#32534;&#35793;&#30340;&#20869;&#26680;
    </p>
    <p>
      &#32780;&#19981;&#26159;stock kernel(&#21378;&#21830;&#21457;&#34892;&#30340;&#20869;&#26680;)
    </p>
  </body>
</html></richcontent>
<node CREATED="1432176333299" ID="ID_376230903" MODIFIED="1432176373458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CONFIG_DEBUG_KERNEL&#65306;
    </p>
    <p>
      &#29992;&#20110;&#25171;&#24320;&#20854;&#20182;&#30340;debug
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432179398988" ID="ID_1257789061" MODIFIED="1432179473367">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CONFIG_DEBUG_SLAB&#65306;
    </p>
    <p>
      &#20998;&#37197;&#30340;&#27599;&#20010;&#23383;&#33410;&#34987;&#21021;&#22987;&#21270;&#25104;0xa5
    </p>
    <p>
      &#37322;&#25918;&#30340;&#27599;&#20010;&#23383;&#33410;&#34987;&#32622;&#25104;0x6b
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432179771275" ID="ID_367532575" MODIFIED="1432179780174" TEXT="CONFIG_DEBUG_PAGEALLOC"/>
<node CREATED="1432179782834" ID="ID_1576868766" MODIFIED="1432179806466" TEXT="CONFIG_DEBUG_SPINLOCK"/>
<node CREATED="1432179907489" ID="ID_1908142802" MODIFIED="1432179918101" TEXT="CONFIG_DEBUG_SPINLOCK_SLEEP"/>
<node CREATED="1432179956634" ID="ID_1955253812" MODIFIED="1432180001776">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CONFIG_INIT_DEBUG:
    </p>
    <p>
      &#29992;&#20110;&#26816;&#26597;&#37027;&#20123;&#35797;&#22270;&#35775;&#38382;
    </p>
    <p>
      &#22312;&#21021;&#22987;&#21270;&#36807;&#31243;&#20013;&#20998;&#37197;&#30340;&#20869;&#23384;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432180143681" ID="ID_639435681" MODIFIED="1432180184673">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CONFIG_DEBUG_INFO&#65306;
    </p>
    <p>
      &#29992;&#20110;&#20351;&#33021;&#20016;&#23500;&#30340;&#35843;&#35797;&#20449;&#24687;&#65292;
    </p>
    <p>
      &#20351;&#29992;gdb&#35843;&#35797;&#30340;&#26102;&#20505;&#24456;&#37325;&#35201;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432180226070" ID="ID_1820053654" MODIFIED="1432180234701" TEXT="CONFIG_MAGIC_SYSRQ"/>
<node CREATED="1432180248263" ID="ID_622631793" MODIFIED="1432180257249" TEXT="CONFIG_DEBUG_STACKOVERFLOW"/>
<node CREATED="1432180269518" ID="ID_1015226471" MODIFIED="1432180288422" TEXT="CONFIG_DEBUG_STACK_USAGE"/>
<node CREATED="1432180579268" ID="ID_1739227196" MODIFIED="1432180652447">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CONFIG_KALLSYMS&#65306;
    </p>
    <p>
      &#23558;&#20869;&#26680;&#30340;&#31526;&#21495;&#20449;&#24687;&#32534;&#35793;
    </p>
    <p>
      &#36827;&#20837;&#20869;&#26680;&#24403;&#20013;&#65292;&#36825;&#26679;OOPS
    </p>
    <p>
      &#36755;&#20986;&#30340;&#21015;&#34920;&#23601;&#19981;&#26159;&#26214;&#28073;&#30340;
    </p>
    <p>
      &#21313;&#20845;&#36827;&#21046;&#20102;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432180730576" ID="ID_807610118" MODIFIED="1432180813387">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      CONFIG_IKCONFIG,CONFIG_IKCONFIG_PROC&#65306;
    </p>
    <p>
      &#24320;&#36890;&#20182;&#20204;&#23601;&#21487;&#20197;&#22312;/proc&#30446;&#24405;&#19979;&#38754;&#21457;&#29616;
    </p>
    <p>
      &#24403;&#21069;&#20869;&#26680;&#24050;&#32463;&#25171;&#24320;&#30340;&#25152;&#26377;&#30340;&#35843;&#35797;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432185102454" ID="ID_367321518" MODIFIED="1432185115531" TEXT="CONFIG_DEBUG_DRIVER"/>
<node CREATED="1432185251784" ID="ID_446736690" MODIFIED="1432185260303" TEXT="CONFIG_SCSI_CONSTANT"/>
<node CREATED="1432185328829" ID="ID_1818950549" MODIFIED="1432185336758" TEXT="CONFIG_INPUT_EVBUG"/>
<node CREATED="1432185385604" ID="ID_1291419440" MODIFIED="1432185395128" TEXT="CONFIG_PROFILING"/>
</node>
<node CREATED="1432187122236" ID="ID_475538303" MODIFIED="1503495703814" TEXT="2.&#x6700;&#x7b80;&#x5355;&#x7684;&#x65b9;&#x6cd5;&#xff1a;printk">
<node CREATED="1432188029123" ID="ID_934436586" MODIFIED="1432188125830">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LOGLEVEL:
    </p>
    <p>
      KERN_EMERG KERN_ALERT
    </p>
    <p>
      KERN_CRIT KERN_ERR
    </p>
    <p>
      KERN_WARNING&#160;&#160;KERN_NOTICE
    </p>
    <p>
      KERN_INFO KERN_DEBUG
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432188440873" ID="ID_21110446" MODIFIED="1432188500262">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.log&#21487;&#33021;&#20250;&#34987;&#36865;&#24448;&#35832;&#22914;&#23383;&#31526;&#32456;&#31471;&#65292;
    </p>
    <p>
      &#20018;&#21475;&#65292;&#24182;&#34892;&#25171;&#21360;&#26426;&#36825;&#26679;&#30340;&#32456;&#31471;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1432188997835" ID="ID_1392310371" MODIFIED="1503495706321">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff0000">&#32039;&#24613;&#31243;&#24230;&#39640;&#30340;log&#20250;&#34987;&#36865;&#24448;syslogd&#25110;klogd </font>
    </p>
    <p>
      <font color="#ff0000">&#20248;&#20808;&#32423;&#23567;&#20110;console_loglevel </font>
    </p>
    <p>
      <font color="#ff0000">(&#40664;&#35748;DEFAULT_CONSOLE_LOGLEVEL)</font>
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p style="text-indent: 0px; font-style: normal; background-color: rgb(255, 255, 255); font-variant: normal; font-size: 14px; font-weight: normal; white-space: normal; letter-spacing: normal; word-spacing: 0px; text-align: left; color: rgb(54, 46, 43); text-transform: none; line-height: 26px; font-family: Arial">
      <font color="rgb(255, 0, 0)">&#22914;&#26524; klogd &#21644; syslogd &#37117;&#36816;&#34892;&#65292;&#21017;&#26080;&#35770; console_loglevel</font>
    </p>
    <p style="text-indent: 0px; font-style: normal; background-color: rgb(255, 255, 255); font-variant: normal; font-size: 14px; font-weight: normal; white-space: normal; letter-spacing: normal; word-spacing: 0px; text-align: left; color: rgb(54, 46, 43); text-transform: none; line-height: 26px; font-family: Arial">
      <font color="rgb(255, 0, 0)">&#20026;&#20309;&#20540;&#65292;&#20869;&#26680;&#28040;&#24687;&#37117;&#23558;&#36861;&#21152;&#21040; /var/log/messages&#20013;&#65292; </font>
    </p>
    <p style="text-indent: 0px; font-style: normal; background-color: rgb(255, 255, 255); font-variant: normal; font-size: 14px; font-weight: normal; white-space: normal; letter-spacing: normal; word-spacing: 0px; text-align: left; color: rgb(54, 46, 43); text-transform: none; line-height: 26px; font-family: Arial">
      <font color="rgb(255, 0, 0)">&#21542;&#21017;&#25353;&#29031;syslogd&#30340;&#37197;&#32622;&#25991;&#20214;&#36827;&#34892;&#22788;&#29702; </font>
    </p>
    <p style="text-indent: 0px; font-style: normal; background-color: rgb(255, 255, 255); font-variant: normal; font-size: 14px; font-weight: normal; white-space: normal; letter-spacing: normal; word-spacing: 0px; text-align: left; color: rgb(54, 46, 43); text-transform: none; line-height: 26px; font-family: Arial">
      <font color="rgb(255, 0, 0)">LINUX&#31995;&#32479;&#21551;&#21160;&#21518;&#65292;&#30001;/etc/init.d/sysklogd&#20808;&#21518;&#21551;&#21160;klogd,syslogd&#20004;&#20010;&#23432;&#25252;&#36827;&#31243;&#12290;</font>
    </p>
    <p style="text-indent: 0px; font-style: normal; background-color: rgb(255, 255, 255); font-variant: normal; font-size: 14px; font-weight: normal; white-space: normal; letter-spacing: normal; word-spacing: 0px; text-align: left; color: rgb(54, 46, 43); text-transform: none; line-height: 26px; font-family: Arial">
      &#20854;&#20013;klogd&#20250;&#36890;&#36807;syslog()&#31995;&#32479;&#35843;&#29992;&#25110;&#32773;&#35835;&#21462;proc&#25991;&#20214;&#31995;&#32479;&#26469;&#20174;&#31995;&#32479;&#32531;&#20914;&#21306;
    </p>
    <p style="text-indent: 0px; font-style: normal; background-color: rgb(255, 255, 255); font-variant: normal; font-size: 14px; font-weight: normal; white-space: normal; letter-spacing: normal; word-spacing: 0px; text-align: left; color: rgb(54, 46, 43); text-transform: none; line-height: 26px; font-family: Arial">
      (ring buffer)&#20013;&#24471;&#21040;&#30001;&#20869;&#26680;printk()&#21457;&#20986;&#30340;&#20449;&#24687;.&#32780;<font color="rgb(255, 0, 0)">syslogd&#26159;&#36890;&#36807;klogd&#26469;&#35835;&#21462;&#31995;&#32479;&#20869;&#26680;&#20449;&#24687;. </font>
    </p>
    <p style="text-indent: 0px; font-style: normal; background-color: rgb(255, 255, 255); font-variant: normal; font-size: 14px; font-weight: normal; white-space: normal; letter-spacing: normal; word-spacing: 0px; text-align: left; color: rgb(54, 46, 43); text-transform: none; line-height: 26px; font-family: Arial">
      <font color="rgb(255, 0, 0)">&#65288;&#22914;&#26524;klogd&#27809;&#26377;&#36816;&#34892;&#65292;&#20869;&#26680;&#28040;&#24687;&#23601;&#19981;&#20250;&#20256;&#36882;&#21040;&#29992;&#25143;&#31354;&#38388;&#65292;&#36825;&#31181;&#24773;&#20917;&#19979;&#21482;&#33021;&#26597;&#30475;/proc/kmsg &#25991;&#20214; gram add&#65289;</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1433142733875" ID="ID_813850252" MODIFIED="1433142762270">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#36890;&#36807;&#37325;&#21551;klogd&#21487;&#20197;
    </p>
    <p>
      &#25351;&#23450;console_loglevel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433142765727" ID="ID_457578610" MODIFIED="1433142801722">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#36890;&#36807;&#32534;&#20889;&#31243;&#24207;&#30340;&#26041;&#24335;&#26469;&#25913;&#21464;
    </p>
    <p>
      console_loglevel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433142805396" ID="ID_80847635" MODIFIED="1433142880712">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#20462;&#25913;&#25991;&#20214;/proc/sys/kernel/printk
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1432190661144" FOLDED="true" ID="ID_707665996" MODIFIED="1486555599159" TEXT="&#x91cd;&#x5b9a;&#x5411;&#x63a7;&#x5236;&#x53f0;&#x7684;&#x6d88;&#x606f;">
<node CREATED="1433829132836" FOLDED="true" ID="ID_341716079" MODIFIED="1475896811510" TEXT="ioctl&#x51fd;&#x6570;&#x7684;&#x8be6;&#x7ec6;&#x8bf4;&#x660e;">
<node CREATED="1433829431554" ID="ID_1117310736" MODIFIED="1433829978014">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#31354;&#38388;ioctl&#30340;&#35843;&#29992;&#21407;&#22411;&#65306;
    </p>
    <pre style="font-variant: normal; text-indent: 0px; line-height: normal; word-spacing: 0px; letter-spacing: normal; text-align: start; color: rgb(121, 0, 41); text-transform: none; font-style: normal; font-weight: normal">int ioctl(int fd, unsigned long cmd, ...);</pre>
  </body>
</html></richcontent>
</node>
<node CREATED="1433829981423" FOLDED="true" ID="ID_1434851982" MODIFIED="1468822438066">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20869;&#26680;&#39537;&#21160;&#24403;&#20013;&#30340;ioctl&#35843;&#29992;&#21407;&#22411;&#65306;
    </p>
    <pre style="font-variant: normal; text-indent: 0px; line-height: normal; word-spacing: 0px; letter-spacing: normal; text-align: start; color: rgb(121, 0, 41); text-transform: none; font-style: normal; font-weight: normal">int (*ioctl) (struct inode *inode, struct file *filp,
              unsigned int cmd, unsigned long arg);</pre>
  </body>
</html></richcontent>
<node CREATED="1433832890105" ID="ID_905396273" MODIFIED="1433832948974">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.<font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">optional</font><font face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;</font><tt style="word-spacing: 0px; letter-spacing: normal; line-height: normal; font-family: monospace; color: rgb(121, 0, 41); text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font face="monospace" color="rgb(121, 0, 41)">arg</font></tt><font face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;</font><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">argument is </font>
    </p>
    <p>
      <font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;&#160;&#160;passed in the form of an</font><font face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;</font><tt style="word-spacing: 0px; letter-spacing: normal; line-height: normal; font-family: monospace; color: rgb(121, 0, 41); text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font face="monospace" color="rgb(121, 0, 41)">unsigned</font></tt><font face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;</font><tt style="word-spacing: 0px; letter-spacing: normal; line-height: normal; font-family: monospace; color: rgb(121, 0, 41); text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font face="monospace" color="rgb(121, 0, 41)">long</font></tt><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">, </font>
    </p>
    <p>
      <font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;&#160;&#160;regardless of whether it was given by </font>
    </p>
    <p>
      <font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;&#160;&#160;the user as an integer or a pointer.</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433832952752" ID="ID_450626280" MODIFIED="1433833024272">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.<span style="font-size: medium; word-spacing: 0px; letter-spacing: normal; float: none; line-height: normal; font-family: helvetica, arial, sans-serif; color: rgb(0, 0, 0); display: inline !important; text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">Because type checking is disabled </font></span>
    </p>
    <p>
      <span style="font-size: medium; word-spacing: 0px; letter-spacing: normal; float: none; line-height: normal; font-family: helvetica, arial, sans-serif; color: rgb(0, 0, 0); display: inline !important; text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;&#160;&#160;on the extra argument, the compiler </font></span>
    </p>
    <p>
      <span style="font-size: medium; word-spacing: 0px; letter-spacing: normal; float: none; line-height: normal; font-family: helvetica, arial, sans-serif; color: rgb(0, 0, 0); display: inline !important; text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;&#160;&#160;can't warn you if an invalid argument </font></span>
    </p>
    <p>
      <span style="font-size: medium; word-spacing: 0px; letter-spacing: normal; float: none; line-height: normal; font-family: helvetica, arial, sans-serif; color: rgb(0, 0, 0); display: inline !important; text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;&#160;&#160;is passed to</font></span><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)"><span class="Apple-converted-space">&#160;</span><span class="docEmphasis" style="font-size: medium; word-spacing: 0px; letter-spacing: normal; line-height: normal; font-family: helvetica, arial, sans-serif; color: rgb(0, 0, 0); text-indent: 0px; font-weight: normal; font-variant: normal; font-style: italic; white-space: normal; text-align: start; text-transform: none"><i>ioctl</i></span><span style="font-size: medium; word-spacing: 0px; letter-spacing: normal; float: none; line-height: normal; font-family: helvetica, arial, sans-serif; color: rgb(0, 0, 0); display: inline !important; text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none">, and any associated </span></font>
    </p>
    <p>
      <span style="font-size: medium; word-spacing: 0px; letter-spacing: normal; float: none; line-height: normal; font-family: helvetica, arial, sans-serif; color: rgb(0, 0, 0); display: inline !important; text-indent: 0px; font-weight: normal; font-variant: normal; font-style: normal; white-space: normal; text-align: start; text-transform: none"><font size="medium" face="helvetica, arial, sans-serif" color="rgb(0, 0, 0)">&#160;&#160;&#160;bug would be difficult to spot.</font></span>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node COLOR="#0066ff" CREATED="1433835240151" ID="ID_555990805" MODIFIED="1433835368954">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;ioctl(STDIN_FILENO,TIOCLINUX,bytes)
    </p>
    <p>
      &#26469;&#36827;&#34892;&#34394;&#25311;&#32456;&#31471;&#30340;&#37325;&#23450;&#21521;&#12290;
    </p>
  </body>
</html></richcontent>
<icon BUILTIN="help"/>
</node>
</node>
</node>
<node CREATED="1433836099543" ID="ID_582463794" MODIFIED="1503495698938">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.printk,syslog&#31995;&#32479;&#35843;&#29992;
    </p>
    <p>
      &#65292;/proc/kmsg&#25991;&#20214;
    </p>
  </body>
</html></richcontent>
<node CREATED="1433836183768" ID="ID_291907296" MODIFIED="1433836413857">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.printk&#20250;&#30452;&#25509;&#23558;&#20449;&#24687;&#20889;&#20837;&#21040;&#38271;&#24230;&#20026;_LOG_BUF_LEN
    </p>
    <p>
      &#160;&#160;&#160;&#30340;&#24490;&#29615;&#30340;&#32531;&#20914;&#21306;&#24403;&#20013;&#65292;&#35813;&#24490;&#29615;&#32531;&#20914;&#21306;&#30340;&#22823;&#23567;&#21487;&#20197;&#22312;&#32534;
    </p>
    <p>
      &#160;&#160;&#160;&#35793;&#20869;&#26680;&#30340;&#26102;&#20505;&#25351;&#23450;&#20174;4KB&#21040;1MB&#30340;&#31354;&#38388;&#22823;&#23567;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433836297041" ID="ID_83272518" MODIFIED="1433836368482">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#27599;&#27425;printk&#35843;&#29992;&#23436;&#27605;&#20043;&#21518;&#37117;&#20250;&#21796;&#37266;&#20219;&#20309;&#38459;&#22622;&#22312;syslog
    </p>
    <p>
      &#160;&#160;&#160;&#31995;&#32479;&#35843;&#29992;&#25110;&#32773;&#38459;&#22622;&#22312;&#35835;&#21462;/proc/kmsg&#25991;&#20214;&#19978;&#30340;&#36827;&#31243;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433836444075" ID="ID_582739782" MODIFIED="1433836558041">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#20174;/proc/kmsg&#35835;&#21462;&#28040;&#24687;&#20250;&#28040;&#32791;&#20869;&#26680;&#28040;&#24687;&#32531;&#20914;&#21306;&#24403;&#20013;&#30340;&#20869;&#23481;&#65292;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#32780;&#35843;&#29992;syslog&#20250;&#22312;&#36820;&#22238;&#28040;&#24687;&#20869;&#23481;&#30340;&#21516;&#26102;&#20445;&#30041;&#28040;&#24687;&#32473;&#20854;&#20182;&#30340;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#36827;&#31243;&#20351;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1433838675723" FOLDED="true" ID="ID_1496785705" MODIFIED="1495608099118" TEXT="4.&#x5982;&#x4f55;&#x5728;&#x5c40;&#x90e8;&#x6216;&#x5168;&#x5c40;&#x73af;&#x5883;&#x4e0b;&#x6253;&#x5f00;&#x548c;&#x5173;&#x95ed;printk">
<node CREATED="1433841585192" ID="ID_1070638651" MODIFIED="1433841669322">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      #define PDEBUG(fmt,args...) printk(KERN_DEBUG&quot;scull:&#160;&#160;&quot; fmt, ##args)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433843395537" FOLDED="true" ID="ID_27726491" MODIFIED="1486555599159">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26174;&#31034;printk&#30340;&#36755;&#20986;&#39057;&#29575;&#65306;
    </p>
    <p>
      if (printk_ratelimit( ))
    </p>
    <p>
      &#160;&#160;&#160;&#160;printk(KERN_NOTICE &quot;The printer is still on fire\n&quot;);
    </p>
  </body>
</html></richcontent>
<node CREATED="1433843511784" ID="ID_1230330500" MODIFIED="1433843593259">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#36807;&#20462;&#25913;/proc/sys/kernel/rate_limit&#21644;
    </p>
    <p>
      /proc/sys/kernel/printk_ratelimit_burst
    </p>
    <p>
      &#21487;&#20197;&#25511;&#21046;printk_ratelimit()&#30340;&#20351;&#33021;&#36895;&#24230;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1433844034617" ID="ID_346202796" MODIFIED="1436491353196" TEXT="5.&#x5185;&#x6838;&#x63d0;&#x4f9b;&#x4e86;&#x5c06;&#x8bbe;&#x5907;&#x53f7;&#x8f6c;&#x6362;&#x4e3a;&#x5b57;&#x7b26;&#x4e32;&#x7684;&#x5b8f;&#x5b9a;&#x4e49;">
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int print_dev_t(char *buffer, dev_t dev);
    </p>
    <p>
      char *format_dev_t(char *buffer, dev_t dev);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433853570573" FOLDED="true" ID="ID_434256939" MODIFIED="1503495694781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6.&#26377;&#19968;&#20123;&#25216;&#26415;&#21487;&#20197;&#29992;&#20110;&#21521;&#20869;&#26680;&#35810;&#38382;&#19968;&#20123;&#20449;&#24687;&#65306;
    </p>
    <p>
      1.&#22312;/proc&#30446;&#24405;&#19979;&#38754;&#21019;&#24314;&#19968;&#20123;&#25991;&#20214;
    </p>
    <p>
      2.&#20351;&#29992;ioctl&#39537;&#21160;&#30340;&#26041;&#27861;
    </p>
    <p>
      3.&#36890;&#36807;sysfs&#26469;&#26292;&#38706;&#19968;&#20123;&#23646;&#24615;
    </p>
  </body>
</html></richcontent>
<node CREATED="1433853693127" ID="ID_1421830166" MODIFIED="1433853717125">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      sysfs&#37325;&#28857;&#22312;14&#31456;&#36827;&#34892;
    </p>
    <p>
      &#20171;&#32461;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1433853739522" FOLDED="true" ID="ID_861178982" MODIFIED="1495608102350">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      7.&#20351;&#29992;/proc&#25991;&#20214;&#31995;&#32479;
    </p>
  </body>
</html></richcontent>
<node CREATED="1433925949961" FOLDED="true" ID="ID_1095317054" MODIFIED="1486555599160">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      /proc&#26159;&#19968;&#20010;&#29305;&#27530;&#30340;&#32431;&#36719;&#20214;&#26500;&#36896;&#30340;&#25991;&#20214;&#31995;&#32479;
    </p>
    <p>
      &#35813;&#30446;&#24405;&#19979;&#38754;&#30340;&#27599;&#19968;&#20010;&#25991;&#20214;&#37117;&#36319;&#20869;&#26680;&#30340;&#19968;&#20010;
    </p>
    <p>
      &#20989;&#25968;&#30456;&#20851;&#65292;&#24182;&#30001;&#20989;&#25968;&#20135;&#29983;&#35813;&#25991;&#20214;&#37324;&#38754;&#30340;&#20869;&#23481;
    </p>
  </body>
</html></richcontent>
<node CREATED="1433926049601" ID="ID_1685977447" MODIFIED="1433926071983">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      /proc/modules&#35760;&#24405;&#24403;
    </p>
    <p>
      &#21069;&#20869;&#26680;&#21152;&#36733;&#30340;&#27169;&#22359;&#20449;&#24687;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1433926035333" ID="ID_1426389848" MODIFIED="1433926418218">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      /proc&#25991;&#20214;&#31995;&#32479;&#30340;&#26412;&#26469;&#30446;&#30340;&#26159;&#20026;&#20102;&#24471;&#21040;&#31995;&#32479;&#36816;&#34892;&#30340;&#20449;&#24687;&#65292;&#20294;&#26159;&#29616;&#22312;&#20869;&#26680;&#24320;&#21457;&#20154;
    </p>
    <p>
      &#21592;&#24182;&#19981;&#24314;&#35758;&#23558;&#39537;&#21160;&#30340;&#20449;&#24687;&#36890;&#36807;/proc&#25991;&#20214;&#31995;&#32479;&#23637;&#29616;&#20986;&#26469;&#65292;&#24314;&#35758;&#20351;&#29992;&#30340;&#26159;sysfs
    </p>
    <p>
      &#31995;&#32479;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433926725914" FOLDED="true" ID="ID_401225256" MODIFIED="1486555599160" TEXT="&#x5728;/proc&#x76ee;&#x5f55;&#x4e0b;&#x9762;&#x521b;&#x5efa;&#x53ea;&#x8bfb;&#x6587;&#x4ef6;">
<node COLOR="#0066ff" CREATED="1433926759500" ID="ID_1740183262" MODIFIED="1433926841019">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#39537;&#21160;&#31243;&#24207;&#24517;&#39035;&#23454;&#29616;&#19968;&#20010;&#20989;&#25968;
    </p>
    <p>
      &#160;&#160;&#160;&#29992;&#20110;&#21521;&#35813;&#25991;&#20214;&#24403;&#20013;&#20889;&#20837;&#25968;&#25454;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1433926899129" FOLDED="true" ID="ID_351486175" MODIFIED="1475896811512">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.int (*read_proc)(char *page, char **start, off_t offset, int count,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int *eof, void *data);
    </p>
  </body>
</html></richcontent>
<richcontent TYPE="NOTE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="2">1.</font><font face="Verdana, Arial, Helvetica, sans-serif" color="rgb(0, 0, 0)" size="2">&#31532;&#19968;&#20010;&#21442;&#25968;&#65306;&#20026;&#21861;&#21483;page&#65311;&#31572;&#26696;&#23601;&#26159;&#22914;&#26524;&#23545;proc&#25991;&#20214;&#35843;&#29992;&#35835;&#25805;&#20316;&#65292;&#20869;&#26680;&#20250;&#20998;&#37197;&#19968;&#20010;&#39029;&#22823;&#23567;&#30340;&#32531;&#20914;&#21306;&#12290;&#22914;&#20309;&#36755;&#20986;&#22823;&#20110;&#19968;&#20010;&#39029;&#30340;&#25968;&#25454;&#21602;&#65292;&#36825;&#24471;&#20381;&#36182;&#20110;&#31532;&#20108;&#20010;&#21644;&#31532;&#19977;&#20010;&#21442;&#25968;&#20102;&#12290;</font>
    </p>
    <p>
      <font face="Verdana, Arial, Helvetica, sans-serif" color="rgb(0, 0, 0)" size="2">&#23545;&#20110;proc&#25991;&#20214;&#65292;&#19968;&#27425;read&#25805;&#20316;&#26368;&#22810;&#21482;&#33021;&#35835;&#21462;&#19968;&#20010;page&#30340;&#25968;&#25454;&#65292;&#22914;&#26524;&#38656;&#35201;&#35835;&#21462;&#22823;&#20110;&#19968;&#20010;&#39029;&#30340;&#25968;&#25454;&#38656;&#35201;&#20445;&#23384;read&#30340;&#36820;&#22238;&#20540;&#65292;&#28982;&#21518;&#20351;&#29992;lseek&#35774;&#23450;offset&#65292;&#28982;&#21518;&#20877;&#27425;&#35843;&#29992;read&#12290; </font>
    </p>
    <p>
      <font face="Verdana, Arial, Helvetica, sans-serif" color="rgb(0, 0, 0)" size="2">2.</font><font size="2">start&#21644;off&#21442;&#25968;&#65306;off&#23545;&#24212;&#20110;lseek&#37324;&#38754;&#30340;offset&#65288;lseek whence&#20026;SEEK_END&#65292;offset&#20026;&#36127; &#30340;&#24773;&#20917;&#19979;&#65292;&#20256;&#36827;&#26469;&#30340;off&#20026;&#38646;&#65292;&#20855;&#20307;&#21407;&#22240;&#24453;&#32771;&#21476;&#65289;&#12290; </font>
    </p>
    <p>
      <font size="2">&#22914;&#26524;&#19981;&#35774;&#32622;*start&#30340;&#20540;&#65292;off&#30340;&#21462;&#20540;&#21482;&#33021;&#22312;[0, count - 1]&#20043;&#38388;,&#19988;&#33021;&#22815;&#35835;&#21462;&#30340;&#25968;&#25454;&#22823;&#23567;&#20026;&#65306;count - off&#12290;&#21487;&#20197;&#29702;&#35299;&#31995;&#32479;&#25335;&#36125;&#20102; [page + off, page+count - 1]&#20043;&#38388;&#30340;&#25968;&#25454;&#21040;&#29992;&#25143;&#30340;buffer&#37324;&#12290;&#22914;&#26524;off&#30340;&#21462;&#20540;&#36229;&#20986;&#33539;&#22260;&#65292;read&#23558;&#35835;&#19981;&#21040;&#25968;&#25454;&#12290;&#22914;&#26524;&#35774;&#32622;&#20102;*start&#30340;&#20540;&#65292;&#31995;&#32479;&#35748;&#20026;*start&#25351;&#21521;&#30340;&#22320;&#22336;&#23601;&#26159;off&#25351;&#23450;&#30340;&#22320;&#22336;&#65292;off&#30340;&#20540;&#20250;&#34987;&#24573;&#30053;&#65292;&#31995;&#32479;&#20250;&#25335;&#36125;[start&#65292; start+count-1]&#20043;&#38388;&#30340;&#25968;&#25454;&#21040;&#29992;&#25143;&#31354;&#38388;&#12290;</font><font color="#990099" size="2"><b>&#24403;&#28982;&#25105;&#20204;&#22312;&#23454;&#29616;start&#22320;&#22336;&#30340;&#23450;&#20301;&#26102;&#65292;&#21487;&#33021;&#20250;&#38656;&#35201;off&#30340;&#20540;</b></font><font color="#ff0066" size="2">&#12290;</font><font size="2">&#160; </font>
    </p>
    <p>
      <font face="Verdana, Arial, Helvetica, sans-serif" color="rgb(0, 0, 0)" size="2">3. count &#21442;&#25968;&#19982;read&#20013;&#30340;count&#19968;&#33268; </font>
    </p>
    <p>
      <font size="2">4. eof&#21442;&#25968;&#65292;&#35774;&#32622;&#20102;&#36825;&#20010;&#21442;&#25968;&#34920;&#26126;&#19981;&#24819;&#20877;&#25552;&#20379;&#25968;&#25454;&#20102;&#65292;&#31070;&#39532;&#24847;&#24605;&#21602;&#65311;&#22914;&#26524;&#19981;&#35774;&#32622;&#36825;&#20010;&#21442;&#25968;&#65292;&#23545;&#20110;&#19978;&#38754;&#35828;&#30340;start&#20026;&#31354;&#30340;&#24773;&#20917;&#65292;read_proc&#36820;&#22238;&#21518;&#65292;&#31995;&#32479;&#22914;&#26524;&#21457;&#29616; &#65288;count - off&#65289; &lt; count &#20250;&#25509;&#30528;&#19979;&#21457;&#20889;&#35831;&#27714;&#65292;&#35835;&#21462;off&#22823;&#23567;&#30340;&#25968;&#25454;&#12290;&#20363;&#22914;&#65306;&#26377;&#36825;&#26679;&#30340;&#35835;&#21462;&#25805;&#20316;&#65306; </font>
    </p>
  </body>
</html></richcontent>
<node COLOR="#009900" CREATED="1437289477857" ID="ID_1952722668" MODIFIED="1437289716389">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;LDDR3&#30340;&#35299;&#37322;&#65306;
    </p>
    <p>
      start&#26159;&#20026;&#20102;&#26631;&#24535;&#36820;&#22238;&#32473;&#29992;&#25143;&#30340;&#25968;&#25454;&#30340;&#20301;&#32622;&#12290;&#22914;&#26524;start&#27809;&#26377;&#34987;&#35774;&#32622;&#65292;
    </p>
    <p>
      &#37027;&#20040;offset&#20540;&#23601;&#34987;&#35748;&#20026;&#19968;&#30452;&#26159;0.&#22914;&#26524;start&#34987;&#35774;&#32622;&#20102;&#65292;&#37027;&#20040;offset&#23601;&#20250;
    </p>
    <p>
      &#36215;&#20316;&#29992;&#65292;&#32780;&#19988;&#25968;&#25454;&#20250;&#34987;&#25918;&#32622;&#22312;offset&#25351;&#23450;&#30340;&#20301;&#32622;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#ff3366" CREATED="1437290700534" ID="ID_1713940964" MODIFIED="1437290965206">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      start&#30340;&#21478;&#19968;&#20010;&#29992;&#36884;&#65306;
    </p>
    <p>
      &#24403;&#25105;&#20204;&#22823;&#37327;&#35843;&#29992;proc_read&#26102;&#65292;&#65288;ASCII representation of kernel data structures&#65289;
    </p>
    <p>
      ASCII&#20195;&#34920;&#30340;&#20869;&#26680;&#25968;&#25454;&#32467;&#26500;&#20250;&#22312;2&#27425;&#35843;&#29992;&#20043;&#38388;&#21464;&#21270;&#65292;&#23548;&#33268;&#25968;&#25454;&#30340;&#19981;&#19968;&#33268;&#24615;&#65292;&#25105;&#20204;
    </p>
    <p>
      &#21487;&#20197;&#23558;*start&#35774;&#32622;&#25104;&#20026;&#19968;&#20010;&#23567;&#30340;&#25972;&#25968;&#65292;&#35843;&#29992;&#32773;&#21487;&#20197;&#29992;&#23427;&#26469;&#35774;&#32622;filp-&gt;f_ops&#26469;&#35760;&#24405;
    </p>
    <p>
      read_proc&#35843;&#29992;&#30340;&#27425;&#25968;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1437396702899" ID="ID_312476130" MODIFIED="1437558473642">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct proc_dir_entry *create_proc_read_entry(const char *name,
    </p>
    <p>
      &#160;mode_t mode, struct proc_dir_entry *base,
    </p>
    <p>
      &#160;read_proc_t *read_proc, void *data);
    </p>
    <p>
      &#35813;&#20989;&#25968;&#29992;&#20110;&#21019;&#24314;proc&#25991;&#20214;
    </p>
    <p>
      remove_proc_entry(&quot;scullmem&quot;, NULL /* parent dir */);
    </p>
    <p>
      &#25764;&#38144;create_proc_read_entry&#25152;&#24314;&#31435;&#30340;&#30446;&#24405;&#25991;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1437656532055" FOLDED="true" ID="ID_76553634" MODIFIED="1486555599160">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff0033">&#20351;&#29992;seq_file&#25509;&#21475;</font>
    </p>
    <p>
      &#30001;&#20110;procfs&#40664;&#35748;&#21482;&#26159;&#20351;&#29992;&#19968;&#39029;&#30340;&#20869;&#23384;&#65292;&#25152;&#20197;&#22312;&#25805;&#20316;&#22823;&#37327;&#30340;&#25968;&#25454;&#30340;&#26102;&#20505;
    </p>
    <p>
      &#38656;&#35201;&#33258;&#24049;&#22312;read_proc&#20989;&#25968;&#24403;&#20013;&#23454;&#29616;&#36845;&#20195;&#65292;&#36825;&#26679;&#24456;&#23481;&#26131;&#20986;&#29616;&#38169;&#35823;&#65292;&#20110;&#26159;
    </p>
    <p>
      &#20869;&#26680;&#24320;&#21457;&#32773;&#25277;&#35937;&#20986;seq_file&#25509;&#21475;&#65292;&#26469;&#31616;&#21270;&#19978;&#36848;&#30340;&#25805;&#20316;
    </p>
  </body>
</html></richcontent>
<node CREATED="1437817384454" ID="ID_113460327" MODIFIED="1437817390804">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="../&#x601d;&#x7ef4;&#x5bfc;&#x56fe;&#x56fe;&#x7247;&#x5e93;/seq_file.jpg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1437817448765" FOLDED="true" ID="ID_1352229131" MODIFIED="1475896811512">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      seq_file&#21508;&#25509;&#21475;&#20989;&#25968;&#30340;&#35828;&#26126;
    </p>
    <p>
      struct seq_file {
    </p>
    <p>
      &#160;&#160;&#160;&#160;char *buf; size_t size; size_t from;
    </p>
    <p>
      &#160;&#160;&#160;&#160;size_t count; loff_t index; loff_t read_pos;
    </p>
    <p>
      &#160;&#160;&#160;&#160;u64 version; struct mutex lock;
    </p>
    <p>
      &#160;&#160;&#160;&#160;<font color="#ff0033">const struct seq_operations *op;</font>&#160;void *private;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1437817767774" ID="ID_1696818725" MODIFIED="1437817851071">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">1.</font><font size="3" face="Consolas, monospace" color="rgb(0, 0, 240)">void&#160;*&#160;(*start)&#160;(structseq_file&#160;*m,&#160;loff_t&#160;*pos);</font>
    </p>
    <p>
      <font size="3" color="#0000f0">m&#65306;&#25351;&#21521;&#30340;&#26159;&#26412;seq_file&#30340;&#32467;&#26500;&#20307;&#65292;&#22312;&#27491;&#24120;&#24773;&#20917;&#19979;&#26080;&#38656;&#22788;&#29702;&#12290;</font>
    </p>
    <p>
      <font size="3" face="Consolas, monospace" color="#0000f0">pos&#65306;&#26159;&#19968;&#20010;&#25972;&#22411;&#20301;&#32622;&#20540;&#65292;&#25351;&#31034;&#24320;&#22987;&#35835;&#21462;&#30340;&#20301;&#32622;&#12290;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1437817975029" ID="ID_83436741" MODIFIED="1437818095596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">2.</font><font size="3" face="Tahoma" color="rgb(102, 102, 102)">seq_file&#20869;&#37096;&#26426;&#21046;&#21487;&#33021;&#20250;&#20351;&#29992;show&#26041;&#27861;&#33719;&#21462;start&#36820;&#22238;&#20540;&#25351;&#21521;&#30340; </font>
    </p>
    <p>
      <font size="3" face="Tahoma" color="rgb(102, 102, 102)">&#32467;&#26500;&#20307;&#20013;&#30340;&#25968;&#25454;&#21040;&#20869;&#37096;&#32531;&#23384;&#65292;&#24182;&#36866;&#26102;&#36865;&#24448;&#29992;&#25143;&#31354;&#38388;&#12290; </font>
    </p>
    <p>
      <font size="3" color="#0000f0">int&#160;(*show)&#160;(struct seq_file&#160;*m,&#160;void&#160;*v); </font>
    </p>
    <p>
      <font size="3" face="Tahoma" color="rgb(102, 102, 102)">&#25152;&#20197;show&#26041;&#27861;&#23601;&#26159;&#36127;&#36131;&#23558;v&#25351;&#21521;&#20803;&#32032;&#20013;&#30340;&#25968;&#25454;&#36755;&#20986;&#21040;seq_file&#30340; </font>
    </p>
    <p>
      <font size="3" face="Tahoma" color="rgb(102, 102, 102)">&#20869;&#37096;&#32531;&#23384;&#65292;&#20294;&#26159;&#20854;&#20013;&#24517;&#39035;&#20511;&#21161;seq_file&#25552;&#20379;&#30340;&#19968;&#20123;&#31867;&#20284; </font>
    </p>
    <p>
      <font size="3" face="Tahoma" color="rgb(102, 102, 102)">printf&#30340;&#25509;&#21475;&#20989;&#25968;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1437818493403" ID="ID_107919400" MODIFIED="1437818554016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">3.</font><font class="Apple-style-span" size="3" face="Consolas, monospace" color="#0000f0">void&#160;*&#160;(*next)&#160;(struct seq_file&#160;*m,&#160;void&#160;*v,&#160;loff_t&#160;*pos);</font>
    </p>
    <p>
      <font class="Apple-style-span" size="3" face="Consolas, monospace" color="#0000f0">v&#65306;&#26159;&#20043;&#21069;&#35843;&#29992;start&#25110;next&#36820;&#22238;&#30340;&#20803;&#32032;&#25351;&#38024; </font>
    </p>
    <p>
      <font class="Apple-style-span" size="3" color="#0000f0">pos&#65306;&#38656;&#35201;&#31227;&#21160;&#21040;&#30340;&#20803;&#32032;&#32034;&#24341;&#20540;&#12290;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1439028958941" FOLDED="true" ID="ID_588127660" MODIFIED="1475896811512">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;seq_file&#25509;&#21475;&#30340;&#27493;&#39588;
    </p>
  </body>
</html></richcontent>
<node CREATED="1439030740675" ID="ID_1540360466" MODIFIED="1439030939551">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff3300"><b>1.</b></font>&#160;struct proc_dir_entry *entry;
    </p>
    <p>
      entry = create_proc_entry(&quot;scullseq&quot;, 0, NULL);
    </p>
    <p>
      &#21019;&#24314;&#19968;&#20010;entry&#32467;&#26500;&#20307;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439030944229" ID="ID_1395278855" MODIFIED="1439125294638">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="2" color="#ff3300">2.&#160;&#22768;&#26126;&#19968;&#20010;file_operations&#32467;&#26500;&#20307; </font>
    </p>
    <p>
      <font size="2" color="#ff3300">static struct file_operations scull_proc_ops = { </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.owner&#160;&#160;&#160;= THIS_MODULE, </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.open&#160;&#160;&#160;&#160;= scull_proc_open, </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.read&#160;&#160;&#160;&#160;= seq_read, </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.llseek&#160;&#160;= seq_lseek, </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.release = seq_release </font>
    </p>
    <p>
      <font size="2" color="#ff3300">}; </font>
    </p>
    <p>
      &#35813;&#32467;&#26500;&#20307;&#37324;&#38754;&#30340;open,read,llseek,release&#20989;&#25968;
    </p>
    <p>
      &#37117;&#26159;&#31995;&#32479;&#33258;&#23450;&#20041;&#30340;&#20989;&#25968;&#65292;&#22312;&#23450;&#20041;cdev&#30340;&#26102;&#20505;&#23558;
    </p>
    <p>
      &#35813;&#32467;&#26500;&#20307;&#27880;&#20876;&#21040;Inode&#23545;&#24212;&#30340;&#25805;&#20316;&#20989;&#25968;&#37324;&#38754;
    </p>
    <p>
      <font color="#ff3300">entry-&gt;proc_fops = &amp;scull_proc_ops;&#35774;&#32622;&#33258;&#24049;&#30340;proc_fops</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439124558740" ID="ID_1176615280" MODIFIED="1439125152114">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff3300">3. </font>
    </p>
    <p>
      &#22312;&#35843;&#29992;&#25991;&#20214;&#25805;&#20316;&#20989;&#25968;&#30340;open&#20989;&#25968;&#30340;&#26102;&#20505;&#65292;&#21363;&#35843;&#29992;scull_proc_open
    </p>
    <p>
      &#20989;&#25968;&#30340;&#26102;&#20505;&#38656;&#35201;&#20570;&#22914;&#19979;&#30340;&#25805;&#20316;&#65306;
    </p>
    <p>
      static int scull_proc_open(struct inode *inode, struct file *file)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;return seq_open(file, &amp;scull_seq_ops);
    </p>
    <p>
      }
    </p>
    <p>
      <font size="2" color="#ff3300">static struct seq_operations scull_seq_ops = { </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.start = scull_seq_start, </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.next&#160;&#160;= scull_seq_next, </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.stop&#160;&#160;= scull_seq_stop, </font>
    </p>
    <p>
      <font size="2" color="#ff3300">&#160;&#160;&#160;&#160;.show&#160;&#160;= scull_seq_show </font>
    </p>
    <p>
      <font size="2" color="#ff3300">};</font>
    </p>
    <p>
      <font color="#330099">scull_seq_ops&#38656;&#35201;&#33258;&#24049;&#36827;&#34892;&#23450;&#20041;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1439130329193" ID="ID_476494284" MODIFIED="1439130370443">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20851;&#20110;&#19968;&#20123;&#20855;&#20307;&#30340;debug&#24037;&#20855;&#30340;&#20351;&#29992;&#20171;&#32461;</b>
    </p>
  </body>
</html></richcontent>
<icon BUILTIN="flag-orange"/>
</node>
<node CREATED="1458193894637" ID="ID_1888645789" MODIFIED="1458194028161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>8.mount debugfs&#30340;&#26041;&#24335;</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487914213021" ID="ID_1288142286" MODIFIED="1504615933818">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      9. dynamic debug
    </p>
    <p>
      <font color="#e71010">&#20801;&#35768;&#20320;&#21160;&#24577;&#22320;&#20351;&#33021;&#25110;&#32773;&#31105;&#27490;&#20869;&#26680;&#20195;&#30721;&#26469;&#33719;&#21462;&#28508;&#22312;&#30340;&#20869;&#26680;&#20449;&#24687; </font>
    </p>
    <p>
      <font color="#e71010">&#22914;&#26524;CONFIG_DYNAMIC_DEBUG&#34987;&#35774;&#32622;&#65292;&#37027;&#20040; </font>
    </p>
    <p>
      <font color="#e71010">&#25152;&#26377;&#30340;pr_debug()/dev_dbg()&#35843;&#29992;&#21644;print_hex_dump_debug()/print_hex_dump_bytes() </font>
    </p>
    <p>
      <font color="#e71010">&#21487;&#20197;&#22312;&#27599;&#20010;&#35843;&#29992;&#28857;&#34987;&#21160;&#24577;&#22320;&#20351;&#29992;</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1487915123470" ID="ID_1789223037" MODIFIED="1487915396818">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#36890;&#36807;&#21305;&#37197;0&#21644;1&#30340;&#32452;&#21512;&#65292;&#31616;&#21333;&#30340;&#26597;&#35810;&#35821;&#35328;&#21487;&#20197;&#25171;&#24320;&#25110;&#32773;&#20851;&#38381;
    </p>
    <p>
      &#35843;&#35797;&#35821;&#21477;&#12290;
    </p>
    <p>
      &#36890;&#36807;&#19979;&#21015;&#21305;&#37197;&#26041;&#24335;:
    </p>
    <p>
      source filename
    </p>
    <p>
      function name
    </p>
    <p>
      line number (including ranges of line numbers)
    </p>
    <p>
      module name
    </p>
    <p>
      format string
    </p>
    <p>
      2.&#25552;&#20379;&#20102;&#19968;&#20010;debug&#25991;&#20214;&#31995;&#32479;&#30340;&#25511;&#21046;&#25991;&#20214;&lt;debugfs&gt;/dynamic_debug/control
    </p>
    <p>
      &#29992;&#20110;&#24110;&#21161;&#20320;&#23637;&#31034;&#24050;&#30693;&#30340;debug&#35821;&#21477;&#30340;&#21015;&#34920;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1502783784598" ID="ID_97062507" MODIFIED="1502783905272">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#25171;&#24320;&#21160;&#24577;&#35843;&#35797;</b>
    </p>
    <p>
      <font color="#ea0909">#echo 'file &#25991;&#20214;&#21517; +p' &gt; /sys/kernel/debug/dynamic_debug/control</font>
    </p>
    <p>
      
    </p>
    <p>
      <b>&#20851;&#38381;&#21160;&#24577;&#35843;&#35797;</b>
    </p>
    <p>
      <font color="#d10909">#echo 'file &#25991;&#20214;&#21517; -p' &gt; /sys/kernel/debug/dynamic_debug/control</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487915420407" ID="ID_254564939" MODIFIED="1487915507042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#25511;&#21046;&#21160;&#24577;debug&#30340;&#34892;&#20026;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1495608114296" FOLDED="true" ID="ID_141978653" MODIFIED="1499823283939">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b><font color="#1a8a8c" size="3">10.</font><font size="3" face="Microsoft Yahei, Hei, Tahoma, SimHei, sans-serif" color="rgb(68, 68, 68)">&#22522;&#20110;pstore &#21644; ramoops&#23454;&#29616;&#22312;&#38750;&#26131;&#22833;&#24615;&#20869;&#23384;&#20013;&#20445;&#23384;panic&#26085;&#24535;</font></b>&#160; </i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1495612173668" ID="ID_1179732713" MODIFIED="1495612176675" TEXT="http://www.spinics.net/lists/linux-acpi/msg57973.html"/>
</node>
<node CREATED="1503042813268" ID="ID_682983874" MODIFIED="1503042856438">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      11. <b>&#25171;&#24320;kernel lockup and hang detection&#21487;&#20197;&#23450;&#20301;&#31995;&#32479;hang&#20303; </b>
    </p>
    <p>
      <b>&#26102;&#30340;back trace</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node COLOR="#cc0033" CREATED="1434600032779" FOLDED="true" ID="ID_389670617" MODIFIED="1502348430837" POSITION="right" TEXT="5.&#x5173;&#x4e8e;&#x9a71;&#x52a8;&#x7f16;&#x8bd1;&#x7684;Makefile&#x5206;&#x6790;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1434600072078" ID="ID_333258577" MODIFIED="1434600082269" TEXT="1.makefile&#x7684;&#x4e8c;&#x6b21;&#x52a0;&#x8f7d;"/>
<node CREATED="1434600084757" ID="ID_1963536127" MODIFIED="1434600100459" TEXT="2.obj-m&#x6307;&#x5b9a;&#x9700;&#x8981;&#x7f16;&#x8bd1;&#x7684;&#x6a21;&#x5757;"/>
<node CREATED="1434600135900" ID="ID_218827246" MODIFIED="1434600222774">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.$(MAKE) -C $(KERNELDIR) M=$(PWD) LDDINC=$(PWD)/../include modules
    </p>
    <p>
      &#20851;&#20110;modules&#30446;&#26631;&#20013;&#30340;<font color="#ff3333">stage</font>&#37096;&#20998;&#30340;&#20998;&#26512;
    </p>
    <p>
      <font color="#ff0033">/lib/modules/2.6.32-279.el6.i686/build/scripts/Makefile.modpost</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1439130621065" FOLDED="true" ID="ID_385122361" MODIFIED="1486719832121" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#009999"><b>&#31532;&#20116;&#31456;&#65306;&#39537;&#21160;&#24403;&#20013;&#30340;&#24182;&#21457;&#21644;&#31455;&#24577;&#26465;&#20214; </b></font></i>
    </p>
    <p>
      <b>&#35774;&#22791;&#39537;&#21160;&#31243;&#24207;&#21592;&#22312;&#19968;&#24320;&#22987;&#23601;&#24517;&#39035;&#26377;&#24182;&#21457;&#30340;&#27010;&#24565;</b>
    </p>
  </body>
</html></richcontent>
<font ITALIC="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1439215247253" ID="ID_1839798648" MODIFIED="1486555597875" TEXT="1.&#x5e76;&#x53d1;&#x548c;&#x5b83;&#x7684;&#x7ba1;&#x7406;">
<node CREATED="1439298508866" FOLDED="true" ID="ID_1135750547" MODIFIED="1486555599160" TEXT="&#x4e00;&#x4e9b;&#x57fa;&#x672c;&#x7684;&#x539f;&#x5219;">
<node CREATED="1439298538694" ID="ID_1447351129" MODIFIED="1439298711075">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36991;&#20813;&#20849;&#20139;&#30340;&#36164;&#28304;
    </p>
    <p>
      &#20294;&#26159;&#20849;&#20139;&#36164;&#28304;&#26159;&#24517;&#19981;&#21487;&#20813;&#30340;&#65292;&#27604;&#22914;&#30828;&#20214;&#36164;&#28304;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439472332062" ID="ID_306209797" MODIFIED="1439472470497">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20004;&#20010;&#35201;&#27714;&#65306;
    </p>
    <p>
      <i>1.&#22312;&#19968;&#20010;&#23545;&#35937;&#30340;&#21151;&#33021;&#21487;&#29992;&#20043;&#21069;&#65292;&#20869;&#26680;&#19981;&#33021;&#35775;&#38382;&#23427;&#65307; </i>
    </p>
    <p>
      <i>2.&#20869;&#26680;&#24517;&#39035;&#36861;&#36394;&#23545;&#19968;&#20010;&#23545;&#35937;&#30340;&#20351;&#29992;</i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1439473076964" FOLDED="true" ID="ID_156150571" MODIFIED="1486555599160">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Linux&#20869;&#26680;&#24403;&#20013;&#20449;&#21495;&#37327;&#30340;&#23454;&#29616;
    </p>
    <p>
      &#22836;&#25991;&#20214;&lt;asm/semaphore.h&gt;,struct semaphore
    </p>
  </body>
</html></richcontent>
<node CREATED="1439473326240" ID="ID_1539179217" MODIFIED="1439473503347">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#21487;&#20197;&#39318;&#20808;&#22768;&#26126;&#19968;&#20010;semaphore&#21464;&#37327;&#65292;&#28982;&#21518;&#21021;&#22987;&#21270;&#23427;
    </p>
    <p>
      void sema_init(struct semaphore *sem, int val)
    </p>
    <p>
      &#20869;&#26680;&#20063;&#25552;&#20379;&#20102;&#30456;&#20851;&#30340;&#23439;&#26469;&#31616;&#21270;semaphore&#30340;&#25805;&#20316;
    </p>
    <p>
      DECLARE_MUTEX(name) <i>&#160;initialize to 1</i>
    </p>
    <p>
      DECLARE_MUTEX_LOCKED(name)&#160;&#160;<i>initialize to 0</i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439692286509" FOLDED="true" ID="ID_1811177688" MODIFIED="1475896811544" TEXT="">
<node CREATED="1439692289171" ID="ID_1955455592" MODIFIED="1439692377596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.<i>&#21160;&#24577;&#22320;&#21021;&#22987;&#21270;&#20449;&#21495;&#37327; </i>
    </p>
    <p>
      <i><font color="#cc6600">void init_MUTEX(struct semaphore *sem); </font></i>
    </p>
    <p>
      <i><font color="#cc6600">void init_MUTEX_LOCKED(struct semaphore *sem);</font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1439692517522" ID="ID_503829488" MODIFIED="1439719592139">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.<i>&#38024;&#23545;&#20449;&#21495;&#37327;&#30340;P&#25805;&#20316; </i>
    </p>
    <p>
      <i>void down(struct semaphore *sem);&#160;</i>&#160;&#35813;&#25805;&#20316;&#20250;&#19968;&#30452;&#38459;&#22622;
    </p>
    <p>
      <i>int down_interruptible(struct semaphore *sem);</i>&#160;&#35813;&#25805;&#20316;&#20801;&#35768;&#29992;&#25143;&#31354;&#38388;&#25171;&#26029;&#38459;&#22622;&#22312;
    </p>
    <p>
      &#20449;&#21495;&#37327;&#19978;&#30340;&#36827;&#31243;&#65292;&#19981;&#21487;&#20013;&#26029;&#30340;&#25805;&#20316;&#38750;&#24120;&#36866;&#21512;&#21019;&#36896;&#19981;&#21487;&#26432;&#27515;&#30340;&#36827;&#31243;
    </p>
    <p>
      <i>int down_trylock(struct semaphore *sem);&#19981;&#21487;&#38459;&#22622;</i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1439904828488" ID="ID_1348967419" MODIFIED="1441810945781">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.&#38024;&#23545;&#20449;&#21495;&#37327;&#30340;V&#25805;&#20316;
    </p>
    <p>
      <i>void up(struct semaphore *sem);</i>
    </p>
  </body>
</html></richcontent>
</node>
<node COLOR="#006666" CREATED="1445526354302" FOLDED="true" ID="ID_241890611" MODIFIED="1475896811544">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="4"><b>&#35835;&#20889;&#20449;&#21495;&#37327;</b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1445569301141" ID="ID_939407111" MODIFIED="1445569343323">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;&#35835;&#20889;&#20449;&#21495;&#37327;&#24517;&#39035;&#21253;&#21547;&#30340;&#22836;&#25991;&#20214;
    </p>
    <p>
      &lt;linux/rwsem.h&gt;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1446898193467" ID="ID_146195882" MODIFIED="1446898226585">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35835;&#20889;&#20449;&#21495;&#37327;&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;
    </p>
    <p>
      void init_rwsem(struct rw_semaphore *sem);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1446898463612" ID="ID_1503650258" MODIFIED="1446898525950">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#35835;&#30340;&#25511;&#21046;
    </p>
    <p>
      void down_read(struct rw_semaphore *sem);
    </p>
    <p>
      int down_read_trylock(struct rw_semaphore *sem);
    </p>
    <p>
      void up_read(struct rw_semaphore *sem);
    </p>
    <p>
      down&#25805;&#20316;&#21487;&#33021;&#20250;&#20351;&#24403;&#21069;&#30340;&#36827;&#31243;&#36827;&#20837;&#19981;&#21487;&#20013;&#26029;&#30340;&#30561;&#30496;&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1446901227818" ID="ID_1265080011" MODIFIED="1446901301455">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font size="3">&#23545;&#20110;&#20889;&#30340;&#25511;&#21046; </font>
    </p>
    <p>
      <font size="3">void down_write(struct rw_semaphore *sem); </font>
    </p>
    <p>
      <font size="3">int down_write_trylock(struct rw_semaphore *sem); </font>
    </p>
    <p>
      <font size="3">void up_write(struct rw_semaphore *sem); </font>
    </p>
    <p>
      <font size="3">void downgrade_write(struct rw_semaphore *sem); </font>
    </p>
    <p>
      <font size="3" face="arial" color="rgb(102, 102, 102)">&#160;</font><font face="arial" size="3" color="rgb(51, 51, 51)">void&#160;</font><em style="letter-spacing: normal; font-size: 13px; font-family: arial; font-variant: normal; background-color: rgb(255, 255, 255); font-style: normal; font-weight: normal; color: rgb(204, 0, 0); text-transform: none; text-indent: 0px; text-align: start; line-height: 20px; word-spacing: 0px; white-space: normal"><font face="arial" size="3" color="rgb(204, 0, 0)">downgrade_write</font></em><font face="arial" size="3" color="rgb(51, 51, 51)">(struct rw_semaphore *sem) </font>
    </p>
    <p>
      <font face="arial" size="3" color="rgb(51, 51, 51)">//&#23427;&#23558;&#19968;&#20010;&#20889;&#20449;&#21495;&#37327;&#38477;&#26684;&#20026;&#35835;&#20449;&#21495;&#37327;,&#24182;&#21796;&#37266;&#31561;&#24453;&#38431;&#21015;&#19978;&#30340;&#35835;&#20219;&#21153;&#12290;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1446902303210" ID="ID_1974197607" MODIFIED="1446902404301">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#31181;&#36890;&#29992;&#30340;&#20869;&#26680;&#32534;&#31243;&#27169;&#22411;&#22914;&#19979;&#25152;&#31034;&#65306;
    </p>
    <p>
      <font color="#006666">struct semaphore sem; </font>
    </p>
    <p>
      <font color="#006666">init_MUTEX_LOCKED(&amp;sem); </font>
    </p>
    <p>
      <font color="#006666">start_external_task(&amp;sem); </font>
    </p>
    <p>
      <font color="#006666">down(&amp;sem);</font>
    </p>
    <p>
      &#29992;&#25143;&#21487;&#20197;&#22312;start_external_task&#24403;&#20013;&#26032;&#24314;&#21478;&#19968;&#20010;&#32447;&#31243;&#65292;&#25191;&#34892;&#20854;&#20182;&#20219;&#21153;&#65292;
    </p>
    <p>
      &#24403;&#20219;&#21153;&#25191;&#34892;&#23436;&#25104;&#36807;&#21518;&#25191;&#34892;up&#25805;&#20316;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#cc0033" CREATED="1454674211713" FOLDED="true" ID="ID_501267520" MODIFIED="1486555641330" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20845;&#31456;&#65306;&#39640;&#32423;&#23383;&#31526;&#39537;&#21160;&#25805;&#20316;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1455007337777" ID="ID_1410005813" MODIFIED="1486555598088" TEXT="ioctl&#x64cd;&#x4f5c;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1455007365274" ID="ID_1680057345" MODIFIED="1455007547687">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#31354;&#38388;&#30340;ioctl&#22768;&#26126;&#65306;int ioctl(int fd, unsigned long cmd, ...)
    </p>
    <p>
      &#20869;&#26680;&#31354;&#38388;&#30340;ioctl&#22768;&#26126;&#65306;int (*ioctl)(struct inode *inode, struct file *filp,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int cmd, unsigned long arg);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455104682941" FOLDED="true" ID="ID_58343841" MODIFIED="1486555599161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31995;&#32479;&#33258;&#23450;&#20041;&#30340;ioctl&#21629;&#20196;&#65306;
    </p>
    <p>
      &#26377;&#19968;&#20123;ioctl&#21629;&#20196;&#26159;&#30001;&#20869;&#26680;&#37325;&#26032;&#32452;&#32455;&#30340;&#65292;&#36825;&#20123;&#21629;&#20196;&#26159;&#20808;&#20110;&#20320;&#33258;&#24049;&#23450;&#20041;&#30340;&#25991;&#20214;&#25805;&#20316;
    </p>
    <p>
      &#36215;&#20316;&#29992;&#20043;&#21069;&#34987;&#35299;&#26512;&#30340;&#12290;&#25152;&#20197;&#65292;&#22914;&#26524;&#20320;&#33258;&#24049;&#23450;&#20041;&#30340;&#25511;&#21046;&#21629;&#20196;&#21644;&#31995;&#32479;&#23450;&#20041;&#30340;&#25511;&#21046;
    </p>
    <p>
      &#21629;&#20196;&#24688;&#22909;&#30456;&#21516;&#65292;&#37027;&#20040;&#20320;&#19981;&#20250;&#30475;&#21040;&#20219;&#20309;&#36319;&#35813;&#21629;&#20196;&#30456;&#20851;&#30340;&#35831;&#27714;&#12290;
    </p>
    <p>
      &#36825;&#20123;&#39044;&#23450;&#20041;&#30340;&#21629;&#20196;&#34987;&#20998;&#20026;&#19977;&#32452;&#65306;
    </p>
    <p>
      1.&#21487;&#20197;&#20316;&#29992;&#22312;&#20219;&#20309;&#25991;&#20214;&#31867;&#22411;&#19978;&#30340;&#21629;&#20196;(&#26222;&#36890;&#25991;&#20214;&#65292;&#35774;&#22791;&#25991;&#20214;&#65292;fifo&#25991;&#20214;&#65292;socket&#25991;&#20214;)
    </p>
    <p>
      2.&#20316;&#29992;&#22312;&#26222;&#36890;&#25991;&#20214;&#19978;&#30340;&#21629;&#20196;
    </p>
    <p>
      3.&#36319;&#29305;&#23450;&#30340;&#25991;&#20214;&#31995;&#32479;&#30456;&#20851;&#30340;&#21629;&#20196;
    </p>
    <p>
      &#19968;&#33324;&#35774;&#22791;&#39537;&#21160;&#30340;&#20316;&#32773;&#21482;&#26159;&#20851;&#24515;&#31532;&#19968;&#31867;&#30340;&#21629;&#20196;&#65292;&#36825;&#20123;&#21629;&#20196;&#30340;magic number&#26159;'T'
    </p>
  </body>
</html></richcontent>
<node CREATED="1455105330321" ID="ID_388191817" MODIFIED="1455105439907">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FIOCLEX&#21629;&#20196;&#65306;
    </p>
    <p>
      &#36825;&#20010;&#21629;&#20196;&#20250;&#23548;&#33268;&#35843;&#29992;&#36827;&#31243;&#22312;&#25191;&#34892;&#26032;&#30340;&#31243;&#24207;&#20043;&#21069;&#65292;
    </p>
    <p>
      &#20851;&#38381;&#30456;&#20851;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455105444383" ID="ID_1365497370" MODIFIED="1455105502239">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FIONCLEX&#21629;&#20196;&#65306;
    </p>
    <p>
      &#35813;&#21629;&#20196;&#30340;&#20316;&#29992;&#23601;&#26159;&#25764;&#38144;FIOCLEX&#21629;&#20196;&#30340;&#25928;&#26524;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455105532694" ID="ID_1197160967" MODIFIED="1455105676209">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FIOASYNC&#21629;&#20196;&#65306;
    </p>
    <p>
      &#35813;&#21629;&#20196;&#30340;&#20316;&#29992;&#23601;&#26159;&#35774;&#32622;&#25110;&#32773;&#37325;&#32622;&#25991;&#20214;&#30340;&#24322;&#27493;&#36890;&#30693;&#26426;&#21046;
    </p>
    <p>
      &#36825;&#20010;&#21629;&#20196;&#23454;&#38469;&#19978;&#21487;&#20197;&#30001;fcntl&#20989;&#25968;&#26469;&#23436;&#25104;&#65292;&#25152;&#20197;&#27809;&#26377;&#20154;
    </p>
    <p>
      &#30495;&#27491;&#29992;&#21040;&#23427;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455105680294" ID="ID_1467679077" MODIFIED="1455105828543">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FIOQSIZE&#21629;&#20196;&#65306;
    </p>
    <p>
      &#35813;&#21629;&#20196;&#30340;&#20316;&#29992;&#26159;&#36820;&#22238;&#25991;&#20214;&#25110;&#32773;&#26159;&#30446;&#24405;&#30340;&#22823;&#23567;&#20449;&#24687;
    </p>
    <p>
      &#24403;&#35813;&#21629;&#20196;&#20316;&#29992;&#20110;&#35774;&#22791;&#30340;&#26102;&#20505;&#65292;&#20250;&#20135;&#29983;ENOTTY&#38169;&#35823;&#20449;&#24687;&#36820;&#22238;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455105840594" ID="ID_1782143875" MODIFIED="1455105958023">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      FIONBIO&#21629;&#20196;&#65306;
    </p>
    <p>
      &#35813;&#21629;&#20196;&#20250;&#36890;&#36807;ioctl&#30340;&#31532;&#19977;&#20010;&#21442;&#25968;&#26469;&#35828;&#26126;&#26159;&#35774;&#32622;&#36824;&#26159;
    </p>
    <p>
      &#28165;&#38500;&#25991;&#20214;&#30340;O_NONBLOCK&#26631;&#24535;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455106082671" ID="ID_1276403747" MODIFIED="1455106248859">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;ioctl&#30340;&#21442;&#25968;&#65306;
    </p>
    <p>
      &#22914;&#26524;ioctl&#20256;&#20837;&#30340;&#21442;&#25968;&#26159;&#25351;&#38024;&#65292;&#37027;&#20040;&#25105;&#20204;&#38656;&#35201;&#23567;&#24515;&#22320;&#23545;&#24453;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455108600687" ID="ID_769253357" MODIFIED="1486555598112">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19981;&#20351;&#29992;ioctl&#30340;&#35774;&#22791;&#25511;&#21046;&#26041;&#27861;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1455108695974" ID="ID_1829786894" MODIFIED="1455109975706">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26377;&#26102;&#20505;&#36890;&#36807;&#21521;&#35774;&#22791;&#20889;&#20837;&#25511;&#21046;&#24207;&#21015;&#21487;&#20197;&#26356;&#22909;&#22320;
    </p>
    <p>
      &#23436;&#25104;&#35774;&#22791;&#30340;&#25511;&#21046;&#25805;&#20316;&#12290;&#24403;&#20351;&#29992;&#36825;&#31181;&#26041;&#27861;&#25511;&#21046;&#35774;&#22791;&#30340;&#26102;&#20505;&#65292;
    </p>
    <p>
      &#25511;&#21046;&#31243;&#24207;&#21644;&#34987;&#25511;&#21046;&#30340;&#35774;&#22791;&#29978;&#33267;&#21487;&#20197;&#19981;&#29992;&#36816;&#34892;&#22312;&#21516;&#19968;&#20010;&#25805;&#20316;
    </p>
    <p>
      &#31995;&#32479;&#24403;&#20013;&#12290;&#20294;&#26159;&#36825;&#31181;&#25511;&#21046;&#26041;&#24335;&#30340;&#32570;&#28857;&#23601;&#26159;&#23427;&#20250;&#21521;&#35774;&#22791;&#28155;&#21152;
    </p>
    <p>
      &#31574;&#30053;&#19978;&#30340;&#38480;&#21046;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455110094270" ID="ID_1177604738" MODIFIED="1455110131502" TEXT="&#x901a;&#x8fc7;&#x5199;&#x7684;&#x65b9;&#x5f0f;&#x63a7;&#x5236;&#x8bbe;&#x5907;&#x4f7f;&#x7528;&#x4e8e;&#x90a3;&#x4e9b;&#x4e0d;&#x4f20;&#x9001;&#x6570;&#x636e;&#x4f46;&#x662f;&#x54cd;&#x5e94;&#x547d;&#x4ee4;&#x7684;&#x8bbe;&#x5907;"/>
<node COLOR="#cc3300" CREATED="1455110370968" ID="ID_1852850546" MODIFIED="1455110494550">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26377;&#26102;&#20505;&#20320;&#21487;&#33021;&#26082;&#19981;&#36873;&#25321;&#20889;&#21629;&#20196;&#30340;&#26041;&#24335;&#20063;&#19981;&#36873;&#25321;Ioctl&#30340;&#26041;&#24335;
    </p>
    <p>
      &#32780;&#26159;&#36873;&#25321;&#36873;&#21462;&#19968;&#20010;&#21629;&#20196;&#34892;&#30340;&#24037;&#20855;&#23558;&#21629;&#20196;&#36865;&#21040;&#39537;&#21160;&#31243;&#24207;&#37324;&#38754;&#21435;
    </p>
    <p>
      &#36825;&#26159;&#19968;&#31181;&#36873;&#25321;&#23558;&#22797;&#26434;&#24615;&#20174;&#20869;&#26680;&#20256;&#36882;&#21040;&#29992;&#25143;&#31354;&#38388;&#30340;&#26041;&#27861;&#12290;
    </p>
  </body>
</html></richcontent>
<font ITALIC="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1455110508552" ID="ID_821094301" MODIFIED="1486555598135" TEXT="Blocking I/O">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1455110836184" FOLDED="true" ID="ID_228938913" MODIFIED="1486555599161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#ff3333" size="4">&#36827;&#31243;&#20241;&#30496;</font></i></b>
    </p>
    <p>
      &#24403;&#36827;&#31243;&#20241;&#30496;&#26102;&#65292;&#23427;&#20250;&#34987;&#26631;&#35760;&#25104;&#19968;&#31181;&#29305;&#27530;&#30340;&#29366;&#24577;&#65292;&#24182;&#19988;&#20250;&#34987;
    </p>
    <p>
      &#31227;&#38500;&#35843;&#24230;&#22120;&#30340;&#36816;&#34892;&#26102;&#38431;&#21015;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1455547846588" ID="ID_1733088782" MODIFIED="1455549531915">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ff3333"><i>&#36827;&#31243;&#20241;&#30496;&#26102;&#30340;&#32534;&#30721;&#27880;&#24847;&#20107;&#39033;</i></font>&#65306;
    </p>
    <p>
      1.&#20320;&#30340;&#20195;&#30721;&#19981;&#33021;&#22312;&#21407;&#23376;&#24615;&#30340;&#19978;&#19979;&#25991;&#24403;&#20013;&#36827;&#34892;&#20241;&#30496;&#65292;&#20063;&#23601;&#26159;&#35828;&#24403;&#36827;&#31243;
    </p>
    <p>
      &#25345;&#26377;spinlock,seqlock&#25110;&#32773;RCU lock&#30340;&#26102;&#20505;&#65292;&#39537;&#21160;&#19981;&#33021;&#20241;&#30496;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455549109686" FOLDED="true" ID="ID_1280948464" MODIFIED="1475896811624">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20320;&#24212;&#24403;&#24456;&#28165;&#26970;&#20160;&#20040;&#26679;&#30340;&#20107;&#20214;&#23548;&#33268;&#36827;&#31243;&#20241;&#30496;&#65292;&#20063;&#23601;&#26159;&#35828;&#24212;&#24403;&#23558;
    </p>
    <p>
      &#20241;&#30496;&#30340;&#36827;&#31243;&#25918;&#32622;&#22312;&#21738;&#20010;wait queue&#24403;&#20013;&#12290;
    </p>
    <p>
      &#22312;linux&#24403;&#20013;wait queue&#30001;&quot;wait queue head&quot;&#26469;&#36827;&#34892;&#31649;&#29702;&#65292;&#23427;&#30340;&#25968;&#25454;
    </p>
    <p>
      &#32467;&#26500;&#31867;&#22411;&#26159;wait_queue_head_t,&#23450;&#20041;&#22312;&lt;linux/wait.h&gt;&#24403;&#20013;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1455549316485" ID="ID_1332214976" MODIFIED="1455549420969">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#38745;&#24577;&#21021;&#22987;&#21270;wait queue:</b>
    </p>
    <p>
      <i>DECLARE_WAIT_QUEUE_HEAD(name)</i>
    </p>
    <p>
      <b>&#21160;&#24577;&#21021;&#22987;&#21270;wait queue:</b>
    </p>
    <p>
      <i>wait_queue_head_t my_queue </i>
    </p>
    <p>
      <i>init_waitqueue_head(&amp;my_queue)</i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455549656602" ID="ID_96256415" MODIFIED="1455550063582">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#cc0000"><b><i>&#36827;&#31243;&#20241;&#30496;&#30340;&#26041;&#27861;&#65306; </i></b></font>
    </p>
    <p>
      1.&#26368;&#31616;&#21333;&#30340;&#26041;&#27861;&#65292;&#20351;&#29992;wait_event
    </p>
    <p>
      wait_event(queue, condition)
    </p>
    <p>
      wait_event_interruptible(queue, condition)
    </p>
    <p>
      wait_event_timeout(queue, condition, timeout)
    </p>
    <p>
      wait_event_interruptible_timeout(queue, condition, timeout)
    </p>
    <p>
      &#20854;&#20013;&#30340;queue&#26159;wait queue head&#32467;&#26500;&#20307;&#65292;&#37319;&#29992;&#20540;&#20256;&#36882;&#30340;&#26041;&#24335;&#65292;condition&#26159;bool&#34920;&#36798;&#24335;&#20540;
    </p>
    <p>
      &#24403;condition&#20026;true&#30340;&#26102;&#20505;&#36827;&#31243;&#23601;&#19981;&#20877;&#30561;&#30496;&#20102;&#12290;&#27880;&#24847;wait_event&#26159;&#19981;&#21487;&#20013;&#26029;&#30340;&#20241;&#30496;&#26041;&#24335;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455693958735" FOLDED="true" ID="ID_1778348366" MODIFIED="1486555599161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#c90d0d" size="3">&#38459;&#22622;&#21644;&#38750;&#38459;&#22622;&#25805;&#20316;</font></i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1455694321379" ID="ID_1044872438" MODIFIED="1455695518041">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38459;&#22622;&#25805;&#20316;&#65306;
    </p>
    <p>
      &#36827;&#31243;&#35843;&#29992;read&#25805;&#20316;&#65292;&#24403;&#21069;&#27809;&#26377;&#25968;&#25454;&#65292;&#36827;&#31243;&#24517;&#39035;&#38459;&#22622;&#65294;
    </p>
    <p>
      &#24403;&#26377;&#25968;&#25454;&#26469;&#20020;&#30340;&#26102;&#20505;&#65292;&#26080;&#35770;&#26377;&#22810;&#23569;&#25968;&#25454;&#65292;&#24517;&#39035;&#21796;&#37266;&#35813;&#38459;&#22622;&#30340;&#36827;&#31243;
    </p>
    <p>
      &#36827;&#31243;&#35843;&#29992;write&#25805;&#20316;&#65292;&#20294;&#26159;&#24403;&#21069;buffer&#27809;&#26377;&#22810;&#20313;&#30340;&#31354;&#38388;&#65292;&#36827;&#31243;&#38459;&#22622;
    </p>
    <p>
      &#24403;buffer&#24403;&#20013;&#26377;&#21097;&#20313;&#31354;&#38388;&#30340;&#26102;&#20505;&#65292;&#38656;&#35201;&#31435;&#21363;&#21796;&#37266;&#20241;&#30496;&#30340;&#36827;&#31243;
    </p>
    <p>
      <i>&#39537;&#21160;&#21487;&#20197;&#36890;&#36807;&#23454;&#29616;&#38459;&#22622;&#25805;&#20316;&#26469;&#25903;&#25345;&#31867;&#20284;&#25991;&#20214;&#38145;&#19968;&#26679;&#30340;&#35775;&#38382;&#31574;&#30053;</i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455698408391" ID="ID_733138319" MODIFIED="1455698472247">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#a70b0b">&#19968;&#20010;&#38459;&#22622;&#24335;&#30340;&#36755;&#20837;&#36755;&#20986;&#30340;&#23454;&#20363;</font></i></b>&#65306;
    </p>
    <p>
      the call to copy_to_user. If scull sleeps while copying data
    </p>
    <p>
      between kernel and user space, it sleeps with the device semaphore held. Holding the
    </p>
    <p>
      semaphore in this case is justified since it does not deadlock the system
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455698550301" FOLDED="true" ID="ID_242657617" MODIFIED="1486555599161">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#bc0606">&#39640;&#32423;&#24335;&#30340;&#36827;&#31243;&#20241;&#30496;</font></i></b>&#65306;
    </p>
    <p>
      &#22312;&#26356;&#21152;&#22797;&#26434;&#30340;&#38145;&#26426;&#21046;&#21644;&#26497;&#39640;&#30340;&#24615;&#33021;&#35201;&#27714;&#30340;&#24773;&#20917;&#19979;&#65292;
    </p>
    <p>
      &#38656;&#35201;&#39537;&#21160;&#24320;&#21457;&#24037;&#31243;&#24072;&#36827;&#19968;&#27493;&#22320;&#20102;&#35299;&#36827;&#31243;&#20241;&#30496;&#30340;&#26356;&#21152;
    </p>
    <p>
      &#24213;&#23618;&#30340;&#30693;&#35782;&#65294;
    </p>
    <p>
      wait_queue_t&#30495;&#27491;&#20195;&#34920;&#20102;&#19968;&#20010;&#36827;&#31243;&#20241;&#30496;&#30340;&#20449;&#24687;&#20197;&#21450;&#23427;
    </p>
    <p>
      &#22914;&#20309;&#34987;&#21796;&#37266;&#65294;
    </p>
  </body>
</html></richcontent>
<node CREATED="1455699219712" ID="ID_1923134572" MODIFIED="1455702155509">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36827;&#31243;&#20241;&#30496;&#30340;&#27493;&#39588;&#65306;
    </p>
    <p>
      1.&#20998;&#37197;&#21644;&#21021;&#22987;&#21270;wait_queue_t&#32467;&#26500;&#20307;
    </p>
    <p>
      2.&#23558;&#23427;&#28155;&#21152;&#36827;&#20837;&#21512;&#36866;&#30340;&#31561;&#24453;&#38431;&#21015;&#24403;&#20013;
    </p>
    <p>
      3.&#35774;&#32622;&#36827;&#31243;&#30340;&#29366;&#24577;&#23558;&#20854;&#26631;&#35782;&#20026;&#20241;&#30496;&#29366;&#24577;
    </p>
    <p>
      <font size="3">TASK_INTERRUPTIBLE,TASK_UNINTERRUPTIBLE</font>
    </p>
    <p>
      linux/sched.h
    </p>
    <p>
      &#24314;&#35758;&#20351;&#29992;&#30340;&#20989;&#25968;&#26159;void set_current_state(int new_state)
    </p>
    <p>
      4.&#25918;&#24323;&#23545;&#22788;&#29702;&#22120;&#30340;&#21344;&#26377;
    </p>
    <p>
      if (!condition)
    </p>
    <p>
      schedule( );
    </p>
    <p>
      &#22312;&#36816;&#34892;schedule&#20043;&#21069;&#65292;&#24517;&#39035;&#26816;&#26597;&#21796;&#37266;&#26465;&#20214;&#65292;&#20197;&#38450;&#24050;&#32463;&#26377;&#20154;&#21796;&#37266;&#20102;&#25105;&#20204;&#65294;
    </p>
    <p>
      &#22914;&#26524;&#25105;&#20204;&#36339;&#36807;&#20102;schedule()&#20989;&#25968;&#65292;&#24517;&#39035;&#20570;&#21518;&#26399;&#30340;&#28165;&#29702;&#24037;&#20316;&#65306;
    </p>
    <p>
      &#23558;&#36827;&#31243;&#29366;&#24577;&#37325;&#26032;&#35774;&#32622;&#20026;TASK_RUNNING
    </p>
    <p>
      &#23558;&#36827;&#31243;&#20174;&#31561;&#24453;&#38431;&#21015;&#24403;&#20013;&#31227;&#38500;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455702559748" ID="ID_1154542942" MODIFIED="1455704698727">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20855;&#20307;&#30340;&#20195;&#30721;&#20070;&#20889;&#27969;&#31243;&#65306;
    </p>
    <p>
      1. wait_queue_t my_wait;
    </p>
    <p>
      &#160;&#160;&#160;&#160;init_wait(&amp;my_wait);
    </p>
    <p>
      2. void prepare_to_wait(wait_queue_head_t *queue,
    </p>
    <p>
      &#160;&#160;&#160;&#160;wait_queue_t *wait, int state); state&#26631;&#24535;&#36827;&#31243;&#30340;&#26032;&#29366;&#24577;
    </p>
    <p>
      3. if(!condition) schedule();
    </p>
    <p>
      4. &#24403;schedule()&#36820;&#22238;&#20043;&#21518;&#25191;&#34892;&#28165;&#29702;&#24037;&#20316;:
    </p>
    <p>
      &#160;&#160;&#160;&#160;void finish_wait(wait_queue_head_t *queue, wait_queue_t *wait)
    </p>
    <p>
      5. &#26816;&#26597;&#24403;&#21069;&#30340;&#21796;&#37266;&#26159;&#19981;&#26159;&#30001;&#20449;&#21495;&#30340;&#36882;&#36865;&#32780;&#23548;&#33268;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455705150046" FOLDED="true" ID="ID_949863613" MODIFIED="1486555599162">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#b61010">&#25490;&#20182;&#24615;&#22320;&#31561;&#24453;&#65306; </font></i></b>
    </p>
    <p>
      &#24403;&#35843;&#29992;wake_up&#26102;&#65292;&#20241;&#30496;&#22312;&#30456;&#21516;&#30340;&#38431;&#21015;&#19978;&#30340;&#25152;&#26377;&#36827;&#31243;&#37117;&#20250;&#34987;&#21796;&#37266;&#65292;
    </p>
    <p>
      &#36825;&#23601;&#26159;&#65282;&#24778;&#32676;&#25928;&#24212;&#65282;&#65294;&#22914;&#26524;&#36825;&#20123;&#36827;&#31243;&#20105;&#22842;&#30340;&#26159;&#30456;&#21516;&#30340;&#36164;&#28304;&#65292;&#37027;&#20040;
    </p>
    <p>
      &#37027;&#20123;&#26368;&#32456;&#27809;&#26377;&#20105;&#22842;&#21040;&#36164;&#28304;&#30340;&#36827;&#31243;&#21448;&#20250;&#37325;&#26032;&#36827;&#20837;&#20241;&#30496;&#29366;&#24577;&#65292;&#36825;&#26080;&#30097;&#26159;
    </p>
    <p>
      &#24040;&#22823;&#30340;&#24615;&#33021;&#25439;&#22833;&#65294;
    </p>
  </body>
</html></richcontent>
<node CREATED="1455705618637" ID="ID_96460562" MODIFIED="1455706624392">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20869;&#26680;&#24403;&#20013;&#35299;&#20915;&#24778;&#32676;&#25928;&#24212;&#30340;&#26041;&#27861;&#65306;exclusive wait
    </p>
    <p>
      &#35813;wait&#26041;&#27861;&#30340;&#65298;&#20010;&#37325;&#35201;&#29305;&#24449;
    </p>
    <p>
      1.&#24403;&#31561;&#24453;&#39033;&#34987;&#35774;&#32622;WQ_FLAG_EXCLUSIVE&#26631;&#24535;&#30340;&#26102;&#20505;&#65292;
    </p>
    <p>
      &#160;&#160;&#160;&#35813;&#36827;&#31243;&#20250;&#34987;&#28155;&#21152;&#21040;&#31561;&#24453;&#38431;&#21015;&#30340;&#26368;&#23614;&#37096;&#32780;&#19981;&#26159;&#39318;&#37096;
    </p>
    <p>
      2. &#24403;wake_up&#34987;&#35843;&#29992;&#20043;&#21518;&#65292;&#24403;&#20855;&#26377;WQ_FLAG_EXCLUSIVE&#26631;&#24535;
    </p>
    <p>
      &#12288;&#30340;&#36827;&#31243;&#34987;&#21796;&#37266;&#20043;&#21518;&#65292;&#23601;&#19981;&#20877;&#21796;&#37266;&#35813;&#38431;&#21015;&#37324;&#38754;&#30340;&#20854;&#20182;&#36827;&#31243;&#20102;&#65294;
    </p>
    <p>
      &#34920;&#29616;&#20986;&#25490;&#20182;&#24615;&#31561;&#24453;&#30340;&#36827;&#31243;&#27599;&#27425;&#21482;&#34987;&#21796;&#37266;&#19968;&#20010;&#65292;&#24182;&#19988;&#26159;&#39034;&#24207;&#21796;&#37266;&#30340;&#65292;&#20854;&#20182;
    </p>
    <p>
      &#27809;&#26377;&#35774;&#32622;&#26631;&#24535;&#30340;&#36827;&#31243;&#20173;&#28982;&#20250;&#34920;&#29616;&#20986;&#24778;&#32676;&#25928;&#24212;&#30340;&#65294;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455707141289" ID="ID_792122754" MODIFIED="1455707169884">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>void prepare_to_wait_exclusive(wait_queue_head_t *queue, </i></b>
    </p>
    <p>
      <b><i>&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;wait_queue_t *wait, </i></b>
    </p>
    <p>
      <b><i>&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;&#12288;int state);</i></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455719423483" ID="ID_442864440" MODIFIED="1455720007511">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#cc0000"><b><i>&#21796;&#37266;&#25805;&#20316;&#30340;&#32454;&#33410;&#65306; </i></b></font>
    </p>
    <p>
      &#24403;&#36827;&#31243;&#34987;&#21796;&#37266;&#20043;&#21518;&#65292;&#30495;&#27491;&#30340;&#25805;&#20316;&#26159;&#30001;&#31561;&#24453;&#38431;&#21015;&#20837;&#21475;&#37324;&#38754;&#30340;&#20989;&#25968;&#23436;&#25104;&#30340;&#65292;
    </p>
    <p>
      &#40664;&#35748;&#30340;&#21796;&#37266;&#20989;&#25968;&#20250;&#23558;&#24403;&#21069;&#36827;&#31243;&#30340;&#29366;&#24577;&#35774;&#32622;&#25104;&#21487;&#36816;&#34892;&#29366;&#24577;&#24182;&#19988;&#22914;&#26524;&#35813;&#36827;&#31243;
    </p>
    <p>
      &#30340;&#20248;&#20808;&#32423;&#36275;&#22815;&#39640;&#30340;&#35805;&#65292;&#20250;&#23558;&#19978;&#19979;&#25991;&#20999;&#25442;&#21040;&#35813;&#36827;&#31243;&#37324;&#38754;&#12290;
    </p>
    <p>
      <b>&lt;linux/wait.h&gt;&#37324;&#38754;&#21487;&#20197;&#26597;&#38405;&#21040;&#22914;&#20309;&#35774;&#32622;&#33258;&#24049;&#30340;&#21796;&#37266;&#20989;&#25968;</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455792011548" FOLDED="true" ID="ID_1740019152" MODIFIED="1486555599162">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Poll&#21644;Select</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1455792136092" FOLDED="true" ID="ID_91233728" MODIFIED="1475896811626">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;&#38750;&#38459;&#22622;&#24335;&#36755;&#20837;&#36755;&#20986;&#30340;&#31995;&#32479;&#35843;&#29992;&#32463;&#24120;&#20250;&#20351;&#29992;
    </p>
    <p>
      poll,select&#21644;epoll&#31995;&#32479;&#35843;&#29992;
    </p>
    <p>
      &#25903;&#25345;&#19978;&#38754;&#30340;&#31995;&#32479;&#35843;&#29992;&#38656;&#35201;&#39537;&#21160;&#23618;&#38754;&#25903;&#25345;&#65292;&#23454;&#29616;&#22914;&#19979;&#20989;&#25968;
    </p>
    <p>
      unsigned int (*poll) (struct file *filp, poll_table *wait)
    </p>
    <p>
      &#35813;&#20989;&#25968;&#20027;&#35201;&#22320;&#20250;&#23454;&#29616;2&#27493;&#25805;&#20316;
    </p>
  </body>
</html></richcontent>
<node CREATED="1455853485428" ID="ID_410551377" MODIFIED="1455853802029">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30456;&#20851;&#30340;&#25968;&#25454;&#32467;&#26500;:
    </p>
    <p>
      1.&#27599;&#20010;poll&#31995;&#32479;&#35843;&#29992;&#37117;&#23545;&#24212;&#19968;&#20010;&#24635;&#30340;&#25968;&#25454;&#32467;&#26500;poll_wqueues
    </p>
    <p>
      &#160;&#160; <i>struct poll_wqueues{ </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;poll_table pt; </i>
    </p>
    <p>
      <i>&#12288;&#12288;struct poll_table_page * table; </i>
    </p>
    <p>
      <i>&#12288;&#12288;int error; </i>
    </p>
    <p>
      <i>&#160;&#160;};&#23545;&#22806;&#30340;&#25509;&#21475;&#26159;poll_table pt </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>typedef struct poll_table_struct { </i>
    </p>
    <p>
      <i>&#12288;&#12288;poll_queue_proc qproc; </i>
    </p>
    <p>
      <i>}poll_table </i>
    </p>
    <p>
      <i>typedef void (*poll_queue_proc)(struct file *, wait_queue_head_t *, struct poll_table_struct *) </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>struct poll_table_page { </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;struct poll_table_page * next; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;struct poll_table_entry * entry; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;struct poll_table_entry entries[0]; //&#25351;&#21521;&#32467;&#26500;&#20307;&#30340;&#19979;&#19968;&#20010;&#22320;&#22336;&#65292;&#19981;&#21344;&#31354;&#38388;&#12290; </i>
    </p>
    <p>
      <i>}; </i>
    </p>
    <p>
      <i>struct poll_table_entry { </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;struct file * filp; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;wait_queue_t wait; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;wait_queue_head_t * wait_address; </i>
    </p>
    <p>
      <i>}; poll_table_page&#26159;&#19968;&#20010;&#38142;&#34920;&#65292;&#37324;&#38754;&#23384;&#26377;&#20851;&#20110;&#24403;&#21069;&#20241;&#30496;&#36827;&#31243;&#30340;&#20449;&#24687;&#21644;&#20241;&#30496;&#30340;&#38431;&#21015;&#20449;&#24687;</i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455854308100" ID="ID_400585129" MODIFIED="1455859763923">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      poll&#31995;&#32479;&#35843;&#29992;&#30340;&#35843;&#29992;&#27969;&#31243;&#65306;int poll(struct pollfd *fds,nfds_t nfds, int timeout)
    </p>
    <p>
      1.&#39318;&#20808;&#35843;&#29992;sys_poll&#35813;&#20989;&#25968;&#26159;&#23558;timeout&#36716;&#25442;&#25104;&#31995;&#32479;&#30340;jiffes
    </p>
    <p>
      2.&#20854;&#27425;&#35843;&#29992;do_sys_poll&#65292;&#35813;&#20989;&#25968;&#30340;&#20316;&#29992;&#26159;&#21021;&#22987;&#21270;poll_wqueues-&gt;pt-&gt;qproc
    </p>
    <p>
      3.&#26368;&#21518;&#35843;&#29992;do_poll&#20989;&#25968;&#65292;do_poll&#20989;&#25968;&#20250;&#23545;pollfd&#25968;&#32452;&#37324;&#38754;&#30340;&#27599;&#20010;fd&#35843;&#29992;do_pollfd&#20989;&#25968;
    </p>
    <p>
      4. unsigned int do_pollfd(struct pollfd *pollfd, poll_table *pwait)&#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#26368;&#32456;&#20250;
    </p>
    <p>
      &#35843;&#29992;&#39537;&#21160;&#31243;&#24207;&#37324;&#38754;&#30340;poll&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455859769818" ID="ID_1188225354" MODIFIED="1455859975046">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#39537;&#21160;&#37324;&#38754;&#30340;poll&#20989;&#25968;&#30340;&#23454;&#29616;: </b></i>
    </p>
    <p>
      <i><b>scull_p_poll(struct file *filp, poll_table *wait) </b></i>
    </p>
    <p>
      poll&#20989;&#25968;&#37324;&#38754;&#38656;&#35201;&#35843;&#29992;poll_wait&#20989;&#25968;&#65292;poll_wait&#20989;&#25968;&#20250;&#35843;&#29992;&#21040;
    </p>
    <p>
      poll_table-&gt;qproc&#20989;&#25968;&#65292;&#30446;&#30340;&#26159;&#20026;&#20102;&#23558;&#24403;&#21069;&#36827;&#31243;&#21152;&#20837;&#21040;&#26576;&#20010;&#38431;&#21015;&#24403;&#20013;&#65292;
    </p>
    <p>
      &#22240;&#20026;&#36827;&#31243;&#22914;&#26524;&#35201;&#36827;&#34892;&#20241;&#30496;&#30340;&#35805;&#24517;&#39035;&#21152;&#20837;&#26576;&#20010;&#31561;&#24453;&#30340;&#38431;&#21015;&#37324;&#38754;&#25165;&#21487;&#20197;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455862683669" ID="ID_1883111812" MODIFIED="1455863728073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20351;&#29992;poll&#21644;select&#30340;&#30446;&#30340;&#26159;&#25552;&#21069;&#30693;&#26195;I/O&#25805;&#20316;&#26159;&#21542;&#20250;&#38459;&#22622;
    </p>
    <p>
      &#32780;&#19988;&#21487;&#20197;&#21516;&#26102;&#30417;&#35270;&#22810;&#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#30340;&#29366;&#24577;&#65292;&#27491;&#30830;&#22320;&#20351;&#29992;
    </p>
    <p>
      &#36825;&#20123;&#31995;&#32479;&#35843;&#29992;&#21487;&#20197;&#20445;&#35777;&#24212;&#29992;&#31243;&#24207;&#27491;&#30830;&#22320;&#24037;&#20316;&#65294;
    </p>
    <p>
      <b>&#19979;&#38754;&#24635;&#32467;&#19968;&#20123;&#20351;&#29992;&#35268;&#21017;&#65306;</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455864373599" ID="ID_1306814719" MODIFIED="1455864393715">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#24213;&#23618;&#30340;&#25968;&#25454;&#32467;&#26500;:</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1455865796200" FOLDED="true" ID="ID_415466477" MODIFIED="1486555599162">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#24322;&#27493;&#36890;&#30693;: </b>
    </p>
    <p>
      &#36890;&#36807;&#20351;&#33021;&#24322;&#27493;&#36890;&#30693;&#65292;&#36827;&#31243;&#21487;&#20197;&#22312;&#35774;&#22791;&#26377;&#25968;&#25454;&#30340;&#26102;&#20505;
    </p>
    <p>
      &#33719;&#24471;&#20449;&#21495;&#36890;&#30693;&#65294;
    </p>
  </body>
</html></richcontent>
<node CREATED="1455868349794" ID="ID_1835765968" MODIFIED="1455868949577">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#29992;&#25143;&#31243;&#24207;&#38656;&#35201;&#25191;&#34892;&#65298;&#20010;&#27493;&#39588;&#26469;&#20351;&#33021;&#26469;&#33258;&#36755;&#20837;&#25991;&#20214;&#30340;&#24322;&#27493;&#36890;&#30693;:
    </p>
    <p>
      1.&#25351;&#23450;&#25317;&#26377;&#35813;&#25991;&#20214;&#30340;&#36827;&#31243;ID&#21495;&#65294;&#36890;&#36807;fcntl&#35774;&#32622;F_SETOWN
    </p>
    <p>
      &#160;&#160;&#160;&#26469;&#23558;&#36827;&#31243;&#30340;ID&#21495;&#20445;&#30041;&#22312;filp-&gt;f_owner&#24403;&#20013;&#20379;&#21518;&#38754;&#20351;&#29992;
    </p>
    <p>
      2.&#36890;&#36807;fcntl&#20989;&#25968;&#30340;F_SETFL&#21629;&#20196;&#23558;FASYNC&#26631;&#24535;&#20301;&#35774;&#32622;&#21040;&#35774;&#22791;&#24403;&#20013;
    </p>
    <p>
      &#160;&#160;&#160;&#29992;&#20110;&#20351;&#33021;&#35774;&#22791;&#30340;&#24322;&#27493;&#36890;&#30693;&#30340;&#21151;&#33021;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1455762629108" FOLDED="true" ID="ID_1460639053" MODIFIED="1491198093723" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#a70606"><i>&#29305;&#21035;&#31456;&#33410;:&#20851;&#20110;&#20195;&#30721;&#30340;&#32534;&#35793;</i></font></b>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="16"/>
<node CREATED="1455763244152" FOLDED="true" ID="ID_1570856145" MODIFIED="1491198080251">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#38169;&#35823;macro &quot;INIT_WORK&quot; passed 3 arguments, but takes just 2&#35299;&#20915;:</b>
    </p>
    <p>
      &#25512;&#21518;&#25191;&#34892;&#30340;&#20219;&#21153;&#21483;&#20570;&#24037;&#20316;&#65292;&#25551;&#36848;&#30340;&#25968;&#25454;&#32467;&#26500;&#26159; work_struct
    </p>
    <p>
      &#24037;&#20316;&#32452;&#32455;&#25104;&#24037;&#20316;&#38431;&#21015;&#65292;&#25551;&#36848;&#30340;&#25968;&#25454;&#32467;&#26500;&#26159; workqueue_struct
    </p>
    <p>
      &#24037;&#20316;&#32447;&#31243;&#36127;&#36131;&#25191;&#34892;&#24037;&#20316;&#38431;&#21015;&#37324;&#38754;&#30340;&#20219;&#21153;&#65292;&#40664;&#35748;&#30340;&#32447;&#31243;&#26159; events
    </p>
    <p>
      
    </p>
    <p>
      1.create_workqueue()&#20989;&#25968;&#21019;&#24314;&#19968;&#20010;workqueue_struct,&#27599;&#20010;workqueue_struct
    </p>
    <p>
      &#20869;&#37096;&#37117;&#26377;struct cpu_workqueue_struct&#25968;&#32452;&#25351;&#38024;&#65292;&#21363;&#27599;&#20010;cpu&#23545;&#24212;&#19968;&#20010;
    </p>
    <p>
      cpu_workqueue_struct,&#24403;&#21069;&#30340;&#24037;&#20316;&#38431;&#21015;&#20250;&#38024;&#23545;&#27599;&#20010;cpu&#24314;&#31435;&#19968;&#20010;&#24037;&#20316;&#32447;&#31243;
    </p>
    <p>
      
    </p>
    <p>
      2.&#24037;&#20316;&#30340;&#21021;&#22987;&#21270;
    </p>
    <p>
      INIT_WORK(struct work_struct *work, void (*function)(struct work_struct *))
    </p>
    <p>
      INIT_DELAYED_WORK(struct delayed_work *work, void (*function)(struct work_struct *))
    </p>
    <p>
      &#21363;&#23558;&#24037;&#20316;&#23545;&#24212;&#30340;&#25191;&#34892;&#20989;&#25968;&#36171;&#20540;&#21040;work_struct&#24403;&#20013;
    </p>
    <p>
      
    </p>
    <p>
      3.&#24037;&#20316;&#38431;&#21015;&#30340;&#35843;&#24230;&#25191;&#34892;
    </p>
    <p>
      schedule_work(&amp;work)
    </p>
    <p>
      schedule_delayed_work(&amp;delay_work,delay)
    </p>
  </body>
</html></richcontent>
<node CREATED="1455775617806" ID="ID_875389956" MODIFIED="1455775873882">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35299;&#20915;&#26041;&#27861;:
    </p>
    <p>
      1.&#23558;struct async_work&#20013;&#30340;&#25104;&#21592;struct work_struct work
    </p>
    <p>
      &#12288;&#20462;&#25913;&#25104;struct delayed_work delayed_work
    </p>
    <p>
      2.&#23558;INIT_WORK(&amp;stuff-&gt;work, scull_do_deferred_op, stuff)
    </p>
    <p>
      &#12288;&#20462;&#25913;&#25104;INIT_DELAYED_WORK(&amp;stuff-&gt;delayed_work, scullc_do_deferred_op)
    </p>
    <p>
      &#12288;&#22240;&#20026;&#26032;&#30340;INIT&#20989;&#25968;&#21482;&#38656;&#35201;2&#20010;&#21442;&#25968;&#20102;
    </p>
    <p>
      3.scullp_do_deferred_op&#36825;&#20010;&#20989;&#25968;&#38656;&#35201;&#36827;&#34892;&#20462;&#25913;
    </p>
    <p>
      &#12288;<font color="#df0808"><i>struct async_work *stuff = </i></font>
    </p>
    <p>
      <font color="#df0808"><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;container_of(p, struct async_work, delayed_work.work)</i></font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1455775946822" ID="ID_1114006347" MODIFIED="1455776063685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>error: unknown field &#8216;ioctl&#8217; specified in initializer&#35299;&#20915;&#26041;&#27861; </b>
    </p>
    <p>
      &#20174;2.6&#26576;&#20010;&#29256;&#26412;&#30340;&#20869;&#26680;&#24320;&#22987;&#65292;filep&#32467;&#26500;&#20307;&#37324;&#38754;&#24050;&#32463;&#27809;&#26377;&#20102;ioctl&#25104;&#21592;&#20102;
    </p>
    <p>
      &#25913;&#29992;unlock_ioctl&#20989;&#25968;&#20102;&#65292;&#26087;&#30340;ioctl&#20989;&#25968;&#20351;&#29992;&#20102;&#22823;&#20869;&#26680;&#38145;&#65292;&#24433;&#21709;&#24615;&#33021;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455776502433" ID="ID_1112717450" MODIFIED="1455777128245">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      aio_read&#20989;&#25968;&#21644;aio_write&#20989;&#25968;&#22312;&#26032;&#29256;&#20869;&#26680;&#37324;&#38754;&#30340;&#22768;&#26126;&#26377;&#21464;&#21270;&#38656;&#35201;&#20462;&#25913;&#65306;
    </p>
    <p>
      1.scullp_aio_read(struct kiocb *iocb, char __user *buf,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;size_t count,loff_t pos)
    </p>
    <p>
      &#20462;&#25913;&#20026;
    </p>
    <p>
      (*aio_read) (struct kiocb *iocb, const struct iovec *iov,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned long niov, loff_t pos);
    </p>
    <p>
      aio_write&#20063;&#20250;&#20570;&#21516;&#26679;&#30340;&#20462;&#25913;
    </p>
    <p>
      
    </p>
    <p>
      2.&#23558;scullp_defer_op(int write, struct kiocb *iocb, char __user *buf,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;size_t count, loff_t pos)&#30340;&#22768;&#26126;&#20462;&#25913;&#20026;
    </p>
    <p>
      &#160;&#160;&#160;scullc_defer_op(int write, struct kiocb *iocb, const struct iovec *iov,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned long niov, loff_t pos)
    </p>
    <p>
      
    </p>
    <p>
      3.&#20462;&#25913;scullp_defer_op&#30340;&#20869;&#37096;
    </p>
    <p>
      scullp_write(iocb-&gt;ki_filp, (char *)(iov-&gt;iov_base), iov-&gt;iov_len, &amp;pos);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1455783787352" ID="ID_1921505971" MODIFIED="1455783807088">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22312;&#32467;&#26500;scull_vm_ops&#21021;&#22987;&#21270;&#26102;&#65306;
    </p>
    <p>
      &#21435;&#25481;.nopage = scullv_vma_nopage;
    </p>
    <p>
      &#20462;&#25913;&#20026;.fault = scullv_vma_fault
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457940670562" ID="ID_32425074" MODIFIED="1504766912517" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#c20c0c"><b>&#31532;&#21313;&#22235;&#31456;&#65306;&#35774;&#22791;&#27169;&#22411;</b></font>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1457941273619" ID="ID_1019923209" MODIFIED="1486555598259">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Documents/sysfs.txt&#38405;&#35835;&#35760;&#24405; </b>
    </p>
    <p>
      sysfs&#26159;&#19968;&#20010;&#22522;&#20110;ram&#30340;&#25991;&#20214;&#31995;&#32479;&#65292;&#23427;&#25552;&#20379;&#20102;&#19968;&#31181;
    </p>
    <p>
      &#23548;&#20986;&#20869;&#26680;&#25968;&#25454;&#32467;&#26500;&#21644;&#23646;&#24615;&#30340;&#26041;&#27861;&#65294;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457941683450" ID="ID_1980133334" MODIFIED="1457942541455">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#30446;&#24405;&#21019;&#24314;
    </p>
    <p>
      &#23545;&#20110;&#27599;&#19968;&#20010;&#27880;&#20876;&#21040;&#31995;&#32479;&#24403;&#20013;&#30340;kobject, sys&#30446;&#24405;&#19979;&#38754;&#30456;&#24212;&#22320;
    </p>
    <p>
      &#20063;&#23545;&#24212;&#19968;&#20010;&#30446;&#24405;&#65292;&#35813;&#30446;&#24405;&#26159;kobject&#30340;&#29238;&#23545;&#35937;&#30340;&#30446;&#24405;&#30340;&#23376;&#30446;&#24405;&#65294;
    </p>
    <p>
      sys&#30340;&#39030;&#23618;&#30446;&#24405;&#21017;&#20195;&#34920;&#30528;object&#25152;&#23646;&#30340;&#21508;&#20010;&#23376;&#31995;&#32479;&#65294;
    </p>
    <p>
      sysfs&#20869;&#37096;&#23384;&#20648;&#20102;&#19968;&#20010;&#25351;&#21521;kobject&#30340;&#25351;&#38024;&#65292;&#35813;&#25351;&#38024;&#23884;&#20837;&#21040;&#20102;
    </p>
    <p>
      &#36319;&#25991;&#20214;&#30446;&#24405;&#30456;&#20851;&#30340;sysfs_dirent&#32467;&#26500;&#20307;&#24403;&#20013;&#65294;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457942855829" FOLDED="true" ID="ID_1580697406" MODIFIED="1486555599162">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#23646;&#24615;
    </p>
    <p>
      kobject&#30340;&#23646;&#24615;&#26159;&#36890;&#36807;&#24120;&#35268;&#25991;&#20214;&#30340;&#26041;&#24335;&#26292;&#38706;&#22312;sysfs&#24403;&#20013;&#30340;
    </p>
    <p>
      attribute&#24212;&#35813;&#26159;&#25991;&#26412;&#25991;&#20214;&#65292;&#19968;&#33324;&#19968;&#20010;&#25991;&#20214;&#37324;&#38754;&#21482;&#26377;&#19968;&#20010;&#20540;&#65292;
    </p>
    <p>
      &#20294;&#20063;&#26377;&#19968;&#20010;type&#23545;&#24212;&#19968;&#20010;value&#25968;&#32452;&#30340;&#24773;&#20917;&#65294;
    </p>
    <p>
      struct attribute {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;char&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* name;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct module&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*owner;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;umode_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mode;
    </p>
    <p>
      };
    </p>
    <p>
      int sysfs_create_file(struct kobject * kobj, const struct attribute * attr);
    </p>
    <p>
      void sysfs_remove_file(struct kobject * kobj, const struct attribute * attr);
    </p>
  </body>
</html></richcontent>
<node CREATED="1457943632134" ID="ID_375798370" MODIFIED="1457943847252">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#19968;&#20010;&#35064;&#23646;&#24615;&#26469;&#35828;&#65292;&#27809;&#26377;&#19968;&#31181;&#26041;&#27861;&#21487;&#20197;&#35835;&#21462;&#25110;&#32773;&#20889;&#20837;
    </p>
    <p>
      &#23646;&#24615;&#30340;&#20540;&#65294;&#23376;&#31995;&#32479;&#34987;&#40723;&#21169;&#24314;&#31435;&#33258;&#24049;&#30340;&#23646;&#24615;&#32467;&#26500;&#20307;&#65292;&#37324;&#38754;
    </p>
    <p>
      &#23553;&#35013;&#33258;&#24049;&#30340;&#20989;&#25968;&#29992;&#26469;&#20026;&#19968;&#20010;&#29305;&#23450;&#30340;object&#28155;&#21152;&#25110;&#32773;&#31227;&#38500;
    </p>
    <p>
      &#23646;&#24615;&#65294;&#27604;&#22914;&#39537;&#21160;&#27169;&#22411;&#23450;&#20041;&#20102;&#19968;&#20010;device_attribute
    </p>
    <p>
      struct device_attribute {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct attribute&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;attr;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*show)(struct device *dev, struct device_attribute *attr,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;char *buf);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*store)(struct device *dev, struct device_attribute *attr,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const char *buf, size_t count);
    </p>
    <p>
      };
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457943937701" ID="ID_198196406" MODIFIED="1457944102646">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>#define DEVICE_ATTR(_name, _mode, _show, _store) \ </b>
    </p>
    <p>
      <b>struct device_attribute dev_attr_##_name = __ATTR(_name, _mode, _show, _store) </b>
    </p>
    <p>
      
    </p>
    <p>
      int device_create_file(struct device *, const struct device_attribute *);
    </p>
    <p>
      void device_remove_file(struct device *, const struct device_attribute *);
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458196495841" ID="ID_1100194257" MODIFIED="1458196700648">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.kobject&#30340;attribute&#20998;&#20026;&#26222;&#36890;&#30340;attribute&#21644;&#20108;&#36827;&#21046;&#30340;attribute
    </p>
    <p>
      &#26222;&#36890;&#30340;attribute&#21482;&#33021;&#21521;&#37324;&#38754;&#20889;&#20837;&#23383;&#31526;&#20018;
    </p>
    <p>
      &#20108;&#36827;&#21046;&#30340;attribute&#30001;&#20110;&#23450;&#20041;&#20102;&#33258;&#24049;&#30340;read/write&#20989;&#25968;&#65292;
    </p>
    <p>
      &#22240;&#32780;&#21487;&#20197;&#20889;&#20837;&#20219;&#20309;&#24418;&#24335;&#30340;&#25968;&#25454;&#65294;
    </p>
    <p>
      &#160;struct attribute {
    </p>
    <p>
      &#160;const char *name;
    </p>
    <p>
      &#160;umode_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mode;
    </p>
    <p>
      &#160;#ifdef CONFIG_DEBUG_LOCK_ALLOC
    </p>
    <p>
      &#160;bool ignore_lockdep:1;
    </p>
    <p>
      &#160;struct lock_class_key&#160;&#160;&#160;*key;
    </p>
    <p>
      &#160;struct lock_class_key&#160;&#160;&#160;skey;
    </p>
    <p>
      &#160;#endif
    </p>
    <p>
      &#160;};
    </p>
    <p>
      &#160;/* include/linux/sysfs.h, line 100 */
    </p>
    <p>
      &#160;struct bin_attribute {
    </p>
    <p>
      &#160;struct attribute&#160;&#160;&#160;&#160;attr;
    </p>
    <p>
      &#160;size_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;size;
    </p>
    <p>
      &#160;void *private;
    </p>
    <p>
      &#160;ssize_t (*read)(struct file *, struct kobject *, struct bin_attribute *,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;char *, loff_t, size_t);
    </p>
    <p>
      &#160;ssize_t (*write)(struct file *,struct kobject *, struct bin_attribute *,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;char *, loff_t, size_t);
    </p>
    <p>
      &#160;int (*mmap)(struct file *, struct kobject *, struct bin_attribute *attr,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;struct vm_area_struct *vma);
    </p>
    <p>
      &#160;};
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457944429136" ID="ID_1017365841" MODIFIED="1458198351951">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#23376;&#31995;&#32479;&#25351;&#23450;&#22238;&#35843;&#20989;&#25968;
    </p>
    <p>
      &#24403;&#19968;&#20010;&#23376;&#31995;&#32479;&#23450;&#20041;&#20102;&#19968;&#20010;&#26032;&#30340;&#23646;&#24615;&#31867;&#22411;&#65292;&#23427;&#24517;&#39035;&#23454;&#29616;&#19968;&#20010;sysfs&#25805;&#20316;&#38598;&#21512;
    </p>
    <p>
      &#29992;&#26469;&#23558;&#19978;&#23618;&#30340;read/write&#25805;&#20316;&#36716;&#21457;&#32473;attribute&#25317;&#26377;&#32773;&#23545;&#24212;&#30340;
    </p>
    <p>
      show&#21644;store&#26041;&#27861;&#37324;&#38754;&#21435;&#65294;
    </p>
    <p>
      <i><b>attribute&#25991;&#20214;&#30340;&#25805;&#20316;&#65292;&#20250;&#30001;VFS&#36716;&#21040;sysfs_file_operations&#23450;&#20041;&#30340;&#25805;&#20316;&#37324;&#38754;&#65292; </b></i>
    </p>
    <p>
      <i><b>&#28982;&#21518;&#36716;&#21040;sysfs_ops&#24403;&#20013;&#36827;&#34892;&#22788;&#29702;&#65294;</b></i>
    </p>
    <p>
      
    </p>
    <p>
      struct sysfs_ops {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*show)(struct kobject *, struct attribute *, char *);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*store)(struct kobject *, struct attribute *, const char *, size_t);
    </p>
    <p>
      };
    </p>
    <p>
      &#23376;&#31995;&#32479;&#37324;&#38754;&#20250;&#23450;&#20041;&#19968;&#20010;<b>struct kobj_type&#65292;</b>&#20316;&#20026;&#35813;&#23646;&#24615;&#31867;&#22411;&#30340;&#25551;&#36848;&#31526;&#65292;
    </p>
    <p>
      sysfs_ops&#25351;&#38024;&#23601;&#23384;&#25918;&#22312;&#36825;&#37324;&#65294;<b>&#27599;&#20010;kobject&#24517;&#39035;&#26377;&#19968;&#20010;ktype,&#21542;&#21017; </b>
    </p>
    <p>
      <b>&#20869;&#26680;&#26159;&#31105;&#27490;&#23558;&#20854;&#27880;&#20876;&#20026;&#19968;&#20010;attribute&#30340;</b>
    </p>
    <p>
      
    </p>
    <p>
      &#31034;&#20363;&#20195;&#30721;:
    </p>
    <p>
      #define to_dev(obj) container_of(obj, struct device, kobj)
    </p>
    <p>
      #define to_dev_attr(_attr) container_of(_attr, struct device_attribute, attr)
    </p>
    <p>
      
    </p>
    <p>
      static ssize_t dev_attr_show(struct kobject *kobj, struct attribute *attr,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;char *buf)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct device_attribute *dev_attr = to_dev_attr(attr);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct device *dev = to_dev(kobj);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t ret = -EIO;
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (dev_attr-&gt;show)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ret = dev_attr-&gt;show(dev, dev_attr, buf);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (ret &gt;= (ssize_t)PAGE_SIZE) {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;print_symbol(&quot;dev_attr_show: %s returned bad count\n&quot;,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(unsigned long)dev_attr-&gt;show);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return ret;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457946465042" ID="ID_66831925" MODIFIED="1457947701273">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>4.&#39030;&#23618;&#30446;&#24405;&#24067;&#23616; </b>
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457947707906" FOLDED="true" ID="ID_60829519" MODIFIED="1486555599171">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>5.&#24403;&#21069;&#23384;&#22312;&#20110;&#31995;&#32479;&#24403;&#20013;&#30340;&#25509;&#21475;&#23618;</b></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1457947746618" ID="ID_237724464" MODIFIED="1457947824696">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.devices
    </p>
    <p>
      struct device_attribute {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct attribute&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;attr;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*show)(struct device *dev, struct device_attribute *attr,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;char *buf);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*store)(struct device *dev, struct device_attribute *attr,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const char *buf, size_t count);
    </p>
    <p>
      };
    </p>
    <p>
      DEVICE_ATTR(_name, _mode, _show, _store);
    </p>
    <p>
      int device_create_file(struct device *dev, const struct device_attribute * attr);
    </p>
    <p>
      void device_remove_file(struct device *dev, const struct device_attribute * attr);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457947840356" ID="ID_739810593" MODIFIED="1457947916043">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.bus driver
    </p>
    <p>
      struct bus_attribute {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct attribute&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;attr;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*show)(struct bus_type *, char * buf);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*store)(struct bus_type *, const char * buf, size_t count);
    </p>
    <p>
      };
    </p>
    <p>
      BUS_ATTR(_name, _mode, _show, _store)
    </p>
    <p>
      int bus_create_file(struct bus_type *, struct bus_attribute *);
    </p>
    <p>
      void bus_remove_file(struct bus_type *, struct bus_attribute *);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457947926100" ID="ID_1659328828" MODIFIED="1457948015818">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.device driver
    </p>
    <p>
      struct driver_attribute {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct attribute&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;attr;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*show)(struct device_driver *, char * buf);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ssize_t (*store)(struct device_driver *, const char * buf,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;size_t count);
    </p>
    <p>
      };
    </p>
    <p>
      DRIVER_ATTR(_name, _mode, _show, _store)
    </p>
    <p>
      int driver_create_file(struct device_driver *, const struct driver_attribute *);
    </p>
    <p>
      void driver_remove_file(struct device_driver *, const struct driver_attribute *);
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1457950439871" ID="ID_1645872669" MODIFIED="1486555598295">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.kobject,ksets&#21644;subsystem
    </p>
  </body>
</html></richcontent>
<node CREATED="1457950491536" ID="ID_634413747" MODIFIED="1457950827491">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>kobject </b>
    </p>
    <p>
      kobject&#26159;&#19968;&#20010;&#26368;&#22522;&#26412;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#29992;&#20110;&#23558;&#35774;&#22791;&#27169;&#22411;&#32465;&#23450;&#21040;&#19968;&#36215;
    </p>
    <p>
      <i>&#23545;&#35937;&#30340;&#24341;&#29992;&#35745;&#25968; </i>
    </p>
    <p>
      <i>sys&#20013;&#23545;&#35937;&#22312;kernel&#37324;&#38754;&#30340;&#23545;&#24212; </i>
    </p>
    <p>
      <i>&#21508;&#31181;&#25968;&#25454;&#32467;&#26500;&#30340;&#33014;&#40655;&#21058; </i>
    </p>
    <p>
      <i>kobject&#23376;&#31995;&#32479;&#22788;&#29702;&#30828;&#20214;&#25554;&#25300;&#30340;&#20107;&#20214;&#36890;&#30693;</i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457950954704" FOLDED="true" ID="ID_1779660090" MODIFIED="1486555599171">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Kobjects&#22522;&#30784;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1457951095304" ID="ID_1407602802" MODIFIED="1457951436271">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#23884;&#20837;&#24335;&#30340;kobject</b>
    </p>
    <p>
      kobject&#24448;&#24448;&#26159;&#34987;&#29992;&#26469;&#25511;&#21046;&#23545;&#26356;&#22823;&#30340;&#65292;&#39046;&#22495;&#30456;&#20851;&#30340;&#32467;&#26500;&#20307;&#30340;&#35775;&#38382;
    </p>
    <p>
      &#23427;&#21482;&#26159;&#20026;&#20102;&#23558;&#26356;&#39640;&#23618;&#32423;&#30340;&#23545;&#35937;&#32465;&#23450;&#21040;&#35774;&#22791;&#27169;&#22411;&#24403;&#20013;
    </p>
    <p>
      &#24212;&#24403;&#20351;&#29992;container_of&#23439;&#23450;&#20041;&#26469;&#23558;&#19978;&#23618;&#35774;&#22791;&#30340;&#25351;&#38024;&#21462;&#20986;&#26469;
    </p>
    <p>
      struct cdev *device = container_of(kp, struct cdev, kobj);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457951489158" ID="ID_1380581825" MODIFIED="1458192914344">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font size="3"><b>&#160;struct kobject { </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;3:&#160;&#160;&#160;&#160;&#160;const char *name; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;4:&#160;&#160;&#160;&#160;&#160;struct list_head&#160;&#160;&#160;&#160;entry; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;5:&#160;&#160;&#160;&#160;&#160;struct kobject&#160;&#160;&#160;&#160;&#160;&#160;*parent; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;6:&#160;&#160;&#160;&#160;&#160;struct kset&#160;&#160;&#160;&#160;&#160;*kset; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;7:&#160;&#160;&#160;&#160;&#160;struct kobj_type&#160;&#160;&#160;&#160;*ktype; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;8:&#160;&#160;&#160;&#160;&#160;struct sysfs_dirent *sd; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;9:&#160;&#160;&#160;&#160;&#160;struct kref&#160;&#160;&#160;&#160;&#160;kref; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;10:&#160;&#160;&#160;&#160;unsigned int state_initialized:1; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;11:&#160;&#160;&#160;&#160;unsigned int state_in_sysfs:1; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;12:&#160;&#160;&#160;&#160;unsigned int state_add_uevent_sent:1; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;13:&#160;&#160;&#160;&#160;unsigned int state_remove_uevent_sent:1; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;14:&#160;&#160;&#160;&#160;unsigned int uevent_suppress:1; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;15: };</b></font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458187049204" FOLDED="true" ID="ID_1192180758" MODIFIED="1486555599171">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Ksets</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1458187064948" ID="ID_227574197" MODIFIED="1458187083187">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#160;2: struct kset { </b></i>
    </p>
    <p>
      <i><b>&#160;3:&#160;&#160;&#160;&#160;&#160;struct list_head list; </b></i>
    </p>
    <p>
      <i><b>&#160;4:&#160;&#160;&#160;&#160;&#160;spinlock_t list_lock; </b></i>
    </p>
    <p>
      <i><b>&#160;5:&#160;&#160;&#160;&#160;&#160;struct kobject kobj; </b></i>
    </p>
    <p>
      <i><b>&#160;6:&#160;&#160;&#160;&#160;&#160;const struct kset_uevent_ops *uevent_ops; </b></i>
    </p>
    <p>
      <i><b>&#160;7: };</b></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458187102241" FOLDED="true" ID="ID_190739162" MODIFIED="1486555599171">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>Ktype</b></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1458187116993" ID="ID_299876167" MODIFIED="1458187148800">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font size="3"><b>struct kobj_type { </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;3:&#160;&#160;&#160;&#160;&#160;void (*release)(struct kobject *kobj); </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;4:&#160;&#160;&#160;&#160;&#160;const struct sysfs_ops *sysfs_ops; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;5:&#160;&#160;&#160;&#160;&#160;struct attribute **default_attrs; </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;6:&#160;&#160;&#160;&#160;&#160;const struct kobj_ns_type_operations *(*child_ns_type)(struct kobject *kobj); </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;7:&#160;&#160;&#160;&#160;&#160;const void *(*namespace)(struct kobject *kobj);= </b></font></i>
    </p>
    <p>
      <i><font size="3"><b>&#160;8: };</b></font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1460273055228" FOLDED="true" ID="ID_1354610669" MODIFIED="1486555599172">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      subsystem&#30340;&#27010;&#24565;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1460273088467" ID="ID_1677947546" MODIFIED="1460277531373">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>subsystem&#21487;&#20197;&#35270;&#20026;&#26159;kset&#30340;&#38598;&#21512;</b>
    </p>
    <p>
      <i><font size="3">linux2.6.30.4&#29256;&#26412;&#20013;bus_register()&#20013;&#30340;struct bus_type_private *priv&#30340;&#26426;&#26500;&#20316;&#20026;bus&#30340;susbsystem </font></i>
    </p>
    <p>
      <i><font size="3">linux3.0&#29256;&#26412;&#21518;&#34987;struct subsys_private *priv; &#21462;&#20195; </font></i>
    </p>
    <p>
      <i><font size="3">struct bus_type_private { </font></i>
    </p>
    <p>
      <i><font size="3">struct kset subsys; </font></i>
    </p>
    <p>
      <i><font size="3">struct kset *drivers_kset; </font></i>
    </p>
    <p>
      <i><font size="3">struct kset *devices_kset; </font></i>
    </p>
    <p>
      <i><font size="3">struct klist klist_devices; </font></i>
    </p>
    <p>
      <i><font size="3">struct klist klist_drivers; </font></i>
    </p>
    <p>
      <i><font size="3">struct blocking_notifier_head bus_notifier; </font></i>
    </p>
    <p>
      <i><font size="3">unsigned int drivers_autoprobe:1; </font></i>
    </p>
    <p>
      <i><font size="3">struct bus_type *bus; </font></i>
    </p>
    <p>
      <i><font size="3">};</font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1458184304797" ID="ID_1323385442" MODIFIED="1486555598346">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Bus,Class,Device,DeviceDriver&#22235;&#31867;&#27010;&#24565;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1458192622483" ID="ID_1116864092" MODIFIED="1458192638882">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i>&#20174;&#38754;&#21521;&#23545;&#35937;&#30340;&#35282;&#24230;&#26469;&#30475;&#65306; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;- struct kobj&#65288;&#21450;&#20854;&#30456;&#20851;&#32467;&#26500;&#22914;kset, ktype&#31561;&#65289;&#23646;&#20110;&#26368;&#25277;&#35937;&#30340;&#22522;&#31867;&#65292;&#20195;&#30721;&#26368;&#31616;&#27905;&#65292;&#26368;&#19981;&#20855;&#20307;&#65307; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;- struct device&#65288;&#21450;&#20854;&#30456;&#20851;&#32467;&#26500;&#22914;device_driver&#65292;device_type&#31561;&#65289;&#26159;&#23545;kobj&#30340;&#23553;&#35013;&#65292;&#26159;&#31532;&#19968;&#23618;&#27966;&#29983;&#31867;&#65307; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;- &#20877;&#19978;&#23618;&#30340;&#32467;&#26500;&#65288;&#22914;platform_device&#31561;&#65289;&#65292;&#26159;&#22312;struct device&#30340;&#22522;&#30784;&#19978;&#20877;&#23553;&#35013;&#19968;&#27425;&#65292;&#26159;&#31532;&#20108;&#23618;&#27966;&#29983;&#31867;&#12290; </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>&#22240;&#27492;&#65292;&#20363;&#22914;&#25105;&#20204;&#21019;&#24314;&#20102;&#19968;&#20010;struct platform_device&#30340;&#23454;&#20363;&#65292;&#20351;&#29992;&#23436;&#27605;&#21518;&#35201;&#37322;&#25918;&#23427;&#12290;&#37027;&#20040;&#36825;&#20010;&#36807;&#31243;&#25353;&#36947;&#29702;&#24212;&#35813;&#26159;&#65306; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;- &#31995;&#32479;&#20869;&#37096;&#20808;&#35843;&#29992;platform_device&#30340;remove&#20989;&#25968;&#65292;&#23427;&#21482;&#22788;&#29702;&#33258;&#24049;&#23618;&#29305;&#26377;&#30340;&#21464;&#37327;&#65307; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;- &#23436;&#27605;&#21518;&#65292;&#31995;&#32479;&#35843;&#29992;&#31532;&#19968;&#23618;&#27966;&#29983;&#31867;struct device&#30340;release&#20989;&#25968;&#65292;&#22788;&#29702;&#20102;&#33258;&#24049;&#36825;&#19968;&#23618;&#30340;&#29305;&#26377;&#21464;&#37327;&#65307; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;- &#26368;&#21518;&#65292;&#35843;&#29992;&#22522;&#31867;kobject&#30340;release&#20989;&#25968;&#65292;&#23558;&#25972;&#20010;&#31354;&#38388;&#37322;&#25918;&#25481;&#12290; </i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458209777467" ID="ID_430165846" MODIFIED="1458209859009">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#35774;&#22791;driver probe&#30340;&#26102;&#26426; </b></i>
    </p>
    <p>
      
    </p>
    <p>
      <i><b>&#160;&#160;&#160;&#160;1.&#23558;struct device&#31867;&#22411;&#30340;&#21464;&#37327;&#27880;&#20876;&#21040;&#20869;&#26680;&#20013;&#26102;&#33258;&#21160;&#35302;&#21457;&#65288;device_register&#65292;device_add&#65292;device_create_vargs&#65292;device_create&#65289; </b></i>
    </p>
    <p>
      <i><b>&#160;&#160;&#160;&#160;2.&#23558;struct device_driver&#31867;&#22411;&#30340;&#21464;&#37327;&#27880;&#20876;&#21040;&#20869;&#26680;&#20013;&#26102;&#33258;&#21160;&#35302;&#21457;&#65288;driver_register&#65289; </b></i>
    </p>
    <p>
      <i><b>&#160;&#160;&#160; 3.&#25163;&#21160;&#26597;&#25214;&#21516;&#19968;bus&#19979;&#30340;&#25152;&#26377;device_driver&#65292;&#22914;&#26524;&#26377;&#21644;&#25351;&#23450;device&#21516;&#21517;&#30340;driver&#65292;&#25191;&#34892;probe&#25805;&#20316;&#65288;device_attach&#65289; </b></i>
    </p>
    <p>
      <i><b>&#160;&#160;&#160; 4.&#25163;&#21160;&#26597;&#25214;&#21516;&#19968;bus&#19979;&#30340;&#25152;&#26377;device&#65292;&#22914;&#26524;&#26377;&#21644;&#25351;&#23450;driver&#21516;&#21517;&#30340;device&#65292;&#25191;&#34892;probe&#25805;&#20316;&#65288;driver_attach&#65289; </b></i>
    </p>
    <p>
      <i><b>&#160;&#160;&#160; 5.&#33258;&#34892;&#35843;&#29992;driver&#30340;probe&#25509;&#21475;&#65292;&#24182;&#22312;&#35813;&#25509;&#21475;&#20013;&#23558;&#35813;driver&#32465;&#23450;&#21040;&#26576;&#20010;device&#32467;&#26500;&#20013;----&#21363;&#35774;&#32622;dev-&gt;driver&#65288;device_bind_driver&#65289; </b></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458285267059" ID="ID_693296357" MODIFIED="1458285777019">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Class</b>
    </p>
    <p>
      class&#23384;&#22312;&#30340;&#30446;&#30340;&#26159;&#20026;&#20102;&#23558;&#19968;&#20123;&#30456;&#20284;&#30340;device&#30340;&#30456;&#20284;&#25509;&#21475;&#25277;&#35937;&#20986;&#26469;
    </p>
    <p>
      &#20379;&#29992;&#25143;&#31354;&#38388;&#26469;&#20351;&#29992;&#65292;&#36825;&#26679;&#23601;&#36991;&#20813;&#20102;&#21508;&#20010;&#35774;&#22791;&#30340;&#39537;&#21160;&#23558;&#36825;&#20123;&#30456;&#20284;&#30340;&#25509;&#21475;
    </p>
    <p>
      &#37117;&#23454;&#29616;&#19968;&#36941;&#65292;&#36991;&#20813;&#20102;&#20195;&#30721;&#30340;&#20887;&#20313;&#65294;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458194488422" ID="ID_600559022" MODIFIED="1458194866652">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Uevent&#30340;&#27010;&#24565;&#21644;&#20316;&#29992; </b>
    </p>
    <p>
      uevent&#26159;kobject&#30340;&#19968;&#37096;&#20998;&#65292;&#29992;&#20110;&#22312;&#31995;&#32479;kobject
    </p>
    <p>
      &#21457;&#29983;&#21464;&#21270;&#30340;&#26102;&#20505;&#65292;&#36890;&#30693;&#29992;&#25143;&#31354;&#38388;&#31243;&#24207;&#65292;&#24120;&#24120;&#29992;&#22312;
    </p>
    <p>
      &#28909;&#25554;&#25300;&#35774;&#22791;&#24403;&#20013;&#65294;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458286112588" ID="ID_297001465" MODIFIED="1458286225234">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Platform&#35774;&#22791;
    </p>
    <p>
      Platform&#35774;&#22791;&#21253;&#25324;&#65306;&#22522;&#20110;&#31471;&#21475;&#30340;&#35774;&#22791;&#65288;&#24050;&#19981;&#25512;&#33616;&#20351;&#29992;&#65292;&#20445;&#30041;&#19979;&#26469;&#21482;&#20026;&#20860;&#23481;&#26087;&#35774;&#22791;&#65292;legacy&#65289;&#65307;
    </p>
    <p>
      &#36830;&#25509;&#29289;&#29702;&#24635;&#32447;&#30340;&#26725;&#35774;&#22791;&#65307;&#38598;&#25104;&#22312;SOC&#24179;&#21488;&#19978;&#38754;&#30340;&#25511;&#21046;&#22120;&#65307;&#36830;&#25509;&#22312;&#20854;&#23427;bus&#19978;&#30340;&#35774;&#22791;&#65288;&#24456;&#23569;&#35265;&#65289;&#12290;&#31561;&#31561;&#12290;
    </p>
    <p>
      &#36825;&#20123;&#35774;&#22791;&#26377;&#19968;&#20010;&#22522;&#26412;&#30340;&#29305;&#24449;&#65306;&#21487;&#20197;&#36890;&#36807;CPU bus&#30452;&#25509;&#23547;&#22336;&#65288;&#20363;&#22914;&#22312;&#23884;&#20837;&#24335;&#31995;&#32479;&#24120;&#35265;&#30340;&#8220;&#23492;&#23384;&#22120;&#8221;&#65289;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1504766931841" ID="ID_736192438" MODIFIED="1504766957322">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Platform &#39537;&#21160;&#21644;&#35774;&#22791;&#30340;&#32465;&#23450;&#36807;&#31243;&#20998;&#26512;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1504766961778" ID="ID_229695315" MODIFIED="1504767010979">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#26368;&#32456;&#36827;&#34892;&#21305;&#37197;&#30340;&#20989;&#25968;
    </p>
    <p>
      int platform_match(struct device *dev, struct device_driver *drv)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node COLOR="#cc0033" CREATED="1458395797887" FOLDED="true" ID="ID_897771791" MODIFIED="1499823335170" POSITION="right" TEXT="&#x7279;&#x522b;&#x7ae0;&#x8282;:GPIO&#x5b50;&#x7cfb;&#x7edf;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1458440850768" FOLDED="true" ID="ID_1906210875" MODIFIED="1499823331349">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>SOC&#20013;GPIO&#23376;&#31995;&#32479;&#37324;&#38754;&#30340;&#23492;&#23384;&#22120;&#20998;&#31867;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1458440899717" ID="ID_870382772" MODIFIED="1487916914464">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i>1.</i><b>&#29992;&#20110;&#35774;&#32622;&#30828;&#20214;I/O&#21475;&#30340;&#21151;&#33021;&#37197;&#32622;&#65292;&#25105;&#20204;&#31216;&#35813;&#160;<font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">HW block&#20026;pin controller</font>&#160; </b>
    </p>
    <p>
      a. &#35774;&#32622;&#24341;&#33050;&#21151;&#33021;&#65292; &#26159;&#26222;&#36890;&#30340;I/O&#21475;&#36824;&#26159;&#29305;&#27530;&#21151;&#33021;
    </p>
    <p>
      b. &#24341;&#33050;&#29305;&#24615;&#30340;&#35774;&#32622;&#65292; pull up/pull down&#31561;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1458440906797" ID="ID_1374039587" MODIFIED="1458441720910">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.&#26377;&#30340;&#24341;&#33050;&#34987;&#37197;&#32622;&#25104;spi&#21151;&#33021;&#65292;&#37027;&#20040; </b>
    </p>
    <p>
      <b>&#30001;spi controller&#36827;&#34892;&#25511;&#21046;&#65292; </b>
    </p>
    <p>
      <b>&#22914;&#26524;&#34987;&#37197;&#32622;&#25104;gpio&#21151;&#33021;&#65292;&#37027;&#20040;&#30001; </b>
    </p>
    <p>
      <b>gpio controller&#36827;&#34892;&#25511;&#21046;</b>&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458440912894" ID="ID_59399985" MODIFIED="1459758009418">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3<b>.&#37197;&#32622;&#25104;&#20013;&#26029;&#25511;&#21046;&#22120;&#30340;&#21151;&#33021; </b>
    </p>
    <p>
      <i><b>&#36890;&#36807;&#35775;&#38382;GPIO&#31867;&#22411;&#30340;&#20013;&#26029;&#25511;&#21046;&#22120; </b></i>
    </p>
    <p>
      <i><b>&#30340;&#23492;&#23384;&#22120;&#21487;&#20197;&#23545;GPIO&#21475;&#30340;&#21151;&#33021;&#36827;&#34892; </b></i>
    </p>
    <p>
      <i><b>&#37197;&#32622;</b></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1458444006543" FOLDED="true" ID="ID_117120831" MODIFIED="1499823332824" TEXT="GPIO&#x5b50;&#x7cfb;&#x7edf;&#x7684;&#x8f6f;&#x4ef6;&#x5206;&#x7c7b;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1458444050579" FOLDED="true" ID="ID_345597075" MODIFIED="1499823328983">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.pin control subsystem
    </p>
    <p>
      <b>&#39537;&#21160;pin control&#30828;&#20214;&#30340;&#36719;&#20214;</b>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1458446261967" FOLDED="true" ID="ID_1518217915" MODIFIED="1493219463841" TEXT="pin control&#x5b50;&#x7cfb;&#x7edf;&#x7684;&#x8f6f;&#x4ef6;&#x67b6;&#x6784;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1458446288669" ID="ID_1963969073" MODIFIED="1458446695190">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Driver0&#160;&#160;&#160;Driver1&#160;&#160;&#160;Driver2......Drivern
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Pin Control Core-----&gt; HW Abstract Layer
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Pin Controller Driver Layer
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;HW&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;HW&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;HW
    </p>
    <p>
      <b>&#24213;&#23618;&#30340;&#21508;&#20010;pin controller driver&#20250;&#21521;pin control core&#27880;&#20876; </b>
    </p>
    <p>
      <b>&#21508;&#20010;&#35774;&#22791;&#65292;&#36890;&#36807;pinctrl_register&#24213;&#23618;&#25509;&#21475;&#36827;&#34892;&#27880;&#20876;&#12290;</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458482662613" ID="ID_1421130126" MODIFIED="1458483689380">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font face="Arial, Helvetica, sans-serif" size="4" color="rgb(50, 50, 50)">linux/drivers/pinctrl&#26159;pinctrl&#23376;&#31995;&#32479;&#30340;&#26680;&#24515;&#20195;&#30721;&#25152;&#22312;&#22320; </font>
    </p>
    <p>
      <font face="Arial, Helvetica, sans-serif" size="4" color="rgb(50, 50, 50)">1.core.c core.h&#160;&#160;&#26680;&#24515;&#39537;&#21160;&#20195;&#30721; </font>
    </p>
    <p>
      <font size="4">2.</font><font face="Arial, Helvetica, sans-serif" size="4" color="rgb(50, 50, 50)">pinctrl-utils.c pinctrl-utils.h &#26680;&#24515;&#39537;&#21160;&#20195;&#30721;&#30340;utility&#25509;&#21475; </font>
    </p>
    <p>
      <font face="Arial, Helvetica, sans-serif" size="4" color="rgb(50, 50, 50)">3.pinmux.c pinmux.h&#160;&#160;&#26680;&#24515;&#20195;&#30721;&#37096;&#20998;&#30340;pin mux </font>
    </p>
    <p>
      <font face="Arial, Helvetica, sans-serif" size="4" color="rgb(50, 50, 50)">4.pinconf.c pinconf.h&#160;&#160;&#160;&#26680;&#24515;&#20195;&#30721;&#37096;&#20998;&#30340;config&#37096;&#20998; </font>
    </p>
    <p>
      <font face="Arial, Helvetica, sans-serif" size="4" color="rgb(50, 50, 50)">5.devicetree.c devicetree.h&#160;&#160;&#160;&#26680;&#24515;&#20195;&#30721;&#30340;device tree&#37096;&#20998; </font>
    </p>
    <p>
      <font face="Arial, Helvetica, sans-serif" size="4" color="rgb(50, 50, 50)">6.pinctrl-xxxx.c&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#21508;&#31181;pin controller&#30340;low level driver</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1458484071049" ID="ID_1403963975" MODIFIED="1459760502620">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4">&#36319;&#20854;&#20182;&#20869;&#26680;&#27169;&#22359;&#25509;&#21475;&#22836;&#25991;&#20214; </font></b>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">linux/include/linux/pinctrl&#22806;&#37096;&#25509;&#21475;&#22836;&#25991;&#20214; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">consumer.h&#160;&#160;&#160;&#20379;&#20854;&#20182;driver&#20351;&#29992;&#30340;pinctrl subsystem&#30340;&#25509;&#21475;&#65292; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#35774;&#32622;&#24341;&#33050;&#22797;&#29992;&#21151;&#33021;&#65292;&#35774;&#32622;&#24341;&#33050;&#30005;&#22120;&#29305;&#24615; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">devinfo.h&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#32473;linux&#30340;&#39537;&#21160;&#27169;&#22411;&#20351;&#29992;&#30340;&#25509;&#21475; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct device&#32467;&#26500;&#20307;&#24403;&#20013;&#26377;&#19968;&#20010;&#21483;&#20570; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct dev_pin_info *pins&#30340;&#25104;&#21592;&#65292;&#29992;&#20110;&#35774;&#23450; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#35813;&#35774;&#22791;&#30340;&#24341;&#33050;&#30340;&#21021;&#22987;&#29366;&#24577;</font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">machine.h&#160;&#160;&#160;&#160;&#160;&#160;&#36319;machine&#27169;&#22359;&#30340;&#25509;&#21475;</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1458485095825" ID="ID_139933814" MODIFIED="1459760541482">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4">&#26680;&#24515;&#39537;&#21160;&#25552;&#20379;&#32473;&#24213;&#23618;controller&#30340;&#25509;&#21475;&#25991;&#20214;</font></b><span style="font-weight: normal; text-align: left; line-height: 20px; white-space: normal; font-variant: normal; word-spacing: 0px; text-indent: 0px; float: none; font-size: 13px; letter-spacing: normal; color: rgb(50, 50, 50); font-style: normal; font-family: Arial, Helvetica, sans-serif; text-transform: none; background-color: rgb(255, 255, 255); display: inline !important"><font size="13px" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">linux/include/linux/pinctrl</font></span>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">pinconf-generic.h&#160;&#160;&#25552;&#20379;&#32473;&#21508;&#31181;pin controller&#20351;&#29992; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">pinconf.h&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pin configuration </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">pinctrl-state.h&#160;&#160;&#160;&#160;&#160;&#160;&#160;pin state&#29366;&#24577;&#23450;&#20041; </font>
    </p>
    <p>
      <font size="4" color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">pinmux.h&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pin mux&#23450;&#20041;</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1459761171090" FOLDED="true" ID="ID_353188260" MODIFIED="1493219493850">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>pin control subsystem&#21644;&#20854;&#20182;&#20869;&#26680;&#27169;&#22359;&#30340;&#25509;&#21475;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1459761914877" FOLDED="true" ID="ID_1073168285" MODIFIED="1493219492585">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;drivers that use pinctrl subsystems
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Pin&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Control&#160;&#160;&#160;&#160;&#160;&#160;&#160;Subsystems------GPIO subsystem
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;driver model&#160;&#160;&#160;&#160;&#160;&#160;&#160;device tree&#160;&#160;&#160;&#160;machine driver
    </p>
  </body>
</html></richcontent>
<node CREATED="1459775491727" FOLDED="true" ID="ID_48223857" MODIFIED="1493219487749" TEXT="1.pinctrl&#x5411;&#x5176;&#x4ed6;driver&#x63d0;&#x4f9b;&#x7684;&#x63a5;&#x53e3;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1459775543674" FOLDED="true" ID="ID_706896912" MODIFIED="1493219477085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35774;&#23450;&#35813;&#35774;&#22791;&#30340;&#21151;&#33021;&#22797;&#29992;
    </p>
    <p>
      <font size="3"><b><i>&#20004;&#20010;&#27010;&#24565;: </i></b></font><b><i><font size="3" color="#e91616">function</font><font size="3">&#160;&#21644; </font><font size="3" color="#e40b0b">group</font></i></b>
    </p>
    <p>
      <font size="3">function&#23601;&#26159;&#30828;&#20214;&#36923;&#36753;&#21306;&#22359;&#65292;&#23545;&#24212;&#30828;&#20214;&#19978;&#30340;&#19968;&#31181;&#21151;&#33021;&#65292;&#27604;&#22914;spi0 </font>
    </p>
    <p>
      <font size="3">group&#23601;&#26159;&#19968;&#32452;gpio&#30340;&#38598;&#21512;&#65292;&#29992;&#20110;&#32452;&#25104;&#26576;&#20010;&#30828;&#20214;&#36923;&#36753;&#21306;&#22359;</font>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1490174810699" ID="ID_1968848989" MODIFIED="1490174838956">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#25991;&#20214;board-&lt;soc&gt;-gpiomux.c&#29992;&#20110;&#25351;&#23450; </b></i>
    </p>
    <p>
      <i><b>function setting</b></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1459775573746" FOLDED="true" ID="ID_1003800495" MODIFIED="1493219482049">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35774;&#23450;&#35813;device&#23545;&#24212;&#30340;&#37027;&#20123;pin&#33050;&#30340;&#30005;&#27668;&#29305;&#24615;
    </p>
    <p>
      &#38656;&#35201;&#20102;&#35299;pinctrl state holder&#30340;&#27010;&#24565;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1459777867480" FOLDED="true" ID="ID_1307995723" MODIFIED="1493219479103" TEXT="&#x6570;&#x636e;&#x7ed3;&#x6784;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1459776584339" ID="ID_1346475980" MODIFIED="1459778181371">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct pinctrl {<br />&#160;&#160;&#160;&#160;struct list_head node;&#65293;&#65293;&#31995;&#32479;&#20013;&#30340;&#25152;&#26377;device&#30340;pin control state holder&#34987;&#25346;&#20837;&#21040;&#20102;&#19968;&#20010;&#20840;&#23616;&#38142;&#34920;&#20013;<br />&#160;&#160;&#160;&#160;struct device *dev;&#65293;&#65293;&#65293;&#35813;pin control state holder&#23545;&#24212;&#30340;device<br />&#160;&#160;&#160;&#160;struct list_head states;&#65293;&#65293;&#65293;&#65293;&#35813;&#35774;&#22791;&#30340;&#25152;&#26377;&#30340;&#29366;&#24577;&#34987;&#25346;&#20837;&#21040;&#36825;&#20010;&#38142;&#34920;&#20013;<br />&#160;&#160;&#160;&#160;struct pinctrl_state *state;&#65293;&#65293;&#65293;&#24403;&#21069;&#30340;pin control state<br />&#160;&#160;&#160;&#160;struct list_head dt_maps;&#65293;&#65293;&#65293;&#65293;mapping table<br />&#160;&#160;&#160;&#160;struct kref users;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;reference count<br />};&#160;
    </p>
    <p>
      <b><i>&#31995;&#32479;&#24403;&#20013;&#30340;&#25152;&#26377;&#39537;&#21160;&#22312;&#21644;pinctrl subsystem&#36827;&#34892;&#20132;&#20114;&#20043;&#21069;&#37117;&#38656;&#35201;&#33719;&#21462;pinctrl_state&#21477;&#26564;</i></b>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1459776755273" ID="ID_1949587463" MODIFIED="1459778183841">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct pinctrl_state {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct list_head node;&#65293;&#65293;&#65293;&#25346;&#20837;&#38142;&#34920;&#22836;&#30340;&#33410;&#28857;
    </p>
    <p>
      &#160;&#160;&#160;&#160;const char *name;&#65293;&#65293;&#65293;&#65293;&#65293;&#35813;state&#30340;&#21517;&#23383;
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct list_head settings;&#65293;&#65293;&#65293;&#23646;&#20110;&#35813;&#29366;&#24577;&#30340;&#25152;&#26377;&#30340;settings
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1459776992359" FOLDED="true" ID="ID_482818732" MODIFIED="1493219472825">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct pinctrl_setting {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct list_head node;
    </p>
    <p>
      &#160;&#160;&#160;&#160;enum pinctrl_map_type type;
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct pinctrl_dev *pctldev;
    </p>
    <p>
      &#160;&#160;&#160;&#160;const char *dev_name;
    </p>
    <p>
      &#160;&#160;&#160;&#160;union {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct pinctrl_setting_mux mux;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct pinctrl_setting_configs configs;
    </p>
    <p>
      &#160;&#160;&#160;&#160;} data;
    </p>
    <p>
      };
    </p>
    <p>
      &#24403;driver&#35774;&#23450;&#19968;&#20010;pin&#30340;state&#30340;&#26102;&#20505;&#65292;pin control subsystem&#20869;&#37096;
    </p>
    <p>
      &#20250;&#36941;&#21382;&#35813;pin state&#30340;&#20869;&#37096;&#30340;settings&#38142;&#34920;&#65292;&#23558;&#19968;&#20010;&#20010;&#30340;settings&#36827;&#34892;
    </p>
    <p>
      &#35774;&#32622;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1459777149118" FOLDED="true" ID="ID_452436352" MODIFIED="1493219471216">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      enum pinctrl_map_type {
    </p>
    <p>
      &#160;&#160;&#160;&#160;PIN_MAP_TYPE_INVALID,
    </p>
    <p>
      &#160;&#160;&#160;&#160;PIN_MAP_TYPE_DUMMY_STATE,
    </p>
    <p>
      &#160;&#160;&#160;&#160;PIN_MAP_TYPE_MUX_GROUP,&#65293;&#65293;&#65293;&#21151;&#33021;&#22797;&#29992;&#30340;setting
    </p>
    <p>
      &#160;&#160;&#160;&#160;PIN_MAP_TYPE_CONFIGS_PIN,&#65293;&#65293;&#65293;&#65293;&#35774;&#23450;&#21333;&#19968;&#19968;&#20010;pin&#30340;&#30005;&#27668;&#29305;&#24615;
    </p>
    <p>
      &#160;&#160;&#160;&#160;PIN_MAP_TYPE_CONFIGS_GROUP,&#65293;&#65293;&#65293;&#65293;&#35774;&#23450;&#21333;pin group&#30340;&#30005;&#27668;&#29305;&#24615;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1490167405709" ID="ID_417174568" MODIFIED="1490167424045">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>struct pinctrl_setting_configs</i></b>&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned group_or_pin;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long *configs;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned num_configs;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1459777239645" FOLDED="true" ID="ID_1440417104" MODIFIED="1493219470071">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct pinctrl_setting_mux {
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned group;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#35813;setting&#25152;&#23545;&#24212;&#30340;group selector
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned func;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#35813;setting&#25152;&#23545;&#24212;&#30340;function selector
    </p>
    <p>
      };
    </p>
    <p>
      &#26377;&#20102;function&#21644;group&#23601;&#21487;&#20197;&#36827;&#34892;&#35813;device&#21644;pin mux&#30456;&#20851;&#30340;&#35774;&#23450;&#20102;
    </p>
  </body>
</html></richcontent>
<node CREATED="1459777723626" ID="ID_1166578164" MODIFIED="1488207651044">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#f10e0e"><b><i>&#24341;&#33050;&#30340;&#30005;&#27668;&#29305;&#24615;</i></b></font>
    </p>
    <p>
      struct pinctrl_map_configs {
    </p>
    <p>
      &#160;&#160;&#160;&#160;const char *group_or_pin;&#65293;&#65293;&#65293;&#65293;&#35813;pin&#25110;&#32773;pin group&#30340;&#21517;&#23383;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long *configs;&#65293;&#65293;&#65293;&#65293;&#35201;&#35774;&#23450;&#30340;&#20540;&#30340;&#21015;&#34920;&#12290;&#36825;&#20010;&#20540;&#34987;&#29992;&#26469;&#20889;&#20837;HW
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned num_configs;&#65293;&#65293;&#65293;&#65293;&#21015;&#34920;&#20013;&#20540;&#30340;&#20010;&#25968;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
</node>
</node>
<node CREATED="1459778041480" FOLDED="true" ID="ID_512155678" MODIFIED="1493219480968" TEXT="&#x51fd;&#x6570;&#x63a5;&#x53e3;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1459778065448" ID="ID_758197521" MODIFIED="1459778352807">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.devm_pinctrl_get&#21644;pinctrl_get
    </p>
    <p>
      &#29992;&#20110;&#33719;&#21462;device&#23545;&#24212;&#30340;state&#21477;&#26564;struct pinctrl
    </p>
    <p>
      state holder&#19968;&#33324;&#26159;&#31532;&#19968;&#27425;&#35843;&#29992;&#30340;&#26102;&#20505;&#21160;&#24577;&#33719;&#21462;&#30340;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="16"/>
</node>
<node CREATED="1459778274446" ID="ID_1190967587" MODIFIED="1459778355175" TEXT="2.devm_pinctrl_put&#x548c;pinctrl_put&#x662f;1&#x4e2d;&#x7684;&#x9006;&#x51fd;&#x6570;">
<font NAME="SansSerif" SIZE="16"/>
</node>
<node CREATED="1459778319790" ID="ID_650426908" MODIFIED="1459778349158">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.pinctrl_lookup_state&#12290;&#26681;&#25454;
    </p>
    <p>
      state name&#22312;pin control state holder&#25214;&#21040;&#23545;&#24212;&#30340;pin control state
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="16"/>
</node>
<node CREATED="1459778382819" ID="ID_21238797" MODIFIED="1459778403039">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.pinctrl_select_state&#12290;&#35774;&#23450;&#19968;&#20010;&#20855;&#20307;&#30340;pin control state&#25509;&#21475;&#12290;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="16"/>
</node>
</node>
</node>
</node>
<node CREATED="1459779838155" FOLDED="true" ID="ID_1860691904" MODIFIED="1493219486821" TEXT="2.pinctrl subsystem&#x548c;gpio subsystem&#x7684;&#x4ea4;&#x4e92;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1459779886162" FOLDED="true" ID="ID_1296719661" MODIFIED="1493219485067" TEXT="1.&#x5177;&#x4f53;&#x7684;&#x63a5;&#x53e3;&#x5f62;&#x6001;">
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1459780026289" FOLDED="true" ID="ID_443208363" MODIFIED="1493219483650">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>pinctrl_request_gpio</b>&#25552;&#20379;&#32473;gpio subsystem&#29992;&#26469;&#30003;&#35831;gpio&#30340;&#36164;&#28304;
    </p>
    <p>
      &#30001;&#20110;&#26576;&#20123;&#30828;&#20214;&#32467;&#26500;&#19978;&#30340;&#20851;&#31995;&#65292;pinctrl&#25552;&#20379;&#35813;&#25509;&#21475;&#32473;gpio&#20351;&#29992;&#65292;&#20854;&#20182;
    </p>
    <p>
      &#30340;driver&#19981;&#24212;&#35813;&#20351;&#29992;&#35813;&#25509;&#21475;&#12290;
    </p>
    <p>
      &#20063;&#23601;&#26159;&#35828;pinctrl&#19981;&#20165;&#35201;&#32500;&#25252;pin space&#20013;&#30340;ID,&#21516;&#26102;&#36824;&#35201;&#32500;&#25252;
    </p>
    <p>
      gpio id&#36319;pin id&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;
    </p>
  </body>
</html></richcontent>
<font ITALIC="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1459780567517" ID="ID_550866431" MODIFIED="1459780755286">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#26681;&#25454;GPIO ID&#25214;&#21040;&#35813;ID&#23545;&#24212;&#30340;pin control device&#65288;struct pinctrl_dev&#65289;&#21644;GPIO rang&#65288;pinctrl_gpio_range&#65289;
    </p>
    <p>
      &#27599;&#20010;pin controller&#37117;&#20250;&#34987;&#26144;&#23556;&#25104;&#19968;&#20010;pinctrl_dev&#30340;&#35774;&#22791;&#65292;
    </p>
    <p>
      &#30001;&#20110;&#30828;&#20214;&#19978;&#30340;&#35774;&#35745;&#65292;pin controller&#25511;&#21046;&#30340;gpio&#20250;&#34987;&#20998;&#25104;&#22810;&#20010;&#22359;&#21306;
    </p>
    <p>
      &#27599;&#20010;&#22359;&#21306;&#23601;&#20250;&#29992;pinctrl_gpio_range&#26469;&#34920;&#31034;
    </p>
    <p>
      <b><i>pinctrl_add_gpio_range</i></b>&#23558;&#27599;&#20010;GPIO bank&#34920;&#31034;&#30340;gpio range&#25346;&#20837;&#21040;pin control device&#30340;range list&#20013;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1459780898315" ID="ID_919523363" MODIFIED="1459780916516">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#36827;&#34892;&#22797;&#29992;&#21151;&#33021;&#30340;&#35774;&#23450;&#65292;&#27605;&#31455;GPIO&#20063;&#26159;&#24341;&#33050;&#30340;&#19968;&#20010;&#29305;&#23450;&#30340;&#21151;&#33021;&#12290;pinmux_request_gpio&#20989;&#25968;&#30340;&#20316;&#29992;&#20027;&#35201;&#26377;&#20004;&#20010;&#65292;&#19968;&#20010;&#26159;&#22312;core driver&#20013;&#26631;&#35760;&#35813;pin&#24050;&#32463;&#29992;&#20316;GPIO&#20102;&#65292;&#36825;&#26679;&#65292;&#22914;&#26524;&#26377;&#27169;&#22359;&#21518;&#32493;request&#35813;&#36164;&#28304;&#65292;&#37027;&#20040;core driver&#21487;&#20197;&#25298;&#32477;&#19981;&#21512;&#29702;&#30340;&#35201;&#27714;&#12290;&#31532;&#20108;&#27493;&#23601;&#26159;&#35843;&#29992;&#24213;&#23618;pin controller driver&#30340;callback&#20989;&#25968;&#65292;&#36827;&#34892;&#24213;&#23618;&#23492;&#23384;&#22120;&#30456;&#20851;&#30340;&#25805;&#20316;&#12290;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
</node>
</node>
<node CREATED="1459780990146" ID="ID_1610048941" MODIFIED="1459781003140">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>pinctrl_free_gpio</b>&#12290;&#26377;&#30003;&#35831;&#23601;&#26377;&#37322;&#25918;&#65292;&#36825;&#26159;pinctrl_request_gpio&#30340;&#36870;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1459781018786" ID="ID_615115281" MODIFIED="1459781035851">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pinctrl_gpio_direction_input&#21644;pinctrl_gpio_direction_output
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
</node>
</node>
</node>
<node CREATED="1459781573811" ID="ID_925287204" MODIFIED="1490613805500">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.&#36319;devicetree&#25110;&#32773;&#26159;machine driver&#30340;&#25509;&#21475;</b>
    </p>
    <p>
      &#20027;&#35201;&#26159;&#20026;pinctrl subsystem&#25552;&#20379;pin mapping database&#30340;&#25903;&#25345;
    </p>
    <p>
      &#35813;database&#30340;&#27599;&#20010;entry&#30340;&#23450;&#20041;&#22914;&#19979;
    </p>
    <p>
      struct pinctrl_map {
    </p>
    <p>
      &#160;&#160;&#160;&#160;const char *dev_name;&#65293;&#65293;&#65293;&#20351;&#29992;&#36825;&#20010;mapping entry&#30340;&#35774;&#22791;&#21517;
    </p>
    <p>
      &#160;&#160;&#160;&#160;const char *name;&#65293;&#65293;&#65293;&#65293;&#65293;&#65293;&#35813;&#21517;&#23383;&#34920;&#31034;&#20102;&#35813;mapping entry
    </p>
    <p>
      &#160;&#160;&#160;&#160;enum pinctrl_map_type type;&#65293;&#65293;&#65293;&#36825;&#20010;entry&#30340;mapping type
    </p>
    <p>
      &#160;&#160;&#160;&#160;const char *ctrl_dev_name; &#65293;&#65293;&#65293;&#65293;&#65293;pin controller&#36825;&#20010;&#35774;&#22791;&#30340;&#21517;&#23383;
    </p>
    <p>
      &#160;&#160;&#160;&#160;union {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct pinctrl_map_mux mux;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct pinctrl_map_configs configs;
    </p>
    <p>
      &#160;&#160;&#160;&#160;} data;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<font ITALIC="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1490612992970" ID="ID_1534118675" MODIFIED="1490613781908">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>4.&#36319;&#39537;&#21160;&#27169;&#22411;&#30340;&#25509;&#21475;</i></b>
    </p>
    <p>
      &#22312;&#39537;&#21160;&#27169;&#22411;&#30340;&#32465;&#23450;&#20989;&#25968;really_probe&#24403;&#20013;&#20250;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      pinctrl_bind_pins(dev)&#65292;
    </p>
    <p>
      &#22312;&#35813;&#20989;&#25968;&#24403;&#20013;&#20250;&#29983;&#25104;device&#24403;&#20013;&#30340;pins&#25104;&#21592;&#65292;&#29992;&#20110;&#35774;&#32622;
    </p>
    <p>
      &#35813;device&#23545;&#24212;&#30340;pinctrl&#30340;&#40664;&#35748;&#30340;&#29366;&#24577;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1459762131859" FOLDED="true" ID="ID_304684176" MODIFIED="1499823323993" TEXT="pin control subsystem&#x5185;&#x90e8;&#x6a21;&#x5757;&#x56fe;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1459762153899" ID="ID_1054135346" MODIFIED="1459762340458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;driver0&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;driver1&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;driver2&#160;&#160; ...................&#160;&#160;drivern
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;^
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;pin configuration driver------------&gt;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pin control core driver
    </p>
    <p>
      &#160;&#160;pin mux driver ------------------------&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;specific pin controller driver0&#160;&#160;&#160;&#160;&#160;&#160;......&#160;&#160;&#160;&#160;&#160;&#160;specific pin controller driver1
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1488207393442" ID="ID_944801834" MODIFIED="1488207400071">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/pinctrl-inner.gif" />
  </body>
</html></richcontent>
</node>
<node CREATED="1490175170640" FOLDED="true" ID="ID_200428281" MODIFIED="1499823321472" TEXT="&#x6587;&#x6863;msm-pinctrl.txt&#x9605;&#x8bfb;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1490175442996" ID="ID_1694769749" MODIFIED="1490176448827">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39640;&#36890;&#33455;&#29255;&#34701;&#21512;&#20102;&#19968;&#20010;gpio&#21644;pin&#33050;mux/config&#30340;&#30828;&#20214;(TOP Level Mode Multiplexer)
    </p>
    <p>
      <b>compatible&#23646;&#24615;&#65292;&#29992;&#20110;&#21306;&#20998;TLMM&#30340;&#29256;&#26412;</b>
    </p>
    <p>
      &quot;qcom,msm-tlmm-8916&quot;
    </p>
    <p>
      &quot;qcom,msm-tlmm-8226&quot;
    </p>
    <p>
      &quot;qcom,msm-tlmm-8974&quot;
    </p>
    <p>
      &quot;qcom,msm-tlmm-mdm9640&quot;
    </p>
    <p>
      &quot;qcom,msm-tlmm-vpipa&quot;
    </p>
    <p>
      <b>reg&#23646;&#24615;:</b>
    </p>
    <p>
      &#20195;&#34920;gpio&#25511;&#21046;&#22120;&#30340;&#37197;&#32622;&#23492;&#23384;&#22120;&#30340;&#22522;&#22320;&#22336;&#21644;&#20854;&#33539;&#22260;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1490176455403" FOLDED="true" ID="ID_1394610283" MODIFIED="1493219507682">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20316;&#20026;&#23376;&#33410;&#28857;&#30340;pin&#33050;&#31867;&#22411;:
    </p>
    <p>
      &#30001;&#19968;&#20010;&#29305;&#23450;&#30340;&#25511;&#21046;&#22120;&#23454;&#20363;&#25152;&#25903;&#25345;&#30340;pin&#33050;&#31867;&#22411;&#26159;&#30001;&#25511;&#21046;&#22120;&#33410;&#28857;&#30340;
    </p>
    <p>
      &#23376;&#33410;&#28857;&#26469;&#20195;&#34920;&#30340;&#12290;&#27599;&#20010;pin&#33050;&#31867;&#22411;&#30340;&#33410;&#28857;&#30340;&#21517;&#31216;&#24517;&#39035;&#26159;&#29420;&#29305;&#30340;&#65292;&#24182;&#19988;
    </p>
    <p>
      &#24517;&#39035;&#26159;&#19979;&#21015;&#30340;&#21517;&#31216;&#20043;&#19968;:
    </p>
    <p>
      &#160;&#160;- gp : General purpose pins
    </p>
    <p>
      &#160;&#160;- sdc : SDC pins
    </p>
    <p>
      &#160;&#160;- qdsc : QDSC pins
    </p>
    <p>
      &#27599;&#20010;pin&#33050;&#31867;&#22411;&#33410;&#28857;&#24517;&#39035;&#21253;&#21547;&#19979;&#21015;&#30340;&#23646;&#24615;:
    </p>
    <p>
      #qcom,pin-cells &#24341;&#33050;&#25551;&#36848;&#31526;&#24403;&#20013;&#30340;cell&#30340;&#25968;&#37327;
    </p>
    <p>
      qcom,num-pins &#32473;&#23450;&#31867;&#22411;&#30340;&#24341;&#33050;&#30340;&#25968;&#37327;
    </p>
  </body>
</html></richcontent>
<node CREATED="1490176935059" ID="ID_1785125209" MODIFIED="1490180175273">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#20010;pin&#33050;&#31867;&#22411;&#21487;&#33021;&#20250;&#25903;&#25345;gpio&#30340;&#25805;&#20316;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#20043;&#19979;&#65292;&#19968;&#20010;pin&#33050;&#31867;&#22411;&#33410;&#28857;
    </p>
    <p>
      &#21487;&#20197;&#25317;&#26377;&#19968;&#20010;&#20195;&#34920;gpio&#25511;&#21046;&#22120;&#30340;&#23376;&#33410;&#28857;&#12290;&#21487;&#36873;&#30340;&#65292;&#19968;&#20010;pin&#33050;&#31867;&#22411;&#20063;&#25903;&#25345;&#29992;pin&#33050;&#26469;&#20316;&#20026;
    </p>
    <p>
      &#20013;&#26029;&#35302;&#21457;&#65292;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;&#25105;&#20204;&#21487;&#20197;&#22312;gpio&#25511;&#21046;&#22120;&#33410;&#28857;&#24403;&#20013;&#22686;&#21152;&#19968;&#20010;&#20013;&#26029;&#25511;&#21046;&#22120;&#30340;&#23646;&#24615;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#26377;&#20102;&#20013;&#26029;&#25511;&#21046;&#22120;&#65292;&#37027;&#20040;&#25105;&#20204;&#38656;&#35201;&#25351;&#23450;&#33021;&#22815;&#35302;&#21457;&#20013;&#26029;&#30340;&#24341;&#33050;&#30340;&#25968;&#30446;&#21644;&#20013;&#26029;&#34987;&#36335;&#30001;&#21040;&#30340;
    </p>
    <p>
      &#22788;&#29702;&#22120;&#30340;id&#21495;&#12290;
    </p>
    <p>
      gpio-controller&#65306; &#25351;&#23450;gpio &#25511;&#21046;&#22120;
    </p>
    <p>
      #gpio-cells: &#24212;&#35813;&#26159;2, &#31532;&#19968;&#20010;&#29992;&#26469;&#25351;&#23450;&#24341;&#33050;&#21495;&#65292;&#31532;&#20108;&#20010;&#29992;&#26469;&#25351;&#23450;&#21442;&#25968;
    </p>
    <p>
      interrupt-controller: &#25351;&#23450;&#20026;&#32456;&#31471;&#25511;&#21046;&#22120;
    </p>
    <p>
      compatible: &#29992;&#20110;&#26631;&#35782;&#20013;&#26029;&#25511;&#21046;&#22120;&#65292;&#20363;&#22914;&quot;qcom,msm-tlmm-gp&quot;
    </p>
    <p>
      num_irqs: &#21487;&#20197;&#29992;&#20316;&#20013;&#26029;&#30340;&#24341;&#33050;&#30340;&#25968;&#37327;
    </p>
    <p>
      apps_id: &#29992;&#20110;&#35206;&#30422;&#40664;&#35748;&#30340;TLMM&#23545;&#24212;&#30340;&#22788;&#29702;&#22120;&#26680;&#24515;id&#21495;
    </p>
    <p>
      #interrupt-cells: &#24212;&#35813;&#26159;2,&#31532;&#19968;&#20010;&#29992;&#26469;&#25351;&#23450;&#20013;&#26029;&#21495;&#65292; &#31532;&#20108;&#20010;&#25351;&#23450;&#21487;&#36873;&#30340;&#26631;&#24535;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490180403710" FOLDED="true" ID="ID_393075270" MODIFIED="1493219506081">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pin mux&#21644;pin config&#21151;&#33021;&#37117;&#21487;&#20197;&#20316;&#20026;pin controller&#30340;
    </p>
    <p>
      &#23376;&#33410;&#28857;&#26469;&#20195;&#34920;&#12290;&#23545;&#20110;&#36825;&#26679;&#30340;&#23376;&#33410;&#28857;&#30340;&#25968;&#37327;&#24182;&#27809;&#26377;&#38480;&#21046;&#12290;
    </p>
    <p>
      qcom,pins: &#25351;&#23450;pin&#33050;&#31867;&#22411;&#21644;pin&#33050;&#21495;
    </p>
    <p>
      qcom,num-grp-pins: &#24403;&#21069;&#32452;&#24403;&#20013;&#30340;pin&#33050;&#25968;&#37327;
    </p>
    <p>
      label: &#26631;&#35782;&#24403;&#21069;&#30340;pin group, &#30001;client&#26469;&#20351;&#29992;
    </p>
    <p>
      qcom,pin-func: &#35813;pin group&#30340;function&#35774;&#32622;
    </p>
    <p>
      &#35813;&#23376;&#33410;&#28857;&#24212;&#35813;&#21253;&#21547;&#19968;&#20010;pin&#33050;&#30340;&#21015;&#34920;&#65292;&#21151;&#33021;&#36873;&#25321;&#21644;&#37197;&#32622;&#21487;&#20197;&#24212;&#29992;&#21040;&#35813;&#32452;&#21015;&#34920;&#19978;&#38754;&#12290;
    </p>
    <p>
      &#35813;&#21015;&#34920;&#23601;&#26159;&#36890;&#36807;&#23646;&#24615;&quot;qcom,pins&quot;&#26469;&#25351;&#23450;&#30340;&#12290;&#35813;&#23646;&#24615;&#33267;&#23569;&#35201;&#25351;&#23450;&#19968;&#20010;pin&#33050;&#21495;&#65292;&#19988;
    </p>
    <p>
      pin&#33050;&#30340;&#25968;&#30446;&#27809;&#26377;&#19978;&#38480;&#12290;&#36890;&#36807;&#23646;&#24615;&quot;qcom,pin-func&quot;&#21487;&#20197;&#25351;&#23450;pin&#33050;&#30340;function&#36873;&#25321;&#12290;
    </p>
    <p>
      <b>&#23545;&#20110;pin&#33050;group&#33410;&#28857;&#65292;&#24517;&#39035;&#39069;&#22806;&#22320;&#26377;&#19968;&#20010;pin&#33050;&#37197;&#32622;&#33410;&#28857;&#20316;&#20026;&#23427;&#30340;&#23376;&#33410;&#28857;</b>&#12290;&#19968;&#32452;pin&#33050;
    </p>
    <p>
      &#21487;&#33021;&#23545;&#24212;&#30528;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#37197;&#32622;&#23376;&#33410;&#28857;&#65292;&#19968;&#20010;&#37197;&#32622;&#23376;&#33410;&#28857;&#21487;&#33021;&#23545;&#24212;&#30528;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#37197;&#32622;&#12290;
    </p>
    <p>
      &#26597;&#35810;&#25991;&#26723;Documentation/devicetree/bindings/pinctrl/pinctrl-bindings.txt&#33719;&#21462;&#37197;&#32622;&#23646;&#24615;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1490257435878" ID="ID_1467097056" MODIFIED="1490257455458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#000000"><b>pinctrl@fd511000 { </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.... </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;pmx-spi-bus { </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* MOSI, MISO and CLK lines </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* all sharing same function and config </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* settings for each configuration node. </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*/ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;qcom,pins = &lt;&amp;gp 0&gt;, &lt;&amp;gp 1&gt;, &lt;&amp;gp 3&gt;; </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;qcom,num-grp-pins = &lt;3&gt;; </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;qcom,pin-func = &lt;1&gt;; </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;label = &quot;spi-bus&quot;; </b></font></i>
    </p>
    <p>
      
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Active configuration of bus pins */ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;spi-bus-active: spi-bus-active { </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Property names as specified in </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* pinctrl-bindings.txt </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*/ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;drive-strength = &lt;8&gt;; /* 8 MA */ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bias-disable; /* No PULL */ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}; </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Sleep configuration of bus pins */ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;spi-bus-sleep: spi-bus-sleep { </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* Property values as specified in HW </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;* manual. </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*/ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;drive-strength = &lt;2&gt;; /* 2 MA */ </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;bias-disable; </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}; </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}; </b></font></i>
    </p>
    <p>
      <i><font color="#000000"><b>}</b></font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490185957189" ID="ID_1269760393" MODIFIED="1490185982391">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;<b><i>pinctrl@fd5110000 { </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;compatible = &quot;qcom,msm-tlmm-8974&quot;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reg = &lt;0xfd5110000 0x4000&gt;; </i></b>
    </p>
    <p>
      
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* General purpose pin type */ </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gp: gp { </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;qcom,num-pins = &lt;117&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#qcom,pin-cells = &lt;1&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Supports Gpio controller */ </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;msm_gpio: msm_gpio { </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gpio-controller; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#gpio-cells = &lt;2&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;compatible = &quot;qcom,msm-tlmm-gp&quot;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;interrupt-controller; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#interrupt-cells &lt;2&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;num_irqs = &lt;117&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;apps_id = &lt;4&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Sdc pin type */ </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sdc: sdc { </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;qcom,num-pins = &lt;6&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#qcom,pin-cells = &lt;1&gt;; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}; </i></b>
    </p>
    <p>
      <b><i>&#160;&#160;&#160;&#160;};&#160; </i></b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490233528087" FOLDED="true" ID="ID_357125436" MODIFIED="1493219515630" TEXT="&#x6587;&#x6863;gpio.txt&#x9605;&#x8bfb;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1490233551814" FOLDED="true" ID="ID_54356047" MODIFIED="1493219513790">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1) gpios property
    </p>
    <p>
      &#20351;&#29992;gpio&#30340;&#26102;&#20505;&#24212;&#35813;&#36890;&#36807;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;&#23646;&#24615;&#26469;&#25351;&#23450;&#23427;&#20204;&#12290;
    </p>
    <p>
      &#27599;&#20010;&#23646;&#24615;&#21253;&#21547;&#19968;&#20010;'gpio-list'&#65292; 'gpio-list'&#30340;&#23450;&#20041;&#22914;&#19979;&#25152;&#31034;:
    </p>
    <p>
      gpio-list ::= &lt;single-gpio&gt; [gpio-list]
    </p>
    <p>
      single-gpio ::= &lt;gpio-phandle&gt; &lt;gpio-specifier&gt;
    </p>
    <p>
      gpio-phandle : phandle to gpio controller node
    </p>
    <p>
      gpio-specifier : Array of #gpio-cells specifying specific gpio
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(controller specific)
    </p>
    <p>
      gpio&#30340;&#23646;&#24615;&#24212;&#35813;&#34987;&#21629;&#21517;&#20026;&quot;[&lt;name&gt;-]gpios&quot;&#65292;&#27599;&#20010;gpio&#30340;&#23646;&#24615;&#30340;&#30830;&#20999;&#21547;&#20041;
    </p>
    <p>
      &#30340;&#25991;&#26723;&#24212;&#35813;&#25918;&#32622;&#21040;binding&#37324;&#38754;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1490234605069" ID="ID_1780700668" MODIFIED="1490235046730">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#19979;&#38754;&#30340;&#20363;&#23376;&#34987;&#29992;&#26469;&#25551;&#36848;gpio&#30340;pin&#33050;&#65292;&#29992;&#20110;&#33455;&#29255;&#36873;&#25321;</i></b>
    </p>
    <p>
      gpio1: gpio1 {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gpio-controller
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#gpio-cells = &lt;2&gt;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;};
    </p>
    <p>
      &#160;&#160;&#160;&#160;gpio2: gpio2 {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gpio-controller
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#gpio-cells = &lt;1&gt;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;};
    </p>
    <p>
      &#160;&#160;&#160;&#160;[...]
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;chipsel-gpios = &lt;&amp;gpio1 12 0&gt;,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&amp;gpio1 13 0&gt;,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;0&gt;, /* holes are permitted, means no GPIO 2 */
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&amp;gpio2 2&gt;;
    </p>
    <p>
      &#21487;&#20197;&#30475;&#21040;&#33455;&#29255;&#36873;&#25321;&#24341;&#33050;2&#27809;&#26377;&#34987;&#35774;&#32622;&#65292;&#36824;&#26159;&#20445;&#25345;&#31354;&#30340;&#29366;&#24577;
    </p>
    <p>
      gpio-specifier&#30340;&#38271;&#24230;&#26159;&#30001;gpio controller&#26469;&#23450;&#20041;&#30340;&#65292;&#27604;&#22914;&#19978;&#38754;&#30340;&#20363;&#23376;&#65292;
    </p>
    <p>
      gpio1&#30340;cell&#26159;2, gpio2&#30340;cell&#26159;1
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490235053544" ID="ID_1273623932" MODIFIED="1490236009824">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2)GPIO specifier best practices
    </p>
    <p>
      gpio-specifier&#24212;&#35813;&#21253;&#21547;&#19968;&#20010;flag&#29992;&#26469;&#25351;&#31034;GPIO&#30340;&#26497;&#24615;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1490236013703" ID="ID_186215042" MODIFIED="1490256691787">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.1) gpio- and pin-controller interaction
    </p>
    <p>
      &#30001;gpio&#25511;&#21046;&#22120;&#25552;&#20379;&#30340;&#19968;&#20123;&#25110;&#32773;&#25152;&#26377;&#30340;gpios,&#36890;&#36807;pin controller&#65292;&#37117;&#21487;&#20197;&#34987;
    </p>
    <p>
      &#36335;&#30001;&#21040;&#33455;&#29255;&#23553;&#35013;&#30340;&#24341;&#33050;&#19978;&#38754;&#21435;&#12290;&#36825;&#31181;&#26041;&#24335;&#20801;&#35768;&#23558;pin&#33050;&#22312;gpio&#21644;&#20854;&#20182;&#21151;&#33021;&#20043;&#38388;
    </p>
    <p>
      &#36827;&#34892;&#22797;&#29992;(mux)&#12290;
    </p>
    <p>
      &#26126;&#30830;&#25351;&#26126;&#19968;&#20010;gpio&#23545;&#24212;&#30528;&#21738;&#20010;pin controller&#30340;&#21738;&#19968;&#20010;pin&#33050;&#26159;&#38750;&#24120;&#26377;&#29992;&#30340;&#65292;
    </p>
    <p>
      gpio-ranges&#23646;&#24615;&#21487;&#20197;&#23436;&#25104;&#36825;&#20010;&#20219;&#21153;&#65292;&#24182;&#19988;&#21253;&#21547;&#30528;&#22914;&#19979;&#25152;&#31034;&#30340;&#20449;&#24687;&#32467;&#26500;:
    </p>
    <p>
      <i><font color="#ed0a0a">gpio-range-list ::= &lt;single-gpio-range&gt; [gpio-range-list] </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">single-gpio-range ::= &lt;numeric-gpio-range&gt; | &lt;named-gpio-range&gt; </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">numeric-gpio-range ::= </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;pinctrl-phandle&gt; &lt;gpio-base&gt; &lt;pinctrl-base&gt; &lt;count&gt; </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">named-gpio-range ::= &lt;pinctrl-phandle&gt; &lt;gpio-base&gt; '&lt;0 0&gt;' </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">gpio-phandle : phandle to pin controller node. </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">gpio-base : Base GPIO ID in the GPIO controller </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">pinctrl-base : Base pinctrl pin ID in the pin controller </font></i>
    </p>
    <p>
      <i><font color="#ed0a0a">count : The number of GPIOs/pins in this range</font></i>
    </p>
    <p>
      &#22312;named-gpio-range&#34987;&#20351;&#29992;&#30340;&#24773;&#20917;&#20043;&#19979;&#65288;&#22312;&#36825;&#31181;&#24773;&#20917;&#19979;pinctrl-base&#21644;count&#37117;&#26159;0&#65289;
    </p>
    <p>
      &#23646;&#24615;gpio-ranges-group-names&#20026;&#27599;&#19968;&#20010;&#22312;gpio-range&#24403;&#20013;&#30340;single-gpio-range&#33410;&#28857;
    </p>
    <p>
      &#21253;&#21547;&#20102;&#19968;&#20010;string&#12290;<b><i>gpio-ranges-group-names&#25353;&#29031;&#19979;&#38754;&#30340;&#26041;&#24335;&#36827;&#34892;&#32452;&#32455;:</i></b>
    </p>
    <p>
      gpiorange-names-list ::= &lt;gpiorange-name&gt; [gpiorange-names-list]
    </p>
    <p>
      &#160;&#160;&#160;&#160;gpiorange-name : &#36825;&#26159;pin controller&#24403;&#20013;&#30340;pingroup&#30340;&#21517;&#31216;&#65292;&#36319;&#23545;&#24212;&#30340;GPIO range
    </p>
    <p>
      &#30456;&#32852;&#31995;&#12290;&#20030;&#20363;&#22914;&#19979;:
    </p>
    <p>
      <i>gpio_pio_i: gpio-controller@14B0 { </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#gpio-cells = &lt;2&gt;; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;compatible = &quot;fsl,qe-pario-bank-e&quot;, &quot;fsl,qe-pario-bank&quot;; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;reg = &lt;0x1480 0x18&gt;; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gpio-controller; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gpio-ranges =&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&amp;pinctrl1 0 20 10&gt;, </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&amp;pinctrl2 10 0 0&gt;, </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&amp;pinctrl1 15 0 10&gt;, </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;&amp;pinctrl2 25 0 0&gt;; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;gpio-ranges-group-names =&#160;&#160;&#160;&quot;&quot;, </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;foo&quot;, </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;&quot;, </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&quot;bar&quot;; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;}; </i>
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1458444473730" FOLDED="true" ID="ID_1382263222" MODIFIED="1495432526584">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.<b>GPIO subsystem </b>
    </p>
    <p>
      <b>&#39537;&#21160;gpio controller&#30828;&#20214;&#30340;&#36719;&#20214;&#23376;&#31995;&#32479;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1458447111848" FOLDED="true" ID="ID_922373483" MODIFIED="1493219519473" TEXT="GPIO&#x5b50;&#x7cfb;&#x7edf;&#x7684;&#x6a21;&#x5757;&#x56fe;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1458447141976" ID="ID_1774644299" MODIFIED="1458447257353">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Driver0&#160;&#160;&#160;Driver1&#160;&#160;&#160;Driver2&#160;&#160;&#160;......&#160;&#160;&#160;Drivern
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;GPIO lib---------------&gt;HW abstract layer
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;GPIO controller driver layer
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;|
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;HW&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;layer
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1488207307525" ID="ID_1095119898" MODIFIED="1488207324667" TEXT="ACPI gpio&#x6a21;&#x578b;"/>
<node CREATED="1488207327837" ID="ID_160084636" MODIFIED="1488207344709" TEXT="ARM devicetree gpio"/>
</node>
<node CREATED="1458444544466" ID="ID_1494822762" MODIFIED="1458444579024">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.<b>GPIO interrupt chip driver </b>
    </p>
    <p>
      <b>&#36825;&#26159;&#20013;&#26029;&#23376;&#31995;&#32479;&#30340;&#19968;&#37096;&#20998;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1493715764749" FOLDED="true" ID="ID_710540631" MODIFIED="1499823333764">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#39640;&#36890;&#24179;&#21488;&#23545;&#22806;&#22260;&#35774;&#22791;&#30340;&#31649;&#29702;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1493715794275" ID="ID_934446208" MODIFIED="1493716253596">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>BLSP</b>: BAM Low-Speed Peripheral
    </p>
    <p>
      <b>BAM</b>: Bus Access Module
    </p>
    <p>
      <b>QUP</b>: Qualcomm universal Peripheral
    </p>
    <p>
      &#27599;&#20010;BLSP&#21306;&#22359;&#21253;&#21547;&#22810;&#20010;QUP&#21644;UART&#26680;&#24515;&#65292;BAM&#26159;&#29992;&#20110;&#31227;&#21160;&#22806;&#22260;&#35774;&#22791;
    </p>
    <p>
      &#24403;&#20013;&#30340;&#25968;&#25454;&#32531;&#23384;&#30340;&#12290;&#27599;&#20010;&#22806;&#22260;&#35774;&#22791;&#37117;&#20250;&#36830;&#25509;&#21040;&#19968;&#23545;BAM&#30340;&#31649;&#36947;&#19978;&#38754;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1455869533894" FOLDED="true" ID="ID_1951293954" MODIFIED="1495432451076" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#ee0404" size="4"><b>&#31532;&#19971;&#31456;&#65306;&#35745;&#26102;&#22120;&#65292;&#24310;&#26102;&#21644;&#24310;&#26102;&#24037;&#20316; </b></font>
    </p>
    <p>
      &#35299;&#20915;&#35745;&#26102;&#30340;&#38382;&#39064;&#21253;&#21547;&#30528;&#19979;&#38754;&#30340;&#19968;&#20123;&#20219;&#21153;:
    </p>
    <p>
      1.&#27979;&#37327;&#26102;&#38388;&#30340;&#27969;&#36893;&#21644;&#27604;&#36739;&#26102;&#38388;
    </p>
    <p>
      2.&#30693;&#26195;&#24403;&#21069;&#30340;&#26102;&#38388;
    </p>
    <p>
      3.&#24310;&#36831;&#25805;&#20316;&#36798;&#25351;&#23450;&#30340;&#26102;&#38388;
    </p>
    <p>
      4.&#22312;&#38543;&#21518;&#30340;&#26102;&#38388;&#37324;&#35843;&#24230;&#24322;&#27493;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1455874380392" FOLDED="true" ID="ID_1825272736" MODIFIED="1494664325998">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.&#27979;&#37327;&#26102;&#38388;&#30340;&#27969;&#36893;</b>
    </p>
    <p>
      &#20869;&#26680;&#36890;&#36807;&#23450;&#26102;&#22120;&#20013;&#26029;&#30340;&#26041;&#24335;&#26469;&#36319;&#36394;&#26102;&#38388;&#30340;&#27969;&#21160;&#65292;&#23450;&#26102;&#22120;&#20013;&#26029;&#30001;&#31995;&#32479;&#30340;&#30828;&#20214;&#27599;&#38548;&#19968;&#23450;&#30340;&#26102;&#38388;&#20135;&#29983;&#65294;
    </p>
    <p>
      &#36825;&#20010;&#38388;&#38548;&#26102;&#38388;&#26159;&#22312;boot&#38454;&#27573;&#20197;Hz&#20540;&#30340;&#26041;&#24335;&#35774;&#23450;&#30340;&#65294;
    </p>
    <p>
      &#27599;&#21457;&#29983;&#19968;&#27425;&#23450;&#26102;&#22120;&#20013;&#26029;&#20869;&#26680;&#20869;&#37096;&#30340;64&#20301;&#30340;&#35745;&#25968;&#22120;&#23601;&#20250;&#21152;1
    </p>
    <p>
      <i><b>&#35813;&#35745;&#25968;&#22120;&#21464;&#37327;&#30340;&#31867;&#22411;&#26159;jiffies_64&#65292;&#28982;&#32780;&#39537;&#21160;&#31243;&#24207;&#20013;&#36890;&#24120;&#25509;&#35302;&#30340;&#26159;jiffies&#31867;&#22411;&#30340;&#21464;&#37327; </b></i>
    </p>
    <p>
      <i><b>&#20351;&#29992;jiffies&#26159;&#22240;&#20026;&#23427;&#26356;&#21152;&#24555;&#25463;&#65292;&#24182;&#19988;&#19981;&#26159;&#22312;&#25152;&#26377;&#30340;&#24179;&#21488;&#19978;&#33719;&#21462;jiffies_64&#37117;&#26159;&#21407;&#23376;&#25805;&#20316;</b></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1455874965355" ID="ID_1358329263" MODIFIED="1456107806952">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i>&#20351;&#29992;jiffies&#35745;&#25968;&#22120; </i>
    </p>
    <p>
      <i>1. &#19979;&#38754;&#26159;&#27604;&#36739;&#26102;&#38388;&#20540;&#30340;&#23439;&#23450;&#20041;&#65292;&#20026;&#20102;&#20813;&#21435;&#22238;&#32469;&#30340;&#40635;&#28902;&#65292;&#20351;&#29992;&#31995;&#32479;&#23450;&#20041;&#30340;&#23439;&#27604;&#36739;&#22909; </i>
    </p>
    <p>
      <i>int time_after(unsigned long a, unsigned long b) </i>
    </p>
    <p>
      <i>&#24403;a&#20195;&#34920;&#30340;&#26102;&#38388;&#27604;b&#20195;&#34920;&#30340;&#26102;&#38388;&#36828;&#26102;&#65292;&#36820;&#22238;1 </i>
    </p>
    <p>
      <i>int time_before(unsigned long a, unsigned long b) </i>
    </p>
    <p>
      <i>int time_after_eq(unsigned long a, unsigned long b) </i>
    </p>
    <p>
      <i>int time_before_eq(unsigned long a, unsigned long b) </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>2. &#23558;struct timespec &#21644;struct timeval&#22312;jiffies&#20043;&#38388;&#20570;&#36716;&#25442; </i>
    </p>
    <p>
      <i>unsigned long timespec_to_jiffies(struct timespec *value); </i>
    </p>
    <p>
      <i>void jiffies_to_timespec(unsigned long jiffies, struct timespec *value); </i>
    </p>
    <p>
      <i>unsigned long timeval_to_jiffies(struct timeval *value); </i>
    </p>
    <p>
      <i>void jiffies_to_timeval(unsigned long jiffies, struct timeval *value); </i>
    </p>
    <p>
      
    </p>
    <p>
      <i>3.&#29992;&#20110;&#35835;&#21462;64bit&#26102;&#38388;&#35745;&#25968;&#22120;&#30340;&#21407;&#23376;&#26041;&#27861; </i>
    </p>
    <p>
      <i>#include &lt;linux/jiffies.h&gt; </i>
    </p>
    <p>
      <i><b>u64 get_jiffies_64(void);</b></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456111150952" ID="ID_1715602663" MODIFIED="1456114508801">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#22788;&#29702;&#22120;&#29305;&#23450;&#30340;&#23492;&#23384;&#22120;TSC(time stamp counter)</b>
    </p>
    <p>
      &#35813;&#23492;&#23384;&#22120;&#20381;&#36182;&#20110;&#29305;&#23450;&#30340;&#20307;&#31995;&#32467;&#26500;&#65292;&#26377;&#30340;cpu&#37324;&#38754;&#21487;&#33021;&#23601;&#27809;&#26377;&#35813;&#23492;&#23384;&#22120;&#65292;
    </p>
    <p>
      &#35813;&#23492;&#23384;&#22120;&#30340;&#20316;&#29992;&#23601;&#26159;&#35745;&#25968;cpu&#30340;&#26102;&#38047;&#25968;&#65292;&#21487;&#29992;&#20110;&#31934;&#30830;&#35745;&#25968;&#65294;<br />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456113073815" ID="ID_74961794" MODIFIED="1456114489923">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.struct clocksource&#32467;&#26500;&#20307;&#20195;&#34920;&#20102;&#19968;&#20010;&#26102;&#38047;&#35774;&#22791;&#65292;&#32467;&#26500;&#20307;&#37324;&#38754;&#30340;
    </p>
    <p>
      &#160;&#160;read&#26041;&#27861;&#21487;&#20197;&#29992;&#26469;&#35835;&#21462;&#24403;&#21069;&#26102;&#38047;&#20013;&#26029;&#30340;&#35745;&#25968;&#20540;.
    </p>
    <p>
      &#160;&#160;&#31995;&#32479;&#24403;&#20013;&#19968;&#20849;&#26377;&#65298;&#31181;clocksource,&#19968;&#31181;&#26159;&#31995;&#32479;&#33258;&#24049;&#27880;&#20876;&#30340;clocksource
    </p>
    <p>
      &#160;&#160;&#25552;&#20379;1/HZ&#30340;&#31934;&#24230;&#65292;&#21478;&#19968;&#31181;&#26159;&#20381;&#36182;&#20855;&#20307;&#30340;&#20307;&#31995;&#32467;&#26500;&#30828;&#20214;&#35774;&#35745;&#27880;&#20876;&#30340;
    </p>
    <p>
      &#160;&#160;clocksource.
    </p>
    <p>
      &#160;&#160;&#22312;clocksource&#32467;&#26500;&#20307;&#37324;&#38754;&#26377;&#19968;&#20010;rating&#25104;&#21592;&#21464;&#37327;
    </p>
    <p>
      &#160;&#160;rating&#20540;&#39640;&#30340;clocksource&#20250;&#34987;&#31995;&#32479;&#37319;&#29992;
    </p>
    <p>
      
    </p>
    <p>
      2.linux&#20869;&#26680;&#30340;&#22681;&#19978;&#26102;&#38047;struct timespec xtime __attribute__ ((aligned (16)));
    </p>
    <p>
      xtime&#30340;&#20540;&#22312;&#26102;&#38047;&#20013;&#26029;&#37324;&#38754;&#34987;&#26356;&#26032;&#65292;&#21363;xtime&#20250;&#20381;&#36182;&#27880;&#20876;&#30340;clocksource&#32780;&#34987;
    </p>
    <p>
      &#26356;&#26032;&#65292;&#20855;&#20307;&#20351;&#29992;&#21738;&#20010;clocksource&#20381;&#36182;&#20110;&#25105;&#20204;&#30340;&#27880;&#20876;&#20102;&#65294;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456126417397" FOLDED="true" ID="ID_1349886471" MODIFIED="1494667361338">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#24310;&#26102;</b></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1456126446598" ID="ID_1906033982" MODIFIED="1456135834640">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#38271;&#24310;&#26102;: </b>
    </p>
    <p>
      &#26377;&#26102;&#39537;&#21160;&#31243;&#24207;&#38656;&#35201;&#24310;&#36831;&#36739;&#38271;&#30340;&#26102;&#38388;&#25191;&#34892;&#65293;&#36229;&#36807;&#19968;&#20010;&#26102;&#38047;&#28404;&#31572;&#30340;&#26102;&#38388;
    </p>
    <p>
      1.&#37319;&#29992;&#24537;&#31561;&#24453;&#30340;&#26041;&#27861;
    </p>
    <p>
      &#12288;while (time_before(jiffies, j1))
    </p>
    <p>
      &#12288;cpu_relax( );
    </p>
    <p>
      &#160;cpu_relax()&#22312;&#35768;&#22810;&#31995;&#32479;&#24403;&#20013;&#20160;&#20040;&#20107;&#24773;&#20063;&#19981;&#20570;&#65292;&#22312;&#23545;&#31216;&#22810;&#32447;&#31243;&#31995;&#32479;&#24403;&#20013;&#23427;&#21487;&#33021;&#20250;&#25918;&#24323;&#24403;&#21069;&#30340;&#26680;&#24515;&#65292;&#36825;&#31181;
    </p>
    <p>
      &#24310;&#26102;&#30340;&#26041;&#27861;&#19981;&#25512;&#20171;&#20351;&#29992;&#65294;&#24537;&#31561;&#24453;&#30340;&#26041;&#27861;&#26080;&#35770;&#26159;&#22312;&#21487;&#25250;&#21344;&#20869;&#26680;&#36824;&#26159;&#19981;&#21487;&#25250;&#21344;&#20869;&#26680;&#24403;&#20013;&#37117;&#20250;&#38477;&#20302;&#31995;&#32479;&#24615;&#33021;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#20320;&#22312;&#36827;&#20837;while&#24490;&#29615;&#20043;&#21069;&#20851;&#38381;&#20102;&#20013;&#26029;&#37027;&#20040;&#35813;&#24490;&#29615;&#20250;&#27704;&#36828;&#25191;&#34892;&#19979;&#21435;&#65292;&#36825;&#31181;&#24773;&#20917;&#26356;&#21152;&#31967;&#31957;&#65294;&#22312;&#31995;&#32479;&#36127;&#36733;&#27604;&#36739;
    </p>
    <p>
      &#37325;&#30340;&#24773;&#20917;&#19979;&#65292;&#24537;&#31561;&#24453;&#30340;&#26102;&#38388;&#29978;&#33267;&#20250;&#36229;&#36807;&#20320;&#33258;&#24049;&#35774;&#32622;&#30340;&#26102;&#38388;&#65294;
    </p>
    <p>
      
    </p>
    <p>
      2.&#37319;&#29992;&#35843;&#24230;&#30340;&#21150;&#27861;
    </p>
    <p>
      &#12288;while (time_before(jiffies, j1)) {
    </p>
    <p>
      &#160;&#160;&#160;schedule( );
    </p>
    <p>
      &#160;&#160;&#160;}
    </p>
    <p>
      &#160;&#160;&#160;&#34429;&#28982;&#35843;&#29992;&#20102;schedule()&#20294;&#26159;&#35813;&#36827;&#31243;&#20173;&#28982;&#22788;&#20110;running&#38431;&#21015;&#24403;&#20013;
    </p>
    <p>
      &#12288;&#32780;&#19988;&#24403;&#31995;&#32479;&#27604;&#36739;&#32321;&#24537;&#26102;&#65292;&#31561;&#24453;&#30340;&#26102;&#38388;&#20250;&#36229;&#36807;&#25105;&#20204;&#35774;&#23450;&#30340;&#20540;&#65294;
    </p>
    <p>
      
    </p>
    <p>
      3.&#36229;&#26102;&#30340;&#26041;&#27861;
    </p>
    <p>
      &#12288;&#19978;&#38754;&#30340;&#26041;&#27861;&#37117;&#26159;&#36890;&#36807;&#35266;&#23519;jiffies&#26469;&#35745;&#31639;&#24310;&#36831;&#65292;<i><font color="#e30707">&#20294;&#26159;&#26368;&#22909;&#30340;&#26041;&#27861;&#26159;&#35831;&#20869;&#26680;&#24110;&#21161;&#20320;&#20570;&#24310;&#26102;&#30340;&#24037;&#20316;&#65294; </font></i>
    </p>
    <p>
      &#21487;&#20197;&#20351;&#29992;&#19979;&#38754;&#30340;&#26041;&#27861;&#65306;
    </p>
    <p>
      #include &lt;linux/wait.h&gt;
    </p>
    <p>
      long wait_event_timeout(wait_queue_head_t q, condition, long timeout);
    </p>
    <p>
      long wait_event_interruptible_timeout(wait_queue_head_t q,
    </p>
    <p>
      condition, long timeout);&#12288;&#30001;&#20110;&#25105;&#20204;&#38656;&#35201;&#30340;&#26159;delay&#65292;&#25152;&#20197;&#24182;&#27809;&#26377;&#20154;&#20250;&#21796;&#37266;&#25105;&#20204;&#65294;
    </p>
    <p>
      <i>#include &lt;linux/sched.h&gt; </i>
    </p>
    <p>
      <i>set_current_state(TASK_INTERRUPTIBLE)</i>
    </p>
    <p>
      <i>signed long schedule_timeout(signed long timeout);&#29992;&#20110;&#21333;&#32431;&#22320;&#24310;&#26102;</i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456136235439" ID="ID_1630472719" MODIFIED="1456193983357">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#30701;&#24310;&#26102;&#65306; </b></i>
    </p>
    <p>
      &#24403;&#39537;&#21160;&#38656;&#35201;&#35299;&#20915;&#35774;&#22791;&#30340;&#24310;&#26102;&#38382;&#39064;&#30340;&#26102;&#20505;&#65292;&#26377;&#20851;&#30340;&#24310;&#26102;&#26368;&#22810;&#20063;&#23601;&#20960;&#21313;&#24494;&#22937;
    </p>
    <p>
      #include &lt;linux/delay.h&gt;
    </p>
    <p>
      void ndelay(unsigned long nsecs);&#32435;&#31186;&#32423;&#21035;&#30340;&#24310;&#26102;
    </p>
    <p>
      void udelay(unsigned long usecs);&#24494;&#22937;&#32423;&#21035;&#30340;&#24310;&#26102;
    </p>
    <p>
      void mdelay(unsigned long msecs);&#27627;&#31186;&#32423;&#21035;&#30340;&#24310;&#26102;
    </p>
    <p>
      &#36825;&#20123;&#20989;&#25968;&#30340;&#23454;&#29616;&#26159;&#22312;asm/delay.h&#25991;&#20214;&#24403;&#20013;&#30340;&#65292;udelay&#20989;&#25968;&#22312;&#21508;&#20010;&#26550;&#26500;&#37324;&#38754;
    </p>
    <p>
      &#24517;&#39035;&#34987;&#23454;&#29616;&#65294;&#36825;&#19977;&#20010;&#20989;&#25968;&#23646;&#20110;&#24537;&#31561;&#24453;&#30340;&#23454;&#29616;&#65294;
    </p>
    <p>
      
    </p>
    <p>
      void msleep(unsigned int millisecs);
    </p>
    <p>
      unsigned long msleep_interruptible(unsigned int millisecs);
    </p>
    <p>
      void ssleep(unsigned int seconds)
    </p>
    <p>
      &#36825;&#20960;&#20010;&#20989;&#25968;&#21487;&#20197;&#23454;&#29616;&#36827;&#31243;&#30340;&#20241;&#30496;&#65292;&#21487;&#20197;&#23454;&#29616;&#27627;&#31186;&#32423;&#30340;&#31561;&#24453;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1456194928610" FOLDED="true" ID="ID_551100703" MODIFIED="1494664503434">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#20869;&#26680;&#23450;&#26102;&#22120;: </b></i>
    </p>
    <p>
      &#20869;&#26680;&#23450;&#26102;&#22120;&#26159;&#19968;&#20010;&#25968;&#25454;&#32467;&#26500;&#65292;&#29992;&#20110;&#22312;&#25351;&#23450;&#30340;&#26102;&#38388;&#36890;&#36807;&#29992;&#25143;&#25351;&#23450;&#30340;&#20989;&#25968;&#21644;&#25351;&#23450;&#30340;
    </p>
    <p>
      &#21442;&#25968;&#26469;&#25191;&#34892;&#30456;&#20851;&#20219;&#21153;&#65294;&#20869;&#26680;&#23450;&#26102;&#22120;&#21644;&#27880;&#20876;&#23427;&#30340;&#36827;&#31243;&#26159;<b>&#24322;&#27493;&#30340;&#65292;</b>&#21363;&#24403;&#23450;&#26102;&#22120;&#20869;&#30340;&#20989;&#25968;
    </p>
    <p>
      &#25191;&#34892;&#30340;&#26102;&#20505;&#24182;&#19981;&#26159;&#22312;&#27880;&#20876;&#23427;&#30340;&#36827;&#31243;&#19978;&#19979;&#25991;&#37324;&#38754;&#25191;&#34892;&#30340;&#65294;
    </p>
    <p>
      &#23450;&#26102;&#22120;&#20989;&#25968;&#23454;&#38469;&#19978;&#26159;&#19968;&#31181;&#36719;&#20013;&#26029;&#30340;&#24418;&#24335;&#65292;&#23427;&#24517;&#39035;&#26159;&#22312;&#21407;&#23376;&#19978;&#19979;&#25991;&#24403;&#20013;&#25191;&#34892;&#30340;&#65294;
    </p>
  </body>
</html></richcontent>
<node CREATED="1456195590826" ID="ID_695455106" MODIFIED="1456196194545">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#23450;&#26102;&#22120;&#20989;&#25968;&#30340;&#32534;&#31243;&#35268;&#21017;: </b></i>
    </p>
    <p>
      1.&#35775;&#38382;&#29992;&#25143;&#31354;&#38388;&#26159;&#19981;&#34987;&#20801;&#35768;&#30340;&#65292;&#22240;&#20026;&#27809;&#26377;&#36827;&#31243;&#19978;&#19979;&#25991;&#65292;&#25152;&#20197;&#27809;&#26377;&#36827;&#20837;&#21040;&#29992;&#25143;
    </p>
    <p>
      &#160;&#160;&#160;&#31354;&#38388;&#30340;&#36947;&#36335;&#65294;
    </p>
    <p>
      2.current&#25351;&#38024;&#27809;&#26377;&#24847;&#20041;
    </p>
    <p>
      3.&#19981;&#33021;&#25191;&#34892;&#35843;&#24230;&#25110;&#32773;&#20241;&#30496;&#30340;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456196548109" ID="ID_80499259" MODIFIED="1456198017178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#24110;&#21161;&#20989;&#25968;: </b>
    </p>
    <p>
      in_interrupt( )&#35813;&#20989;&#25968;&#36820;&#22238;&#38750;&#65296;&#22914;&#26524;&#24403;&#21069;&#26159;&#22312;&#20013;&#26029;&#24403;&#20013;&#30340;&#35805;
    </p>
    <p>
      in_atomic( )&#35813;&#20989;&#25968;&#36820;&#22238;&#38750;&#65296;&#20540;&#65292;&#22914;&#26524;&#24403;&#21069;&#19981;&#20801;&#35768;&#36827;&#34892;&#35843;&#24230;
    </p>
    <p>
      &#20869;&#26680;&#23450;&#26102;&#22120;&#30340;&#19968;&#20010;&#37325;&#35201;&#30340;&#29305;&#28857;&#23601;&#26159;&#22312;task&#24403;&#20013;&#21487;&#20197;&#20877;&#27425;&#36827;&#34892;&#27880;&#20876;&#65292;
    </p>
    <p>
      &#20197;&#20415;&#22312;&#26410;&#26469;&#30340;&#26576;&#20010;&#26102;&#21051;&#20877;&#27425;&#25191;&#34892;&#65292;&#36825;&#20010;&#29305;&#28857;&#24456;&#26377;&#29992;&#65292;&#27604;&#22914;&#22312;<br />&#35774;&#22791;&#30340;poll&#35843;&#29992;&#24403;&#20013;&#65294;&#22312;SMP&#31995;&#32479;&#24403;&#20013;&#65292;&#36816;&#34892;&#23450;&#26102;&#22120;&#20989;&#25968;&#30340;cpu&#20063;&#26159;
    </p>
    <p>
      &#27880;&#20876;&#35813;&#23450;&#26102;&#22120;&#30340;cpu&#65294;<br />
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456198327014" ID="ID_436199294" MODIFIED="1456198369165">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#23450;&#26102;&#22120;&#20989;&#25968;&#24448;&#24448;&#26159;&#31454;&#20105;&#30340;&#28304;&#22836;&#65292;&#25152;&#20197;&#22312;<br />&#23450;&#26102;&#22120;&#20989;&#25968;&#24403;&#20013;&#20351;&#29992;&#21407;&#23376;&#21464;&#37327;&#21644;&#33258;&#26059;&#38145;&#65294;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1456204611769" ID="ID_1297645966" MODIFIED="1456205098614">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>&#23450;&#26102;&#22120;API:</b></i>
    </p>
    <p>
      #include &lt;linux/timer.h&gt;
    </p>
    <p>
      struct timer_list {
    </p>
    <p>
      /* ... */
    </p>
    <p>
      unsigned long expires;
    </p>
    <p>
      void (*function)(unsigned long);
    </p>
    <p>
      unsigned long data;
    </p>
    <p>
      };
    </p>
    <p>
      void init_timer(struct timer_list *timer);
    </p>
    <p>
      struct timer_list TIMER_INITIALIZER(_function, _expires, _data);
    </p>
    <p>
      void add_timer(struct timer_list * timer);
    </p>
    <p>
      int del_timer(struct timer_list * timer);
    </p>
    <p>
      
    </p>
    <p>
      int mod_timer(struct timer_list *timer, unsigned long expires)&#26356;&#26032;&#23450;&#26102;&#22120;&#30340;expires
    </p>
    <p>
      int del_timer_sync(struct timer_list *timer)&#36319;del_timer&#30340;&#20989;&#25968;&#19968;&#26679;&#65292;&#20294;&#26159;&#21487;&#20197;&#29992;&#20110;smp&#31995;&#32479;
    </p>
    <p>
      int timer_pending(const struct timer_list * timer)&#36820;&#22238;&#20540;&#34920;&#26126;&#23450;&#26102;&#22120;&#26159;&#21542;&#24050;&#32463;&#34987;&#35843;&#24230;&#25191;&#34892;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457923936486" FOLDED="true" ID="ID_1033231398" MODIFIED="1495432449490">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Tasklets </b>
    </p>
    <p>
      &#22312;&#36719;&#20013;&#26029;&#24403;&#20013;&#25191;&#34892;&#65292;&#32463;&#24120;&#34987;&#29992;&#22312;&#30828;&#20214;&#20013;&#26029;&#20013;&#65292;&#36890;&#36807;&#27880;&#20876;
    </p>
    <p>
      tasklets&#26469;&#22312;&#21518;&#38754;&#36866;&#24403;&#30340;&#36719;&#20013;&#26029;&#20013;&#22788;&#29702;&#25968;&#25454;&#30456;&#20851;&#30340;&#19996;&#35199;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457924166804" ID="ID_939541267" MODIFIED="1457924213969">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20808;&#21021;&#22987;&#21270;tasklets&#25968;&#25454;&#32467;&#26500;
    </p>
    <p>
      <i>void tasklet_init(struct tasklet_struct *t, </i>
    </p>
    <p>
      <i>void (*func)(unsigned long), unsigned long data); </i>
    </p>
    <p>
      <i>DECLARE_TASKLET(name, func, data); </i>
    </p>
    <p>
      <i>DECLARE_TASKLET_DISABLED(name, func, data);</i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457924228305" ID="ID_792232811" MODIFIED="1457926862848">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.tasklets&#20855;&#26377;&#30340;&#19968;&#20123;&#29305;&#28857;</b>
    </p>
    <p>
      &#21487;&#20197;&#34987;enable&#21644;disable&#22810;&#27425;
    </p>
    <p>
      &#21487;&#20197;&#27880;&#20876;&#20182;&#33258;&#24049;
    </p>
    <p>
      &#21487;&#20197;&#20197;&#24179;&#24120;&#30340;&#25110;&#32773;&#26159;&#39640;&#30340;&#20248;&#20808;&#32423;&#26469;&#25191;&#34892;
    </p>
    <p>
      &#22914;&#26524;&#31995;&#32479;&#36127;&#36733;&#19981;&#37325;&#30340;&#35805;&#65292;tasklet&#21487;&#20197;&#34987;&#31435;&#21363;&#25191;&#34892;&#65292;&#20294;&#26368;&#26202;&#19981;&#20250;&#22312;&#19979;&#19968;&#20010;ticket&#26469;&#20020;&#20043;&#21069;
    </p>
    <p>
      tasklets&#21487;&#20197;&#24182;&#21457;&#25191;&#34892;&#65292;&#20294;&#26159;&#30456;&#21516;&#30340;tasklet&#19981;&#20250;&#22312;&#22810;&#20010;cpu&#19978;&#21516;&#26102;&#25191;&#34892;
    </p>
    <p>
      <i><b>&#20869;&#26680;&#25552;&#20379;&#20102;ksoftirqd&#20869;&#26680;&#32447;&#31243;&#65292;&#27599;&#20010;CPU&#19968;&#20010;&#36825;&#26679;&#30340;&#32447;&#31243;&#65292;&#35813;&#32447;&#31243;&#36127;&#36131;&#22312;&#31995;&#32479;&#31354;&#38386;&#30340; </b></i>
    </p>
    <p>
      <i><b>&#26102;&#20505;&#25191;&#34892;&#36719;&#20013;&#26029;</b></i><b>&#65294;</b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457934111049" ID="ID_435234553" MODIFIED="1457934196295">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#25509;&#21475;&#20989;&#25968;
    </p>
    <p>
      <i>void tasklet_disable(struct tasklet_struct *t) </i>
    </p>
    <p>
      <i>void tasklet_disable_nosync(struct tasklet_struct *t) </i>
    </p>
    <p>
      <i>void tasklet_enable(struct tasklet_struct *t) </i>
    </p>
    <p>
      <i>void tasklet_schedule(struct tasklet_struct *t) </i>
    </p>
    <p>
      <i>void tasklet_hi_schedule(struct tasklet_struct *t) </i>
    </p>
    <p>
      <i>void tasklet_kill(struct tasklet_struct *t)</i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1457936506692" FOLDED="true" ID="ID_591379314" MODIFIED="1494667521931">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Workqueues
    </p>
    <p>
      workqueues&#26159;&#30001;&#31995;&#32479;&#30340;&#26576;&#20010;&#36827;&#31243;&#26469;&#36127;&#36131;&#25191;&#34892;&#30340;&#65292;&#19981;&#20687;tasklets
    </p>
    <p>
      &#25191;&#34892;workqueues&#30340;&#26102;&#20505;&#31995;&#32479;&#21487;&#20197;&#36827;&#34892;&#20241;&#30496;&#65292;&#20294;&#26159;workqueues
    </p>
    <p>
      &#30340;&#24310;&#26102;&#21487;&#33021;&#27604;tasklets&#30340;&#22823;&#65294;
    </p>
  </body>
</html></richcontent>
<node CREATED="1457938414416" ID="ID_1342819077" MODIFIED="1457938490187">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20869;&#26680;&#37324;&#38754;&#32500;&#25252;&#20102;&#33258;&#24049;&#30340;&#20840;&#23616;&#24037;&#20316;&#38431;&#21015;static struct workqueue_struct *keventd_wq
    </p>
    <p>
      &#24403;&#28982;&#25105;&#20204;&#20063;&#21487;&#20197;&#33258;&#24049;&#21019;&#24314;&#33258;&#24049;&#30340;&#24037;&#20316;&#38431;&#21015;
    </p>
    <p>
      struct workqueue_struct *create_workqueue(const char *name);
    </p>
    <p>
      struct workqueue_struct *create_singlethread_workqueue(const char *name);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457938594535" ID="ID_209195314" MODIFIED="1457939486532">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.
    </p>
    <p>
      &#38745;&#24577;&#22768;&#26126;work_struct
    </p>
    <p>
      DECLARE_WORK(name, void (*function)(void *), void *data)
    </p>
    <p>
      &#21160;&#24577;&#20998;&#37197;work_struct
    </p>
    <p>
      INIT_WORK(struct work_struct *work, void (*function)(void *), void *data);
    </p>
    <p>
      &#20250;&#21021;&#22987;&#21270;&#25481;work&#38142;&#25509;&#21040;workqueue&#30340;&#25351;&#38024;
    </p>
    <p>
      PREPARE_WORK(struct work_struct *work, void (*function)(void *), void *data);
    </p>
    <p>
      &#19981;&#20250;&#21021;&#22987;&#21270;work&#38142;&#25509;&#21040;workqueue&#30340;&#25351;&#38024;&#65292;&#22240;&#32780;&#22312;work&#21152;&#20837;&#21040;workqueue&#20043;&#21518;
    </p>
    <p>
      &#36824;&#33021;&#22815;&#23545;work&#36827;&#34892;&#19968;&#23450;&#31243;&#24230;&#30340;&#20462;&#25913;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457939506561" ID="ID_1720605126" MODIFIED="1457939536328">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#25552;&#20132;&#24037;&#20316;&#21040;&#24037;&#20316;&#38431;&#21015;&#37324;&#38754;
    </p>
    <p>
      <i>int queue_work(struct workqueue_struct *queue, struct work_struct *work); </i>
    </p>
    <p>
      <i>int queue_delayed_work(struct workqueue_struct *queue, </i>
    </p>
    <p>
      <i>struct work_struct *work, unsigned long delay);</i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1468229217652" FOLDED="true" ID="ID_572194135" MODIFIED="1499823279386" POSITION="left" TEXT="Kbuild&#x7cfb;&#x7edf;&#x5b66;&#x4e60;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1468229234101" FOLDED="true" ID="ID_999465662" MODIFIED="1491269984789">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Linux&#20869;&#26680;makefile&#25991;&#20214;&#20998;&#31867;
    </p>
  </body>
</html></richcontent>
<node CREATED="1468229365699" ID="ID_235898352" MODIFIED="1468232043614">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.kernel makefile
    </p>
    <p>
      &#20301;&#20110;&#28304;&#20195;&#30721;&#30340;&#39030;&#23618;&#30446;&#24405;&#24403;&#20013;&#65292;&#32534;&#35793;&#20869;&#26680;&#25110;&#32773;&#26159;&#27169;&#22359;&#65292;
    </p>
    <p>
      &#36825;&#20010;&#25991;&#20214;&#39318;&#20808;&#20250;&#34987;&#35835;&#21462;&#65292;&#26681;&#25454;&#35835;&#21462;&#21040;&#30340;&#20869;&#23481;&#37197;&#32622;&#32534;&#35793;
    </p>
    <p>
      &#24320;&#21457;&#29615;&#22659;&#65292;&#20869;&#26680;&#25110;&#32773;&#26159;&#39537;&#21160;&#24320;&#21457;&#20154;&#21592;&#19981;&#38656;&#35201;&#20462;&#25913;&#35813;&#25991;&#20214;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468229547716" ID="ID_279059387" MODIFIED="1491198267916">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.Kbuild makefile
    </p>
    <p>
      kbuild&#31995;&#32479;&#20351;&#29992;kbuild makefile&#26469;&#32534;&#35793;&#25991;&#20214;&#65292;&#25351;&#23450;&#20102;&#38656;&#35201;&#32534;&#35793;&#37027;&#20123;&#27169;&#22359;&#36827;&#20837;
    </p>
    <p>
      &#20869;&#26680;&#24403;&#20013;&#65292;&#28304;&#25991;&#20214;&#30340;&#20301;&#32622;&#12290;&#39537;&#21160;&#21644;&#20869;&#26680;&#24320;&#21457;&#20154;&#21592;&#38656;&#35201;&#20462;&#25913;&#35813;&#25991;&#20214;&#12290;
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1468230408214" ID="ID_1607031889" MODIFIED="1468231999734">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      kbuild makefile&#26368;&#37325;&#35201;&#30340;&#21151;&#33021;&#23601;&#26159;&#25351;&#23450;&#38656;&#35201;&#32534;&#35793;&#21738;&#20123;&#25991;&#20214;
    </p>
    <p>
      &#36825;&#20010;&#36890;&#36807;&#19979;&#38754;&#20004;&#20010;&#23545;&#35937;&#26469;&#25351;&#23450;:
    </p>
    <p>
      obj-?&#21644; xxx-objs &#26469;&#25351;&#23450;
    </p>
    <p>
      obj-?=$(target).o
    </p>
    <p>
      target&#20026;&#32534;&#35793;&#23545;&#35937;&#30340;&#21517;&#23383;&#65292;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;xxx-obj&#21017;&#23545;&#24212;&#38656;&#35201;
    </p>
    <p>
      &#32534;&#35793;&#30340;&#28304;&#25991;&#20214;&#23601;&#26159;$(target).c&#25110;&#32773;&#26159;$(target).s
    </p>
    <p>
      &#22914;&#26524;&#25351;&#23450;&#20102;$(target)-objs,&#21017;&#32534;&#35793;&#30340;&#25991;&#20214;&#30001;$(target)-objs
    </p>
    <p>
      &#25351;&#23450;&#65292;&#24182;&#19988;&#19981;&#33021;&#26377;$(target).c&#25110;&#32773;$(target).s&#25991;&#20214;&#23384;&#22312;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468229986900" ID="ID_1488774037" MODIFIED="1468230166169">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.ARCH Makefile
    </p>
    <p>
      &#20301;&#20110;arch/$(ARCH)/makefile,kernel top makefile
    </p>
    <p>
      &#20250;&#21253;&#21547;&#35813;&#25991;&#20214;&#25351;&#23450;&#24179;&#21488;&#30456;&#20851;&#30340;&#20449;&#24687;&#12290;&#24179;&#21488;&#30456;&#20851;&#24320;&#21457;&#30340;
    </p>
    <p>
      &#20154;&#21592;&#20250;&#20462;&#25913;&#35813;&#25991;&#20214;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468249463723" FOLDED="true" ID="ID_1791617227" MODIFIED="1491198695535">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31995;&#32479;&#23436;&#25104;&#32534;&#35793;&#20043;&#21518;&#36755;&#20986;&#30340;
    </p>
    <p>
      &#25991;&#20214;&#30340;&#20316;&#29992;&#35299;&#26512;
    </p>
  </body>
</html></richcontent>
<node CREATED="1468249534826" ID="ID_1506903968" MODIFIED="1468249625123">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      module.order&#25991;&#20214;
    </p>
    <p>
      &#35813;&#25991;&#20214;&#35760;&#24405;&#20102;&#22312;Makefile&#25991;&#20214;&#24403;&#20013;&#20986;&#29616;&#30340;&#27169;&#22359;
    </p>
    <p>
      modprobe&#21629;&#20196;&#21487;&#20197;&#26681;&#25454;&#35813;&#25991;&#20214;&#26469;&#35299;&#20915;&#21305;&#37197;&#22810;&#20010;&#27169;&#22359;&#30340;
    </p>
    <p>
      &#37325;&#21629;&#21517;&#38382;&#39064;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468249632098" ID="ID_573761193" MODIFIED="1468249743867">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      modules.builtin
    </p>
    <p>
      &#35813;&#25991;&#20214;&#21015;&#20030;&#20986;&#20102;&#25152;&#26377;&#30340;&#32534;&#35793;&#36827;&#20837;&#20869;&#26680;&#30340;&#27169;&#22359;&#65292;
    </p>
    <p>
      modprobe&#25991;&#20214;&#20351;&#29992;&#23427;&#26469;&#20445;&#35777;&#21152;&#36733;&#20869;&#23884;&#30340;&#27169;&#22359;&#30340;
    </p>
    <p>
      &#26102;&#20505;&#19981;&#20250;&#22833;&#36133;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468249761361" FOLDED="true" ID="ID_37184477" MODIFIED="1491269981734" TEXT="&#x8ddf;&#x7f16;&#x8bd1;&#x7cfb;&#x7edf;&#x76f8;&#x5173;&#x7684;&#x73af;&#x5883;&#x53d8;&#x91cf;">
<node CREATED="1468250159742" ID="ID_526143328" MODIFIED="1468250168887" TEXT="KCPPFLAGS&#x7528;&#x4e8e;&#x9884;&#x5904;&#x7406;&#x7684;&#x9009;&#x9879;"/>
<node CREATED="1468250232533" ID="ID_496396200" MODIFIED="1468250255865">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KAFLAGS&#32473;&#27719;&#32534;&#22120;&#30340;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468250323773" ID="ID_1036893408" MODIFIED="1491198706626" TEXT="&#x7ed9;$(AS)&#x4f7f;&#x7528;&#x7684;&#x73af;&#x5883;&#x53d8;&#x91cf;">
<node CREATED="1468250343380" ID="ID_1283940558" MODIFIED="1468250372915">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      AFLAGS_MODULE
    </p>
    <p>
      &#32473;&#27169;&#22359;&#20351;&#29992;&#30340;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468250376012" ID="ID_943866007" MODIFIED="1468250422278">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      AFLAGS_KERNEL
    </p>
    <p>
      &#32473;&#20869;&#23884;&#21040;&#20869;&#26680;&#30340;&#20195;&#30721;&#30340;&#32534;&#35793;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468250852721" ID="ID_1184336307" MODIFIED="1468250867365" TEXT="KCFLAGS&#x8ddf;c&#x7f16;&#x8bd1;&#x5668;&#x76f8;&#x5173;&#x7684;&#x53ef;&#x9009;&#x9879;"/>
<node CREATED="1468250978256" ID="ID_1596889748" MODIFIED="1491198721544" TEXT="&#x8ddf;$(CC)&#x6709;&#x5173;&#x7684;&#x73af;&#x5883;&#x53d8;&#x91cf;">
<node CREATED="1468251018807" ID="ID_1582604069" MODIFIED="1468251034363" TEXT="CFLAGS_KERNEL&#x7f16;&#x8bd1;&#x5d4c;&#x5165;&#x5230;&#x5185;&#x6838;&#x5f53;&#x4e2d;&#x7684;&#x4ee3;&#x7801;"/>
<node CREATED="1468251050519" ID="ID_727515669" MODIFIED="1468251061649" TEXT="CFLAGS_MODULE&#x8ddf;&#x7f16;&#x8bd1;&#x6a21;&#x5757;&#x76f8;&#x5173;&#x7684;&#x53ef;&#x9009;&#x9879;"/>
</node>
<node CREATED="1468251096696" ID="ID_1178370193" MODIFIED="1468251133974">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LDFLAGS_MODULE
    </p>
    <p>
      &#22312;&#38142;&#25509;&#27169;&#22359;&#30340;&#26102;&#20505;&#36319;$(LD)&#30456;&#20851;&#30340;
    </p>
    <p>
      &#21487;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468251163502" ID="ID_1728487361" MODIFIED="1468251310191">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LDFLAGS_vmlinux
    </p>
    <p>
      &#22312;vmlinux&#23436;&#25104;&#26368;&#21518;&#19968;&#27493;&#30340;&#38142;&#25509;&#26102;
    </p>
    <p>
      &#20256;&#36882;&#36827;&#21435;&#30340;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468287252332" ID="ID_1050194300" MODIFIED="1468287266727" TEXT="KBUILD_DEBARCH&#x7528;&#x4e8e;debian&#x7cfb;&#x7edf;&#xff0c;&#x6307;&#x5b9a;&#x5f53;&#x524d;&#x7684;&#x7cfb;&#x7edf;&#x67b6;&#x6784;"/>
<node CREATED="1468287281800" ID="ID_362930055" MODIFIED="1468287289967" TEXT="ARCH&#x6307;&#x5b9a;&#x7f16;&#x8bd1;&#x7684;&#x8ba1;&#x7b97;&#x673a;&#x67b6;&#x6784;"/>
<node CREATED="1468287358705" ID="ID_1218971233" MODIFIED="1468287371783" TEXT="CROSS_COMPILE&#x6307;&#x5b9a;binutils&#x7684;&#x53ef;&#x9009;&#x540d;&#x79f0;&#x7684;&#x56fa;&#x5b9a;&#x90e8;&#x5206;"/>
<node CREATED="1468287421016" ID="ID_647386158" MODIFIED="1468287434623" TEXT="INSTALLKERNEL&#x6307;&#x5b9a;&#x5b89;&#x88c5;&#x5185;&#x6838;&#x955c;&#x50cf;&#x7684;&#x811a;&#x672c;"/>
<node CREATED="1468287533694" ID="ID_1112455509" MODIFIED="1468287572929">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      MODLIB
    </p>
    <p>
      &#25351;&#23450;&#23433;&#35013;&#27169;&#22359;&#30340;&#20301;&#32622;&#65292;&#40664;&#35748;&#30340;&#20301;&#32622;&#26159;
    </p>
    <p>
      $(INSTALL_MOD_PATH)/lib/modules/$(KERNELRELEASE)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468287626481" ID="ID_1199625776" MODIFIED="1468287700747">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      INSTALL_MOD_STRIP
    </p>
    <p>
      &#22914;&#26524;&#23450;&#20041;&#20102;&#35813;&#36873;&#39033;&#65292;&#37027;&#20040;&#23433;&#35013;&#23436;&#27605;&#27169;&#22359;&#20043;&#21518;&#23601;&#20250;
    </p>
    <p>
      &#35843;&#29992;strip&#21629;&#20196;&#22788;&#29702;&#35813;&#27169;&#22359;
    </p>
    <p>
      &#35813;&#21464;&#37327;&#26159;&#20316;&#20026;strip&#21629;&#20196;&#30340;&#21487;&#36873;&#39033;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468287780304" ID="ID_445098742" MODIFIED="1468287812899">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      INSTALL_FW_PATH
    </p>
    <p>
      &#25351;&#23450;&#23433;&#35013;&#22266;&#20214;&#30340;&#20301;&#32622;&#65292;&#40664;&#35748;&#30340;&#20301;&#32622;&#26159;
    </p>
    <p>
      $(INSTALL_MOD_PATH)/lib/firmware
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468287858953" ID="ID_804078487" MODIFIED="1468287938838">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      INSTALL_HDR_PATH
    </p>
    <p>
      &#29992;&#20110;&#25351;&#23450;&#24403;&#36816;&#34892; &quot;make headers_*&quot;&#23433;&#35013;&#29992;&#25143;&#31354;&#38388;&#30340;&#22836;&#25991;&#20214;&#30340;&#20301;&#32622;
    </p>
    <p>
      &#40664;&#35748;&#30340;&#20301;&#32622;&#26159;$(objtree)/usr
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468288115320" ID="ID_1357607365" MODIFIED="1468288167006">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_MODPOST_WARN
    </p>
    <p>
      &#23545;&#20110;&#22312;&#27169;&#22359;&#38142;&#25509;&#30340;&#26368;&#21518;&#38454;&#27573;&#65292;&#35813;&#36873;&#39033;&#23558;
    </p>
    <p>
      &#26410;&#23450;&#20041;&#30340;&#31526;&#21495;&#30340;&#38169;&#35823;&#25913;&#25104;&#35686;&#21578;&#25552;&#37266;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468288223640" ID="ID_113898251" MODIFIED="1468288263812">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_MODPOST_NOFINAL
    </p>
    <p>
      &#35813;&#36873;&#39033;&#29992;&#20110;&#36339;&#36807;&#27169;&#22359;&#26368;&#21518;&#30340;&#38142;&#25509;&#30340;&#38454;&#27573;
    </p>
    <p>
      &#35813;&#36873;&#39033;&#20165;&#20165;&#26159;&#29992;&#20110;&#32534;&#35793;&#30340;&#27979;&#35797;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468288469768" ID="ID_1090767586" MODIFIED="1468288552285">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_ENABLE_EXTRA_GCC_CHECKS
    </p>
    <p>
      &#22914;&#26524;&#22312;make&#21629;&#20196;&#21551;&#21160;&quot;W=1&quot;&#30340;&#36873;&#39033;&#30340;&#26102;&#20505;
    </p>
    <p>
      &#24320;&#21551;&#35813;&#36873;&#39033;&#65292;&#21017;&#20250;&#35753;gcc&#36827;&#34892;&#26356;&#21152;&#20005;&#26684;&#30340;&#32534;&#35793;
    </p>
    <p>
      &#26816;&#26597;gcc -W...
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468288669704" ID="ID_371100232" MODIFIED="1468288736128">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_BUILD_USER, KBUILD_BUILD_HOST
    </p>
    <p>
      &#29992;&#20110;&#35206;&#30422;&#22312;boot&#38454;&#27573;&#22312;&#32456;&#31471;&#30028;&#38754;&#19978;&#26174;&#31034;&#30340;user@host,
    </p>
    <p>
      &#20197;&#21450;&#22312;/proc/version&#20013;&#26174;&#31034;&#30340;user@host
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468288785520" ID="ID_757742801" MODIFIED="1468288829382">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_VMLINUX_INIT
    </p>
    <p>
      &#25351;&#23450;vmlinux&#30340;init&#37096;&#20998;&#30340;&#25152;&#26377;&#30340;&#30446;&#26631;&#25991;&#20214;&#65292;
    </p>
    <p>
      &#36825;&#20123;&#25351;&#23450;&#30340;&#30446;&#26631;&#25991;&#20214;&#23558;&#20250;&#34987;&#20248;&#20808;&#38142;&#25509;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468288859904" ID="ID_449889598" MODIFIED="1468288894761">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_VMLINUX_MAIN
    </p>
    <p>
      &#29992;&#20110;&#25351;&#23450;vmlinux&#30340;&#20027;&#20307;&#37096;&#20998;&#30340;&#30446;&#26631;&#25991;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468290646801" FOLDED="true" ID="ID_111318205" MODIFIED="1491269990637" TEXT="&#x5185;&#x6838;makefile">
<node CREATED="1468290662337" FOLDED="true" ID="ID_1324818214" MODIFIED="1491269976085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.makefile&#25317;&#26377;&#20116;&#20010;&#37096;&#20998;
    </p>
    <p>
      Makefile &#39030;&#23618;&#30340;makefile
    </p>
    <p>
      .config &#20869;&#26680;&#30340;&#37197;&#32622;&#25991;&#20214;
    </p>
    <p>
      arch/$(ARCH)/Makefile arch&#30456;&#20851;&#30340;&#25991;&#20214;
    </p>
    <p>
      scripts/Makefile.* &#19968;&#20123;&#25552;&#21069;&#23450;&#20041;&#22909;&#30340;rule&#25991;&#20214;
    </p>
    <p>
      kbuild Makefiles&#160;&#160;&#160;&#22823;&#27010;&#26377;500&#20010;&#24038;&#21491;&#30340;&#36825;&#26679;&#25991;&#20214;
    </p>
  </body>
</html></richcontent>
<node CREATED="1468290916202" ID="ID_578477515" MODIFIED="1468293599110">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#39030;&#23618;&#30340;Makefile&#20250;&#35835;&#21462;&#20869;&#26680;&#37197;&#32622;&#36807;&#31243;&#24403;&#20013;
    </p>
    <p>
      &#20135;&#29983;&#30340;.config&#25991;&#20214;&#65292;&#39030;&#23618;&#30340;Makefile&#25991;&#20214;&#36127;&#36131;&#32534;&#35793;&#20004;&#20010;&#20027;&#35201;
    </p>
    <p>
      &#30340;&#37096;&#20998;:vmlinux&#21644;module
    </p>
    <p>
      &#23427;&#36890;&#36807;&#36882;&#24402;&#25195;&#25551;&#23376;&#30446;&#24405;&#26469;&#32534;&#35793;&#12290;
    </p>
    <p>
      &#35775;&#38382;&#23376;&#30446;&#24405;&#30340;&#21015;&#34920;&#26159;&#36890;&#36807;&#37197;&#32622;&#24471;&#21040;&#30340;&#65292;$(ARCH)&#30446;&#24405;&#36127;&#36131;&#25552;&#20379;
    </p>
    <p>
      &#36319;&#20855;&#20307;&#30340;&#26550;&#26500;&#30456;&#20851;&#30340;&#20449;&#24687;&#32473;&#39030;&#23618;&#30340;&#30446;&#24405;
    </p>
    <p>
      2.&#27599;&#20010;&#23376;&#30446;&#24405;&#37324;&#38754;&#37117;&#26377;kbuild makefile,&#23427;&#25509;&#25910;&#26469;&#33258;&#19978;&#23618;&#30340;&#21629;&#20196;&#12290;
    </p>
    <p>
      &#21516;&#26102;kbuild&#21033;&#29992;.config&#37324;&#38754;&#30340;&#20449;&#24687;&#26469;&#26500;&#24314;&#38656;&#35201;&#32534;&#35793;&#30340;&#25991;&#20214;&#30340;&#21015;&#34920;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1478596740219" ID="ID_1131988071" MODIFIED="1478597133085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      scripts/Makefile.* &#25991;&#20214;&#30340;&#32452;&#25104;
    </p>
    <p>
      Makefile.build &#34987;&#39030;&#23618;&#30340;Makefile&#25991;&#20214;&#25152;&#35843;&#29992;&#65292;&#36319;&#21508;&#32423;&#23376;&#30446;&#24405;&#24403;&#20013;&#30340;Makefile
    </p>
    <p>
      &#21512;&#36215;&#26469;&#26500;&#25104;&#19968;&#20010;&#23436;&#25972;&#30340;Makefile&#25991;&#20214;&#65292;&#23450;&#20041;&#20102;.lib, built-in.o, *.o&#25991;&#20214;&#30340;&#29983;&#25104;&#35268;&#21017;&#12290;
    </p>
    <p>
      Makefile.clean&#34987;&#39030;&#23618;&#30340;Makefile&#25991;&#20214;&#35843;&#29992;&#65292;&#29992;&#26469;&#21024;&#38500;&#30446;&#26631;&#25991;&#20214;
    </p>
    <p>
      Makefile.lib &#34987;Makefile.build&#25991;&#20214;&#25152;&#35843;&#29992;&#65292;&#23545;&#19968;&#20123;&#21464;&#37327;&#36827;&#34892;&#22788;&#29702;.
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468293614186" FOLDED="true" ID="ID_102844332" MODIFIED="1491269973772">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2. kbuild&#25991;&#20214;
    </p>
    <p>
      kbuild makefile&#30340;&#25991;&#20214;&#21517;&#31216;&#21487;&#20197;&#26159;Makefile&#25110;&#32773;Kbuild
    </p>
    <p>
      &#20294;&#26159;&#22914;&#26524;&#20004;&#20010;&#25991;&#20214;&#21517;&#31216;&#37117;&#23384;&#22312;&#65292;&#37027;&#20040;kbuild&#25991;&#20214;&#23558;&#20250;&#34987;&#35835;&#21462;
    </p>
  </body>
</html></richcontent>
<node CREATED="1468311504627" ID="ID_763019342" MODIFIED="1491198992567" TEXT="&#x7b2c;&#x4e09;&#x90e8;&#x5206;">
<node CREATED="1468302210735" ID="ID_576654895" MODIFIED="1468305044759">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <ol>
      <li>
        &#20869;&#23884;&#30340;&#23545;&#35937;&#30446;&#26631;
      </li>
    </ol>
    <p>
      kbuild&#22312;$(obj-y)&#20013;&#20026;vmlinux&#25351;&#23450;&#23545;&#35937;&#30446;&#26631;&#25991;&#20214;
    </p>
    <p>
      &#21015;&#34920;&#12290;&#36825;&#20010;&#21015;&#34920;&#20381;&#36182;&#20110;&#20869;&#26680;&#30340;&#37197;&#32622;&#12290;
    </p>
    <p>
      &#22312;$(obj-y)&#24403;&#20013;&#30340;&#25991;&#20214;&#30340;&#39034;&#24207;&#38750;&#24120;&#22320;&#37325;&#35201;
    </p>
    <p>
      &#38142;&#25509;&#30340;&#39034;&#24207;&#38750;&#24120;&#37325;&#35201;&#65292;&#22240;&#20026;&#26576;&#20123;&#20989;&#25968;(module_init() / __initcall)
    </p>
    <p>
      &#23558;&#20250;&#22312;boot&#38454;&#27573;&#25353;&#29031;&#20182;&#20204;&#20986;&#29616;&#30340;&#39034;&#24207;&#34987;&#35843;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468305217480" ID="ID_1440319413" MODIFIED="1468307441825">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2. &#21487;&#21152;&#36733;&#30340;&#27169;&#22359;&#30446;&#26631;
    </p>
    <p>
      $(obj-m) &#25351;&#23450;&#37027;&#20123;&#21487;&#20197;&#34987;&#26500;&#24314;&#25104;&#20026;&#21487;&#21152;&#36733;&#30340;
    </p>
    <p>
      &#27169;&#22359;&#30340;&#30446;&#26631;&#25991;&#20214;&#12290;
    </p>
    <p>
      &#19968;&#20010;&#27169;&#22359;&#21487;&#20197;&#36890;&#36807;&#32534;&#35793;&#19968;&#20010;&#25110;&#32773;&#26159;&#22810;&#20010;&#25991;&#20214;&#26469;&#26500;&#24314;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#26159;&#19968;&#20010;&#25991;&#20214;&#65292;&#21017;&#35813;&#25991;&#20214;&#21487;&#20197;&#31616;&#21333;&#22320;&#28155;&#21152;&#21040;$(obj-m)
    </p>
    <p>
      Example:
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#drivers/isdn/i4l/Makefile
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;obj-$(CONFIG_ISDN_PPP_BSDCOMP) += isdn_bsdcomp.o
    </p>
    <p>
      &#22914;&#26524;&#20869;&#26680;&#27169;&#22359;&#26159;&#30001;&#22810;&#20010;&#25991;&#20214;&#26500;&#24314;&#23436;&#25104;&#30340;&#65292;&#24212;&#35813;&#22914;&#19979;
    </p>
    <p>
      Example:
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#drivers/isdn/i4l/Makefile
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;obj-$(CONFIG_ISDN_I4L) += isdn.o
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;isdn-y := isdn_net_lib.o isdn_v110.o isdn_common.o
    </p>
    <p>
      &#22312;&#36825;&#20010;&#20363;&#23376;&#24403;&#20013;&#27169;&#22359;&#30340;&#21517;&#23383;&#26159;isdn,&#30001;isdn-y&#25351;&#23450;&#38656;&#35201;&#32534;&#35793;&#30340;&#25991;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468307455505" ID="ID_86765280" MODIFIED="1468309030234">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3. &#24211;&#25991;&#20214;&#30446;&#26631;
    </p>
    <p>
      &#20063;&#26377;&#21487;&#33021;&#21015;&#20986;&#30446;&#26631;&#25991;&#20214;&#21015;&#34920;&#65292;&#29992;&#20110;&#23558;&#20182;&#20204;&#32534;&#35793;
    </p>
    <p>
      &#36827;&#20837;&#21040;&#24211;&#24403;&#20013;,lib.a.
    </p>
    <p>
      &#25152;&#26377;&#30340;&#36890;&#36807;lib-y&#25351;&#23450;&#30340;&#23545;&#35937;&#25991;&#20214;&#23558;&#20250;&#34987;&#32534;&#35793;&#36827;&#20837;&#21040;
    </p>
    <p>
      &#37027;&#20010;&#30446;&#24405;&#19979;&#38754;&#30340;&#24211;
    </p>
    <p>
      &#21253;&#21547;&#22312;lib-m&#37324;&#38754;&#30340;&#23545;&#35937;&#25991;&#20214;&#20063;&#20250;&#34987;&#21253;&#21547;&#21040;lib.a
    </p>
    <p>
      &#24403;&#20013;&#12290;
    </p>
    <p>
      &#22312;&#30456;&#21516;&#30340;makefile&#25991;&#20214;&#24403;&#20013;&#65292;&#26377;&#21487;&#33021;&#21363;&#21015;&#20986;&#20102;&#32534;&#35793;&#21040;
    </p>
    <p>
      &#20869;&#26680;&#24403;&#20013;&#25991;&#20214;&#21448;&#21015;&#20986;&#20102;&#21487;&#20197;&#32534;&#35793;&#21040;&#24211;&#37324;&#38754;&#30340;&#25991;&#20214;&#12290;
    </p>
    <p>
      &#37027;&#20040;&#36825;&#20010;&#26102;&#20505;&#65292;&#35813;&#30446;&#24405;&#19979;&#38754;&#20250;&#26377;built-in.o&#25991;&#20214;&#21644;lib.a
    </p>
    <p>
      &#25991;&#20214;&#21516;&#26102;&#20986;&#29616;&#12290;
    </p>
    <p>
      lib-y&#34987;&#38480;&#21046;&#20351;&#29992;&#22312;&#22914;&#19979;&#30446;&#24405;lib/ and arch/*/lib
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468309118186" ID="ID_1020075039" MODIFIED="1468309604970">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.&#30446;&#24405;&#25195;&#25551;
    </p>
    <p>
      &#19968;&#20010;makefile&#25991;&#20214;&#21482;&#26159;&#36127;&#36131;&#32534;&#35793;&#23427;&#25152;&#22312;&#30340;&#30446;&#24405;&#30340;&#23545;&#35937;&#65292;
    </p>
    <p>
      &#23376;&#30446;&#24405;&#37324;&#38754;&#30340;&#25991;&#20214;&#24212;&#35813;&#30001;&#23376;&#30446;&#24405;&#37324;&#38754;&#30340;makefile&#25991;&#20214;
    </p>
    <p>
      &#26469;&#36127;&#36131;&#12290;
    </p>
    <p>
      271&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      &#160;272&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#fs/Makefile
    </p>
    <p>
      &#160;273&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;obj-$(CONFIG_EXT2_FS) += ext2/
    </p>
    <p>
      &#21487;&#20197;&#36890;&#36807;&#32473;obj-y&#25110;&#32773;obj-m&#22797;&#21046;&#36335;&#24452;&#21517;&#31216;&#26469;&#35753;kbuild
    </p>
    <p>
      &#36827;&#20837;&#30446;&#24405;&#12290;
    </p>
    <p>
      &#20351;&#29992;CONFIG_&#30340;&#22909;&#22788;&#26159;&#21487;&#20197;&#22312;&#19981;&#38656;&#35201;&#30340;&#26102;&#20505;&#36339;&#36807;&#35813;&#30446;&#24405;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468309618427" ID="ID_812318928" MODIFIED="1468311265423">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      5. &#32534;&#35793;&#30340;flag
    </p>
    <p>
      ccflags-y, asflags-y and ldflags-y
    </p>
    <p>
      subdir-ccflags-y, subdir-asflags-y
    </p>
    <p>
      &#20197;subdir-&#24320;&#22836;&#30340;&#26631;&#24535;&#20351;&#24471;kbuild&#22312;&#24403;&#21069;&#30446;&#24405;&#36824;&#26159;&#23376;&#30446;&#24405;
    </p>
    <p>
      &#37117;&#21463;&#21040;&#36825;&#20123;&#26631;&#24535;&#30340;&#24433;&#21709;&#12290;
    </p>
    <p>
      CFLAGS_$@, AFLAGS_$@
    </p>
    <p>
      &#20197;&#19978;&#30340;&#20004;&#20010;&#26631;&#24535;&#20301;&#21482;&#26159;&#20316;&#29992;&#20110;&#24403;&#21069;&#30340;Makefile
    </p>
    <p>
      337&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      &#160;338&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;# drivers/scsi/Makefile
    </p>
    <p>
      &#160;339&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CFLAGS_aha152x.o =&#160;&#160;&#160;-DAHA152X_STAT -DAUTOCONF
    </p>
    <p>
      &#160;340&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CFLAGS_gdth.o&#160;&#160;&#160;&#160;= # -DDEBUG_GDTH=2 -D__SERIAL__ -D__COM2__ \
    </p>
    <p>
      &#160;341&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;-DGDTH_STATISTICS
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468311760892" ID="ID_167108045" MODIFIED="1468312077220">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      6. &#20381;&#36182;&#36861;&#36394;
    </p>
    <p>
      kbuild&#20250;&#36861;&#36394;&#19979;&#21015;&#30340;&#20381;&#36182;&#20851;&#31995;
    </p>
    <ol>
      <li>
        &#25152;&#26377;&#24517;&#39035;&#30340;&#25991;&#20214;
      </li>
      <li>
        &#25152;&#26377;&#24517;&#39035;&#25991;&#20214;&#37324;&#38754;&#30340;CONFIG_&#36873;&#39033;
      </li>
      <li>
        &#29992;&#20110;&#32534;&#35793;&#30446;&#26631;&#30340;&#21629;&#20196;&#34892;
      </li>
    </ol>
  </body>
</html></richcontent>
</node>
<node CREATED="1468312308164" ID="ID_431558417" MODIFIED="1491201811651">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      7.&#29305;&#27530;&#35268;&#21017;
    </p>
    <p>
      &#24403;kbuild&#26080;&#27861;&#25552;&#20379;&#38656;&#35201;&#30340;&#25903;&#25345;&#30340;&#26102;&#20505;&#65292;&#29305;&#27530;&#30340;&#35268;&#21017;&#23601;&#20250;&#34987;&#21551;&#29992;&#12290;
    </p>
    <p>
      &#27604;&#22914;&#22312;&#32534;&#35793;&#30340;&#36807;&#31243;&#24403;&#20013;&#29983;&#25104;&#22836;&#25991;&#20214;&#25110;&#32773;&#26681;&#25454;&#26576;&#20010;&#29305;&#27530;&#30340;&#31995;&#32479;&#26550;&#26500;
    </p>
    <p>
      &#26469;&#37325;&#26032;&#32452;&#32455;boot image&#12290;
    </p>
    <p>
      special rules&#26159;&#20197;&#27491;&#24120;&#30340;make rules&#26469;&#20070;&#20889;&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1468312854492" ID="ID_1926206255" MODIFIED="1468313351031">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#24403;&#20070;&#20889;special rules&#30340;&#26102;&#20505;&#65292;&#20004;&#31181;&#21464;&#37327;&#20250;&#34987;&#20351;&#29992;&#21040;
    </p>
    <p>
      $(src)&#26159;&#19968;&#20010;&#30456;&#23545;&#30340;&#36335;&#24452;&#65292;&#25351;&#21521;&#23384;&#25918;makefile&#25991;&#20214;&#30340;&#20301;&#32622;
    </p>
    <p>
      $(obj)&#26159;&#19968;&#20010;&#30456;&#23545;&#36335;&#24452;&#65292;&#29992;&#20110;&#25351;&#21521;&#30446;&#26631;&#20445;&#23384;&#30340;&#36335;&#24452;
    </p>
    <p>
      &#160;390&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      &#160;391&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#drivers/scsi/Makefile
    </p>
    <p>
      &#160;392&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(obj)/53c8xx_d.h: $(src)/53c7,8xx.scr $(src)/script_asm.pl
    </p>
    <p>
      &#160;393&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(CPP) -DCHIP=810 - &lt; $&lt; | ... $(src)/script_asm.pl
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468313658405" ID="ID_1452523954" MODIFIED="1491199006896">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      8.$(CC)&#25903;&#25345;&#30340;&#20989;&#25968;
    </p>
    <p>
      &#20869;&#26680;&#21487;&#33021;&#20250;&#34987;&#19981;&#21516;&#29256;&#26412;&#30340;$(CC)&#32534;&#35793;
    </p>
    <p>
      kbuild&#20250;&#25552;&#20379;&#19968;&#20123;&#22522;&#26412;&#30340;&#25903;&#25345;&#20989;&#25968;&#29992;&#26469;&#26816;&#26597;$(CC)&#30340;&#26377;&#25928;&#30340;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
<node CREATED="1468313946309" ID="ID_1865887727" MODIFIED="1468314094675">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.as-option
    </p>
    <p>
      &#29992;&#20110;&#26816;&#26597;$(CC)&#26159;&#21542;&#25903;&#25345;&#32473;&#23450;&#30340;&#36873;&#39033;&#65292;&#22914;&#26524;&#31532;&#19968;&#20010;&#36873;&#39033;&#19981;&#25903;&#25345;
    </p>
    <p>
      &#37027;&#20040;&#31532;&#20108;&#20010;&#21487;&#36873;&#39033;&#21487;&#33021;&#20250;&#34987;&#25351;&#23450;&#12290;
    </p>
    <p>
      429&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      430&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/sh/Makefile
    </p>
    <p>
      431&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cflags-y += $(call as-option,-Wa$(comma)-isa=$(isa-y),)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468314173085" ID="ID_416715775" MODIFIED="1468314218298">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.cc-ldoption
    </p>
    <p>
      &#29992;&#20110;&#27979;&#35797;&#24403;&#36827;&#34892;&#38142;&#25509;&#21160;&#20316;&#30340;&#26102;&#20505;&#65292;$(CC)&#26159;&#21542;&#20250;&#25903;&#25345;
    </p>
    <p>
      &#26576;&#20123;&#36873;&#39033;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468314261685" ID="ID_828013567" MODIFIED="1468314712987">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3. as-instr
    </p>
    <p>
      &#29992;&#20110;&#26816;&#26597;&#27719;&#32534;&#22120;&#26159;&#21542;&#25903;&#25345;&#26576;&#20010;&#25351;&#20196;&#65292;
    </p>
    <p>
      &#24182;&#19988;&#36755;&#20986;&#36873;&#39033;1&#25110;&#32773;&#26159;&#36873;&#39033;2
    </p>
    <p>
      
    </p>
    <p>
      cc-option
    </p>
    <p>
      &#29992;&#20110;&#26816;&#26597;$(CC)&#26159;&#21542;&#25903;&#25345;&#26576;&#20010;&#20855;&#20307;&#30340;&#36873;&#39033;
    </p>
    <p>
      462&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      463&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/x86/Makefile
    </p>
    <p>
      464&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cflags-y += $(call cc-option,-march=pentium-mmx,-march=i586)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468314807333" ID="ID_1576238347" MODIFIED="1468314941945">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.cc-option-yn
    </p>
    <p>
      &#29992;&#20110;&#26816;&#26597;$(CC)&#26159;&#21542;&#25903;&#25345;&#26576;&#19968;&#20010;&#36873;&#39033;&#65292;&#22914;&#26524;&#25903;&#25345;&#35813;&#36873;&#39033;&#30340;&#35805;
    </p>
    <p>
      &#21017;&#36820;&#22238;y,&#21542;&#21017;&#36820;&#22238;n
    </p>
    <p>
      476&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      477&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/ppc/Makefile
    </p>
    <p>
      478&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;biarch := $(call cc-option-yn, -m32)
    </p>
    <p>
      479&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;aflags-$(biarch) += -a32
    </p>
    <p>
      480&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;cflags-$(biarch) += -m32
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468317432694" ID="ID_125544140" MODIFIED="1468317546815">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      5.cc-cross-prefix
    </p>
    <p>
      &#35813;&#20989;&#25968;&#29992;&#20110;&#26816;&#27979;&#26159;&#21542;&#23384;&#22312;&#32473;&#23450;&#30340;&#21069;&#32512;&#30340;$(CC)&#23384;&#22312;&#65292;
    </p>
    <p>
      &#22810;&#20010;&#32473;&#23450;&#30340;&#21069;&#32512;&#20043;&#38388;&#21487;&#20197;&#20351;&#29992;&#31354;&#26684;&#26469;&#20998;&#38548;
    </p>
    <p>
      578&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      579&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/m68k/Makefile
    </p>
    <p>
      580&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifneq ($(SUBARCH),$(ARCH))
    </p>
    <p>
      581&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifeq ($(CROSS_COMPILE),)
    </p>
    <p>
      582&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;CROSS_COMPILE := $(call cc-cross-prefix, m68k-linux-gnu-)
    </p>
    <p>
      583&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;endif
    </p>
    <p>
      584&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;endif
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1468317622574" ID="ID_1729345163" MODIFIED="1490083887802" TEXT="&#x7b2c;&#x56db;&#x90e8;&#x5206;:&#x7b80;&#x5355;&#x7684;&#x4e3b;&#x673a;&#x7a0b;&#x5e8f;&#x652f;&#x6301;">
<node CREATED="1468822940777" ID="ID_1155308987" MODIFIED="1468822965219">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#36807;&#23450;&#20041;hostprogs-y&#34920;&#26126;&#20027;&#26426;&#31243;&#24207;&#30340;&#25991;&#20214;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468317870159" FOLDED="true" ID="ID_204563732" MODIFIED="1491199315043" TEXT="&#x7b2c;&#x4e94;&#x90e8;&#x5206;:kbuild clean&#x5de5;&#x5177;">
<node CREATED="1468318600959" ID="ID_1836860729" MODIFIED="1468318959116">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      $(clean-files)
    </p>
    <p>
      &#36890;&#36807;&#35813;&#21464;&#37327;&#25351;&#23450;&#26576;&#20123;&#25991;&#20214;&#65292;&#21487;&#20197;&#23545;&#20854;&#36827;&#34892;&#21024;&#38500;
    </p>
    <p>
      764&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      &#160;765&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#scripts/package/Makefile
    </p>
    <p>
      &#160;766&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;clean-dirs := $(objtree)/debian/
    </p>
    <p>
      $(no-clean-files)
    </p>
    <p>
      &#35813;&#21464;&#37327;&#21487;&#20197;&#25351;&#23450;&#19981;&#38656;&#35201;&#34987;&#21024;&#38500;&#30340;&#25991;&#20214;&#65292;&#20294;&#26159;&#35813;&#21464;&#37327;
    </p>
    <p>
      &#24517;&#39035;&#22312;&#39030;&#23618;&#30446;&#24405;&#30340;kbuild&#24403;&#20013;&#25351;&#23450;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468319498824" ID="ID_810252003" MODIFIED="1468319629450">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36890;&#24120;kbuild&#20351;&#29992; &quot;obj-* := dir/&quot;
    </p>
    <p>
      &#26469;&#25351;&#23450;&#38656;&#35201;&#36882;&#24402;&#30340;&#30446;&#24405;&#65292;&#20294;&#26159;&#22312;&#26576;&#20123;&#26550;&#26500;&#30340;makefile&#20013;&#36825;&#20010;&#21151;&#33021;
    </p>
    <p>
      &#19981;&#33021;&#28385;&#36275;&#38656;&#35201;,&#25152;&#20197;&#22312;&#25191;&#34892;make clean&#30340;&#26102;&#20505;&#38656;&#35201;&#31934;&#30830;&#25351;&#23450;
    </p>
    <p>
      subdir
    </p>
    <p>
      782&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      783&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/x86/boot/Makefile
    </p>
    <p>
      784&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;subdir- := compressed/
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468337897909" ID="ID_697366277" MODIFIED="1491199016586" TEXT="&#x7b2c;&#x516d;&#x90e8;&#x5206;:&#x67b6;&#x6784;&#x76f8;&#x5173;&#x7684;makefile">
<node CREATED="1468338050509" ID="ID_1613029233" MODIFIED="1491199026263">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      arch/$(ARCH)/Makefile
    </p>
    <p>
      &#23450;&#20041;&#20102;&#19968;&#20123;&#21464;&#37327;&#65292;&#24182;&#19988;&#35774;&#32622;&#20102;&#19968;&#20123;&#30446;&#26631;&#65292;
    </p>
    <p>
      &#24403;kbuild&#24320;&#22987;&#25191;&#34892;&#30340;&#26102;&#20505;&#65292;&#19979;&#38754;&#30340;&#27493;&#39588;&#24320;&#22987;&#32039;&#38543;&#20854;&#21518;
    </p>
    <p>
      1.&#23558;&#20869;&#26680;&#30340;&#37197;&#32622;&#25918;&#32622;&#21040;.config&#25991;&#20214;&#24403;&#20013;
    </p>
    <p>
      2.&#23558;&#20869;&#26680;&#30340;&#29256;&#26412;&#23384;&#20648;&#21040;&#25991;&#20214;include/linux/version.h
    </p>
    <p>
      3.&#26356;&#26032;&#25152;&#26377;&#30340;&#24517;&#39035;&#26465;&#20214;:
    </p>
    <p>
      &#28508;&#22312;&#30340;&#24517;&#39035;&#26465;&#20214;&#22312;arch/$(ARCH)/Makefile&#20013;&#34987;&#25351;&#23450;
    </p>
    <p>
      4.&#36882;&#24402;&#19979;&#38477;&#21040;&#25152;&#26377;&#30340;&#30001;init-* core* drivers-* net-* libs-*
    </p>
    <p>
      &#26631;&#35782;&#30340;&#30446;&#24405;&#24403;&#20013;&#65292;&#24182;&#19988;&#32534;&#35793;&#25152;&#26377;&#30340;&#30446;&#26631;------&#19978;&#38754;&#30340;&#25152;&#26377;&#30340;
    </p>
    <p>
      &#21464;&#37327;&#30340;&#20540;&#37117;&#20250;&#22312;arch/$(ARCH)/Makefile&#25991;&#20214;&#24403;&#20013;&#34987;&#25193;&#23637;
    </p>
    <p>
      5.&#25152;&#26377;&#30340;object&#25991;&#20214;&#37117;&#34987;&#38142;&#25509;&#65292;&#24182;&#19988;&#26368;&#21518;&#29983;&#25104;&#30340;vmlinux&#25991;&#20214;
    </p>
    <p>
      &#34987;&#25918;&#32622;&#22312;object tree&#30340;&#26681;&#30446;&#24405;&#19979;&#38754;&#65292;&#26368;&#20808;&#34987;&#38142;&#25509;&#30340;object&#25991;&#20214;
    </p>
    <p>
      &#30001;head-y&#25351;&#23450;&#65292;&#30001;arch/$(ARCH)/Makefile&#25991;&#20214;&#36827;&#34892;&#36171;&#20540;&#12290;
    </p>
    <p>
      6.&#26368;&#32456;&#65292;&#30001;&#20855;&#20307;&#30340;&#26550;&#26500;&#25351;&#23450;&#30340;&#37096;&#20998;&#20250;&#20570;&#19968;&#20123;&#21518;&#22788;&#29702;&#65292;&#28982;&#21518;&#32534;&#35793;&#20986;
    </p>
    <p>
      &#26368;&#32456;&#30340;bootimage-------&#36825;&#21253;&#25324;&#24314;&#31435;boot&#35760;&#24405;&#65292;&#20934;&#22791;initrd images
    </p>
    <p>
      
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
<node CREATED="1468339624384" ID="ID_1431066623" MODIFIED="1491199206052" TEXT="1.&#x8bbe;&#x7f6e;&#x53d8;&#x91cf;&#x8c03;&#x6574;&#x5bf9;&#x67b6;&#x6784;&#x7684;&#x6784;&#x5efa;">
<node CREATED="1468339776327" ID="ID_862426094" MODIFIED="1468339817481">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LDFLAGS&#160;&#160;&#160;&#160;&#160;Generic $(LD) options
    </p>
    <p>
      &#23545;&#20110;&#25152;&#26377;&#34987;&#21796;&#36215;&#20351;&#29992;&#30340;&#38142;&#25509;&#22120;&#37117;&#36866;&#29992;&#30340;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468339846463" ID="ID_1185250536" MODIFIED="1468339946626">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LDFLAGS_MODULE
    </p>
    <p>
      &#29992;&#20110;&#38142;&#25509;&#22120;&#22312;&#38142;&#25509;&#27169;&#22359;&#30340;&#26102;&#20505;&#20351;&#29992;&#30340;&#36873;&#39033;
    </p>
    <p>
      &#40664;&#35748;&#30340;&#36873;&#39033;&#26159;&quot;-r&quot;&#20195;&#34920;&#37325;&#23450;&#20301;&#36755;&#20986;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468373410256" ID="ID_1569791204" MODIFIED="1468373459105">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      LDFLAGS_vmlinux
    </p>
    <p>
      &#24403;&#38142;&#25509;&#26368;&#32456;&#30340;vmlinux&#38236;&#20687;&#30340;&#26102;&#20505;&#65292;&#20351;&#29992;&#30340;
    </p>
    <p>
      &#38142;&#25509;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468373861729" ID="ID_257233508" MODIFIED="1468373966604">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      OBJCOPYFLAGS
    </p>
    <p>
      &#24403;&#35843;&#29992;$(call if_changed,objcopy)&#30340;&#26102;&#20505;&#65292;&#19978;&#38754;&#30340;&#21464;&#37327;
    </p>
    <p>
      &#25351;&#23450;&#30340;&#36873;&#39033;&#23558;&#20250;&#34987;&#20351;&#29992;
    </p>
    <p>
      872&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      873&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/s390/Makefile
    </p>
    <p>
      874&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;OBJCOPYFLAGS := -O binary
    </p>
    <p>
      875
    </p>
    <p>
      876&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/s390/boot/Makefile
    </p>
    <p>
      877&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(obj)/image: vmlinux FORCE
    </p>
    <p>
      878&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(call if_changed,objcopy)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468374087313" ID="ID_1977032466" MODIFIED="1468374156216">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_AFLAGS
    </p>
    <p>
      &#27719;&#32534;&#22120;&#30340;&#36873;&#39033;&#65292;&#39030;&#23618;&#30340;makefile&#23545;&#20854;&#20570;&#20102;&#25193;&#23637;&#65292;
    </p>
    <p>
      &#27599;&#20010;&#26550;&#26500;&#24213;&#19979;&#20855;&#20307;&#30340;makefile&#23545;&#20854;&#20570;&#20102;&#20462;&#25913;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468374185560" ID="ID_898074996" MODIFIED="1468374187548" TEXT="KBUILD_CFLAGS"/>
<node CREATED="1468374329961" ID="ID_1934722852" MODIFIED="1468374360236">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_AFLAGS_KERNEL
    </p>
    <p>
      &#27719;&#32534;&#22120;&#30340;&#36873;&#39033;&#65292;&#29992;&#20110;&#32534;&#35793;&#20869;&#26680;&#20869;&#23884;&#30340;&#20195;&#30721;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468374381425" ID="ID_1894800286" MODIFIED="1468374417267">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_AFLAGS_MODULE
    </p>
    <p>
      &#27719;&#32534;&#22120;&#36873;&#39033;&#65292;&#29992;&#20110;&#32534;&#35793;&#20869;&#26680;&#27169;&#22359;&#65292;
    </p>
    <p>
      &#25351;&#23450;&#36319;&#20855;&#20307;&#30340;&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#30340;&#29305;&#24615;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468374451961" ID="ID_1889110162" MODIFIED="1468374455545" TEXT="KBUILD_CFLAGS_KERNEL"/>
<node CREATED="1468374464849" ID="ID_1382600643" MODIFIED="1468374529835" TEXT="KBUILD_CFLAGS_MODULE"/>
<node CREATED="1468374549233" ID="ID_1680091953" MODIFIED="1468374551571" TEXT="KBUILD_LDFLAGS_MODULE"/>
<node CREATED="1468374574713" ID="ID_1402116796" MODIFIED="1468374679527">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      KBUILD_ARFLAGS
    </p>
    <p>
      &#29992;&#20110;&#25171;&#21253;&#21629;&#20196;$(AR)&#30340;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468374699192" ID="ID_533615964" MODIFIED="1468374757680">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      ARCH_CPPFLAGS, ARCH_AFLAGS, ARCH_CFLAGS
    </p>
    <p>
      &#21487;&#20197;&#29992;&#26469;&#25351;&#23450;&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#30340;&#36873;&#39033;&#65292;&#21487;&#20197;&#29992;&#26469;&#35206;&#30422;KBUILD_
    </p>
    <p>
      &#30456;&#20851;&#30340;&#36873;&#39033;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1468375391513" ID="ID_1413507409" MODIFIED="1468375631385">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &quot;archheaders: rule&quot;
    </p>
    <p>
      &#36825;&#20010;&#30446;&#26631;&#21644;&#35268;&#21017;&#34987;&#29992;&#26469;&#29983;&#25104;&#24517;&#35201;&#30340;&#22836;&#25991;&#20214;&#65292;&#20174;&#32780;&#21487;&#20197;&#23433;&#35013;&#21040;
    </p>
    <p>
      &#29992;&#25143;&#31354;&#38388;&#24403;&#20013;&#21435;(&#36890;&#36807;&quot;make header_install&quot;&#21629;&#20196;&#25110;&#32773;&#26159;
    </p>
    <p>
      &quot;make headers_install_all&quot;&#21629;&#20196;)
    </p>
    <p>
      &#35813;&#30446;&#26631;&#21644;&#35268;&#21017;&#24517;&#39035;&#21487;&#20197;&#36816;&#34892;&#22312;&#27809;&#26377;&#36827;&#34892;&#37197;&#32622;&#30340;&#28304;&#20195;&#30721;&#26641;&#19979;&#25110;&#32773;&#26159;
    </p>
    <p>
      &#20063;&#21487;&#20197;&#36816;&#34892;&#22312;&#24403;&#37197;&#32622;&#26159;&#25351;&#21521;&#20854;&#20182;&#31867;&#22411;&#30340;&#20307;&#31995;&#32467;&#26500;&#30340;&#26102;&#20505;&#12290;
    </p>
    <p>
      &#23427;&#36816;&#34892;&#22312; &quot;make archprepare&quot;&#20043;&#21069;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468375636337" ID="ID_116631783" MODIFIED="1468375769052">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &quot;archprepare: rule&quot;
    </p>
    <p>
      &#35813;&#30446;&#26631;&#35268;&#21017;&#29992;&#20110;&#22312;&#36882;&#24402;&#19979;&#38477;&#21040;&#23376;&#30446;&#24405;&#20043;&#21069;&#65292;&#21015;&#20986;&#24517;&#35201;&#30340;
    </p>
    <p>
      &#26465;&#20214;&#12290;&#22914;&#19979;&#38754;&#30340;&#20363;&#23376;:
    </p>
    <p>
      982&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      983&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/arm/Makefile
    </p>
    <p>
      984&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;archprepare: maketools
    </p>
    <p>
      &#26465;&#20214;&#30446;&#26631;&#25991;&#20214;maketools&#23558;&#20250;&#34987;&#39318;&#20808;&#22788;&#29702;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468376016002" ID="ID_1402505665" MODIFIED="1468376299921">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>head-y, init-y, core-y, libs-y, drivers-y, net-y </b>
    </p>
    <p>
      head-y &#25351;&#20986;&#39318;&#20808;&#34987;&#38142;&#25509;&#21040;vmlinux&#24403;&#20013;&#30340;object
    </p>
    <p>
      libs-y &#25351;&#20986;lib.a&#21387;&#32553;&#25991;&#20214;&#21487;&#20197;&#34987;&#25918;&#32622;&#30340;&#20301;&#32622;
    </p>
    <p>
      &#36825;&#20123;&#21464;&#37327;&#19968;&#33324;&#25918;&#32622;&#30340;&#20301;&#32622;:
    </p>
    <p>
      $(head-y) $(init-y) $(core-y), $(libs-y), $(drivers-y) $(net-y)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468377165499" FOLDED="true" ID="ID_735254119" MODIFIED="1475896811700">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20855;&#20307;&#30340;&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#30340;boot&#38236;&#20687;
    </p>
    <p>
      &#19968;&#20010;&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#30340;Makefile&#20250;&#23450;&#20041;&#19968;&#20123;&#30446;&#26631;&#21033;&#29992;vmlinux&#25991;&#20214;&#65292;&#21387;&#32553;&#35813;&#25991;&#20214;&#65292;
    </p>
    <p>
      &#23558;&#23427;&#25918;&#32622;&#22312;bootstrapping code,&#28982;&#21518;&#23558;&#25991;&#20214;&#25335;&#36125;&#25918;&#22312;&#26576;&#20010;&#20301;&#32622;&#12290;
    </p>
    <p>
      &#36825;&#38656;&#35201;&#19968;&#31995;&#21015;&#30340;&#23433;&#35013;&#21629;&#20196;&#65292;&#23454;&#38469;&#30340;&#30446;&#26631;&#22312;&#19981;&#21516;&#30340;&#20307;&#31995;&#26550;&#26500;&#37324;&#38754;&#20063;&#26159;&#19981;&#19968;&#26679;&#30340;&#12290;
    </p>
    <p>
      &#23558;&#19968;&#20123;&#39069;&#22806;&#30340;&#22788;&#29702;&#25918;&#32622;&#22312;arch/$(ARCH)/boot&#30446;&#24405;&#19979;&#38754;&#26159;&#27604;&#36739;&#36890;&#29992;&#30340;&#26041;&#24335;
    </p>
  </body>
</html></richcontent>
<node CREATED="1468377928427" ID="ID_782242606" MODIFIED="1468378718284">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.kbuild&#19981;&#25552;&#20379;&#20219;&#20309;&#26234;&#33021;&#30340;&#26469;&#32534;&#35793;&#20301;&#20110;boot&#30446;&#24405;&#19979;&#38754;&#30340;
    </p>
    <p>
      &#30446;&#26631;&#65292;&#25152;&#20197;&#38656;&#35201;&#22312;arch/$(ARCH)/Makefile&#20013;&#20154;&#24037;&#35843;&#29992;
    </p>
    <p>
      &#20301;&#20110;boot&#24403;&#20013;&#30340;makefile
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468378724508" ID="ID_300306346" MODIFIED="1468378833008">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#24182;&#27809;&#26377;&#19968;&#20123;&#20855;&#20307;&#30340;&#35268;&#21017;&#26469;&#32473;&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#30340;&#30446;&#26631;&#36827;&#34892;
    </p>
    <p>
      &#21629;&#21517;&#65292;&#25152;&#20197;&#38656;&#35201;&#23450;&#20041;<b>$(archhelp</b>)&#21464;&#37327;&#65292;&#29992;&#20110;&#22312;
    </p>
    <p>
      make help&#30340;&#26102;&#20505;&#21015;&#20030;&#20986;&#36319;&#20855;&#20307;&#30340;&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#30340;&#30446;&#26631;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468379735037" ID="ID_1836453298" MODIFIED="1468380363890">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#39044;&#22788;&#29702;&#38142;&#25509;&#33050;&#26412;
    </p>
    <p>
      &#24403;vmlinux image&#34987;&#26500;&#24314;&#30340;&#26102;&#20505;&#65292;arch/$(ARCH)/kernel/vmlinux.lds
    </p>
    <p>
      &#33050;&#26412;&#20250;&#34987;&#35843;&#29992;&#65292;&#35813;&#33050;&#26412;&#26159;&#22312;&#20301;&#20110;&#35813;&#30446;&#24405;&#19979;&#38754;&#30340;vmlinux.lds.S&#25991;&#20214;&#30340;&#39044;&#22788;&#29702;
    </p>
    <p>
      &#30340;&#21464;&#37327;&#12290;
    </p>
    <p>
      &#160;kbuild knows .lds files and includes a rule *lds.S -&gt; *lds.
    </p>
    <p>
      
    </p>
    <p>
      1209&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      1210&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/x86/kernel/Makefile
    </p>
    <p>
      1211&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;always := vmlinux.lds
    </p>
    <p>
      1212
    </p>
    <p>
      1213&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#Makefile
    </p>
    <p>
      1214&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;export CPPFLAGS_vmlinux.lds += -P -C -U$(ARCH)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1468380767766" ID="ID_58595401" MODIFIED="1491199325469">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#19971;&#37096;&#20998;:
    </p>
    <p>
      Kbuild syntax for exported headers
    </p>
    <p>
      &#20869;&#26680;&#21253;&#21547;&#19968;&#31995;&#21015;&#30340;&#26292;&#38706;&#32473;&#29992;&#25143;&#31354;&#38388;&#30340;&#22836;&#25991;&#20214;&#65292;&#26377;&#20123;&#22836;&#25991;&#20214;
    </p>
    <p>
      &#22312;&#26292;&#38706;&#32473;&#29992;&#25143;&#31354;&#38388;&#30340;&#26102;&#20505;&#38656;&#35201;&#20570;&#19968;&#20123;&#39044;&#22788;&#29702;&#12290;
    </p>
    <p>
      &#39044;&#22788;&#29702;&#20570;&#30340;&#20107;&#24773;:
    </p>
    <p>
      1.&#20002;&#24323;&#20869;&#26680;&#30340;&#19968;&#20123;&#27880;&#37322;
    </p>
    <p>
      2.&#20002;&#24323;Include linux/compile.h
    </p>
    <p>
      3.&#20002;&#24323;&#25991;&#20214;&#24403;&#20013;&#36319;&#20869;&#26680;&#20869;&#37096;&#30456;&#20851;&#30340;section(&#30001;&#23439;&#23450;&#20041;ifdef __KERNEL__&#20445;&#25252;)
    </p>
    <p>
      &#27599;&#20010;&#30456;&#20851;&#30340;&#30446;&#24405;&#21253;&#21547;&#20102;&#19968;&#20010;&#21517;&#23383;&#21483;&#20570;Kbuild&#30340;&#25991;&#20214;&#65292;&#29992;&#26469;&#25351;&#23450;&#38656;&#35201;&#26292;&#38706;&#30340;&#22836;&#25991;&#20214;
    </p>
    <p>
      <b>&#19979;&#38754;&#35828;&#26126;Kbuild&#25991;&#20214;&#30340;&#35821;&#27861;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1468386690371" ID="ID_1391839196" MODIFIED="1468386819099">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      header-y
    </p>
    <p>
      &#25351;&#23450;&#38656;&#35201;&#26292;&#38706;&#20986;&#26469;&#30340;&#22836;&#25991;&#20214;&#65292;&#19968;&#33324;&#22320;&#26159;&#19968;&#20010;&#25991;&#20214;&#19968;&#34892;
    </p>
    <p>
      &#20063;&#21487;&#20197;&#25351;&#23450;&#38656;&#35201;&#25195;&#25551;&#30340;&#23376;&#30446;&#24405;&#12290;
    </p>
    <p>
      1257&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      1258&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#include/linux/Kbuild
    </p>
    <p>
      1259&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;header-y += usb/
    </p>
    <p>
      1260&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;header-y += aio_abi.h
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468386959971" ID="ID_1606104328" MODIFIED="1468387094986">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      genhdr-y
    </p>
    <p>
      &#25351;&#23450;&#38656;&#35201;&#34987;&#26292;&#38706;&#30340;&#29983;&#25104;&#30340;&#22836;&#25991;&#20214;&#65292;&#29983;&#25104;&#25991;&#20214;&#27604;&#36739;&#29305;&#27530;
    </p>
    <p>
      &#22240;&#20026;&#20570;'make O=...'&#32534;&#35793;&#30340;&#26102;&#20505;&#23427;&#20204;&#38656;&#35201;&#22312;&#21478;&#19968;&#20010;&#30446;&#24405;&#37324;&#38754;&#34987;&#26597;&#25214;
    </p>
    <p>
      1277&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      1278&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#include/linux/Kbuild
    </p>
    <p>
      1279&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;genhdr-y += version.h
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468387155564" ID="ID_1612756831" MODIFIED="1468387325594">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      destination-y
    </p>
    <p>
      &#24403;&#19968;&#20010;&#20307;&#31995;&#32467;&#26500;&#37324;&#38754;&#26377;&#19968;&#31995;&#21015;&#30340;&#25991;&#20214;&#38656;&#35201;&#34987;&#26292;&#38706;&#21040;
    </p>
    <p>
      &#19981;&#21516;&#30340;&#36335;&#24452;&#19979;&#38754;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#21464;&#37327;&#23601;&#36215;&#21040;&#20102;&#20316;&#29992;&#20102;&#12290;
    </p>
    <p>
      1288&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      1289&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/xtensa/platforms/s6105/include/platform/Kbuild
    </p>
    <p>
      1290&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;destination-y := include/linux
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1468387558732" ID="ID_1386767689" MODIFIED="1468387983032">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      generic-y
    </p>
    <p>
      include/asm-generic&#30446;&#24405;&#37324;&#38754;&#21253;&#21547;&#21508;&#20010;&#20307;&#31995;&#32467;&#26500;&#21487;&#33021;
    </p>
    <p>
      &#37117;&#20250;&#29992;&#21040;&#30340;&#22836;&#25991;&#20214;&#23450;&#20041;&#65292;&#22312;&#21508;&#20010;&#20307;&#31995;&#32467;&#26500;&#30446;&#24405;&#30340;kbuild
    </p>
    <p>
      &#25991;&#20214;&#37324;&#38754;&#21487;&#20197;&#20351;&#29992;&#35813;&#21464;&#37327;&#26469;&#21015;&#20030;&#20986;&#38656;&#35201;&#30340;&#22836;&#25991;&#20214;&#30340;&#21517;&#31216;&#65292;
    </p>
    <p>
      1301&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Example:
    </p>
    <p>
      1302&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;#arch/x86/include/asm/Kbuild
    </p>
    <p>
      1303&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;generic-y += termios.h
    </p>
    <p>
      1304&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;generic-y += rtc.h
    </p>
    <p>
      <b>&#37027;&#20040;&#21015;&#20030;&#20986;&#26469;&#30340;&#25991;&#20214;&#20250;&#34987;&#25918;&#32622;&#22312; arch/$(ARCH)/include/generated/asm&#30446;&#24405;&#19979;&#38754; </b>
    </p>
    <p>
      <b>&#21516;&#26102;&#38656;&#35201;&#26292;&#38706;&#32473;&#29992;&#25143;&#30340;&#25991;&#20214;&#34987;&#25918;&#32622;&#22312;usr/include/asm&#19979;&#38754;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1491269996613" FOLDED="true" ID="ID_1842522828" MODIFIED="1499823277661">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>&#21338;&#23458;: Linux&#20869;&#26680;&#26500;&#24314;&#31995;&#32479;&#23398;&#20064;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1491270089493" FOLDED="true" ID="ID_1218138841" MODIFIED="1493219408686">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#dd0d0d">&#31532;&#20108;&#31687;&#65306; &#26500;&#25104;&#26500;&#24314;&#31995;&#32479;&#30340;&#25991;&#20214;</font></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1491270114341" ID="ID_32705983" MODIFIED="1491270179415">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39030;&#23618;Makefile
    </p>
    <p>
      &#25552;&#20379;&#38024;&#23545;&#21508;&#31181;&#30446;&#26631;&#30340;&#25509;&#21475;&#65292;&#19968;&#33324;&#21644;&#23454;&#29616;&#26080;&#20851;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491270183300" ID="ID_723434256" MODIFIED="1491272519493">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24179;&#21488;&#30456;&#20851;&#30340;makefile
    </p>
    <p>
      &#36890;&#24120;&#20301;&#20110;arch/*/&#19979;&#38754;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491272546651" FOLDED="true" ID="ID_1140887424" MODIFIED="1493219406867">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21508;&#31867;&#35268;&#21017;&#25991;&#20214;&#65292;&#20301;&#20110;scripts&#30446;&#24405;&#19979;&#38754;
    </p>
    <p>
      &#21487;&#20197;&#35270;&#20026;&#39030;&#23618;&#30340;makefile&#25991;&#20214;&#30340;&#21508;&#20010;&#25509;&#21475;&#30340;&#23454;&#29616;
    </p>
  </body>
</html></richcontent>
<node CREATED="1491272816737" ID="ID_736280168" MODIFIED="1491272857211">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Kbuild.include
    </p>
    <p>
      &#36890;&#29992;&#30340;&#25991;&#20214;&#65292;&#35813;&#25991;&#20214;&#34987;&#39030;&#23618;&#30340;makefile&#21644;
    </p>
    <p>
      Makefile.build&#25991;&#20214;&#21253;&#21547;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491272867729" ID="ID_1159924594" MODIFIED="1491272933620">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.build
    </p>
    <p>
      &#35813;&#25991;&#20214;&#23450;&#20041;&#20102;&#35768;&#22810;&#32534;&#35793;&#35268;&#21017;&#65292;&#29992;&#20110;&#32534;&#35793;built-in.o,
    </p>
    <p>
      lib.a&#31561;&#32452;&#20214;&#65292;&#36825;&#20123;&#32452;&#20214;&#26500;&#25104;&#20102;linux&#20869;&#26680;&#30340;&#38236;&#20687;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491272948464" ID="ID_1336938693" MODIFIED="1491273087513">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.lib
    </p>
    <p>
      &#35813;&#25991;&#20214;&#32473;&#35768;&#22810;&#30340;&#21464;&#37327;&#36827;&#34892;&#20102;&#36171;&#20540;&#25805;&#20316;&#65292;&#27604;&#22914;
    </p>
    <p>
      obj-y, obj-m, subdir-y, subdir-m&#31561;&#31561;&#12290;&#36825;&#20123;&#21464;&#37327;&#25152;&#20195;&#34920;
    </p>
    <p>
      &#30340;&#25991;&#20214;&#21644;&#30446;&#24405;&#37117;&#26159;&#38656;&#35201;&#36827;&#34892;&#32534;&#35793;&#30340;&#65292;&#21478;&#22806;&#36824;&#23450;&#20041;&#20102;&#19968;&#31995;&#21015;&#30340;cmd,
    </p>
    <p>
      &#29992;&#20110;&#25645;&#37197;if_changed&#31995;&#21015;&#20351;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491273134775" ID="ID_986635715" MODIFIED="1491273348065">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.host
    </p>
    <p>
      &#22312;linux&#20869;&#26680;&#32534;&#35793;&#30340;&#36807;&#31243;&#24403;&#20013;&#65292;&#19981;&#20165;&#38656;&#35201;&#20351;&#29992;gcc, as, ld&#31561;&#24037;&#20855;&#65292;
    </p>
    <p>
      &#36824;&#38656;&#35201;&#20351;&#29992;&#35768;&#22810;&#20854;&#20182;&#30340;&#31243;&#24207;&#26469;&#36827;&#34892;&#22788;&#29702;&#12290;&#27604;&#22914;&#20351;&#29992;fixdep&#26469;&#22788;&#29702;
    </p>
    <p>
      &#20381;&#36182;&#20851;&#31995;&#65292;&#20351;&#29992;conf/gconf/mconf&#31561;&#20247;&#22810;&#24037;&#20855;&#26469;&#35299;&#26512;Kconfig&#37197;&#32622;&#25991;&#20214;
    </p>
    <p>
      &#24403;&#20013;&#30340;&#37197;&#32622;&#20197;&#29983;&#25104;.config&#25991;&#20214;&#12290;&#20351;&#29992;genksyms&#35745;&#31639;&#20869;&#26680;&#23548;&#20986;&#31526;&#21495;&#30340;
    </p>
    <p>
      &#26657;&#39564;&#21644;&#31561;&#31561;&#12290;&#36825;&#20123;&#24037;&#20855;&#30340;&#28304;&#20195;&#30721;&#25918;&#32622;&#22312;scripts&#30340;&#19981;&#21516;&#30446;&#24405;&#19979;&#38754;&#65292;
    </p>
    <p>
      Makefile.host&#23450;&#20041;&#20102;&#22914;&#20309;&#23558;&#23427;&#20204;&#32534;&#35793;&#20986;&#26469;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491273368277" ID="ID_490826990" MODIFIED="1491273399167">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.clean
    </p>
    <p>
      &#35814;&#32454;&#23450;&#20041;&#20102;&#20869;&#26680;&#20570;clean&#21160;&#20316;&#30340;&#19968;&#31995;&#21015;&#30340;&#35268;&#21017;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491273419317" ID="ID_1483708926" MODIFIED="1491273451896">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.headerisnt
    </p>
    <p>
      &#23450;&#20041;&#20102;&#22914;&#20309;&#23433;&#35013;&#20869;&#26680;&#22836;&#25991;&#20214;&#30340;&#19968;&#31995;&#21015;&#35268;&#21017;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491273620395" ID="ID_1817956798" MODIFIED="1491273755725">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.modinst
    </p>
    <p>
      &#23450;&#20041;&#20102;&#22914;&#20309;&#23433;&#35013;&#20869;&#37096;&#27169;&#22359;&#21040;INSTALL_MOD_PATH&#36335;&#24452;&#24403;&#20013;
    </p>
    <p>
      &#21435;&#30340;&#19968;&#20123;&#21015;&#30340;&#35268;&#21017;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491273784403" ID="ID_994533779" MODIFIED="1491273854814">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.modpost
    </p>
    <p>
      &#22312;2.6&#20869;&#26680;&#30340;&#32534;&#35793;&#36807;&#31243;&#24403;&#20013;&#65292;&#27169;&#22359;&#30340;&#32534;&#35793;&#38656;&#35201;&#20004;&#20010;&#38454;&#27573;&#12290;
    </p>
    <p>
      &#31532;&#19968;&#20010;&#38454;&#27573;&#26159;&#23558;&#30456;&#24212;&#30340;&#28304;&#20195;&#30721;&#32534;&#35793;&#25104;.o&#25991;&#20214;&#65292;&#31532;&#20108;&#20010;&#38454;&#27573;
    </p>
    <p>
      &#26159;&#23558;&#23545;&#24212;&#30340;.o&#25991;&#20214;&#38142;&#25509;&#25104;&#27169;&#22359;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491273872569" ID="ID_715202670" MODIFIED="1491274922225">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Makefile.fwinst
    </p>
    <p>
      &#22312;2.6.27&#29256;&#26412;&#20043;&#21069;&#65292;&#39537;&#21160;&#31243;&#24207;&#21644;&#30456;&#24212;&#30340;&#22266;&#20214;&#26159;&#19968;&#21516;&#36827;&#34892;&#32534;&#35793;&#30340;&#65292;
    </p>
    <p>
      &#22312;2.6.27&#29256;&#26412;&#21450;&#20854;&#20043;&#21518;&#30340;&#29256;&#26412;&#65292;drivers/firmware&#34987;&#21333;&#29420;&#21462;&#20986;&#25918;&#32622;
    </p>
    <p>
      &#21040;firmware&#30446;&#24405;&#37324;&#38754;&#65292;&#35813;&#25991;&#20214;&#23601;&#26159;&#23558;firmware&#37324;&#38754;&#30340;&#25991;&#20214;&#23433;&#35013;&#21040;
    </p>
    <p>
      &#25991;&#20214;&#31995;&#32479;&#29305;&#23450;&#30340;&#30446;&#24405;&#19979;&#38754;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1491274945610" ID="ID_428886487" MODIFIED="1491275055740">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20195;&#30721;&#26641;&#19979;&#21508;&#30446;&#24405;&#30340;makefile
    </p>
    <p>
      &#20869;&#26680;&#30340;&#26500;&#24314;&#26159;&#19968;&#20010;&#19981;&#26029;&#36882;&#24402;&#36827;&#34892;&#30340;&#36807;&#31243;&#65292;&#21508;&#20010;
    </p>
    <p>
      &#30446;&#24405;&#19979;&#38754;&#30340;makefile&#25991;&#20214;&#25110;&#32773;&#26159;kbuild&#25991;&#20214;&#36127;&#36131;
    </p>
    <p>
      &#23545;&#26412;&#30446;&#24405;&#19979;&#38754;&#30340;&#25991;&#20214;&#36827;&#34892;&#32534;&#35793;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491276191281" ID="ID_1632312480" MODIFIED="1491276212554">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20195;&#30721;&#26641;&#21508;&#30446;&#24405;&#19979;&#38754;&#30340;&#37197;&#32622;&#25991;&#20214;Kconfig
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1491276991843" FOLDED="true" ID="ID_1298505986" MODIFIED="1493219419405">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#19977;&#31687;&#65306;&#39030;&#23618;Makefile&#30340;&#24635;&#20307;&#26694;&#26550;&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
<node CREATED="1491291292295" FOLDED="true" ID="ID_1401334981" MODIFIED="1493219418209">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24433;&#21709;&#20869;&#26680;&#26500;&#24314;&#21160;&#20316;&#30340;&#26377;&#25968;&#20010;&#21464;&#37327;:
    </p>
    <p>
      &#31532;&#19968;&#32452; KBUILD_SRC KBUILD_OUTPUT skip-makefile
    </p>
    <p>
      &#31532;&#20108;&#32452; mixed-targets config-targets dot-config
    </p>
  </body>
</html></richcontent>
<node CREATED="1491291483053" ID="ID_1630354893" MODIFIED="1491291528992">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#19968;&#32452;&#21464;&#37327;&#26159;&#20026;&#20102;&#25903;&#25345;&#23558;&#32534;&#35793;&#36755;&#20986;&#25991;&#20214;&#25918;&#32622;
    </p>
    <p>
      &#21040;&#21478;&#22806;&#30340;&#30446;&#24405;&#19979;&#38754;&#21435;&#30340;&#30446;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491292160480" FOLDED="true" ID="ID_1388983278" MODIFIED="1493219414661">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31532;&#20108;&#32452;&#21629;&#20196;&#65292;&#26159;&#20026;&#20102;&#36866;&#24212;make&#21629;&#20196;&#25152;&#36319;&#30340;Targets
    </p>
    <p>
      &#25968;&#30446;&#21644;&#31867;&#22411;&#19978;&#30340;&#22810;&#26679;&#24615;&#32780;&#24050;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1491292948363" ID="ID_1252189189" MODIFIED="1491296813503">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      no-dot-config-targets := clean clobber mrproper distclean \
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;help %docs check% coccicheck \
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ubootversion backup
    </p>
    <p>
      config-targets := 0
    </p>
    <p>
      mixed-targets&#160;&#160;:= 0
    </p>
    <p>
      dot-config&#160;&#160;&#160;&#160;&#160;:= 1
    </p>
    <p>
      ifneq ($(filter $(no-dot-config-targets), $(MAKECMDGOALS)),)
    </p>
    <p>
      &#160;&#160;&#160;&#160;ifeq ($(filter-out $(no-dot-config-targets), $(MAKECMDGOALS)),)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;dot-config := 0
    </p>
    <p>
      &#160;&#160;&#160;&#160;endif
    </p>
    <p>
      endif
    </p>
    <p>
      <i><font color="#181de3">ifeq ($(KBUILD_EXTMOD),) </font></i>
    </p>
    <p>
      <i><font color="#181de3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifneq ($(filter config %config,$(MAKECMDGOALS)),) </font></i>
    </p>
    <p>
      <i><font color="#181de3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;config-targets := 1 </font></i>
    </p>
    <p>
      <i><font color="#181de3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ifneq ($(words $(MAKECMDGOALS)),1) </font></i>
    </p>
    <p>
      <i><font color="#181de3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;mixed-targets := 1&#160;&#160;&#28151;&#21512;&#30446;&#26631; </font></i>
    </p>
    <p>
      <i><font color="#181de3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;endif </font></i>
    </p>
    <p>
      <i><font color="#181de3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;endif </font></i>
    </p>
    <p>
      <i><font color="#181de3">endif</font></i>
    </p>
    <p>
      <font color="#d71c1c">&#39030;&#23618;&#30340;makefile 430&#34892;&#24038;&#21491;&#23450;&#20041;&#20102;&#22914;&#19978;&#30340;&#25805;&#20316;&#65292;&#36890;&#36807;&#19968;&#20010;no-dot-config-targets&#21464;&#37327; </font>
    </p>
    <p>
      <font color="#d71c1c">&#23450;&#20041;&#20102;&#25152;&#26377;&#36319;.config&#26080;&#20851;&#30340;&#30446;&#26631;&#38598;&#21512;&#12290;makefile&#20250;&#20998;&#26512;&#20174;make&#21629;&#20196;&#20256;&#20837;&#30340;&#21442;&#25968;&#30446;&#26631; </font>
    </p>
    <p>
      <font color="#d71c1c">&#24403;&#20013;&#26159;&#21542;&#23450;&#20041;&#20102;&#36319;.config&#26377;&#20851;&#30340;&#30446;&#26631;&#65292;&#22914;&#26524;&#26377;&#19988;&#20165;&#26377;&#22312;no-dot-config-targets&#24403;&#20013;&#23450;&#20041;&#30340; </font>
    </p>
    <p>
      <font color="#d71c1c">target,&#37027;&#20040;&#23601;&#23558;dot-config&#23450;&#20041;&#25104;0&#65292;&#21542;&#21017;&#23601;&#35774;&#32622;&#25104;&#40664;&#35748;&#30340;1.</font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491296240812" ID="ID_79779942" MODIFIED="1491296608346">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#2b2a89">ifeq ($(mixed-targets),1) </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">PHONY += $(MAKECMDGOALS) __build_one_by_one </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">$(filter-out __build_one_by_one, $(MAKECMDGOALS)): __build_one_by_one </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">&#160;&#160;&#160;&#160;@: </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">__build_one_by_one: </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">&#160;&#160;&#160;&#160;$(Q)set -e; \ </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">&#160;&#160;&#160;&#160;for i in $(MAKECMDGOALS); do \ </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(MAKE) -f $(srctree)/Makefile $$i; \ </font></i>
    </p>
    <p>
      <i><font color="#2b2a89">&#160;&#160;&#160;&#160;done</font></i>
    </p>
    <p>
      &#22312;&#28304;&#20195;&#30721;&#30340;&#39030;&#23618;&#30446;&#24405;&#24403;&#20013;&#65292;&#20250;&#21028;&#26029;&#24403;&#21069;&#36755;&#20837;&#30340;&#30446;&#26631;&#26159;&#19981;&#26159;&#28151;&#21512;&#30446;&#26631;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#26159;&#28151;&#21512;&#30446;&#26631;&#30340;&#35805;&#65292;&#23601;&#20250;&#25384;&#20010;&#25191;&#34892;&#36755;&#20837;&#30340;&#30446;&#26631;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1491296521562" ID="ID_747450763" MODIFIED="1491296593960">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22914;&#26524;&#21482;&#26159;&#21333;&#19968;&#30340;&#37197;&#32622;&#30446;&#26631;&#65292;&#37027;&#20040;&#36827;&#34892;&#22914;&#19979;&#30340;&#22788;&#29702;
    </p>
    <p>
      <i><font color="#d90e0e">KBUILD_DEFCONFIG := sandbox_defconfig </font></i>
    </p>
    <p>
      <i><font color="#d90e0e">export KBUILD_DEFCONFIG KBUILD_KCONFIG </font></i>
    </p>
    <p>
      <i><font color="#d90e0e">config: scripts_basic outputmakefile FORCE </font></i>
    </p>
    <p>
      <i><font color="#d90e0e">&#160;&#160;&#160;&#160;$(Q)$(MAKE) $(build)=scripts/kconfig $@ </font></i>
    </p>
    <p>
      <i><font color="#d90e0e">#The only place to match make xxx_defconfig </font></i>
    </p>
    <p>
      <i><font color="#d90e0e">%config: scripts_basic outputmakefile FORCE </font></i>
    </p>
    <p>
      <i><font color="#d90e0e">&#160;&#160;&#160;&#160;$(Q)$(MAKE) $(build)=scripts/kconfig $@</font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1492248380396" FOLDED="true" ID="ID_1978186560" MODIFIED="1493219440993">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#31532;&#22235;&#31687;: &#30446;&#26631;&#26500;&#24314;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1492248424821" ID="ID_489443662" MODIFIED="1492248571354">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#39030;&#23618;&#30340;Makefile&#20250;&#20998;&#21035;&#38024;&#23545;<font color="#cb1717"><i>mix-target, config-targets&#21644;dot-config</i></font>
    </p>
    <p>
      &#36827;&#34892;&#20998;&#25903;&#21028;&#26029;&#65292; &#24403;&#30446;&#21069;&#26082;&#19981;&#26159;mix-targets&#21644;config-targest&#30340;&#26102;&#20505;&#65292;&#25105;&#20204;
    </p>
    <p>
      &#23601;&#36827;&#20837;&#20102;dot-config&#30340;&#21028;&#26029;&#65292;dot-config&#38024;&#23545;&#30340;&#23601;&#26159;&#38750;&#37197;&#32622;&#20043;&#31867;&#30340;&#30446;&#26631;&#23545;&#35937;&#12290;
    </p>
    <p>
      &#24403;dot-config==1&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#30830;&#23450;&#26159;&#38024;&#23545;&#30446;&#26631;&#36827;&#34892;&#26500;&#24314;&#20102;&#65292;&#32780;&#19981;&#26159;&#20570;
    </p>
    <p>
      &#20363;&#22914;clean, mrproper&#31561;&#30446;&#26631;&#30340;&#22788;&#29702;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1492248639050" FOLDED="true" ID="ID_1769353011" MODIFIED="1493219439342" TEXT="&#x6784;&#x5efa;&#x8fc7;&#x7a0b;&#x5206;&#x6790;">
<node CREATED="1492249263351" FOLDED="true" ID="ID_835594399" MODIFIED="1493219437522">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#39318;&#20808;&#20171;&#32461;&#19968;&#19979;make&#23545;include&#21629;&#20196;&#30340;&#22788;&#29702;&#26041;&#24335;:
    </p>
    <p>
      makefile&#20250;&#39318;&#20808;&#23547;&#25214;include&#23545;&#24212;&#30340;&#25991;&#20214;&#26159;&#21542;&#23384;&#22312;&#65292;&#22914;&#26524;&#19981;&#23384;&#22312;&#30340;&#35805;
    </p>
    <p>
      &#23601;&#36339;&#36807;&#35813;include&#21629;&#20196;&#12290;&#31561;&#21040;make&#23558;&#25152;&#26377;&#30340;makefile&#25991;&#20214;&#37117;&#35835;&#21462;&#23436;&#25104;
    </p>
    <p>
      &#20043;&#21518;&#65292;&#20250;&#22312;&#20840;&#23616;&#23547;&#25214;&#21487;&#20197;&#37325;&#26032;&#29983;&#25104;&#36825;&#20123;makefile&#30340;&#35268;&#21017;&#65292;&#22914;&#26524;&#26377;&#30456;&#23545;&#24212;&#30340;
    </p>
    <p>
      &#35268;&#21017;&#65292;&#37027;&#20040;make&#23601;&#20250;&#29983;&#25104;&#35813;makefile, &#28982;&#21518;make&#21448;&#20250;&#37325;&#26032;&#35835;&#20837;&#20027;makefile
    </p>
    <p>
      &#21644;&#30456;&#24212;&#38656;&#35201;include&#30340;&#25991;&#20214;&#65292;&#30452;&#21040;&#25214;&#19981;&#21040;&#35268;&#21017;&#37325;&#26032;&#29983;&#25104;makefile&#20102;&#65292;&#26368;&#21518;
    </p>
    <p>
      &#25165;&#20250;&#36827;&#20837;&#23545;&#20110;&#35268;&#21017;&#30340;&#22788;&#29702;&#24403;&#20013;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1492269075892" FOLDED="true" ID="ID_539573432" MODIFIED="1493219433891">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#1d9662">1.&#25105;&#20204;&#30475;&#21040;&#22312;&#39030;&#23618;&#30340;Makefile&#25991;&#20214;&#24403;&#20013;&#65292;&#20250;&#26377;&#19968;&#20010;&#21028;&#26029;</font></i></b>
    </p>
    <p>
      <i><font color="#e00e0e">ifeq ($(dot-config),1) </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">-include include/config/auto.conf </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">-include include/config/auto.conf.cmd </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">$(KCONFIG_CONFIG) include/config/auto.conf.cmd: ; </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">include/config/%.conf: $(KCONFIG_CONFIG) include/config/auto.conf.cmd </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(Q)$(MAKE) -f $(srctree)/Makefile silentoldconfig </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(Q)$(MAKE) -f $(srctree)/scripts/Makefile.autoconf || \ </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;{ rm -f include/config/auto.conf; false; } </font></i>
    </p>
    <p>
      <i><font color="#e00e0e">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;$(Q)touch include/config/auto.conf</font></i>
    </p>
    <p>
      &#25105;&#20204;&#30475;&#21040;&#22914;&#26524;&#21028;&#26029;dot-config&#20026;1&#65292;&#21363;&#24403;&#21069;&#30340;&#21629;&#20196;&#26159;&#36827;&#34892;&#31995;&#32479;&#30340;&#26500;&#24314;&#65292;&#37027;&#20040;
    </p>
    <p>
      &#23427;&#20250;&#21253;&#21547;&#20004;&#20010;&#37325;&#35201;&#30340;&#25991;&#20214;&#65292;&#19968;&#20010;&#26159;auto.conf&#65292;&#21478;&#19968;&#20010;&#26159;auto.conf.cmd
    </p>
    <p>
      &#21518;&#38754;&#30340;&#19968;&#20010;&#35268;&#21017;&#26159;&#29992;&#26469;&#26500;&#24314;auto.conf&#21644;auto.conf.cmd&#25991;&#20214;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1492269883394" ID="ID_1017357685" MODIFIED="1492269911218" TEXT="KCONFIG_CONFIG&#x6307;&#x4ee3;&#x7684;&#x5c31;&#x662f;.config&#x6587;&#x4ef6;"/>
<node CREATED="1492270355739" FOLDED="true" ID="ID_1045030740" MODIFIED="1493219432448">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30475;&#30475;&#29983;&#25104;auto.conf&#30340;&#21629;&#20196;
    </p>
    <p>
      $(Q)$(MAKE) -f $(srctree)/Makefile silentoldconfig
    </p>
    <p>
      &#35813;&#21629;&#20196;&#23454;&#38469;&#19978;&#25191;&#34892;&#30340;&#26159;%config&#30446;&#26631;&#65292;&#26368;&#32456;&#20250;&#36827;&#20837;&#21040;
    </p>
    <p>
      scripts/kconfig/Makefile&#23547;&#25214;silentoldconfig&#30446;&#26631;
    </p>
    <p>
      <font color="#122fe8"><i>45 silentoldconfig: $(obj)/conf </i></font>
    </p>
    <p>
      <font color="#122fe8"><i>46&#160;&#160;&#160;&#160;&#160;$(Q)mkdir -p include/config include/generated </i></font>
    </p>
    <p>
      <font color="#122fe8"><i>47&#160;&#160;&#160;&#160;&#160;$&lt; $(silent) --$@ $(Kconfig)</i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1492338608077" ID="ID_955062568" MODIFIED="1492338873933">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#23545;&#20110;&#26368;&#26032;&#30340;u-boot&#20195;&#30721;&#26469;&#35828;&#65292;&#35813;silentoldconfig&#30446;&#26631;&#38500;&#20102;
    </p>
    <p>
      &#20250;&#26356;&#26032;.config, include/generated/autoconf.h&#20197;&#21450;
    </p>
    <p>
      include/configs/*&#31561;&#20256;&#32479;&#30340;linux&#19979;&#38754;&#30340;&#25991;&#20214;&#65292;&#23427;&#21516;&#26102;&#36824;&#20250;&#65306;
    </p>
    <p>
      1.&#21019;&#24314;&#19968;&#20010;&#31526;&#21495;&#38142;&#25509;&quot;arch/${ARCH}/include/asm/arch&quot;&#29992;&#20110;&#25351;&#21521;
    </p>
    <p>
      SoC/CPU&#29305;&#23450;&#30340;&#22836;&#25991;&#20214;&#30446;&#24405;
    </p>
    <p>
      
    </p>
    <p>
      2.&#21019;&#24314; include/config.h&#25991;&#20214;
    </p>
    <p>
      3.&#21019;&#24314;include/autoconf.mk&#25991;&#20214;
    </p>
    <p>
      4.&#21019;&#24314;spl/include/autoconf.mk (SPL and TPL only)
    </p>
    <p>
      5.&#21019;&#24314;&#25991;&#20214;tpl/include/autoconf.mk (TPL only)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1492269442831" ID="ID_428221924" MODIFIED="1492269745073">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#0f6339">2.&#30475;&#30475;.config&#25991;&#20214;&#26159;&#22914;&#20309;&#34987;&#20351;&#29992;&#30340;</font></i></b>
    </p>
    <p>
      &#20351;&#29992;.config&#25991;&#20214;&#30340;&#20027;&#35201;&#26159;&#20004;&#20010;&#37096;&#20998;&#65292;&#19968;&#20010;&#37096;&#20998;&#26159;&#20869;&#26680;&#26500;&#24314;&#31995;&#32479;&#26681;&#25454;&#37197;&#32622;
    </p>
    <p>
      &#25991;&#20214;&#20135;&#29983;&#25351;&#23450;&#30340;&#20869;&#26680;&#38236;&#20687;&#65292;&#21478;&#19968;&#20010;&#37096;&#20998;&#26159;linux&#30340;&#20195;&#30721;&#26412;&#36523;&#36890;&#36807;&#37197;&#32622;&#25991;&#20214;&#26469;
    </p>
    <p>
      &#36827;&#34892;c&#35821;&#35328;&#20195;&#30721;&#30340;&#39044;&#22788;&#29702;&#12290;&#20294;&#26159;&#20108;&#32773;&#37117;&#19981;&#21487;&#33021;&#30452;&#25509;&#22320;&#20351;&#29992;.config&#25991;&#20214;&#65292;&#21069;&#32773;
    </p>
    <p>
      &#26159;&#36890;&#36807;auto.conf&#21644;auto.conf.cmd&#25991;&#20214;&#26469;&#20351;&#29992;.config&#25991;&#20214;&#65292;&#21518;&#32773;&#26159;&#36890;&#36807;
    </p>
    <p>
      autoconf.h&#25991;&#20214;&#26469;&#38388;&#25509;&#20351;&#29992;.config&#25991;&#20214;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1471313923568" FOLDED="true" ID="ID_984050240" MODIFIED="1493219586599" POSITION="right" TEXT="USB&#x8bbe;&#x5907;&#x9a71;&#x52a8;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1471313935648" FOLDED="true" ID="ID_52548290" MODIFIED="1493219581269">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.<b><i>USB&#35774;&#22791;&#30340;&#36923;&#36753;&#32452;&#32455;&#24403;&#20013;&#21253;&#21547;&#35774;&#22791;&#65292;&#37197;&#32622;&#65292;&#25509;&#21475;&#21644;&#31471;&#28857;&#22235;&#20010;</i></b>
    </p>
    <p>
      &#19968;&#20010;&#35774;&#22791;&#24403;&#20013;&#21487;&#20197;&#26377;&#22810;&#20010;&#25509;&#21475;
    </p>
    <p>
      &#19968;&#20010;&#37197;&#32622;&#24403;&#20013;&#21487;&#20197;&#26377;&#22810;&#20010;&#25509;&#21475;---&gt;&#37197;&#32622;&#24403;&#20013;&#30340;&#25509;&#21475;&#21487;&#20197;&#34987;&#19981;&#21516;&#30340;&#39537;&#21160;&#38142;&#25509;
    </p>
    <p>
      
    </p>
    <p>
      a. ubs&#35774;&#22791;&#21487;&#20197;&#29992;&#32467;&#26500;&#20307;usb_device&#26469;&#36827;&#34892;&#34920;&#31034;
    </p>
    <p>
      &#160;&#160;&#160;&#160;usb&#35774;&#32622;&#25551;&#36848;&#31526;&#23450;&#20041;&#20026;usb_device_description
    </p>
    <p>
      b. usb&#37197;&#32622;&#25551;&#36848;&#31526;:
    </p>
    <p>
      usb&#37197;&#32622;---&gt;usb_host_config
    </p>
    <p>
      usb&#37197;&#32622;&#25551;&#36848;&#31526;----&gt;usb_config_descriptor
    </p>
    <p>
      
    </p>
    <p>
      c. &#25509;&#21475;&#25551;&#36848;&#31526;
    </p>
    <p>
      usb&#25509;&#21475;&#22312;&#20869;&#26680;&#24403;&#20013;&#30340;&#34920;&#31034;-----&gt;usb_interface
    </p>
    <p>
      usb&#25509;&#21475;&#25551;&#36848;&#31526;------&gt;usb_interface_descriptor
    </p>
    <p>
      
    </p>
    <p>
      d.&#31471;&#28857;&#25551;&#36848;&#31526;
    </p>
    <p>
      usb&#31471;&#28857;&#22312;&#20869;&#26680;&#24403;&#20013;&#30340;&#34920;&#31034;-----&gt;usb_host_endpoint
    </p>
    <p>
      usb&#31471;&#28857;&#25551;&#36848;&#31526;------&gt;usb_endpoint_descriptor
    </p>
    <p>
      <b>&#31471;&#28857;0&#26159;&#29992;&#20316;&#25511;&#21046;&#30340;&#65292;&#21482;&#35201;&#35774;&#22791;&#36830;&#25509;&#21518;&#19978;&#30005;&#65292;&#37027;&#20040;&#31471;&#28857;0&#23601;&#21487;&#20197; </b>
    </p>
    <p>
      <b>&#19982;host&#36827;&#34892;&#36890;&#20449;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1471348973014" ID="ID_43470924" MODIFIED="1471349276814">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>struct usb_hub</b>&#160;{
    </p>
    <p>
      struct device&#160;&#160;&#160;&#160;&#160;&#160;&#160;*intfdev
    </p>
    <p>
      struct usb_device&#160;&#160;&#160;*hdev
    </p>
    <p>
      struct kref&#160;&#160;&#160;&#160;&#160;kref
    </p>
    <p>
      struct urb&#160;&#160;&#160;&#160;&#160;&#160;*urb
    </p>
    <p>
      u8&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(*buffer)[8]
    </p>
    <p>
      unsigned long&#160;&#160;&#160;&#160;event_bits[1]
    </p>
    <p>
      unsigned long&#160;&#160;&#160;&#160;change_bits[1]
    </p>
    <p>
      unsigned long&#160;&#160;&#160;&#160;removed_bits[1]
    </p>
    <p>
      unsigned long&#160;&#160;&#160;&#160;wakeup_bits[1]
    </p>
    <p>
      struct usb_hub_descriptor *descriptor
    </p>
    <p>
      struct usb_tt&#160;&#160;&#160;&#160;&#160;&#160;&#160;tt
    </p>
    <p>
      struct delayed_work leds
    </p>
    <p>
      struct delayed_work init_work
    </p>
    <p>
      struct usb_port&#160;&#160;&#160;&#160;&#160;**ports
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471601216979" ID="ID_175921220" MODIFIED="1471601281725">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#160;&#160;&#160;&#160;&#35774;&#22791;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#37197;&#32622;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#25509;&#21475;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#35774;&#32622;&#160;&#160; &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#31471;&#28857;
    </p>
    <p>
      usb_device&#160;&#160;usb_configuration&#160;&#160;usb_interface&#160;&#160;usb_host_interface&#160; usb_host_endpoint
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1471324351066" ID="ID_1540543093" MODIFIED="1471324554772">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2. usb&#20027;&#26426;&#25511;&#21046;&#22120;&#39537;&#21160;
    </p>
    <p>
      usb_hcd&#32467;&#26500;&#20307;&#25551;&#36848;&#20027;&#26426;&#25511;&#21046;&#22120;&#39537;&#21160;&#65292;&#21253;&#21547;&#20027;&#26426;&#25511;&#21046;&#22120;&#30340;
    </p>
    <p>
      &#30828;&#20214;&#36164;&#28304;&#21644;&#20027;&#26426;&#25511;&#21046;&#22120;&#39537;&#21160;hc_driver
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1471340686216" FOLDED="true" ID="ID_1438474488" MODIFIED="1493219578089">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>usb&#28909;&#25554;&#25300; </i></b>
    </p>
    <p>
      <b><i>http://blog.csdn.net/qq_21593899/article/details/51726697</i></b>
    </p>
    <p>
      int usb_hub_init(void)&#20989;&#25968;&#23436;&#25104;hub&#30340;driver&#21363;<b>struct usb_driver hub_drive</b>r&#27880;&#20876;&#65292;&#21033;&#29992;
    </p>
    <p>
      <b>kthread_run(hub_thread, NULL, &quot;khubd&quot;)</b>&#21019;&#24314;&#20869;&#26680;&#32447;&#31243;&#30417;&#25511;
    </p>
    <p>
      hub&#30340;&#29366;&#24577;
    </p>
    <p>
      &#22312;hub_driver&#30340;hub_probe&#20989;&#25968;&#24403;&#20013;&#35843;&#29992;hub_configure&#20989;&#25968;&#65292;
    </p>
    <p>
      &#32473;usb_hub&#24403;&#20013;&#30340;urb&#20998;&#37197;&#31354;&#38388;&#65292;&#20351;&#29992;usb_fill_int_urb&#20989;&#25968;&#26469;&#21021;&#22987;&#21270;urb&#65292;
    </p>
    <p>
      &#21253;&#25324;&#37197;&#32622;urb&#24403;&#20013;&#30340;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;<b>hub_irq</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1471343628411" ID="ID_1120670438" MODIFIED="1471418643507">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#24403;&#26377;&#26032;&#30340;&#35774;&#22791;&#25554;&#20837;&#21040;hub&#24403;&#20013;&#30340;&#26102;&#20505;&#65292;&#20250;&#35302;&#21457;&#20013;&#26029;&#20989;&#25968;
    </p>
    <p>
      <b>static void hub_irq(struct urb *urb) </b>
    </p>
    <p>
      &#35813;&#20013;&#26029;&#20989;&#25968;&#21033;&#29992;kick_khubd&#20989;&#25968;&#23558;usb_hub&#24403;&#20013;&#30340;
    </p>
    <p>
      event_list&#25346;&#21040;khubd&#20869;&#26680;&#32447;&#31243;&#30340;hub_event_list&#24403;&#20013;,
    </p>
    <p>
      &#28982;&#21518;&#21796;&#37266;khubd&#32447;&#31243;,&#36827;&#20837;hub_events&#20989;&#25968;&#22788;&#29702;events,
    </p>
    <p>
      &#22312;&#35813;&#20989;&#25968;&#24403;&#20013;&#65292;&#23545;&#27599;&#20010;hub&#30340;port&#35843;&#29992;&#20989;&#25968;port_event(hub, i)
    </p>
    <p>
      &#36827;&#34892;&#22788;&#29702;&#65292;&#22914;&#26524;port&#30340;&#36830;&#25509;&#29366;&#24577;&#21457;&#29983;&#21464;&#21270;&#25110;&#32773;&#30001;&#20110;EMI&#24178;&#25200;&#23548;&#33268;&#36830;&#25509;&#20351;&#33021;&#29366;&#24577;&#21457;&#29983;&#21464;&#21270;&#65292;
    </p>
    <p>
      &#21017;&#22312;port_event&#20989;&#25968;&#30340;&#26368;&#21518;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      <b><i>hub_port_connect_change(hub, port1, portstatus, portchange);</i></b>
    </p>
    <p>
      &#22788;&#29702;&#20855;&#20307;&#30340;port&#30340;change
    </p>
    <p>
      &#22914;&#26524;&#22312;hub_port_connect_change&#20989;&#25968;&#24403;&#20013;&#30830;&#35748;&#35813;&#35774;&#22791;&#26159;&#26032;&#25554;&#20837;&#30340;&#35774;&#22791;&#65292;&#23601;&#20250;
    </p>
    <p>
      &#22312;&#35813;&#20989;&#25968;&#24403;&#20013;&#35843;&#29992;<b><i>hub_port_connect(hub, port1, portstatus, portchange) </i></b>
    </p>
    <p>
      &#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#24403;&#20013;&#20250;&#20998;&#37197;usb_device,&#35835;&#21462;&#35813;device&#30340;&#25551;&#36848;&#31526;&#65292;&#27880;&#20876;&#35813;device
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1471749180863" FOLDED="true" ID="ID_1298452644" MODIFIED="1493219579430">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#df0f0f">USB HID&#35774;&#22791;&#39537;&#21160;</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1471752843042" ID="ID_1666279250" MODIFIED="1471830038488">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#225637">int usbhid_probe(struct usb_interface *intf, const struct usb_device_id *id)&#20989;&#25968; </font></b>
    </p>
    <p>
      <font color="#2f3238">1.hid = hid_allocate_device();&#20989;&#25968;&#29983;&#25104;&#20102;hid_device,&#24182;&#19988; </font>
    </p>
    <p>
      &#32473;&#35813;device&#36171;&#20540;bus_type&#20026;hdev-&gt;dev.bus = &amp;hid_bus_type
    </p>
    <p>
      hid_bus_type&#37324;&#38754;&#30340;hid_bus_match&#21644;hid_device_probe&#20989;&#25968;&#23558;&#20250;&#22312;&#21518;&#38754;&#34987;&#35843;&#29992;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1475896151069" FOLDED="true" ID="ID_1362020755" MODIFIED="1499823207657" POSITION="left" TEXT="&#x7535;&#x6e90;&#x7ba1;&#x7406;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1475999878646" FOLDED="true" ID="ID_1055025927" MODIFIED="1499823186488">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e10505">Generic PM</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1475999888353" FOLDED="true" ID="ID_803433592" MODIFIED="1499823181219" TEXT="suspend&#x8fc7;&#x7a0b;">
<node CREATED="1475999900201" ID="ID_1184571104" MODIFIED="1476064570971">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Linux&#20869;&#26680;&#25552;&#20379;&#20102;&#19977;&#31181;suspend:</i></b>
    </p>
    <p>
      Freeze
    </p>
    <p>
      Standby
    </p>
    <p>
      STR(suspend to ram)
    </p>
    <p>
      &#28041;&#21450;&#21040;&#30340;&#27169;&#22359;&#26377;:
    </p>
    <p>
      <font color="#dc0a0a"><i>PM Core. Device PM. &#21508;&#20010;&#35774;&#22791;&#30340;&#39537;&#21160; </i></font>
    </p>
    <p>
      <font color="#dc0a0a"><i>Platform dependent PM. CPU control</i></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475999973409" FOLDED="true" ID="ID_191845463" MODIFIED="1499823177933">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20869;&#26680;suspend&#30340;&#20960;&#22823;&#27169;&#22359;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1476000767394" ID="ID_704336645" MODIFIED="1482854908105">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#e10a0a"><i>PM Core----&#20027;&#35201;&#30340;&#20195;&#30721;&#20301;&#32622;</i></font></b>
    </p>
    <p>
      kernel/power/main.c &#25552;&#20379;&#29992;&#25143;&#31354;&#38388;&#25509;&#21475;/sys/power/state
    </p>
    <p>
      kernel/power/suspend.c suspend&#21151;&#33021;&#30340;&#20027;&#35201;&#36923;&#36753;
    </p>
    <p>
      kernel/power/console.c suspend&#36807;&#31243;&#24403;&#20013;&#23545;&#25511;&#21046;&#21488;&#30340;&#22788;&#29702;&#36923;&#36753;
    </p>
    <p>
      kernel/power/process.c suspend&#36807;&#31243;&#24403;&#20013;&#23545;&#36827;&#31243;&#30340;&#22788;&#29702;&#36923;&#36753;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476001101330" FOLDED="true" ID="ID_771430393" MODIFIED="1499823173137">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#de0505"><i>Device Pm </i></font>
    </p>
    <p>
      <font color="#0c0b1a"><i>Device Power Manager Interface</i></font>
    </p>
    <p>
      &#23450;&#20041;device pm&#30456;&#20851;&#30340;&#22238;&#35843;&#20989;&#25968;&#65292;&#35753;&#39537;&#21160;&#20989;&#25968;&#23454;&#29616;&#65292;
    </p>
    <p>
      &#23454;&#29616;&#32479;&#19968;&#30340;pm&#25805;&#20316;&#20989;&#25968;&#65292;&#20379;pm&#26680;&#24515;&#35843;&#29992;
    </p>
    <p>
      Interface&#30340;&#20195;&#30721;&#23454;&#29616;&#20110;&#8220;include/linux/pm.h&#8221;&#12289;&#8220;drivers/base/power/main.c&#8221;
    </p>
  </body>
</html></richcontent>
<node CREATED="1476064615323" FOLDED="true" ID="ID_1113783024" MODIFIED="1499823170149">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      device pm callbacks
    </p>
    <p>
      &#26368;&#26032;&#30340;&#20869;&#26680;&#20195;&#30721;&#23558;&#35774;&#22791;&#30005;&#28304;&#31649;&#29702;&#30456;&#20851;&#30340;&#20989;&#25968;&#32479;&#19968;
    </p>
    <p>
      &#23553;&#35013;&#21040;&#32467;&#26500;&#20307;struct dev_pm_ops&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
<node CREATED="1482767397879" FOLDED="true" ID="ID_185471824" MODIFIED="1499823165452">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20869;&#26680;&#20026;&#20102;&#26041;&#20415;&#23545;device pm callback
    </p>
    <p>
      &#20989;&#25968;&#36827;&#34892;&#25805;&#20316;&#65292;&#23450;&#20041;&#20102;&#22823;&#37327;&#30340;&#36741;&#21161;&#20989;&#25968;&#12290;
    </p>
    <p>
      &#36825;&#20123;&#20989;&#25968;&#22312;&#24635;&#20307;&#19978;&#21487;&#20197;&#20998;&#25104;&#20004;&#31867;
    </p>
  </body>
</html></richcontent>
<node CREATED="1482767468839" ID="ID_1157036342" MODIFIED="1482767815075">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#36741;&#21161;&#24615;&#36136;&#30340;API,&#36825;&#20123;API&#30452;&#25509;&#35843;&#29992;&#35774;&#22791;&#25152;&#32465;&#23450;&#30340;
    </p>
    <p>
      driver&#24403;&#20013;&#30340;pm&#32467;&#26500;&#20307;&#24403;&#20013;&#35774;&#32622;&#30340;&#22238;&#35843;&#20989;&#25968;&#12290;
    </p>
    <p>
      extern int pm_generic_prepare(struct device *dev);
    </p>
    <p>
      extern int pm_generic_suspend_late(struct device *dev);
    </p>
    <p>
      extern int pm_generic_suspend_noirq(struct device *dev);
    </p>
    <p>
      extern int pm_generic_suspend(struct device *dev);
    </p>
    <p>
      extern int pm_generic_resume_early(struct device *dev);
    </p>
    <p>
      extern int pm_generic_resume_noirq(struct device *dev);
    </p>
    <p>
      extern int pm_generic_resume(struct device *dev);
    </p>
    <p>
      extern int pm_generic_freeze_noirq(struct device *dev);
    </p>
    <p>
      extern int pm_generic_freeze_late(struct device *dev);
    </p>
    <p>
      extern int pm_generic_freeze(struct device *dev);
    </p>
    <p>
      extern int pm_generic_thaw_noirq(struct device *dev);
    </p>
    <p>
      extern int pm_generic_thaw_early(struct device *dev);
    </p>
    <p>
      extern int pm_generic_thaw(struct device *dev);
    </p>
    <p>
      extern int pm_generic_restore_noirq(struct device *dev);
    </p>
    <p>
      extern int pm_generic_restore_early(struct device *dev);
    </p>
    <p>
      extern int pm_generic_restore(struct device *dev);
    </p>
    <p>
      extern int pm_generic_poweroff_noirq(struct device *dev);
    </p>
    <p>
      extern int pm_generic_poweroff_late(struct device *dev);
    </p>
    <p>
      extern int pm_generic_poweroff(struct device *dev);
    </p>
    <p>
      extern void pm_generic_complete(struct device *dev);
    </p>
    <p>
      extern void pm_complete_with_resume_check(struct device *dev);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1482767857788" ID="ID_1707369280" MODIFIED="1482768083279">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#36319;&#25972;&#20307;&#30005;&#28304;&#31649;&#29702;&#34892;&#20026;&#30456;&#20851;&#30340;API&#65292;&#36825;&#31867;API
    </p>
    <p>
      &#30340;&#30446;&#30340;&#23601;&#26159;&#23558;&#21508;&#20010;&#29420;&#31435;&#30340;&#30005;&#28304;&#31649;&#29702;&#34892;&#20026;&#32452;&#21512;&#36215;&#26469;&#65292;&#32452;&#25104;&#19968;&#20010;&#36739;&#20026;&#23436;&#25972;&#30340;&#21151;&#33021;&#12290;
    </p>
    <p>
      <font color="#e52908"><i>extern void device_pm_lock(void); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern void dpm_resume_start(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern void dpm_resume_end(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern void dpm_resume_noirq(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern void dpm_resume_early(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern void dpm_resume(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern void dpm_complete(pm_message_t state); </i></font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#e52908"><i>extern void device_pm_unlock(void); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern int dpm_suspend_end(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern int dpm_suspend_start(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern int dpm_suspend_noirq(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern int dpm_suspend_late(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern int dpm_suspend(pm_message_t state); </i></font>
    </p>
    <p>
      <font color="#e52908"><i>extern int dpm_prepare(pm_message_t state);</i></font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1482486666181" ID="ID_1414779687" MODIFIED="1486971400853">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#ef0303">struct device { </font></i>
    </p>
    <p>
      
    </p>
    <p>
      <i><font color="#ef0303">struct dev_pm_info&#160;&#160;power; </font></i>
    </p>
    <p>
      <i><font color="#ef0303">struct dev_pm_domain&#160;&#160;&#160;&#160;*pm_domain; </font></i>
    </p>
    <p>
      
    </p>
    <p>
      <i><font color="#ef0303">}</font></i>
    </p>
    <p>
      power&#23383;&#27573;&#20027;&#35201;&#26159;&#35760;&#24405;&#24403;&#21069;&#35774;&#22791;&#30340;&#30005;&#28304;&#29366;&#24577;
    </p>
    <p>
      struct dev_pm_info {
    </p>
    <p>
      &#160;&#160;&#160;&#160;pm_message_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;power_state;
    </p>
    <p>
      &#160;&#160;&#160; <b>unsigned int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;can_wakeup:1;</b>
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;async_suspend:1;
    </p>
    <p>
      &#160;&#160;&#160;&#160;bool&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is_prepared:1;&#160;&#160;/* Owned by the PM core */
    </p>
    <p>
      &#160;&#160;&#160;&#160;bool&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is_suspended:1; /* Ditto */
    </p>
    <p>
      &#160;&#160;&#160;&#160;bool&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is_noirq_suspended:1;
    </p>
    <p>
      &#160;&#160;&#160;&#160;bool&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;is_late_suspended:1;
    </p>
    <p>
      &#160;&#160;&#160;&#160;..........
    </p>
    <p>
      }
    </p>
    <p>
      can_wakeup&#23383;&#27573;&#20027;&#35201;&#26159;&#29992;&#20110;&#35760;&#24405;&#20869;&#26680;&#26159;&#21542;&#20801;&#35768;&#35813;&#35774;&#22791;&#20986;&#21457;&#21796;&#37266;&#20107;&#20214;&#25110;&#32773;&#26159;&#21542;
    </p>
    <p>
      &#20801;&#35768;&#35813;&#35774;&#22791;&#25171;&#26029;suspend to ram&#30340;&#27969;&#31243;
    </p>
    <p>
      
    </p>
    <p>
      struct dev_pm_domain {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct dev_pm_ops&#160;&#160;&#160;ops;
    </p>
    <p>
      &#160;&#160;&#160;&#160;void (*detach)(struct device *dev, bool power_off);
    </p>
    <p>
      &#160;&#160;&#160;&#160;int (*activate)(struct device *dev);
    </p>
    <p>
      &#160;&#160;&#160;&#160;void (*sync)(struct device *dev);
    </p>
    <p>
      &#160;&#160;&#160;&#160;void (*dismiss)(struct device *dev);
    </p>
    <p>
      };&#160;
    </p>
    <p>
      &#22312;linux&#24403;&#20013;&#65292;&#26159;&#20801;&#35768;&#27809;&#26377;&#39537;&#21160;&#30340;&#35774;&#22791;&#23384;&#22312;&#30340;&#65292;&#23545;&#36825;&#19968;&#31867;&#30340;&#35774;&#22791;&#26469;&#35828;&#65292;
    </p>
    <p>
      pm_domain&#20250;&#23545;&#23427;&#36827;&#34892;&#30005;&#28304;&#31649;&#29702;&#30340;&#25805;&#20316;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482853604696" ID="ID_1065280956" MODIFIED="1482854886513">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#db0707"><i>&#24179;&#21488;&#30456;&#20851;&#30340;PM</i></font></b>
    </p>
    <p>
      include/linux/suspend.h----&#23450;&#20041;platform dependent PM&#26377;&#20851;&#30340;&#25805;&#20316;&#20989;&#25968;&#38598;
    </p>
    <p>
      arch/xxx/mach-xxx/xxx.c&#25110;&#32773;
    </p>
    <p>
      arch/xxx/plat-xxx/xxx.c----&#24179;&#21488;&#30456;&#20851;&#30340;&#30005;&#28304;&#31649;&#29702;&#25805;&#20316;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1483238846872" FOLDED="true" ID="ID_1084913528" MODIFIED="1499823158324" TEXT="suspend&#x4ee3;&#x7801;&#x5206;&#x6790;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1483349770591" ID="ID_354720761" MODIFIED="1483349790780" TEXT="1.suspend&#x6d41;&#x7a0b;&#x56fe;&#xff0c;&#x89c1;UML&#x6587;&#x4ef6;"/>
<node CREATED="1483349794935" FOLDED="true" ID="ID_1784812268" MODIFIED="1499823156626">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.freezing of task
    </p>
    <p>
      &#36827;&#31243;&#30340;freezing&#21151;&#33021;&#26159;&#36827;&#31243;&#30340;suspend,hibernate&#21151;&#33021;&#30340;&#19968;&#20010;&#32452;&#25104;&#37096;&#20998;&#65292;
    </p>
    <p>
      &#30446;&#30340;&#26159;&#20026;&#20102;&#22312;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#30340;&#20999;&#25442;&#36807;&#31243;&#24403;&#20013;&#65292;&#29992;&#25143;&#31354;&#38388;&#30340;&#36827;&#31243;&#21644;&#20869;&#26680;&#30340;
    </p>
    <p>
      &#37096;&#20998;&#32447;&#31243;&#22788;&#20110;&#19968;&#20010;&#31283;&#23450;&#30340;&#29366;&#24577;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1495806429229" ID="ID_1465641167" MODIFIED="1495806563979">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#d30b0b">&#22312;suspend&#36807;&#31243;&#24403;&#20013;&#20250;freeze&#29992;&#25143;&#36827;&#31243;&#21644;&#20869;&#26680;&#36827;&#31243;&#65292; </font></i>
    </p>
    <p>
      <i><font color="#d30b0b">&#22914;&#26524;&#21457;&#29616;&#24403;&#21069;&#26159;&#21457;&#36215;suspend&#30340;&#36827;&#31243;&#65292;&#21017;freeze&#20250;&#36339;&#36807;&#35813;&#36827;&#31243;&#65292; </font></i>
    </p>
    <p>
      <i><font color="#d30b0b">&#25152;&#20197;&#21457;&#36215;suspend&#30340;&#29992;&#25143;&#36827;&#31243;&#25110;&#32773;&#20869;&#26680;&#32447;&#31243;&#26159;&#19981;&#20250;&#34987;&#20923;&#32467;&#30340;</font></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1483356480711" ID="ID_1655803082" MODIFIED="1483356506435">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3. PM notifier&#30340;&#29305;&#27530;&#29992;&#36884;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1487055830274" FOLDED="true" ID="ID_968320327" MODIFIED="1499823153990" TEXT="&#x5185;&#x6838;Documentation/power/suspend-and-interrupts.txt &#x6587;&#x6863;&#x9605;&#x8bfb;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1487055856874" ID="ID_1731558711" MODIFIED="1487057714580">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20013;&#26029;&#35831;&#27714;&#32447;&#22312;&#31995;&#32479;suspend&#26399;&#38388;&#19968;&#33324;&#26159;&#34987;&#31105;&#29992;&#30340;&#65292; &#22312;&#26089;&#26399;&#30340;&#20869;&#26680;&#22788;&#29702;&#24403;&#20013;&#65292;
    </p>
    <p>
      &#35774;&#22791;&#39537;&#21160;&#24448;&#24448;&#23545;&#22312;&#35774;&#22791;&#24050;&#32463;suspend&#26399;&#38388;&#21457;&#29983;&#30340;&#20013;&#26029;&#30340;&#22788;&#29702;&#26159;&#19981;&#23436;&#21892;&#30340;&#65292;&#35774;&#22791;&#39537;&#21160;&#26377;&#30340;
    </p>
    <p>
      &#26102;&#20505;&#20250;&#35775;&#38382;&#24050;&#32463;&#25346;&#36215;&#30340;&#35774;&#22791;&#30340;&#20869;&#23384;&#31354;&#38388;&#65292;&#36825;&#24448;&#24448;&#20250;&#23548;&#33268;&#19981;&#21487;&#39044;&#30693;&#30340;&#38169;&#35823;&#12290;
    </p>
    <p>
      &#20989;&#25968;<b><i>suspend_device_irqs()</i></b>&#30340;&#24341;&#29992;&#65292;&#20197;&#21450;&#22312;&quot;noirq&quot;&#26399;&#38388;&#30340;suspend&#21644;resume&#20250;&#20943;&#36731;
    </p>
    <p>
      &#36825;&#31181;&#26410;&#30693;&#30340;&#38169;&#35823;&#12290;
    </p>
    <p>
      &#22312;&#31995;&#32479;resume&#26399;&#38388;&#30830;&#20999;&#22320;&#35828;&#26159;&#22312;&#35843;&#29992;&#20989;&#25968;resume_early&#20043;&#21069;&#65292;&#35774;&#22791;&#30340;irq&#20250;&#34987;&#37325;&#26032;&#20351;&#33021;&#65292;
    </p>
    <p>
      &#36825;&#39033;&#24037;&#20316;&#26159;&#30001;&#20989;&#25968;<b><i>resume_device_irqs()</i></b>&#26469;&#23436;&#25104;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487057722138" ID="ID_1045454357" MODIFIED="1487058365979">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#22312;Linux&#31995;&#32479;&#24403;&#20013;&#23384;&#22312;&#30528;&#19968;&#20123;&#20013;&#26029;&#65292;&#21363;&#20351;&#26159;&#22312;&#25972;&#20010;&#31995;&#32479;suspend&#21644;resume&#26399;&#38388;&#20063;&#21487;&#20197;
    </p>
    <p>
      &#34987;&#21512;&#29702;&#22320;&#35302;&#21457;&#65292;&#21253;&#25324;suspend&#30340;&quot;noirq&quot;&#26399;&#38388;&#21644;&#35774;&#22791;&#30340;resume&#26399;&#38388;&#20197;&#21450;noboot cpu&#19979;&#32447;&#21644;
    </p>
    <p>
      &#19978;&#32447;&#26399;&#38388;&#12290;&#36825;&#31181;&#31867;&#22411;&#30340;&#20013;&#26029;&#39318;&#20808;&#20250;&#34987;&#20351;&#29992;&#21040;&#23450;&#26102;&#22120;&#20013;&#26029;&#24403;&#20013;&#65292;&#20854;&#27425;&#20250;&#34987;&#24212;&#29992;&#21040;IPIs&#65292;&#21644;&#19968;&#20123;
    </p>
    <p>
      &#29305;&#27530;&#29992;&#36884;&#30340;&#20013;&#26029;&#19978;&#12290;
    </p>
    <p>
      &#24403;&#25105;&#20204;&#20351;&#29992;<b>IRQF_NO_SUSPEND</b>&#26631;&#24535;&#26469;&#30003;&#35831;&#20013;&#26029;&#30340;&#26102;&#20505;&#65292;&#21487;&#20197;&#20445;&#35777;suspend_device_irqs()
    </p>
    <p>
      &#22312;&#25191;&#34892;&#26399;&#38388;&#20173;&#28982;&#20351;&#33021;&#23545;&#24212;&#30340;&#20013;&#26029;&#65292;&#24182;&#19988;&#21487;&#20197;&#20445;&#35777;&#35813;&#20013;&#26029;&#22312;suspend-resume&#21608;&#26399;&#24403;&#20013;&#21487;&#20197;&#27491;&#24120;
    </p>
    <p>
      &#24037;&#20316;&#65292;&#20294;&#26159;&#19981;&#33021;&#20445;&#35777;&#35813;&#20013;&#26029;&#21487;&#20197;&#23558;&#31995;&#32479;&#20174;suspended&#29366;&#24577;&#24403;&#20013;&#21796;&#37266;&#12290;&#22914;&#26524;&#24076;&#26395;&#20013;&#26029;&#21487;&#20197;&#23558;&#31995;&#32479;
    </p>
    <p>
      &#20174;suspended&#29366;&#24577;&#21796;&#37266;&#65292;&#37027;&#20040;&#38656;&#35201;&#35843;&#29992;<b>enable_irq_wake()</b>&#20989;&#25968;&#12290;&#30001;&#20110;IRQF_NO_SUSPEND
    </p>
    <p>
      &#26631;&#24535;&#26159;&#20840;&#23616;&#24615;&#30340;&#65292;&#25152;&#20197;&#24212;&#24403;&#31105;&#27490;&#25226;&#35813;&#26631;&#24535;&#19982;IRQF_SHARED&#26631;&#24535;&#21516;&#26102;&#20351;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487058369706" ID="ID_1685871924" MODIFIED="1487059723486">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#31995;&#32479;&#32423;&#30340;&#21796;&#37266;&#20013;&#26029;enable_irq_wake() &#21644; disable_irq_wake()
    </p>
    <p>
      &#31995;&#32479;&#21796;&#37266;&#20013;&#26029;&#36890;&#24120;&#38656;&#35201;&#34987;&#37197;&#32622;&#29992;&#26469;&#23545;&#22788;&#20110;sleep&#29366;&#24577;&#30340;&#31995;&#32479;&#36827;&#34892;&#21796;&#37266;&#21160;&#20316;&#65292;&#36825;&#21487;&#33021;
    </p>
    <p>
      &#38656;&#35201;&#25171;&#24320;&#24179;&#21488;&#30456;&#20851;&#30340;&#29305;&#27530;&#30340;&#22788;&#29702;&#36923;&#36753;&#65292;&#36825;&#26679;&#20013;&#26029;&#20449;&#21495;&#21487;&#20197;&#22312;&#31995;&#32479;&#30561;&#30496;&#26399;&#38388;&#21487;&#20197;&#36890;&#36807;
    </p>
    <p>
      &#19981;&#21516;&#30340;&#36335;&#24452;&#34987;&#36335;&#30001;&#12290;&#27604;&#22914;&#24179;&#21488;&#21487;&#33021;&#20250;&#26377;&#19968;&#20010;&#29305;&#23450;&#30340;&#20013;&#26029;&#22788;&#29702;&#22120;&#29992;&#26469;&#22788;&#29702;&#21796;&#37266;&#20013;&#26029;&#12290;
    </p>
    <p>
      linux&#31995;&#32479;&#25552;&#20379;&#20102;&#20004;&#20010;&#24110;&#21161;&#20989;&#25968;&#29992;&#26469;&#25171;&#24320;&#24179;&#21488;&#30456;&#20851;&#30340;&#29305;&#27530;&#30340;&#20013;&#26029;&#22788;&#29702;&#36923;&#36753;&#65292;&#36825;&#20004;&#20010;&#20989;&#25968;&#20998;&#21035;&#26159;
    </p>
    <p>
      <b><i>enable_irq_wake()&#21644;disable_irq_wake()</i></b>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487059728421" ID="ID_865688034" MODIFIED="1487060436478">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4. &#20013;&#26029;&#21644;suspend-to-idle
    </p>
    <p>
      Suspend-to-idle(&#21363;freeze&#29366;&#24577;)&#26159;&#19968;&#31181;&#27604;&#36739;&#26032;&#24341;&#36827;&#30340;&#31995;&#32479;&#30561;&#30496;&#29366;&#24577;&#65292;&#21363;&#22312;noirq&#38454;&#27573;&#20043;&#21518;
    </p>
    <p>
      &#25152;&#26377;&#30340;&#22788;&#29702;&#22120;&#22788;&#20110;idle&#29366;&#24577;&#65292;&#31561;&#24453;&#20013;&#26029;&#12290;&#36825;&#23601;&#24847;&#21619;&#30528;&#25152;&#26377;&#24102;&#26377;IRQF_NO_SUSPEND&#26631;&#24535;&#30340;&#20013;&#26029;
    </p>
    <p>
      &#21487;&#20197;&#23558;&#22788;&#29702;&#22120;&#33073;&#31163;idle&#29366;&#24577;&#65292;&#20294;&#26159;&#19981;&#33021;&#35753;IRQ subsystem&#21796;&#37266;&#25972;&#20010;&#31995;&#32479;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487060441013" ID="ID_403985166" MODIFIED="1487061005981">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.IRQF_NO_SUSPEND &#21644; enable_irq_wake()
    </p>
    <p>
      &#20960;&#20046;&#27809;&#26377;&#26377;&#25928;&#30340;&#29702;&#30001;&#22312;&#21516;&#19968;&#20010;&#20013;&#26029;&#32447;&#19978;&#21516;&#26102;&#20351;&#29992;IRQF_NO_SUSPEND&#21644;
    </p>
    <p>
      enabble_irq_wake&#20989;&#25968;&#65292;&#22312;&#21516;&#19968;&#20010;&#35774;&#22791;&#19978;&#21516;&#26102;&#20351;&#29992;&#20174;&#26469;&#37117;&#26159;&#26080;&#25928;&#30340;&#12290;
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1482849652149" ID="ID_929921751" MODIFIED="1482849668826">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/generic-pm-architecture.gif" />
  </body>
</html></richcontent>
</node>
<node CREATED="1483282137541" FOLDED="true" ID="ID_1687444721" MODIFIED="1499823184366" TEXT="/sys/power/wakeup_count">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1483282174502" ID="ID_820863831" MODIFIED="1483328734873">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35813;&#25509;&#21475;&#30001;CONFIG_PM_SLEEP&#23439;&#26469;&#36827;&#34892;&#25511;&#21046;&#65292;&#23427;&#30340;&#23384;&#22312;
    </p>
    <p>
      &#26159;&#20026;&#20102;&#35299;&#20915;sleep&#21644;wakeup&#20043;&#38388;&#30340;&#21516;&#27493;&#38382;&#39064;&#12290;
    </p>
    <p>
      wakeup_count&#26159;&#20869;&#26680;&#29992;&#26469;&#20445;&#23384;&#24403;&#21069;wakeup event&#21457;&#29983;&#30340;&#35745;&#25968;
    </p>
    <p>
      1.&#29992;&#25143;&#31354;&#38388;&#31243;&#24207;&#22312;&#20889;&#20837;state&#20999;&#25442;&#29366;&#24577;&#20043;&#21069;&#65292;&#24212;&#35813;&#32447;&#35835;&#21462;wakeup_count&#20540;
    </p>
    <p>
      &#24182;&#25226;&#35813;&#20540;&#20889;&#22238;&#21040;wakeup_count&#37324;&#38754;&#21435;&#12290;
    </p>
    <p>
      2.&#20869;&#26680;&#20250;&#23545;&#27604;&#24403;&#21069;&#30340;wakeup_count&#20540;&#21644;&#20889;&#20837;&#30340;wakeup_count&#20540;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#19981;&#19968;&#26679;&#65292;&#23601;&#35828;&#26126;&#22312;&#35835;&#21462;&#21644;&#20889;&#20837;&#20043;&#38388;&#20135;&#29983;&#20102;&#26032;&#30340;wakeup event&#20107;&#20214;&#12290;
    </p>
    <p>
      &#20869;&#26680;&#20250;&#36820;&#22238;&#38169;&#35823;&#12290;
    </p>
    <p>
      3.&#22914;&#26524;&#20869;&#26680;&#27604;&#23545;&#25104;&#21151;&#65292;&#20250;&#35760;&#24405;&#24403;&#21069;wakeup_count&#26102;&#30340;event&#24555;&#29031;&#65292;
    </p>
    <p>
      &#21518;&#38754;&#36827;&#34892;suspend&#21160;&#20316;&#30340;&#26102;&#20505;&#65292;&#20250;&#26816;&#26597;&#26159;&#21542;&#21644;&#24555;&#29031;&#30456;&#31526;&#65292;&#22914;&#26524;&#30456;&#31526;&#23601;&#32487;&#32493;&#36827;&#34892;
    </p>
    <p>
      suspend&#30340;&#21160;&#20316;&#12290;
    </p>
    <p>
      4.&#29992;&#25143;&#31354;&#38388;&#31243;&#24207;&#22312;&#26816;&#27979;&#21040;&#20889;&#20837;&#27809;&#26377;&#38169;&#35823;&#30340;&#26102;&#20505;&#65292;&#23601;&#20250;&#20889;&#20837;state,&#20174;&#32780;&#24341;&#21457;&#19968;&#27425;&#29366;&#24577;
    </p>
    <p>
      &#30340;&#20999;&#25442;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1482769214002" FOLDED="true" ID="ID_1092459693" MODIFIED="1499823197060">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/&#x7535;&#x6e90;&#x7ba1;&#x7406;&#x603b;&#x4f53;&#x67b6;&#x6784;.gif" />
  </body>
</html></richcontent>
<node CREATED="1494648663537" FOLDED="true" ID="ID_1070180731" MODIFIED="1499823195707">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b><font color="#0e956e">syscore</font></b></i>
    </p>
    <p>
      &#21442;&#32771;&#32593;&#31449;: http://blog.csdn.net/lixiaojie1012/article/details/45625699
    </p>
    <p>
      syscore&#26159;&#20316;&#20026;&#20302;&#21151;&#32791;&#27969;&#31243;&#30340;&#19968;&#37096;&#20998;&#30340;&#65292;&#28041;&#21450;&#30340;&#25991;&#20214;&#20027;&#35201;&#26377;
    </p>
    <p>
      syscore_ops.h&#21644;syscore.c&#65292;
    </p>
    <p>
      &#36825;&#19968;&#32423;&#21035;&#30340;&#22238;&#35843;&#20989;&#25968;&#26159;&#22312;&#23436;&#20840;&#23631;&#34109;&#20013;&#26029;&#30340;&#24773;&#20917;&#19979;&#36827;&#34892;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1494648879796" ID="ID_428671027" MODIFIED="1494662811529">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20027;&#35201;&#30340;&#25968;&#25454;&#32467;&#26500;
    </p>
    <p>
      struct syscore_ops {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct list_head node;&#29992;&#20110;&#38142;&#34920;&#25511;&#21046;&#65292;&#27880;&#20876;&#21644;&#21024;&#38500;syscore&#23545;&#35937;&#26102;&#25805;&#20316;&#27492;&#38142;&#34920;
    </p>
    <p>
      &#160;&#160;&#160;&#160;int (*suspend)(void); &#30561;&#30496;&#27969;&#31243;&#22238;&#35843;&#20989;&#25968;
    </p>
    <p>
      &#160;&#160;&#160;&#160;void (*resume)(void); &#21796;&#37266;&#27969;&#31243;&#22238;&#35843;&#20989;&#25968;
    </p>
    <p>
      &#160;&#160;&#160;&#160;void (*shutdown)(void);&#29992;&#20110;&#31995;&#32479;&#32423;&#30340;&#37325;&#21551;&#65292;&#20572;&#27490;&#25110;&#32773;&#25481;&#30005;
    </p>
    <p>
      };
    </p>
    <p>
      &#35813;&#32467;&#26500;&#20307;&#26159;syscore&#25805;&#20316;&#30340;&#23545;&#35937;&#31867;&#22411;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494662956993" ID="ID_1863003744" MODIFIED="1494663094540">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#20027;&#35201;&#30340;&#25509;&#21475;&#20989;&#25968;
    </p>
    <p>
      void register_syscore_ops(struct syscore_ops *ops)
    </p>
    <p>
      void unregister_syscore_ops(struct syscore_ops *ops)
    </p>
    <p>
      int syscore_suspend(void)
    </p>
    <p>
      void syscore_resume(void)
    </p>
    <p>
      void syscore_shutdown(void)
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1494688976550" ID="ID_33123216" MODIFIED="1494753274315">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b><font color="#167284">Wakelock&#26426;&#21046; </font></b></i>
    </p>
    <p>
      <font color="#ea0914">http://blog.csdn.net/g_salamander/article/details/7978772</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1483357585049" FOLDED="true" ID="ID_1605872444" MODIFIED="1486974916734">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b><font color="#da1414">wakeup events framework </font></b></i>
    </p>
    <p>
      &#35201;&#35299;&#20915;&#30340;&#38382;&#39064;:
    </p>
    <p>
      system suspend&#21644;system wakeup events
    </p>
    <p>
      &#20043;&#38388;&#30340;&#21516;&#27493;&#38382;&#39064;
    </p>
  </body>
</html></richcontent>
<node CREATED="1483358003206" ID="ID_978302896" MODIFIED="1486965068810">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ef0303"><i>&#20004;&#31181;&#31354;&#38388;&#37324;&#38754;&#30340;&#21516;&#27493;:</i></font></b>
    </p>
    <p>
      1.&#20869;&#26680;&#31354;&#38388;&#30340;&#21516;&#27493;
    </p>
    <p>
      wake up event&#20135;&#29983;&#20043;&#21518;&#65292;&#36890;&#24120;&#26159;&#20197;&#20013;&#26029;&#30340;&#24418;&#24335;&#36890;&#30693;
    </p>
    <p>
      &#35774;&#22791;&#39537;&#21160;&#65292;&#22312;&#35774;&#22791;&#39537;&#21160;&#22788;&#29702;&#20013;&#26029;&#30340;&#36807;&#31243;&#24403;&#20013;&#65292;&#31995;&#32479;&#19981;&#33021;suspend,
    </p>
    <p>
      &#33509;&#35774;&#22791;&#20013;&#26029;&#34987;&#20851;&#38381;&#21017;&#19981;&#23384;&#22312;&#21516;&#27493;&#38382;&#39064;&#12290;(<b><font color="#e20d0d">framework&#30340;&#26680;&#24515;&#21151;&#33021;</font></b>)
    </p>
    <p>
      
    </p>
    <p>
      2.&#29992;&#25143;&#31354;&#38388;&#30340;&#21516;&#27493;
    </p>
    <p>
      wake up events&#34987;&#39537;&#21160;&#22788;&#29702;&#20043;&#21518;&#20250;&#34987;&#19978;&#25253;&#21040;&#29992;&#25143;&#31354;&#38388;&#65292;&#36825;&#26102;&#29992;&#25143;&#31354;&#38388;&#30340;&#22788;&#29702;&#20026;
    </p>
    <p>
      a. &#29992;&#25143;&#31354;&#38388;&#31243;&#24207;&#26681;&#26412;&#27809;&#26377;&#34987;&#35843;&#24230;&#65292;events&#26080;&#27861;&#34987;&#19978;&#25253;&#21040;&#29992;&#25143;&#31354;&#38388;(<b><font color="#f50e0e">wakeup count</font></b>)
    </p>
    <p>
      b. &#29992;&#25143;&#31354;&#38388;&#36827;&#31243;&#24471;&#21040;&#20102;&#35843;&#24230;&#65292;&#22312;&#22788;&#29702;&#30340;&#36807;&#31243;&#24403;&#20013;&#25110;&#32773;&#22788;&#29702;&#23436;&#25104;&#20043;&#21518;&#29992;&#25143;&#36827;&#31243;&#20915;&#23450;
    </p>
    <p>
      &#19981;&#36827;&#20837;&#20241;&#30496;&#29366;&#24577;&#65292; &#31995;&#32479;&#24517;&#39035;&#20572;&#27490;suspend&#12290;(<b><font color="#ef0808">wake lock</font></b>)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1486965809036" ID="ID_172572929" MODIFIED="1486965809036" TEXT=""/>
</node>
<node CREATED="1486974884753" FOLDED="true" ID="ID_1048613728" MODIFIED="1499823205686">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#31995;&#32479;&#21796;&#37266;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1486974920735" FOLDED="true" ID="ID_1347078890" MODIFIED="1494223900470" TEXT="1.ACPI&#x517c;&#x5bb9;&#x7cfb;&#x7edf;&#x7684;&#x8bbe;&#x5907;&#x5982;&#x4f55;&#x5524;&#x9192;&#x7cfb;&#x7edf;">
<node CREATED="1486974974526" ID="ID_721029365" MODIFIED="1487127494344">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#22914;&#26524;&#22312;/proc/acpi/wakeup&#24403;&#20013;&#21487;&#20197;&#25171;&#21360;&#20986;&#30456;&#20851;&#30340;&#35774;&#22791;&#65292;&#24182;&#19988;
    </p>
    <p>
      &#20026;enable&#65292;&#21017;&#21487;&#20197;&#26029;&#23450;&#35813;&#35774;&#22791;&#21487;&#20197;&#21796;&#37266;&#31995;&#32479;&#12290;&#25152;&#26377;&#22312;&#35813;&#25991;&#20214;&#24403;&#20013;&#26377;&#26174;&#31034;&#30340;&#35774;&#22791;
    </p>
    <p>
      &#37117;&#34987;&#21152;&#20837;&#21040;&#20102;acpi_wakeup_device_list&#38142;&#34920;&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487136797169" ID="ID_397069053" MODIFIED="1487136824304">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.ACPI&#23450;&#20041;&#30340;&#20960;&#20010;&#31995;&#32479;&#30340;&#29366;&#24577;</b>
    </p>
    <p>
      G1 Sleeping subdivides into the four states S1 through S4.
    </p>
    <p>
      S1: The CPU(s) stop(s) executing instructions.
    </p>
    <p>
      S2: The CPU is powered off.
    </p>
    <p>
      S3: Suspend to RAM.
    </p>
    <p>
      S4: Suspend to disk or hibernate.
    </p>
    <p>
      G2 (S5) Soft off Almost the same as G3 but computer can &quot;wake&quot; from input from the keyboard, clock, modem, LAN, or USB device.
    </p>
    <p>
      G3 Mechanical off
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490165194139" ID="ID_1564199583" MODIFIED="1490165200299" TEXT="http://blog.csdn.net/wavemcu/article/details/8544333">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1494223925055" FOLDED="true" ID="ID_1813003510" MODIFIED="1499823204566" TEXT="Intel soc &#x4f4e;&#x529f;&#x8017;/&#x4f11;&#x7720;&#x673a;&#x5236;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1494223960112" ID="ID_1944115341" MODIFIED="1494223968320" TEXT="Atom&#x7cfb;&#x5217;"/>
<node CREATED="1494223978807" FOLDED="true" ID="ID_639406366" MODIFIED="1499823203086">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e50e0e"><i>&#30456;&#20851;&#30340;&#27979;&#35797;&#21629;&#20196;</i></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1494223989631" ID="ID_75631460" MODIFIED="1494224036963">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#27979;&#35797;s0i3&#30340;&#21344;&#29992;&#27604;</b>
    </p>
    <p>
      adb shell cat /sys/kernel/debug/pmc_atom/sleep_state
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1494224749965" ID="ID_188575836" MODIFIED="1494224772977">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e30303"><i>rfkill&#26426;&#21046;</i></font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1456929335533" FOLDED="true" ID="ID_1088410273" MODIFIED="1507709497708" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#d71313">Linux&#20013;&#26029;&#31995;&#32479;&#26550;&#26500;</font></b>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1456929648265" ID="ID_1830484819" MODIFIED="1456930560458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#23618;&#27425;&#32467;&#26500; </b>
    </p>
    <p>
      <b>IRQ&#20013;&#26029;&#27969;&#25511;&#23618;&#160;&#160;&lt;------------&gt;&#160;&#160;&#20013;&#26029;&#36890;&#29992;&#36923;&#36753;&lt;-------&gt;&#30828;&#20214;&#23553;&#35013;&#23618; </b>
    </p>
    <p>
      
    </p>
    <p>
      <i><b>&#30828;&#20214;&#23553;&#35013;&#23618;</b></i>&#65306;&#21253;&#21547;&#20307;&#31995;&#32467;&#26500;&#30456;&#20851;&#30340;&#20195;&#30721;&#65292;&#21253;&#21547;&#20013;&#26029;&#25511;&#21046;&#22120;&#30340;&#25277;&#35937;&#65292;
    </p>
    <p>
      arch&#30456;&#20851;&#30340;&#20013;&#26029;&#21021;&#22987;&#21270;&#65292;&#21508;&#20010;IRQ&#30340;&#30456;&#20851;&#25968;&#25454;&#32467;&#26500;&#30340;&#21021;&#22987;&#21270;&#24037;&#20316;&#12290;
    </p>
    <p>
      cpu&#30340;&#20013;&#26029;&#20837;&#21475;&#20063;&#20250;&#22312;arch&#30456;&#20851;&#30340;&#20195;&#30721;&#24403;&#20013;&#21021;&#22987;&#21270;&#12290;
    </p>
    <p>
      <i><b>&#20013;&#26029;&#36890;&#29992;&#36923;&#36753;&#23618;</b></i>&#65306;&#23450;&#20041;&#26631;&#20934;&#30340;&#23553;&#35013;&#25509;&#21475;&#65292;&#21363;struct irq_chip&#23450;&#20041;&#30340;&#25509;&#21475;
    </p>
    <p>
      &#25511;&#21046;&#20013;&#26029;&#25511;&#21046;&#22120;&#30340;&#34892;&#20026;&#65292;&#20013;&#26029;&#20837;&#21475;&#20989;&#25968;&#33719;&#21462;IRQ&#32534;&#21495;&#20043;&#21518;&#36890;&#36807;&#20013;&#26029;&#36890;&#29992;
    </p>
    <p>
      &#36923;&#36753;&#36716;&#21040;&#20013;&#26029;&#27969;&#25511;&#23618;&#37324;&#38754;&#36816;&#34892;&#12290;
    </p>
    <p>
      <i><b>&#20013;&#26029;&#27969;&#25511;&#23618;</b></i>&#65306;&#26681;&#25454;&#19981;&#21516;&#30340;&#20013;&#26029;&#30005;&#27668;&#31867;&#22411;&#65292;&#23454;&#29616;&#19981;&#21516;&#30340;&#20013;&#26029;&#27969;&#22788;&#29702;&#20989;&#25968;&#65292;
    </p>
    <p>
      &#24182;&#23558;&#26368;&#32456;&#30340;&#20013;&#26029;&#25511;&#21046;&#26435;&#20256;&#36882;&#32473;&#39537;&#21160;&#27880;&#20876;&#30340;&#20013;&#26029;&#22788;&#29702;&#21477;&#26564;&#25110;&#32773;&#26159;&#32447;&#31243;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1457969453362" FOLDED="true" ID="ID_1271920120" MODIFIED="1501830375790">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#ff0000">&#20851;&#20110;&#20013;&#26029;&#31995;&#32479;&#30340;&#22797;&#26434;&#25968;&#25454;&#32467;&#26500;</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1457969498354" FOLDED="true" ID="ID_480363006" MODIFIED="1486555599173">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font size="4" color="#333300">irq domain&#30340;&#27010;&#24565;&#21644;&#20854;callback&#20989;&#25968;</font></b><font size="4" color="#006666">&#160; </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">struct irq_domain { </font><b><font size="3" color="#ff0033">/*&#20869;&#26680;&#29256;&#26412;4.4.8*/</font></b>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">struct list_head link;&#160;&#160;&#160;&#160;&#160;const char *name;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const struct irq_domain_ops *ops; </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">void *host_data;&#160;&#160;&#160;&#160;&#160;unsigned int flags;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct fwnode_handle *fwnode; </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">&#160;enum irq_domain_bus_token bus_token;&#160;&#160;&#160;&#160;struct irq_domain_chip_generic *gc; </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">#ifdef&#160;&#160;CONFIG_IRQ_DOMAIN_HIERARCHY </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">struct irq_domain *parent; </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">#endif </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">/* reverse map data. The linear map gets appended to the irq_domain */ </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">irq_hw_number_t hwirq_max; </font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">unsigned int revmap_direct_max_irq; <b>&#30452;&#25509;&#26144;&#23556;&#26041;&#24335;&#20013;&#26368;&#22823;&#30340;hwirq&#20540;</b></font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">unsigned int revmap_size;<b>&#160;&#32447;&#24615;&#26144;&#23556;&#34920;&#30340;&#22823;&#23567;</b></font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">struct radix_tree_root revmap_tree; <b>radix&#26641;</b></font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">&#160;unsigned int linear_revmap[];<b>&#160;hwirq-&gt;virq&#30340;&#26144;&#23556;&#34920;&#26684;</b></font>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; text-indent: 0px; line-height: 20px; margin-left: 0px; white-space: normal; text-align: left; letter-spacing: normal; padding-right: 0px; margin-top: 0px; text-transform: none">
      <font size="3">};</font>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="12"/>
<node CREATED="1461078537489" ID="ID_358095483" MODIFIED="1461509522931">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">struct irq_domain_ops</font></b><font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">&#160;{</font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">int (*<b>match</b>)(struct irq_domain *d, struct device_node *node);&#160;&#160;&#160;&#160;&#160; </font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">int (*<b>map</b>)(struct irq_domain *d, unsigned int virq, irq_hw_number_t hw);&#160;&#160;&#160;&#160;&#160; </font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">void (*<b>unmap</b>)(struct irq_domain *d, unsigned int virq);&#160;&#160;&#160;&#160;&#160; </font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">int (*<b>xlate</b>)(struct irq_domain *d, struct device_node *node,&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; </font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">const u32 *intspec, unsigned int intsize,&#160;&#160;unsigned long *out_hwirq, </font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">unsigned int *out_type);&#160; </font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">}; </font>
    </p>
    <p>
      <font color="rgb(50, 50, 50)" face="Arial, Helvetica, sans-serif">1.xlate&#20989;&#25968;&#29992;&#20110;&#23558;device tree&#37324;&#38754;&#30340;&#25351;&#23450;&#20010;&#25968;(intsize)&#30340;&#20013;&#26029;&#23646;&#24615; </font>
    </p>
    <p>
      (intspec)&#32763;&#35793;&#25104;hw irq(out_hwirq)&#21644;&#20854;&#23545;&#24212;&#30340;trigger&#23646;&#24615;(out_type)
    </p>
    <p>
      2.match&#20989;&#25968;&#29992;&#20110;&#21028;&#26029;&#20256;&#20837;&#30340;&#20195;&#34920;interrupt controller&#30340;node&#33410;&#28857;&#26159;&#21542;
    </p>
    <p>
      &#36319;&#24403;&#21069;&#30340;irq_domain&#21305;&#37197;
    </p>
    <p>
      3.map&#20989;&#25968;&#26159;&#22312;&#29992;&#20110;&#26356;&#26032;&#25110;&#32773;&#21019;&#24314;hw interrupt id&#21644;irq number&#20851;&#31995;&#30340;
    </p>
    <p>
      &#26102;&#20505;&#34987;&#35843;&#29992;&#12290;
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1461509588742" ID="ID_577602559" MODIFIED="1461509613093" TEXT="&#x6240;&#x6709;&#x7684;irq_domain&#x90fd;&#x88ab;&#x6302;&#x5165;&#x5230;&#x4e00;&#x4e2a;&#x5168;&#x5c40;&#x7684;&#x94fe;&#x8868;&#x5f53;&#x4e2d;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1462698069365" ID="ID_587962475" MODIFIED="1462698122230">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      86 struct irq_domain {<b><font color="#ff3300">/*&#20869;&#26680;&#29256;&#26412;3.10*/</font></b>
    </p>
    <p>
      &#160;87&#160;&#160;&#160;&#160;&#160;struct list_head link;
    </p>
    <p>
      &#160;89&#160;&#160;&#160;&#160;&#160;/* type of reverse mapping_technique */
    </p>
    <p>
      &#160;90&#160;&#160;&#160;&#160;&#160;unsigned int revmap_type;
    </p>
    <p>
      &#160;91&#160;&#160;&#160;&#160;&#160;union {
    </p>
    <p>
      &#160;92&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct {
    </p>
    <p>
      &#160;93&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int size;
    </p>
    <p>
      &#160;94&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int first_irq;
    </p>
    <p>
      &#160;95&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;irq_hw_number_t first_hwirq;
    </p>
    <p>
      &#160;96&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} legacy;
    </p>
    <p>
      &#160;97&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct {
    </p>
    <p>
      &#160;98&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int size;
    </p>
    <p>
      &#160;99&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int *revmap;
    </p>
    <p>
      100&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} linear;
    </p>
    <p>
      101&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct {
    </p>
    <p>
      102&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int max_irq;
    </p>
    <p>
      103&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} nomap;
    </p>
    <p>
      104&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;struct radix_tree_root tree;
    </p>
    <p>
      105&#160;&#160;&#160;&#160;&#160;} revmap_data;
    </p>
    <p>
      106&#160;&#160;&#160;&#160;&#160;const struct irq_domain_ops *ops;
    </p>
    <p>
      107&#160;&#160;&#160;&#160;&#160;void *host_data;
    </p>
    <p>
      108&#160;&#160;&#160;&#160;&#160;irq_hw_number_t inval_irq;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1461078723770" FOLDED="true" ID="ID_1792090420" MODIFIED="1486555599174">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;irq_domain&#24403;&#20013;hw interrupt id
    </p>
    <p>
      &#21644;IRQ number&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;&#21019;&#24314;
    </p>
    <p>
      irq_domain
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1461078817177" ID="ID_1215070585" MODIFIED="1461489293154">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1<b>.&#32447;&#24615;&#26144;&#23556;</b>
    </p>
    <p>
      interrupt controller&#22312;&#23545;hw interrupt id&#36827;&#34892;&#32534;&#30721;&#30340;&#26102;&#20505;&#35201;&#28385;&#36275;interrupt id&#19981;&#33021;&#36807;&#22823;
    </p>
    <p>
      struct irq_domain *irq_domain_add_linear(struct device_node *of_node,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int size, &#35813;domain&#25903;&#25345;&#30340;&#20013;&#26029;&#25968;&#37327;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const struct irq_domain_ops *ops,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;void *host_data)
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="12"/>
</node>
<node CREATED="1461079062063" ID="ID_1550690554" MODIFIED="1461489476816">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.<b>radix tree&#26144;&#23556;</b>
    </p>
    <p>
      struct irq_domain *irq_domain_add_tree(struct device_node *of_node,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const struct irq_domain_ops *ops,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;void *host_data)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1461506726966" ID="ID_350720392" MODIFIED="1461506894016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.<b>no map&#31867;&#22411;</b>
    </p>
    <p>
      &#26377;&#20123;&#20013;&#26029;&#25511;&#21046;&#22120;&#21151;&#33021;&#24456;&#24378;&#22823;&#65292;&#21487;&#20197;&#36890;&#36807;&#23492;&#23384;&#22120;&#26469;
    </p>
    <p>
      &#37197;&#32622;hw irq,&#25152;&#20197;&#25105;&#20204;&#30452;&#25509;&#23558;irq number&#20889;&#20837;&#23492;&#23384;&#22120;&#37324;&#38754;
    </p>
    <p>
      &#23601;&#21487;&#20197;&#20102;&#65292;hw irq&#23601;&#26159;irq number
    </p>
    <p>
      <b>static inline struct irq_domain *irq_domain_add_nomap(struct device_node *of_node, </b>
    </p>
    <p>
      <b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int max_irq, </b>
    </p>
    <p>
      <b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;const struct irq_domain_ops *ops, </b>
    </p>
    <p>
      <b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;void *host_data)</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1461483798601" FOLDED="true" ID="ID_1389007232" MODIFIED="1486555599174">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#006666">&#20026;&#24050;&#32463;&#21019;&#24314;&#22909;&#30340;irq_domain </font></b>
    </p>
    <p>
      <b><font color="#006666">&#21019;&#24314;&#20855;&#20307;&#30340;&#26144;&#23556;&#20851;&#31995;&#65306;&#22235;&#22823;&#25509;&#21475;</font></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1461484810959" ID="ID_1316936140" MODIFIED="1461485064201">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.<b>&#20026;hw interrupt id&#21160;&#24577;&#20998;&#37197;irq number</b>
    </p>
    <p>
      &#35843;&#29992;&#35813;&#20989;&#25968;&#30340;&#21069;&#25552;&#26159;&#24517;&#39035;&#30693;&#36947;&#20013;&#26029;&#20256;&#20837;&#30340;hw interrupt id
    </p>
    <p>
      &#20856;&#22411;&#30340;&#24212;&#29992;&#22330;&#26223;&#26159;&#20351;&#29992;&#22312;gpio&#20013;&#26029;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#30693;&#36947;
    </p>
    <p>
      gpio&#21495;&#36319;hw interrupt id&#20043;&#38388;&#30340;&#20851;&#31995;&#12290;
    </p>
    <p>
      extern unsigned int irq_create_mapping(struct irq_domain *host
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;irq_hw_number_t hwirq)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1461485199595" ID="ID_452731619" MODIFIED="1461485416757">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.<b>&#20026;&#19968;&#32452;hw interrupt id&#21019;&#24314;&#26144;&#23556; </b>
    </p>
    <p>
      extern int irq_create_strict_mappings(struct irq_domain *domain,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned int irq_base, irq_hw_number_t hwirq_base,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int count);
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1461485446017" ID="ID_1199869714" MODIFIED="1461486380702">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.<b>&#21033;&#29992;devicetree&#24314;&#31435;&#26144;&#23556;&#30340;&#20851;&#31995;</b>
    </p>
    <p>
      <b>extern unsigned int irq_create_of_mapping(struct of_phandle_args *irq_data)</b>
    </p>
    <p>
      &#39537;&#21160;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#20250;&#35843;&#29992;irq_of_parse_and_map(struct device_node *dev, int index)
    </p>
    <p>
      &#20989;&#25968;&#65292;&#35813;&#20989;&#25968;&#20250;&#23545;device_node&#20013;&#36319;&#20013;&#26029;&#30456;&#20851;&#30340;&#20869;&#23481;&#36827;&#34892;&#20998;&#26512;&#65292;&#28982;&#21518;&#35813;&#20989;&#25968;&#20250;&#35843;&#29992;
    </p>
    <p>
      irq_create_of_mapping&#21019;&#24314;&#26144;&#23556;&#65292;&#36820;&#22238;irq number
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1461486658657" ID="ID_1947661424" MODIFIED="1461486752059">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      4.<b>&#21019;&#24314;&#30452;&#25509;&#30340;&#26144;&#23556;&#24418;&#24335; </b>
    </p>
    <p>
      irq_create_direct_mapping&#36825;&#26159;&#32473;no map&#31867;&#22411;&#30340;interrupt controller
    </p>
    <p>
      &#20351;&#29992;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1461511040984" FOLDED="true" ID="ID_1591423950" MODIFIED="1486555599174">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Mapping DB&#30340;&#24314;&#31435; </b>
    </p>
    <p>
      &#31995;&#32479;&#22312;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#20250;&#24314;&#31435;hw interrupt id
    </p>
    <p>
      &#21644;irq number&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;&#25968;&#25454;&#24211;
    </p>
  </body>
</html></richcontent>
<node CREATED="1461511653565" ID="ID_1188693622" MODIFIED="1462610924206">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#22312;machine driver&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#20250;&#35843;&#29992;of_irq_init,&#22312;&#35813;&#20989;&#25968;&#24403;&#20013;&#20250;&#25195;&#25551;&#25152;&#26377;&#30340;
    </p>
    <p>
      interrupt controller&#33410;&#28857;&#65292;&#24182;&#35843;&#29992;&#25509;&#21475;&#21019;&#24314;irq_domain
    </p>
    <p>
      2.&#26377;&#20123;interrupt controller&#20250;&#22312;&#20854;driver&#21021;&#22987;&#21270;&#36807;&#31243;&#24403;&#20013;&#21019;&#24314;&#26144;&#23556;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1462610954252" FOLDED="true" ID="ID_1070434901" MODIFIED="1468809784101">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20855;&#20307;&#20195;&#30721;&#20998;&#26512;&#65306;&#22312;interrupt controller&#21021;&#22987;&#21270;&#30340;&#36807;&#31243;&#20013; </b>
    </p>
    <p>
      <b>&#27880;&#20876;irq_domain &#20197;GIC&#20026;&#20363;&#23376;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1462675000594" FOLDED="true" ID="ID_1354714296" MODIFIED="1468245876921" TEXT="GIC&#x7b80;&#x5355;&#x5b66;&#x4e60;">
<node CREATED="1462675030820" ID="ID_826488054" MODIFIED="1462675273901">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.GIC&#21487;&#20197;&#29992;&#20110;&#21333;&#26680;&#25110;&#32773;&#22810;&#26680;&#30340;&#31995;&#32479;&#65292;&#24635;&#20849;&#26377;&#19977;&#31181;&#20013;&#26029;&#31867;&#22411;
    </p>
    <p>
      SGI&#36719;&#20013;&#26029;&#65292;&#27599;&#20010;&#26680;&#37117;&#26377;&#65292;&#29992;&#20110;&#22810;&#26680;&#20043;&#38388;&#36890;&#20449;
    </p>
    <p>
      PPI&#31169;&#26377;&#35774;&#22791;&#20013;&#26029;&#65292;&#27599;&#20010;&#26680;&#37117;&#26377;
    </p>
    <p>
      SPI&#20849;&#20139;&#35774;&#22791;&#20013;&#26029;&#65292;&#21508;&#20010;&#26680;&#20849;&#20139;&#30340;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1462675603647" FOLDED="true" ID="ID_587960211" MODIFIED="1468245878999" TEXT="&#x4ee3;&#x7801;&#x5206;&#x6790;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1462692053004" FOLDED="true" ID="ID_411478953" MODIFIED="1468245873590">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#cc0000"><i>&#20855;&#20307;&#30340;GIC&#20195;&#30721;&#22312; </i></font></b>
    </p>
    <p>
      <b><font color="#cc0000"><i>gic_of_init-&gt;gic_init_base&#20989;&#25968;&#24403;&#20013; </i></font></b>
    </p>
    <p>
      <font color="#000033">struct gic_chip_data { </font>
    </p>
    <p>
      <font color="#000033">&#160;44&#160;&#160;&#160;&#160;&#160;void __iomem&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*dist_base; </font>
    </p>
    <p>
      <font color="#000033">&#160;45&#160;&#160;&#160;&#160;&#160;struct redist_region&#160;&#160;&#160;&#160;*redist_regions; </font>
    </p>
    <p>
      <font color="#000033">&#160;46&#160;&#160;&#160;&#160;&#160;struct rdists&#160;&#160;&#160;&#160;&#160;&#160;&#160;rdists; </font>
    </p>
    <p>
      <font color="#000033">&#160;47&#160;&#160;&#160;&#160;&#160;struct irq_domain&#160;&#160;&#160;*domain; </font>
    </p>
    <p>
      <font color="#000033">&#160;48&#160;&#160;&#160;&#160;&#160;u64&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;redist_stride; </font>
    </p>
    <p>
      <font color="#000033">&#160;49&#160;&#160;&#160;&#160;&#160;u32&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nr_redist_regions; </font>
    </p>
    <p>
      <font color="#000033">&#160;50&#160;&#160;&#160;&#160;&#160;unsigned int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;irq_nr; </font>
    </p>
    <p>
      <font color="#000033">&#160;51 };</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1462700795234" ID="ID_941106088" MODIFIED="1462700904458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#22312;gic_init_base&#20989;&#25968;&#24403;&#20013;,&#20989;&#25968;&#26368;&#32456;&#20250;&#35843;&#29992;&#21040; </b>
    </p>
    <p>
      <b>irq_domain_add_legacy&#20989;&#25968;&#65292;&#22312;&#35813;&#20989;&#25968;&#24403;&#20013; </b>
    </p>
    <p>
      <b>&#21019;&#24314;&#20102;&#22266;&#23450;&#30340;&#26144;&#23556;&#20851;&#31995;&#20102;&#12290;&#36825;&#26159;&#22312;3.10&#20869;&#26680;&#24403;&#20013;&#30340;&#20195;&#30721; </b>
    </p>
    <p>
      <b>&#26412;&#36136;&#19978;&#26469;&#35828;&#27809;&#26377;&#21457;&#25381;&#20986;device tree&#30340;&#23041;&#21147;</b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1462714065291" FOLDED="true" ID="ID_1870903878" MODIFIED="1468245872629">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.<b>&#22312;&#21508;&#20010;&#30828;&#20214;&#22806;&#35774;&#30340;&#39537;&#21160;&#31243;&#24207;&#21021;&#22987;&#21270;&#20989;&#25968;&#24403;&#20013;&#65292; </b>
    </p>
    <p>
      <b>&#21019;&#24314;hw interrupt id&#21644;irq number&#20043;&#38388;&#30340;&#20851;&#31995;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1462714168262" ID="ID_1993256268" MODIFIED="1462718138187">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>irq_of_parse_and_map&#35843;&#29992;irq_create_of_mapping</b>
    </p>
    <p>
      &#20989;&#25968;&#36827;&#34892;&#26144;&#23556;&#65306;
    </p>
    <p>
      <b>irq_create_of_mapping</b>&#20989;&#25968;&#20998;&#26512;&#65306;
    </p>
    <p>
      struct of_phandle_args {
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct device_node *np;
    </p>
    <p>
      &#160;&#160;&#160;&#160;int args_count;
    </p>
    <p>
      &#160;&#160;&#160;&#160;uint32_t args[MAX_PHANDLE_ARGS];
    </p>
    <p>
      };
    </p>
    <p>
      1.&#35813;&#20989;&#25968;&#39318;&#20808;&#24314;&#31435;irq_domain&#32467;&#26500;&#20307;
    </p>
    <p>
      2.&#36890;&#36807;xlate&#20989;&#25968;&#26469;&#35299;&#26512;device node&#36820;&#22238;hw interrupt id&#21644;&#35302;&#21457;&#30340;&#26041;&#24335;
    </p>
    <p>
      3.&#35843;&#29992;irq_create_mapping&#21019;&#24314;hw interrupt id&#21644;irq number&#20043;&#38388;&#30340;&#26144;&#23556;&#20851;&#31995;
    </p>
    <p>
      irq_create_mapping&#26368;&#21518;&#35843;&#29992;irq_domain_associate_many&#20989;&#25968;&#26469;&#23436;&#25104;&#26368;&#21518;&#30340;&#26144;&#23556;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1462718666577" ID="ID_841861986" MODIFIED="1462720104048">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.&#23558;hw interrupt id&#36716;&#21464;&#25104;irq number&#30340;&#36807;&#31243; </b>
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; margin-left: 0px; line-height: 20px; text-indent: 0px; text-align: left; white-space: normal; padding-right: 0px; letter-spacing: normal; background-color: rgb(255, 255, 255); margin-top: 0px; text-transform: none">
      1&#65289;&#39318;&#20808;&#25214;&#21040;root interrupt controller&#23545;&#24212;&#30340;irq domain&#12290;
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; margin-left: 0px; line-height: 20px; text-indent: 0px; text-align: left; white-space: normal; padding-right: 0px; letter-spacing: normal; background-color: rgb(255, 255, 255); margin-top: 0px; text-transform: none">
      &#65288;2&#65289;&#26681;&#25454;HW &#23492;&#23384;&#22120;&#20449;&#24687;&#21644;irq domain&#20449;&#24687;&#33719;&#21462;HW interrupt ID
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; margin-left: 0px; line-height: 20px; text-indent: 0px; text-align: left; white-space: normal; padding-right: 0px; letter-spacing: normal; background-color: rgb(255, 255, 255); margin-top: 0px; text-transform: none">
      &#65288;3&#65289;&#35843;&#29992;irq_find_mapping&#25214;&#21040;HW interrupt ID&#23545;&#24212;&#30340;irq number
    </p>
    <p style="font-size: 13px; padding-bottom: 15px; color: rgb(50, 50, 50); font-style: normal; margin-right: 0px; font-weight: normal; margin-bottom: 0px; padding-left: 0px; font-family: Arial, Helvetica, sans-serif; font-variant: normal; word-spacing: 0px; padding-top: 0px; margin-left: 0px; line-height: 20px; text-indent: 0px; text-align: left; white-space: normal; padding-right: 0px; letter-spacing: normal; background-color: rgb(255, 255, 255); margin-top: 0px; text-transform: none">
      &#65288;4&#65289;&#35843;&#29992;handle_IRQ&#65288;&#23545;&#20110;ARM&#24179;&#21488;&#65289;&#26469;&#22788;&#29702;&#35813;irq number
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node COLOR="#cc0000" CREATED="1461079575435" ID="ID_81324376" MODIFIED="1461079623616" TEXT="2440&#x4e2d;&#x65ad;&#x7cfb;&#x7edf;&#x4ee3;&#x7801;&#x5206;&#x6790;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
</node>
</node>
<node CREATED="1475917220585" FOLDED="true" ID="ID_1364440222" MODIFIED="1504664635275" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#dd0606" size="4"><b>&#31532;&#21313;&#31456;&#65306;PCI&#35774;&#22791;&#39537;&#21160;</b></font>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1475917339823" FOLDED="true" ID="ID_526840807" MODIFIED="1499823215079">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.&#22320;&#22336;&#31354;&#38388;</b>
    </p>
    <p>
      cpu&#21644;pci&#35774;&#22791;&#38656;&#35201;&#35775;&#38382;&#22312;&#20182;&#20204;&#20043;&#38388;&#20849;&#20139;&#30340;&#20869;&#23384;&#31354;&#38388;&#65292;
    </p>
    <p>
      &#35813;&#20869;&#23384;&#31354;&#38388;&#21487;&#20197;&#34987;&#39537;&#21160;&#29992;&#26469;&#25511;&#21046;&#35774;&#22791;&#21644;&#20849;&#20139;&#20449;&#24687;&#12290;
    </p>
    <p>
      &#20856;&#22411;&#22320;&#65292;&#20849;&#20139;&#20869;&#23384;&#31354;&#38388;&#24403;&#20013;&#21253;&#25324;&#35774;&#22791;&#30340;&#29366;&#24577;&#21644;&#25511;&#21046;&#23492;&#23384;&#22120;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1475917500080" ID="ID_1497565921" MODIFIED="1475917853969">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#31995;&#32479;&#30340;&#20869;&#23384;&#31354;&#38388;&#30340;&#19968;&#37096;&#20998;&#21487;&#20197;&#34987;&#26159;&#29992;&#26469;&#24403;&#20316;&#20849;&#20139;&#30340;&#20869;&#23384;&#31354;&#38388;&#65292;
    </p>
    <p>
      &#20294;&#26159;&#30001;&#20110;&#31995;&#32479;&#24403;&#20013;&#30340;&#32452;&#20214;&#23545;&#31995;&#32479;&#20869;&#23384;&#30340;&#35775;&#38382;&#26159;&#20114;&#26021;&#30340;&#65292;&#25152;&#20197;&#20219;&#30001;
    </p>
    <p>
      pci&#35774;&#22791;&#26469;&#35775;&#38382;&#20869;&#23384;&#31354;&#38388;&#26080;&#30097;&#20250;&#25302;&#24930;&#25972;&#20010;&#31995;&#32479;&#30340;&#36895;&#24230;&#12290;&#21516;&#26102;&#23545;&#35774;&#22791;&#30340;
    </p>
    <p>
      &#35775;&#38382;&#19981;&#21152;&#25511;&#21046;&#20063;&#26159;&#24456;&#21361;&#38505;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1475917858032" FOLDED="true" ID="ID_484567526" MODIFIED="1499823213024">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;&#35774;&#22791;&#37117;&#26377;&#33258;&#24049;&#30340;&#20869;&#23384;&#31354;&#38388;&#65292;cpu&#21487;&#20197;&#35775;&#38382;&#35774;&#22791;&#30340;&#20869;&#23384;&#31354;&#38388;&#65292;
    </p>
    <p>
      &#20294;&#26159;&#35774;&#22791;&#22914;&#26524;&#38656;&#35201;&#35775;&#38382;&#31995;&#32479;&#30340;&#20869;&#23384;&#65292;&#21017;&#38656;&#35201;&#36890;&#36807;DMA&#36890;&#36947;&#26469;&#36827;&#34892;
    </p>
    <p>
      &#25511;&#21046;&#65292;&#20197;&#38450;&#27490;&#35775;&#38382;&#22833;&#25511;&#12290;PCI&#35774;&#22791;&#25317;&#26377;&#19977;&#31181;&#22320;&#22336;&#31354;&#38388;:
    </p>
    <p>
      <b>PCI I/O, PCI Memory and PCI Configuration space </b>
    </p>
    <p>
      &#38500;&#20102;&#37197;&#32622;&#31354;&#38388;&#20043;&#22806;&#65292;&#20854;&#20182;&#30340;&#20004;&#20010;&#31354;&#38388;&#23545;&#21516;&#19968;&#20010;bus&#19978;&#30340;&#25152;&#26377;&#35774;&#22791;&#26469;&#35828;
    </p>
    <p>
      &#37117;&#26159;&#20849;&#20139;&#30340;,&#35774;&#22791;&#19978;&#30340;&#22266;&#20214;&#22312;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#20250;&#23558;&#19978;&#38754;&#30340;&#31354;&#38388;&#26144;&#23556;&#21040;&#19981;&#21516;&#30340;
    </p>
    <p>
      &#21306;&#22495;&#65292;&#35813;&#21306;&#22495;&#30340;&#22320;&#22336;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#31354;&#38388;&#30340;&#23492;&#23384;&#22120;&#35835;&#21462;&#21040;,&#39537;&#21160;&#19981;&#33021;&#25797;&#33258;
    </p>
    <p>
      &#20462;&#25913;I/O&#21644;memory&#30340;&#26144;&#23556;&#22320;&#22336;
    </p>
  </body>
</html></richcontent>
<node CREATED="1476075855094" ID="ID_811225544" MODIFIED="1478659574606">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      configuration space
    </p>
    <p>
      &#21253;&#25324;256&#20010;&#23383;&#33410;&#65292;&#21069;64&#23383;&#33410;&#26159;spec&#35268;&#23450;&#30340;&#20449;&#24687;&#65292;
    </p>
    <p>
      &#21518;192&#23383;&#33410;&#30001;&#20855;&#20307;&#30340;&#21378;&#23478;&#36827;&#34892;&#23450;&#20041;
    </p>
    <p>
      &#23545;&#20110;pcie&#21017;&#26377;&#22810;&#36798;4K&#30340;&#37197;&#32622;&#31354;&#38388;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476076198862" ID="ID_1404319290" MODIFIED="1476076280975">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      I/O space
    </p>
    <p>
      &#20801;&#35768;&#22806;&#35774;&#26144;&#23556;&#21040;&#35813;&#31354;&#38388;&#65292;&#26681;&#25454;spec&#30340;&#35268;&#23450;
    </p>
    <p>
      &#21487;&#20197;&#30003;&#35831;4B&#21040;2GB&#30340;&#31354;&#38388;&#65292;&#22312;x86&#24179;&#21488;&#19979;&#65292;
    </p>
    <p>
      &#30001;&#20110;isa&#30340;&#24433;&#21709;&#65292;&#26368;&#22823;&#21487;&#20197;&#30003;&#35831;256B&#30340;&#31354;&#38388;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476076876725" ID="ID_1939065717" MODIFIED="1476076945590">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      memory space
    </p>
    <p>
      &#36890;&#29992;&#30340;&#22320;&#22336;&#31354;&#38388;&#65292;pci spec&#24314;&#35758;&#19968;&#20010;&#35774;&#22791;&#20351;&#29992;
    </p>
    <p>
      memory space&#65292;&#21363;&#20351;&#35813;&#35774;&#22791;&#26159;&#19968;&#20010;&#22806;&#22260;&#30340;&#35774;&#22791;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1478656416974" ID="ID_1315769906" MODIFIED="1478660551748">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#22312;linux&#20869;&#26680;&#24403;&#20013;&#30340;&#23547;&#22336;</b>:
    </p>
    <p>
      &#26377;domain, bus number, device number, function number&#30340;&#22235;&#31181;&#27010;&#24565;
    </p>
    <p>
      &#27599;&#20010;domain&#21487;&#20197;&#21253;&#21547;256&#20010;bus
    </p>
    <p>
      &#27599;&#20010;bus&#21487;&#20197;&#21253;&#21547;32&#20010;device
    </p>
    <p>
      &#27599;&#20010;device&#21487;&#20197;&#21253;&#21547;&#26368;&#22810;8&#20010;function
    </p>
    <p>
      &#25152;&#20197;&#27599;&#20010;function&#21487;&#20197;&#36890;&#36807;16bit&#30340;&#25968;&#25454;&#34987;&#34920;&#31034;&#20986;&#26469;
    </p>
    <p>
      &#22312;linux&#24403;&#20013;&#25105;&#20204;&#19981;&#24517;&#21435;&#22788;&#29702;&#36825;&#20123;&#20108;&#36827;&#21046;&#30340;&#22320;&#22336;&#25968;&#25454;&#65292;&#36825;&#20123;&#25968;&#25454;&#37117;&#34987;&#23553;&#35013;&#21040;&#20102;
    </p>
    <p>
      &#32467;&#26500;&#20307;pci_dev&#24403;&#20013;&#20102;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      <i><b>/proc/bus/pci/devices&#30452;&#25509;&#29616;&#23454;pci&#35774;&#22791;&#30340;16bit&#30340;&#22320;&#22336; </b></i>
    </p>
    <p>
      <i><b>/proc/bus/pci/*/*. &#26159;&#20108;&#36827;&#21046;&#30340;&#25991;&#20214;&#65292;&#21487;&#20197;&#30452;&#25509;&#29616;&#23454;pci&#35774;&#22791;&#30340;&#37197;&#32622;&#31354;&#38388;&#30340;&#20869;&#23481; </b></i>
    </p>
    <p>
      <i><b>&#21629;&#20196;lspci&#21487;&#20197;&#26174;&#31034;bus, device, function&#19977;&#20010;&#22495;</b></i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1476064923956" FOLDED="true" ID="ID_895397883" MODIFIED="1499823220730">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>2.pci&#37197;&#32622;&#22836;&#25968;&#25454;&#32467;&#26500;</b></i>
    </p>
    <p>
      &#22312;&#31995;&#32479;&#24403;&#20013;&#30340;&#27599;&#20010;pci&#35774;&#22791;&#65292;&#22312;&#20854;pci&#37197;&#32622;&#31354;&#38388;&#24403;&#20013;&#37117;&#26377;
    </p>
    <p>
      &#19968;&#20010;&#37197;&#32622;&#25968;&#25454;&#32467;&#26500;
    </p>
    <p>
      pci&#37197;&#32622;&#22836;&#25968;&#25454;&#20801;&#35768;&#31995;&#32479;&#26469;&#35782;&#21035;&#21644;&#25511;&#21046;&#35774;&#22791;&#65292;&#35813;&#22836;&#25968;&#25454;
    </p>
    <p>
      &#30340;&#20301;&#32622;&#20915;&#23450;&#20110;&#24403;&#21069;pci&#35774;&#22791;&#30340;&#25299;&#25169;&#32467;&#26500;
    </p>
  </body>
</html></richcontent>
<node CREATED="1476084476349" ID="ID_877510566" MODIFIED="1476084563723">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26080;&#35770;pci&#35774;&#22791;&#25110;&#32773;pci bridge&#22312;&#21738;&#20010;&#20301;&#32622;&#65292;
    </p>
    <p>
      &#31995;&#32479;&#37117;&#20250;&#36890;&#36807;pci&#37197;&#32622;&#31354;&#38388;&#30340;&#22836;&#25968;&#25454;&#37324;&#38754;&#30340;&#29366;&#24577;&#21644;
    </p>
    <p>
      &#37197;&#32622;&#23492;&#23384;&#22120;&#25214;&#21040;&#24182;&#19988;&#37197;&#32622;&#23427;&#20204;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476084637541" ID="ID_334517731" MODIFIED="1476085111004">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27599;&#20010;pci slot&#30340;pci configuration&#31354;&#38388;&#37117;&#36319;&#27599;&#20010;pci slot&#30340;
    </p>
    <p>
      &#20301;&#32622;&#30456;&#20851;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476085116493" FOLDED="true" ID="ID_1780813473" MODIFIED="1499823218955">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/pci-config-header.gif" />
  </body>
</html></richcontent>
<node CREATED="1476085227238" ID="ID_1684699517" MODIFIED="1476085360537">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Base Address Register</b>
    </p>
    <p>
      &#29992;&#20110;&#20915;&#23450;&#21644;&#20998;&#37197;PCI I/O&#21644;PCI memory&#31354;&#38388;&#30340;&#31867;&#22411;&#65292;
    </p>
    <p>
      &#22823;&#23567;&#21644;&#20301;&#32622;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476086071390" ID="ID_1814326406" MODIFIED="1476086359318">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Interrupt Pin </b>
    </p>
    <p>
      pci card&#19978;&#38754;&#30340;&#22235;&#20010;&#29289;&#29702;&#30340;&#20013;&#26029;&#24341;&#33050;&#20250;&#23558;&#20013;&#26029;&#20449;&#21495;&#20174;
    </p>
    <p>
      card&#36882;&#36865;&#21040;pci bus&#19978;&#38754;&#21435;&#12290;&#26631;&#20934;&#20250;&#23558;&#36825;&#22235;&#20010;&#24341;&#33050;&#20998;&#21035;
    </p>
    <p>
      &#26631;&#27880;&#25104;A&#65292;B&#65292;C&#65292;D
    </p>
    <p>
      &#36890;&#24120;&#35774;&#22791;&#20250;&#22312;&#29289;&#29702;&#19978;&#23558;&#20013;&#26029;&#20449;&#21495;&#32447;&#36830;&#25509;&#21040;A&#65292;B&#65292;C&#65292;D&#24403;&#20013;
    </p>
    <p>
      &#30340;&#19968;&#20010;&#24341;&#33050;&#19978;&#38754;&#21435;&#65292;&#22240;&#27492;&#35813;&#23383;&#27573;&#23601;&#26159;&#29992;&#26469;&#26631;&#27880;&#20351;&#29992;&#20102;&#21738;&#20010;
    </p>
    <p>
      &#24341;&#33050;&#30340;&#12290;&#36825;&#26679;&#20415;&#20110;&#20013;&#26029;&#23376;&#31995;&#32479;&#22788;&#29702;&#35774;&#22791;&#30340;&#20013;&#26029;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476086666791" ID="ID_1786185514" MODIFIED="1476086739066">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Interrupt Line</b>
    </p>
    <p>
      &#35813;&#23383;&#27573;&#30340;&#25968;&#23383;&#21487;&#20197;&#24110;&#21161;&#20013;&#26029;&#23376;&#31995;&#32479;
    </p>
    <p>
      &#27491;&#30830;&#22320;&#25214;&#21040;&#23545;&#24212;&#30340;&#35774;&#22791;&#39537;&#21160;&#27880;&#20876;&#30340;
    </p>
    <p>
      &#20013;&#26029;&#22788;&#29702;&#20195;&#30721;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1495434174987" ID="ID_108542342" MODIFIED="1495434195691">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/pci-type00-configuration-header-250-370.png" />
  </body>
</html></richcontent>
<node CREATED="1495439460698" ID="ID_95804250" MODIFIED="1495439635387">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e50e0e"><b><i>&#31995;&#32479;&#22914;&#20309;&#21028;&#23450;pci&#35774;&#22791;&#26144;&#23556;&#30340;&#20869;&#23384;&#31354;&#38388;&#30340;&#22823;&#23567;:</i></b></font>
    </p>
    <p>
      &#31995;&#32479;&#20250;&#39318;&#20808;&#21521;base address register&#20889;&#20837;&#20840;1,
    </p>
    <p>
      &#28982;&#21518;&#20877;&#20174;base address register&#24403;&#20013;&#35835;&#21462;&#23492;&#23384;&#22120;&#30340;&#20540;&#65292;
    </p>
    <p>
      &#26681;&#25454;mask&#36807;&#21518;&#30340;0bit&#30340;&#25968;&#37327;&#23601;&#21487;&#20197;&#21028;&#23450;&#21097;&#19979;&#30340;1&#30340;&#25968;&#37327;&#65292;
    </p>
    <p>
      &#20174;&#32780;&#21487;&#20197;&#26029;&#23450;&#35774;&#22791;&#30340;&#20869;&#23384;&#31354;&#38388;&#30340;&#22823;&#23567;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1476077041382" FOLDED="true" ID="ID_1538495126" MODIFIED="1491197843246">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>3.pci&#21629;&#20196;</b></i>
    </p>
    <p>
      pci&#20801;&#35768;&#20351;&#29992;4bit&#38271;&#30340;16&#31181;&#21629;&#20196;
    </p>
    <p>
      Configuration commands
    </p>
    <p>
      Memory commands
    </p>
    <p>
      I/O commands
    </p>
    <p>
      Special-purpose commands
    </p>
  </body>
</html></richcontent>
<node CREATED="1476083865171" ID="ID_1274036977" MODIFIED="1476083882517">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/pci-commands.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1476078253343" FOLDED="true" ID="ID_1619791911" MODIFIED="1491197844693">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>4. transaction control&#20107;&#21153;&#25511;&#21046;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1476078342143" ID="ID_790681988" MODIFIED="1476078795567">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>target signals</b>
    </p>
    <p>
      TRDY#&#160;&#160;&#160;&#24403;target&#20934;&#22791;&#22909;&#39318;&#21457;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;&#36890;&#36807;&#35813;&#20449;&#21495;&#21578;&#30693;init&#31471;
    </p>
    <p>
      STOP#&#160;&#160;&#160;target&#21578;&#30693;&#20934;&#22791;&#32467;&#26463;&#24403;&#21069;&#30340;&#20107;&#21153;
    </p>
    <p>
      DEVSEL# &#27599;&#20010;target&#37117;&#26377;&#33021;&#21147;&#23545;&#24403;&#21069;&#20107;&#21153;&#30340;&#22320;&#22336;&#36827;&#34892;&#35299;&#30721;&#65292;&#24403;&#35813;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;target&#21457;&#29616;&#35813;&#22320;&#22336;&#19982;&#33258;&#24049;&#30340;&#22320;&#22336;&#21305;&#37197;&#30340;&#26102;&#20505;&#65292;&#23601;&#20250;&#21457;&#20986;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;devsel&#20449;&#21495;&#22768;&#26126;&#33258;&#24049;&#21305;&#37197;&#35813;&#20107;&#21153;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476078803776" ID="ID_766448862" MODIFIED="1476078969926">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Initiator Signals</b>
    </p>
    <p>
      FRAME# &#34920;&#31034;&#19968;&#20010;&#20107;&#21153;&#30340;&#24320;&#22987;&#21644;&#32467;&#26463;
    </p>
    <p>
      IRDY#&#160;&#160;&#160;&#160;&#160;initiator&#34920;&#31034;&#20934;&#22791;&#22909;&#21457;&#36865;&#25968;&#25454;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476079239872" ID="ID_982798397" MODIFIED="1476079446096">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>configuration signal</b>
    </p>
    <p>
      IDSEL ------&gt; &#29992;&#20110;&#36873;&#25321;&#38656;&#35201;&#36827;&#34892;&#37197;&#32622;&#30340;&#35774;&#22791;&#65292;
    </p>
    <p>
      &#27599;&#20010;targer&#23545;&#24212;&#19968;&#20010;&#29420;&#29305;&#30340;IDSEL
    </p>
    <p>
      &#20801;&#35768;&#20027;&#26426;&#22312;pci&#35774;&#22791;&#30693;&#36947;&#33258;&#24049;&#23545;&#24212;&#30340;&#22320;&#22336;&#20043;&#21069;
    </p>
    <p>
      &#23545;pci&#35774;&#22791;&#36827;&#34892;&#37197;&#32622;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476079492991" ID="ID_464595908" MODIFIED="1476080346090">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>address and data signals </b>
    </p>
    <p>
      <font color="#d90202">AD[31:0]</font>&#160;&#160;&#160;&#160;32&#20301;&#30340;&#22320;&#22336;&#25110;&#32773;&#25968;&#25454;&#24635;&#32447;
    </p>
    <p>
      PCI&#26159;&#23567;&#23614;&#25968;&#26684;&#24335;&#30340;
    </p>
    <p>
      <font color="#f20909">C/BE#[3:0]</font>&#160;4bit&#30340;&#21629;&#20196;&#25110;&#32773;&#25968;&#25454;&#20351;&#33021;&#24635;&#32447;
    </p>
    <p>
      &#22312;&#23547;&#22336;&#38454;&#27573;&#23450;&#20041;PCI&#21629;&#20196;&#65292;&#22312;&#25968;&#25454;&#20256;&#36755;&#38454;&#27573;&#21487;&#20197;&#20351;&#33021;
    </p>
    <p>
      &#20197;&#23383;&#33410;&#20026;&#21333;&#20301;&#30340;&#25968;&#25454;&#20256;&#36755;&#65292;&#27604;&#22914;C/BE#[0]&#21487;&#20197;&#20351;&#33021;
    </p>
    <p>
      AD[7:0]&#30340;&#25968;&#25454;&#20256;&#36755;
    </p>
    <p>
      PAR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#29992;&#20110;&#23545;AD&#21644;C/BE&#23436;&#25104;&#22855;&#20598;&#26657;&#39564;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476080647298" ID="ID_343179433" MODIFIED="1476080819500">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>arbitration signals</b>
    </p>
    <p>
      REQ#&#160;&#160;&#29992;&#20110;initiator&#26469;&#30003;&#35831;bus&#30340;&#25152;&#26377;&#26435;
    </p>
    <p>
      GNT#&#160;&#160;&#30001;system arbiter&#23558;bus&#30340;&#25152;&#26377;&#26435;
    </p>
    <p>
      &#36171;&#20104;initiator
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1478661053173" FOLDED="true" ID="ID_1422883878" MODIFIED="1494859598487">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>5.&#39537;&#21160;&#25968;&#25454;&#32467;&#26500;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1478661079011" ID="ID_1972694558" MODIFIED="1478661443793">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#32467;&#26500;&#20307;pci_device_id&#29992;&#26469;&#23450;&#20041;&#39537;&#21160;&#25903;&#25345;&#30340;&#19981;&#21516;&#30340;pci&#30340;&#35774;&#22791;
    </p>
    <p>
      struct pci_device_id {
    </p>
    <p>
      &#160;&#160;&#160;&#160;__u32 vendor, device;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* Vendor and device ID or PCI_ANY_ID*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;__u32 subvendor, subdevice; /* Subsystem ID's or PCI_ANY_ID */
    </p>
    <p>
      &#160;&#160;&#160;&#160;__u32 class, class_mask;&#160;&#160;&#160;&#160;/* (class,subclass,prog-if) triplet */
    </p>
    <p>
      &#160;&#160;&#160;&#160;kernel_ulong_t driver_data; /* Data private to the driver */
    </p>
    <p>
      };
    </p>
    <p>
      
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1478661448993" ID="ID_1136090978" MODIFIED="1478662339458">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PCI_DEVICE(vendor, device)
    </p>
    <p>
      PCI_DEVICE_CLASS(device_class, device_class_mask)
    </p>
    <p>
      pci_device_id&#38656;&#35201;&#34987;&#26292;&#38706;&#21040;&#29992;&#25143;&#31354;&#38388;&#65292;&#29992;&#20110;&#25903;&#25345;&#28909;&#25554;&#25300;&#20197;&#21450;&#35753;
    </p>
    <p>
      &#27169;&#22359;&#21152;&#36733;&#31995;&#32479;&#20102;&#35299;&#31038;&#40636;&#27171;&#30340;&#35774;&#22791;&#38656;&#35201;&#21738;&#31181;&#39537;&#21160;&#27169;&#22359;&#65292;&#36825;&#20010;&#24037;&#20316;&#21487;&#20197;&#36890;&#36807;
    </p>
    <p>
      &#23439;&#23450;&#20041;MODULE_DEVICE_TABLE&#26469;&#23436;&#25104;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1478662346404" ID="ID_139620219" MODIFIED="1478668304234">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct pci_driver&#29992;&#20110;&#23450;&#20041;&#19968;&#20010;pci&#30340;&#39537;&#21160;
    </p>
    <p>
      pci_register_driver&#29992;&#20110;&#27880;&#20876;&#19968;&#20010;pci&#30340;&#39537;&#21160;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1483014305053" ID="ID_919029293" MODIFIED="1483017766706">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PCI&#25552;&#20379;&#20102;&#19977;&#31181;&#25968;&#25454;&#32467;&#26500;&#29992;&#26469;&#25551;&#36848;pci&#25511;&#21046;&#22120;&#65292;
    </p>
    <p>
      pci&#35774;&#22791;&#21644;pci&#24635;&#32447;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1482889542718" FOLDED="true" ID="ID_758317088" MODIFIED="1499823232034">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>6.PCI&#35774;&#22791;&#30005;&#28304;&#31649;&#29702;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1483369053195" ID="ID_1527967498" MODIFIED="1483369327980">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#30446;&#26631;:&#20801;&#35768;pci &#39537;&#21160;&#21487;&#20197;&#20351;&#29992;I/O&#36816;&#34892;&#26102;&#30005;&#28304;&#31649;&#29702;
    </p>
    <p>
      
    </p>
    <p>
      1.&#36816;&#34892;&#26102;&#30340;&#30005;&#28304;&#31649;&#29702;&#26694;&#26550;&#22312;kernel&#20013;&#24050;&#32463;&#23384;&#22312;&#20102;&#65292;pci&#39537;&#21160;&#24212;&#35813;&#20351;&#29992;&#35813;&#26694;&#26550;
    </p>
    <p>
      2.&#36816;&#34892;&#26102;&#30005;&#28304;&#31649;&#29702;&#26694;&#26550;&#30340;&#38656;&#27714;&#65306;
    </p>
    <p>
      a.subsystem(pci bus type)&#30340;&#22238;&#35843;&#20989;&#25968;&#24517;&#39035;&#34987;&#23454;&#29616;
    </p>
    <p>
      -&gt;runtime_suspend(dev)
    </p>
    <p>
      -&gt;runtime_resume(dev)
    </p>
    <p>
      -&gt;runtime_idle(dev)
    </p>
    <p>
      b.wakeup &#20449;&#21495;(remote wakeup)&#24517;&#39035;&#21487;&#20197;&#24037;&#20316;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1483369347304" FOLDED="true" ID="ID_230257088" MODIFIED="1499823223954">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pci&#35774;&#22791;&#30340;&#30005;&#28304;&#29366;&#24577;&#65306;
    </p>
    <p>
      D0&#160;&#160;&#30005;&#37327;&#20805;&#36275;&#29366;&#24577;
    </p>
    <p>
      D1&#160;&#160;&#20302;&#30005;&#29366;&#24577;&#65292;&#35813;&#29366;&#24577;&#21487;&#36873;&#65292;&#36864;&#20986;&#35813;&#29366;&#24577;&#20351;&#29992;&#30340;&#26102;&#38388;&#26159;&#26368;&#30701;&#30340;
    </p>
    <p>
      D2&#160;&#160;&#20302;&#30005;&#29366;&#24577;&#65292; &#35813;&#29366;&#24577;&#21487;&#36873;&#65292;&#20174;&#35813;&#29366;&#24577;&#24674;&#22797;&#22823;&#27010;&#38656;&#35201;200&#24494;&#31186;
    </p>
    <p>
      D3(hot)&#160;&#160;&#20302;&#30005;&#29366;&#24577;&#65292;&#38656;&#35201;10ms&#30340;&#24674;&#22797;&#26102;&#38388;&#65292;&#35813;&#29366;&#24577;&#19979;&#36719;&#20214;&#20173;&#28982;&#21487;&#20197;&#35775;&#38382;
    </p>
    <p>
      D3(cold) &#30005;&#28304;&#20851;&#38381;&#65292;&#38656;&#35201;10ms&#25110;&#32773;&#20197;&#19978;&#30340;&#24674;&#22797;&#26102;&#38388;
    </p>
  </body>
</html></richcontent>
<node CREATED="1483370160208" ID="ID_164095894" MODIFIED="1483372768557">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#35774;&#22791;&#30340;&#30005;&#28304;&#29366;&#24577;&#25152;&#23545;&#24212;&#30340;ACPI&#30340;&#20989;&#25968;
    </p>
    <p>
      _PSn&#160;&#160;&#23558;&#35774;&#22791;&#32622;&#25104;&#30005;&#28304;Dn&#30340;&#29366;&#24577;
    </p>
    <p>
      _PSC&#160;&#160;&#35780;&#20272;&#24403;&#21069;&#30340;&#35774;&#22791;&#29366;&#24577;
    </p>
    <p>
      _PRn &#36820;&#22238;&#22312;Dn&#29366;&#24577;&#19979;&#30340;&#35774;&#22791;&#30005;&#28304;&#36164;&#28304;
    </p>
    <p>
      _DSW &#20351;&#33021;&#25110;&#32773;&#31105;&#27490;&#35774;&#22791;&#30340;wake function
    </p>
    <p>
      _PRW &#36820;&#22238;wake&#29366;&#24577;&#19979;&#30340;&#30005;&#28304;&#36164;&#28304;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1483369583343" ID="ID_825347306" MODIFIED="1483369808999">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PCI BUS&#30340;&#30005;&#28304;&#29366;&#24577;
    </p>
    <p>
      B0 &#27491;&#24120;&#30340;&#24037;&#20316;&#29366;&#24577;
    </p>
    <p>
      B1 VCC&#27491;&#24120;&#20379;&#30005;&#65292;&#27809;&#26377;&#20102;&#20107;&#21153;&#22788;&#29702;&#65292;&#27704;&#20037;&#31354;&#38386;&#30340;&#29366;&#24577;
    </p>
    <p>
      B2 VCC&#27491;&#24120;&#20379;&#30005;&#65292;&#20294;&#26159;&#26102;&#38047;&#24050;&#32463;&#20572;&#27490;
    </p>
    <p>
      B3 &#27809;&#26377;VCC&#27809;&#26377;&#26102;&#38047;&#65292;&#24819;&#35201;&#24674;&#22797;&#24517;&#39035;&#36890;&#36807;RST&#24341;&#33050;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1483369813652" FOLDED="true" ID="ID_1687834763" MODIFIED="1499823228308">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#21796;&#37266;&#20449;&#21495;----Power Management Event(PME)
    </p>
    <p>
      1.&#24102;&#22806;&#20449;&#21495;
    </p>
    <p>
      PME&#20449;&#21495;&#20250;&#30452;&#25509;&#21040;&#36798;PCI&#23376;&#31995;&#32479;&#30340;&#26680;&#24515;&#22788;&#29702;&#36923;&#36753;
    </p>
    <p>
      &#21487;&#33021;&#20250;&#34987;bridge&#36827;&#34892;&#36335;&#30001;&#25805;&#20316;
    </p>
    <p>
      &#38656;&#35201;&#24179;&#21488;&#30340;&#25903;&#25345;(ACPI BIOS)
    </p>
    <p>
      2. &#24102;&#20869;&#20449;&#21495;
    </p>
    <p>
      &#30001;root ports&#36890;&#36807;&#20013;&#26029;&#20135;&#29983;&#20449;&#21495;
    </p>
    <p>
      &#20276;&#38543;&#30528;&#26412;&#22320;PCIE&#30340;&#28909;&#25554;&#25300;
    </p>
    <p>
      ACPI BIOS&#21487;&#33021;&#19981;&#20801;&#35768;&#25105;&#20204;&#30452;&#25509;&#20351;&#29992;&#36825;&#31181;&#24102;&#20869;&#20449;&#21495;
    </p>
  </body>
</html></richcontent>
<node CREATED="1483373478600" FOLDED="true" ID="ID_1498799813" MODIFIED="1499823226556">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22522;&#20110;ACPI&#30340;&#21796;&#37266;&#20449;&#21495;
    </p>
    <p>
      &#27599;&#19968;&#20010;&#20855;&#26377;&#21796;&#37266;&#33021;&#21147;&#30340;&#35774;&#22791;&#37117;&#26377;&#19968;&#20010;&#19987;&#29992;&#30340;GPE(general purpose event)
    </p>
    <p>
      &#20316;&#20026;&#21796;&#37266;&#20449;&#21495;&#65292;_PRW&#36820;&#22238;&#35813;GPE&#30340;&#21495;
    </p>
    <p>
      1.&#35774;&#22791;&#30340;&#21796;&#37266;&#20449;&#21495;(&#22914;PME)&#20250;&#30452;&#25509;&#36827;&#20837;&#26680;&#24515;&#30340;&#36923;&#36753;&#22788;&#29702;
    </p>
    <p>
      2.&#26680;&#24515;&#36923;&#36753;&#20250;&#28608;&#27963;&#35774;&#22791;&#30340;GPE
    </p>
    <p>
      3.GPE&#20351;&#24471;SCI&#34987;&#20135;&#29983;
    </p>
    <p>
      4.SCI&#20013;&#26029;&#36923;&#36753;&#20250;&#35843;&#29992;GPE&#30340;&#25511;&#21046;&#26041;&#27861;
    </p>
    <p>
      5.GPE&#25511;&#21046;&#26041;&#27861;&#20250;&#35843;&#24230;&#38024;&#23545;&#35813;&#35774;&#22791;&#30340;&#31995;&#32479;&#36890;&#30693;
    </p>
  </body>
</html></richcontent>
<node CREATED="1487158732472" ID="ID_1542584975" MODIFIED="1487159659812">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>ACPI&#26159;&#22914;&#20309;&#23454;&#29616;GPE&#30340;</b>
    </p>
    <p>
      <font color="#e70c0c">http://queue.acm.org/blogposting.cfm?id=18977</font>
    </p>
    <p>
      1.&#19968;&#20010;ACPI&#34920;&#25351;&#21521;&#20102;&#19968;&#20010;&#24050;&#32463;&#23450;&#20041;&#22909;&#30340;&#31995;&#32479;&#30340;&#36164;&#28304;&#21306;&#22495;(&#36890;&#24120;&#26159;
    </p>
    <p>
      &#19968;&#22359;&#20869;&#23384;&#21306;&#22495;)&#12290;&#24403;&#30828;&#20214;&#21457;&#36215;&#20102;&#19968;&#20010;ACPI&#30340;&#20013;&#26029;&#65292;&#20869;&#26680;&#20250;&#36890;&#36807;&#36825;&#20010;&#34920;
    </p>
    <p>
      &#26469;&#26597;&#25214;&#37027;&#20010;GPE&#30340;&#26631;&#24535;&#34987;&#35774;&#32622;&#20102;&#12290;
    </p>
    <p>
      2.&#22823;&#37096;&#20998;&#30340;GPEs&#37117;&#36890;&#36807;ACPI table&#37324;&#38754;&#30340;&#21483;&#20570;_Lxx&#25110;&#32773;_Exx&#26041;&#27861;
    </p>
    <p>
      &#23454;&#29616;&#20102;&#12290;xx&#26159;GPE&#30340;16&#36827;&#21046;&#30340;&#32534;&#21495;&#65292;L&#25110;&#32773;E&#26631;&#24535;&#35813;GPE&#26159;&#36890;&#36807;&#36793;&#27839;&#35302;&#21457;&#36824;&#26159;
    </p>
    <p>
      &#30005;&#24179;&#35302;&#21457;&#12290;&#22914;&#26524;&#19968;&#20010;ACPI&#20013;&#26029;&#34987;&#35302;&#21457;&#65292;&#24182;&#19988;&#32534;&#21495;&#20026;0X1D&#30340;GPE&#30340;&#26631;&#24535;
    </p>
    <p>
      &#34987;&#32622;&#20301;&#65292;&#37027;&#20040;ACPI&#23601;&#20250;&#26597;&#25214;_L1D&#25110;&#32773;_L1E&#26041;&#27861;&#12290;&#36825;&#20123;&#26041;&#27861;&#30340;&#25191;&#34892;&#32467;&#26524;&#23436;&#20840;&#21462;&#20915;
    </p>
    <p>
      &#20110;&#22266;&#20214;&#12290;
    </p>
    <p>
      3.GPE&#26159;&#22914;&#20309;&#34987;&#35302;&#21457;&#30340;&#65311;&#36890;&#24120;&#19968;&#20010;GPIO&#26159;&#34987;&#26144;&#23556;&#21040;&#19968;&#20010;GPE&#30340;&#65292;&#24403;&#19968;&#20010;GPIO&#24341;&#33050;
    </p>
    <p>
      &#34987;&#28608;&#27963;&#65292;&#23545;&#24212;&#30340;GPE&#20063;&#20250;&#34987;&#35302;&#21457;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1483373947773" FOLDED="true" ID="ID_1006498594" MODIFIED="1491197853461">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      PCI native&#21644;&#22522;&#20110;ACPI&#30340;&#30005;&#28304;&#31649;&#29702;
    </p>
    <p>
      1.&#35774;&#22791;&#36827;&#20837;&#20302;&#21151;&#32791;&#29366;&#24577;
    </p>
    <p>
      &#30001;pci_finish_runtime_suspend()&#23454;&#29616;&#65292;&#35813;&#20989;&#25968;&#36890;&#36807;
    </p>
    <p>
      pci_pm_runtime_suspend()&#35843;&#29992;&#12290;
    </p>
    <p>
      1 Choose state to put the device into (use ACPI to get information).
    </p>
    <p>
      2 Program the device to signal wakeup (PME).
    </p>
    <p>
      3 Set up the device&#8217;s power resources for signaling wakeup, execute
    </p>
    <p>
      _DSW for it and enable its &#8220;wakeup&#8221; GPE.
    </p>
    <p>
      4 Program the device to go into a (PCI) low-power state (e.g. D3 hot ).
    </p>
    <p>
      5 Execute _PSn for the device (the ACPI target state should match the
    </p>
    <p>
      PCI target state).
    </p>
    <p>
      6 Turn off the device&#8217;s power resources unnecessary for wakeup.
    </p>
    <p>
      
    </p>
    <p>
      2.&#23558;&#35774;&#22791;&#36716;&#25442;&#21040;&#20840;&#21151;&#29575;&#29366;&#24577;
    </p>
    <p>
      &#30001;pci_pm_runtime_resume()&#20989;&#25968;&#23454;&#29616;
    </p>
  </body>
</html></richcontent>
<node CREATED="1487140897111" ID="ID_1617528955" MODIFIED="1487142369601">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>power/pci.txt&#25991;&#26723;&#38405;&#35835;</b>
    </p>
    <p>
      1.PCI&#35774;&#22791;&#21487;&#33021;&#20250;&#36890;&#36807;&#20004;&#31181;&#26041;&#24335;&#34987;&#35774;&#32622;&#21040;&#20302;&#21151;&#32791;&#30340;&#29366;&#24577;&#65292;
    </p>
    <p>
      &#19968;&#31181;&#26159;&#36890;&#36807;&#21033;&#29992; PCI Bus Power Management Interface Specification&#25991;&#26723;&#20171;&#32461;&#30340;
    </p>
    <p>
      &#35774;&#22791;&#30340;&#21151;&#33021;&#65292; &#21478;&#19968;&#31181;&#26159;&#36890;&#36807;&#24179;&#21488;&#22266;&#20214;&#30340;&#24110;&#21161;&#27604;&#22914;ACPI BIOS
    </p>
    <p>
      &#31532;&#19968;&#31181;&#26041;&#27861;&#34987;&#31216;&#20043;&#20026;native PCI power management&#65292;&#35774;&#22791;&#30340;&#30005;&#28304;&#29366;&#24577;&#26159;&#36890;&#36807;&#21521;&#35813;&#35774;&#22791;&#30340;
    </p>
    <p>
      &#37197;&#32622;&#31354;&#38388;&#24403;&#20013;&#30340;&#23492;&#23384;&#22120;&#20889;&#20837;&#26469;&#23436;&#25104;&#30340;&#12290;
    </p>
    <p>
      &#31532;&#20108;&#31181;&#26041;&#27861;&#38656;&#35201;&#24179;&#21488;&#30340;&#22266;&#20214;&#32473;&#20869;&#26680;&#25552;&#20379;&#30456;&#24212;&#30340;&#26041;&#27861;&#26469;&#20462;&#25913;&#35774;&#22791;&#30340;&#30005;&#28304;&#29366;&#24577;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      2. &#25903;&#25345;native PCI PM&#30340;&#35774;&#22791;&#36890;&#24120;&#21487;&#20197;&#20135;&#29983;&#19968;&#20123;&#20107;&#20214;&#65292;&#31216;&#20026;Power Management Events (PMEs)&#26469;
    </p>
    <p>
      &#21578;&#30693;&#31995;&#32479;&#22806;&#30028;&#21457;&#29983;&#20102;&#19968;&#20123;&#20107;&#20214;&#12290;PCI Bus Power Management Interface Specification&#24182;&#27809;&#26377;&#23450;&#20041;&#20219;&#20309;
    </p>
    <p>
      &#26041;&#27861;&#26469;&#23558;PME&#20174;&#35774;&#22791;&#36882;&#36865;&#21040;CPU&#21644;&#25805;&#20316;&#31995;&#32479;&#20869;&#26680;&#12290;&#36890;&#24120;&#35748;&#20026;&#35813;&#36882;&#36865;&#30340;&#20219;&#21153;&#26159;&#30001;&#24179;&#21488;&#30340;&#22266;&#20214;&#26469;&#23436;&#25104;&#30340;&#65292;
    </p>
    <p>
      &#25152;&#20197;&#21363;&#20351;&#35774;&#22791;&#34987;&#35774;&#32622;&#25104;&#21487;&#20197;&#20135;&#29983;PMEs, &#25105;&#20204;&#20173;&#28982;&#38656;&#35201;&#22266;&#20214;&#26469;&#23558;&#35813;PMEs&#36882;&#36865;&#32473;CPU(&#27604;&#22914;&#36890;&#36807;&#20013;&#26029;&#30340;&#26041;&#24335;)
    </p>
    <p>
      
    </p>
    <p>
      3.&#22914;&#26524;&#30001;&#24179;&#21488;&#22266;&#20214;&#25552;&#20379;&#30340;&#26041;&#27861;&#21487;&#20197;&#20462;&#25913;&#35774;&#22791;&#30340;&#30005;&#28304;&#29366;&#24577;&#65292;&#37027;&#20040;&#24179;&#21488;&#20063;&#20250;&#25552;&#20379;&#19968;&#20123;&#26041;&#27861;&#26469;&#20351;&#35774;&#22791;&#21487;&#20197;&#20135;&#29983;
    </p>
    <p>
      wakeup &#20449;&#21495;&#12290;&#22312;&#36825;&#31181;&#29366;&#24577;&#19979;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#20351;&#29992;native PCI PM&#26426;&#21046;&#26469;&#35774;&#22791;&#35774;&#22791;&#21487;&#20197;&#20135;&#29983;PME
    </p>
  </body>
</html></richcontent>
<node CREATED="1487141875329" ID="ID_358667522" MODIFIED="1487142356178">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>Native PCI Power Management</b>
    </p>
    <p>
      PCI Bus Power Management Interface Specification&#22312;PCI2.1&#21644;PCI2.2&#26399;&#38388;
    </p>
    <p>
      &#34987;&#24341;&#36827;&#12290;
    </p>
    <p>
      &#23545;&#20110;&#20256;&#32479;&#30340;&#35774;&#22791;&#26469;&#35828;&#23454;&#29616;PCI PM Spec&#37324;&#38754;&#35828;&#30340;&#21151;&#33021;&#26159;&#21487;&#36873;&#30340;&#65292;&#20294;&#26159;&#23545;&#20110;PCIe&#35774;&#22791;&#26469;&#35828;
    </p>
    <p>
      &#36825;&#26159;&#24378;&#21046;&#38656;&#35201;&#23454;&#29616;&#30340;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#19968;&#20010;&#35774;&#22791;&#25903;&#25345;PCI&#30005;&#28304;&#31649;&#29702;&#65292;&#37027;&#20040;&#22312;&#23427;&#30340;&#37197;&#32622;&#31354;&#38388;&#37324;&#38754;&#26377;8&#23383;&#33410;&#30340;&#30005;&#28304;&#31649;&#29702;&#33021;&#21147;&#21306;&#22495;&#12290;
    </p>
    <p>
      &#36825;&#20123;&#22495;&#34987;&#29992;&#26469;&#25551;&#36848;&#21644;&#20351;&#29992;native PCI power management&#35268;&#23450;&#30340;&#19968;&#20123;feature.
    </p>
    <p>
      PCI&#30005;&#28304;&#31649;&#29702;&#25991;&#26723;&#20026;&#35774;&#22791;&#23450;&#20041;&#20102;&#22235;&#20010;&#30005;&#28304;&#29366;&#24577;D0-D3, &#20026;&#24635;&#32447;&#23450;&#20041;&#20102;&#22235;&#20010;&#30005;&#28304;&#29366;&#24577;B0-B3
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1487142358856" ID="ID_689596597" MODIFIED="1487143977797">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.ACPI Device Power Management</b>
    </p>
    <p>
      ACPI BIOS&#20250;&#25552;&#20379;&#19968;&#20123;&#29305;&#27530;&#30340;&#26041;&#27861;&#65292;&#34987;&#31216;&#20026;&quot;control method&quot;
    </p>
    <p>
      &#36825;&#20123;&#26041;&#27861;&#20250;&#34987;kernel&#35843;&#29992;&#65292;&#27604;&#22914;kernel&#20250;&#35843;&#29992;&#19968;&#20010;&#26041;&#27861;&#23558;&#26576;&#20010;
    </p>
    <p>
      &#35774;&#22791;&#36827;&#20837;&#21040;&#20302;&#21151;&#32791;&#29366;&#24577;&#12290;
    </p>
    <p>
      ACPI control methods&#21487;&#20197;&#34987;&#21010;&#20998;&#25104;global control methods&#21644;
    </p>
    <p>
      &#36319;&#26576;&#20010;&#35774;&#22791;&#20855;&#20307;&#30456;&#20851;&#30340;device control methods&#12290;
    </p>
    <p>
      &#23545;&#20110;&#27599;&#19968;&#20013;&#35774;&#22791;&#30340;&#30005;&#28304;&#29366;&#24577;&#65292;&#24517;&#39035;&#26377;&#19968;&#31995;&#21015;&#30340;&#30005;&#28304;&#36164;&#28304;&#20063;&#34987;&#25918;&#32622;&#21040;&#37027;&#20010;
    </p>
    <p>
      &#30005;&#28304;&#29366;&#24577;&#12290;&#36825;&#20123;&#30005;&#28304;&#36164;&#28304;&#30001;&#36825;&#20123;&#30005;&#28304;&#36164;&#28304;&#30340;&#25511;&#21046;&#26041;&#27861;&#26469;&#36827;&#34892;&#25511;&#21046;&#65292;_ON&#21644;_OFF&#12290;
    </p>
    <p>
      &#20026;&#20102;&#23558;&#19968;&#20010;&#35774;&#22791;&#25918;&#32622;&#21040;&#19968;&#20010;&#30005;&#28304;&#29366;&#24577;Dx&#19979;&#65292;&#25805;&#20316;&#31995;&#32479;&#24517;&#39035;&#20570;&#22914;&#19979;&#30340;&#20107;&#24773;:
    </p>
    <p>
      1) &#20351;&#33021;&#22312;&#26576;&#20010;&#30005;&#28304;&#29366;&#24577;&#20043;&#19979;&#65292;&#35813;&#35774;&#22791;&#25152;&#38656;&#35201;&#30340;&#25152;&#26377;&#30340;&#30005;&#28304;&#36164;&#28304;&#12290;
    </p>
    <p>
      2) &#25191;&#34892;&#20026;&#35813;&#35774;&#22791;&#23450;&#20041;&#22909;&#30340;_PSx&#26041;&#27861;&#65292; &#22914;&#26524;&#35813;&#35774;&#22791;&#34987;&#35201;&#27714;&#20316;&#20026;wakeup source&#65292;
    </p>
    <p>
      &#37027;&#20040;&#22312;&#25191;&#34892;_PSx&#26041;&#27861;&#20043;&#21069;&#38656;&#35201;&#25191;&#34892;_DSW&#26041;&#27861;(&#25110;&#32773;_PSW&#26041;&#27861;)
    </p>
    <p>
      
    </p>
    <p>
      ACPI&#23450;&#20041;&#20102;&#31995;&#32479;&#30340;&#20241;&#30496;&#29366;&#24577;&#31561;&#32423;S1,S2,S3,S4,&#23450;&#20041;&#20102;&#31995;&#32479;&#30340;&#24037;&#20316;&#29366;&#24577;&#31561;&#32423;&#20026;S0
    </p>
    <p>
      &#36890;&#24120;&#24847;&#20041;&#19978;&#26469;&#35828;&#31995;&#32479;&#30340;&#20241;&#30496;&#29366;&#24577;&#23450;&#20041;&#20102;&#35774;&#22791;&#30340;&#26368;&#39640;&#30340;&#30005;&#28304;&#29366;&#24577;&#65292;kernel&#36890;&#36807;&#25191;&#34892;&#35774;&#22791;&#30340;
    </p>
    <p>
      _SxD&#26041;&#27861;&#21487;&#20197;&#33719;&#21462;&#21040;&#36825;&#20123;&#20449;&#24687;&#12290;&#25805;&#20316;&#31995;&#32479;&#36890;&#36807;&#35774;&#22791;&#30340;_PRW&#26041;&#27861;&#21487;&#20197;&#24471;&#30693;&#65292;&#22914;&#26524;&#38656;&#35201;&#35753;
    </p>
    <p>
      &#35774;&#22791;&#20135;&#29983;wakeup&#20449;&#21495;&#65292;&#38656;&#35201;&#25552;&#20379;&#21738;&#20123;&#30005;&#28304;&#36164;&#28304;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1494859609559" FOLDED="true" ID="ID_369708121" MODIFIED="1499823273316" TEXT="7.MSI">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1494859628365" FOLDED="true" ID="ID_874745442" MODIFIED="1499823236740">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#25991;&#26723;MSI-HOWTO.txt&#38405;&#35835;
    </p>
  </body>
</html></richcontent>
<node CREATED="1494859648434" ID="ID_1775807022" MODIFIED="1494859974010">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20160;&#20040;&#26159;MSIs
    </p>
    <p>
      Message Signaled Interrupt,&#35774;&#22791;&#24448;&#19968;&#20010;&#29305;&#27530;&#30340;&#22320;&#22336;&#24403;&#20013;
    </p>
    <p>
      &#36827;&#34892;&#20889;&#25805;&#20316;&#65292;&#20174;&#32780;&#21521;cpu&#35302;&#21457;&#19968;&#20010;&#20013;&#26029;&#12290;MSI&#30340;&#27010;&#24565;&#26159;&#22312;pci2.2
    </p>
    <p>
      &#24403;&#20013;&#24341;&#20837;&#30340;&#65292;&#22312;pci3.0&#24403;&#20013;&#36827;&#34892;&#20102;&#24378;&#21270;&#65292;&#27599;&#20010;MSI&#20013;&#26029;&#21487;&#20197;&#34987;&#21333;&#29420;mask
    </p>
    <p>
      MSI-X&#21017;&#20801;&#35768;&#21333;&#29420;&#30340;&#35774;&#22791;&#27604;MSI&#25903;&#25345;&#26356;&#22810;&#30340;&#20013;&#26029;&#65292;&#19988;&#27599;&#20010;&#20013;&#26029;&#37117;&#21487;&#20197;&#34987;
    </p>
    <p>
      &#29420;&#31435;&#37197;&#32622;&#12290;&#19968;&#20010;&#35774;&#22791;&#21487;&#33021;&#21516;&#26102;&#25903;&#25345;MSI&#21644;MSI-X&#65292;&#20294;&#26159;&#21516;&#26102;&#21482;&#33021;&#20351;&#33021;&#19968;&#20010;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494859979814" ID="ID_1530366310" MODIFIED="1494860859819">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#20351;&#29992;MSI&#30340;&#29702;&#30001;
    </p>
    <p>
      &#31532;&#19968; &#20256;&#32479;&#30340;&#20351;&#29992;pin&#33050;&#30340;&#20013;&#26029;&#26041;&#24335;&#65292;&#24448;&#24448;&#26159;&#22810;&#20010;&#35774;&#22791;&#20849;&#20139;&#19968;&#20010;&#20013;&#26029;&#65292;
    </p>
    <p>
      &#36825;&#26679;&#20351;&#24471;&#20013;&#26029;&#35302;&#21457;&#30340;&#26102;&#20505;&#20869;&#26680;&#38656;&#35201;&#36941;&#21382;&#25152;&#26377;&#30340;&#27880;&#20876;&#30340;&#20013;&#26029;&#22788;&#29702;&#20989;&#25968;&#65292;
    </p>
    <p>
      &#36825;&#38477;&#20302;&#30340;&#31995;&#32479;&#30340;&#24615;&#33021;&#65292;&#32780;MSI&#20013;&#26029;&#26159;&#19981;&#20849;&#20139;&#30340;&#65292;&#22240;&#27492;&#36991;&#20813;&#20102;&#36825;&#20010;&#38382;&#39064;&#12290;
    </p>
    <p>
      &#31532;&#20108; &#20351;&#29992;&#22522;&#20110;pin&#33050;&#30340;&#20013;&#26029;&#26041;&#24335;&#30340;&#26102;&#20505;&#65292;&#26377;&#21487;&#33021;&#22312;&#20013;&#26029;&#35302;&#21457;&#30340;&#26102;&#20505;&#65292;&#25968;&#25454;&#36824;
    </p>
    <p>
      &#27809;&#26377;&#20256;&#36865;&#21040;&#20869;&#23384;&#24403;&#20013;&#65292;&#32780;MSI&#22312;&#20889;&#20837;&#30340;&#26102;&#20505;&#26159;&#20445;&#35777;&#22312;&#25968;&#25454;&#20256;&#36755;&#23436;&#25104;&#20043;&#21518;&#30340;&#65292;
    </p>
    <p>
      &#36825;&#26679;&#30830;&#20445;&#22312;&#20013;&#26029;&#35302;&#21457;&#30340;&#26102;&#20505;&#25968;&#25454;&#30340;&#30830;&#23450;&#24615;&#12290;
    </p>
    <p>
      &#31532;&#19977; &#30001;&#20110;&#35774;&#22791;&#21482;&#25903;&#25345;&#19968;&#20010;pin&#33050;&#26041;&#24335;&#30340;&#20013;&#26029;&#65292;&#37027;&#20040;&#38024;&#23545;&#20855;&#26377;&#22810;&#20010;function&#30340;&#35774;&#22791;&#65292;
    </p>
    <p>
      &#22312;&#20013;&#26029;&#22788;&#29702;&#24403;&#20013;&#36824;&#38656;&#35201;&#35810;&#38382;&#35774;&#22791;&#21457;&#29983;&#20102;&#20160;&#20040;&#20107;&#20214;&#12290;&#32780;MSI&#30001;&#20110;&#21487;&#20197;&#25903;&#25345;&#22810;&#20010;&#20013;&#26029;&#65292;
    </p>
    <p>
      &#37027;&#20040;&#38024;&#23545;&#19981;&#21516;&#30340;&#30446;&#30340;&#21487;&#20197;&#20998;&#37197;&#19981;&#21516;&#30340;&#20013;&#26029;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494861903893" FOLDED="true" ID="ID_27798513" MODIFIED="1499823235260" TEXT="3.&#x5982;&#x4f55;&#x4f7f;&#x7528;MSI">
<node CREATED="1494861919238" ID="ID_1323151256" MODIFIED="1494862032820">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20026;&#20102;&#25903;&#25345;MSI&#21644;MSI-X,&#20869;&#26680;&#24517;&#39035;&#37197;&#32622;CONFIG_PCI_MSI&#65292;
    </p>
    <p>
      &#23545;&#20110;x86&#20307;&#31995;&#32467;&#26500;&#65292;&#20063;&#21516;&#26102;&#35201;&#37197;&#32622;X86_UP_APIC&#21644;SMP&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494862037281" ID="ID_1234878553" MODIFIED="1494894737389">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#22823;&#22810;&#25968;&#30340;&#24037;&#20316;&#37117;&#22312;pci&#23618;&#30340;&#39537;&#21160;&#37324;&#38754;&#20570;&#23436;&#20102;&#65292;&#24517;&#39035;&#21521;pci
    </p>
    <p>
      &#23618;&#35831;&#27714;&#20026;&#35813;&#35774;&#22791;&#35774;&#32622;MSI&#21151;&#33021;&#12290;
    </p>
    <p>
      int pci_enable_msi(struct pci_dev *dev)
    </p>
    <p>
      &#23545;&#35813;&#20989;&#25968;&#30340;&#19968;&#27425;&#25104;&#21151;&#35843;&#29992;&#20250;&#20998;&#37197;&#19968;&#20010;msi&#30340;&#20013;&#26029;&#65292;&#35774;&#22791;&#20250;&#20174;
    </p>
    <p>
      &#22522;&#20110;pin&#33050;&#30340;&#20013;&#26029;&#26041;&#24335;&#36716;&#25442;&#25104;&#22522;&#20110;msi&#30340;&#20013;&#26029;&#26041;&#24335;&#65292;dev-&gt;irq
    </p>
    <p>
      &#20250;&#34987;&#36171;&#20540;&#20026;&#22522;&#20110;msi&#30340;&#20013;&#26029;&#21495;&#12290;&#35813;&#20989;&#25968;&#24212;&#35813;&#22312;request_irq()&#20043;&#21069;
    </p>
    <p>
      &#34987;&#35843;&#29992;&#65292;&#22240;&#20026;&#36882;&#36865;msi&#20013;&#26029;&#30340;&#20013;&#26029;&#21521;&#37327;&#36319;&#22522;&#20110;pin&#33050;&#30340;&#20013;&#26029;&#21521;&#37327;&#26159;&#19981;&#21516;&#30340;&#12290;
    </p>
    <p>
      int pci_enable_msi_range(struct pci_dev *dev, int minvec, int maxvec)
    </p>
    <p>
      &#35813;&#20989;&#25968;&#20801;&#35768;&#39537;&#21160;&#30003;&#35831;&#22312;minvec&#21644;maxvec&#20043;&#38388;&#30340;&#22810;&#20010;msi&#20013;&#26029;&#65292;
    </p>
    <p>
      dev-&gt;irq&#20250;&#34987;&#36171;&#20540;&#25104;&#30003;&#35831;&#30340;&#20013;&#26029;&#24403;&#20013;&#30340;&#26368;&#23567;&#30340;&#20013;&#26029;&#20540;&#65292;&#26368;&#29702;&#24819;&#30340;&#24773;&#20917;&#26159;
    </p>
    <p>
      &#39537;&#21160;&#21487;&#20197;&#30003;&#35831;&#24819;&#35201;&#30340;&#25968;&#30446;&#30340;&#20013;&#26029;&#65292;&#20294;&#26159;&#26377;&#24456;&#22810;&#21407;&#22240;&#24179;&#21488;&#19981;&#33021;&#28385;&#36275;&#36825;&#26679;&#30340;&#35201;&#27714;&#12290;
    </p>
    <p>
      int pci_enable_msi_exact(struct pci_dev *dev, int nvec)
    </p>
    <p>
      &#35813;&#20989;&#25968;&#20250;&#20998;&#37197;&#31934;&#30830;&#25968;&#37327;&#30340;msi&#20013;&#26029;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1495440466350" FOLDED="true" ID="ID_1099884249" MODIFIED="1499823269246" TEXT="PCI SpecV3&#x9605;&#x8bfb;">
<node CREATED="1495440486725" FOLDED="true" ID="ID_1104675689" MODIFIED="1499823265288">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#0c6e41"><b><i>&#31532;&#20845;&#31456; &#31532;&#20843;&#33410; Message Signaled Interrupts</i></b></font>
    </p>
    <p>
      msi&#26159;&#19968;&#20010;&#21487;&#36873;&#30340;feature&#65292;&#29992;&#26469;&#21521;&#31995;&#32479;&#25351;&#23450;&#30340;&#22320;&#22336;&#20889;&#20837;&#31995;&#32479;&#25351;&#23450;
    </p>
    <p>
      &#30340;&#25968;&#20540;&#26469;&#35831;&#27714;&#31995;&#32479;&#26381;&#21153;(&#20351;&#29992;PCI DWORD&#20869;&#23384;&#20889;&#20837;&#20107;&#21153;)&#12290;&#31995;&#32479;&#36719;&#20214;&#22312;
    </p>
    <p>
      &#35774;&#22791;&#37197;&#32622;&#26399;&#38388;&#20250;&#21021;&#22987;&#21270;&#28040;&#24687;&#30340;&#22320;&#22336;&#21644;&#28040;&#24687;&#30340;&#20869;&#23481;(&#31216;&#20026;vector)&#65292;&#32473;&#27599;&#20010;msi
    </p>
    <p>
      &#20351;&#33021;&#30340;function&#20998;&#37197;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;vector&#12290;
    </p>
    <p>
      MSI-X&#22312;MSI&#21151;&#33021;&#30340;&#22522;&#30784;&#19978;&#23450;&#20041;&#20102;&#19968;&#20010;&#20998;&#38548;&#30340;&#21487;&#36873;&#30340;&#21151;&#33021;&#25193;&#23637;&#12290;&#30456;&#27604;&#20110;MSI,
    </p>
    <p>
      MSI-X&#25903;&#25345;&#26356;&#22823;&#25968;&#37327;&#30340;vector&#12290;MSI&#21644;MSI-X&#37117;&#25903;&#25345;&#38024;&#23545;&#21333;&#20010;&#30340;vector&#30340;&#25513;&#30721;&#12290;
    </p>
    <p>
      &#20294;&#26159;&#38024;&#23545;&#21333;&#20010;vector&#30340;&#25513;&#30721;&#21151;&#33021;&#65292;&#23545;&#20110;MSI&#26159;&#21487;&#36873;&#30340;&#65292;&#20294;&#26159;&#23545;&#20110;MSI-X&#21017;&#26159;
    </p>
    <p>
      &#26631;&#20934;&#30340;&#12290;MSI-X&#21516;&#26102;&#36824;&#25903;&#25345;function&#32423;&#21035;&#30340;&#25513;&#30721;bit&#20301;&#65292;&#22914;&#26524;&#35813;&#20301;&#34987;&#32622;&#20301;&#65292;&#37027;&#20040;
    </p>
    <p>
      &#36319;&#35813;function&#26377;&#20851;&#30340;vector&#37117;&#20250;&#34987;mask&#12290;per-vector&#25513;&#30721;&#25805;&#20316;&#26159;&#36890;&#36807;&#27599;&#20010;vector
    </p>
    <p>
      &#19978;&#38754;&#30340;Masking&#21644;Pending &#27604;&#29305;&#23545;&#26469;&#23454;&#29616;&#30340;&#65292;&#25110;&#32773;&#26159;&#36890;&#36807;MSI-X table&#30446;&#24405;&#23454;&#29616;&#12290;
    </p>
    <p>
      &#24403;&#19968;&#20010;vector&#34987;mask&#20043;&#21518;&#65292;&#23545;&#24212;&#30340;&#20989;&#25968;&#34987;&#31105;&#27490;&#21457;&#36865;&#28040;&#24687;&#65292;&#24182;&#19988;function&#24517;&#39035;&#35774;&#32622;&#23545;&#24212;&#30340;
    </p>
    <p>
      Pending&#20301;&#12290;
    </p>
    <p>
      &#20026;&#20102;&#20445;&#35777;&#36719;&#20214;&#30340;&#21521;&#21518;&#20860;&#23481;&#24615;&#65292;MSI&#21644;MSI-X&#20351;&#29992;&#30340;&#26159;&#19981;&#21516;&#30340;capability&#32467;&#26500;&#20307;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1495504823576" FOLDED="true" ID="ID_1412144308" MODIFIED="1499823245025" TEXT="msi&#x7684;&#x56db;&#x79cd;capability&#x7ed3;&#x6784;&#x4f53;">
<node CREATED="1495504839808" FOLDED="true" ID="ID_1455773481" MODIFIED="1499823243331">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/msi-capability-structure-400-500.png" />
  </body>
</html></richcontent>
<node CREATED="1495505326023" ID="ID_426850666" MODIFIED="1495507330540">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Message Control&#23383;&#27573;&#23492;&#23384;&#22120;&#35299;&#26512;:
    </p>
    <p>
      &#35813;&#23492;&#23384;&#22120;&#25552;&#20379;&#38024;&#23545;msi&#30340;&#31995;&#32479;&#33539;&#22260;&#20869;&#30340;&#25511;&#21046;&#12290;reset&#20043;&#21518;&#65292;msi&#26159;&#34987;
    </p>
    <p>
      &#31105;&#27490;&#20351;&#29992;&#30340;&#65292;&#22914;&#26524;msi&#21644;msi-x&#37117;&#34987;&#31105;&#27490;&#20351;&#29992;&#65292;&#37027;&#20040;&#35774;&#22791;&#20250;&#36890;&#36807;INTx#
    </p>
    <p>
      &#26469;&#30003;&#35831;&#26381;&#21153;&#12290;&#31995;&#32479;&#36719;&#20214;&#21487;&#20197;&#36890;&#36807;&#20351;&#33021;&#35813;&#23492;&#23384;&#22120;&#30340;bit0&#26469;&#20351;&#33021;msi&#21151;&#33021;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1495516653300" FOLDED="true" ID="ID_229750767" MODIFIED="1499823250079" TEXT="msi-x&#x7684;capability&#x7ed3;&#x6784;">
<node CREATED="1495516737292" ID="ID_1164454062" MODIFIED="1495517196559">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <img src="lddpic/msi-x-capability.png" />
      
    </p>
    <p>
      msi-x capability&#32467;&#26500;&#20307;&#20869;&#37096;&#21547;&#26377;&#25351;&#21521;msi-x table&#21644;msi-x Pending Bit Array
    </p>
    <p>
      &#32467;&#26500;&#20307;&#30340;&#25351;&#38024;&#65292;table&#21644;pba&#32467;&#26500;&#20307;&#37117;&#39547;&#30041;&#22312;&#31995;&#32479;&#30340;&#20869;&#23384;&#24403;&#20013;&#12290;
    </p>
    <p>
      &#36825;&#20123;&#32467;&#26500;&#20307;&#37117;&#26159;&#36890;&#36807;Base Address Register&#26144;&#23556;&#21040;&#20869;&#23384;&#24403;&#20013;&#21435;&#30340;&#12290;capability
    </p>
    <p>
      &#32467;&#26500;&#20307;&#24403;&#20013;&#30340;BIR&#23383;&#27573;&#29992;&#26469;&#25351;&#31034;&#20351;&#29992;&#30340;&#26159;&#21738;&#20010;BAR,&#32780;offset&#23383;&#27573;&#21017;&#29992;&#26469;&#25351;&#31034;&#30456;&#23545;
    </p>
    <p>
      &#20110;bar&#30340;&#20559;&#31227;&#37327;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1495516838611" ID="ID_140695277" MODIFIED="1495516846403">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/msi-x-table.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1495517819002" FOLDED="true" ID="ID_960622371" MODIFIED="1499823259433">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i><font color="#d51111">msi&#21644;msi-x&#30340;&#25805;&#20316;</font></i></b>
    </p>
    <p>
      &#22312;&#37197;&#32622;&#38454;&#27573;&#65292;&#31995;&#32479;&#20250;&#25195;&#25551;&#35813;function&#23545;&#24212;&#30340;capability&#21015;&#34920;&#65292;
    </p>
    <p>
      &#22914;&#26524;msi&#23545;&#24212;&#30340;id&#34987;&#23547;&#25214;&#21040;&#65292;&#37027;&#20040;&#35828;&#26126;&#35813;function&#23454;&#29616;&#30340;&#26159;msi,
    </p>
    <p>
      &#22914;&#26524;msi-x&#23545;&#24212;&#30340;id&#34987;&#23547;&#25214;&#21040;&#65292;&#37027;&#20040;&#35828;&#26126;&#35813;function&#23454;&#29616;&#30340;&#26159;msi-x,
    </p>
    <p>
      &#19968;&#20010;&#35774;&#22791;&#24403;&#20013;&#32473;&#23450;&#30340;function&#34987;&#20801;&#35768;&#23454;&#29616;msi&#65292; msi-x&#25110;&#32773;&#26159;&#20004;&#32773;&#37117;&#23454;&#29616;&#12290;
    </p>
    <p>
      &#31995;&#32479;&#36719;&#20214;&#29420;&#31435;&#22320;&#31649;&#29702;&#36825;&#20123;&#20013;&#26029;&#26426;&#21046;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1495519378479" ID="ID_658508934" MODIFIED="1495521124717">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#23545;&#20110;&#27599;&#19968;&#20010;&#23558;&#35201;&#34987;&#20351;&#29992;&#30340;MSI-X table entry,
    </p>
    <p>
      &#36719;&#20214;&#20250;&#22635;&#20805;Message Address &#22495;&#65292;Message Upper Address&#22495;&#65292;
    </p>
    <p>
      Message Data&#22495;&#21644;Vector Control&#22495;&#65292;&#24403;&#26576;&#20010;entry&#27809;&#26377;&#34987;mask&#30340;
    </p>
    <p>
      &#26102;&#20505;&#65292;&#36719;&#20214;&#26159;&#19981;&#33021;&#20462;&#25913;&#23427;&#30340;address&#21644;data&#22495;&#30340;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1495521129659" ID="ID_173807990" MODIFIED="1495522487258">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.&#21457;&#36865;&#28040;&#24687;</b>
    </p>
    <p>
      &#19968;&#26086;MSI&#25110;&#32773;MSI-X&#34987;&#20351;&#33021;&#65292;&#24182;&#19988;&#19968;&#20010;&#25110;&#32773;&#22810;&#20010;vector&#22788;&#20110;unmask&#30340;&#29366;&#24577;&#65292;
    </p>
    <p>
      &#35813;function&#34987;&#20801;&#35768;&#21457;&#36865;&#28040;&#24687;&#12290;&#20026;&#20102;&#21457;&#36865;&#28040;&#24687;&#65292;&#35813;function&#20250;&#36827;&#34892;&#19968;&#20010;DWORD&#20869;&#23384;
    </p>
    <p>
      &#20889;&#30340;&#20107;&#21153;&#65292;&#22312;&#21512;&#36866;&#30340;&#22320;&#22336;&#19978;&#20889;&#20837;&#21512;&#36866;&#30340;data&#12290;&#35813;DWORD&#30340;&#20004;&#20010;&#39640;&#23383;&#33410;&#26159;MSI Message Data
    </p>
    <p>
      &#24403;&#20013;&#30340;&#25968;&#25454;&#65292;DWORD&#37324;&#38754;&#30340;&#20302;&#20301;&#32622;&#30340;&#20004;&#20010;&#23383;&#33410;&#34987;&#35774;&#32622;&#25104;0&#12290;&#23545;&#20110;MSI,&#22914;&#26524;Multiple Message Enable
    </p>
    <p>
      &#19981;&#26159;0, &#37027;&#20040;&#35813;function&#34987;&#20801;&#35768;&#20462;&#25913;message data&#30340;&#22320;&#20301;bit&#65292;&#29992;&#20110;&#20135;&#29983;&#22810;&#20010;vectors&#12290;
    </p>
    <p>
      &#27604;&#22914;&#65292;&#22914;&#26524;Multiple Message Enable&#22495;&#34987;&#35774;&#32622;&#25104;010,&#37027;&#20040;function&#34987;&#20801;&#35768;&#21435;&#20462;&#25913;message data
    </p>
    <p>
      &#30340;bit1&#21644;bit 0&#30340;&#20301;&#32622;&#26469;&#20135;&#29983;&#26368;&#22810;4&#20010;vector&#12290;&#22914;&#26524;Multiple Message Enable&#22495;&#34987;&#35774;&#32622;&#25104;
    </p>
    <p>
      &#20102;&quot;000&quot;,&#37027;&#20040;function&#23601;&#19981;&#20801;&#35768;&#20462;&#25913;message data&#12290;
    </p>
    <p>
      &#23545;&#20110;MSI-X, MSI-X table&#38024;&#23545;&#27599;&#20010;&#20998;&#37197;&#30340;vector&#33267;&#23569;&#21253;&#21547;&#19968;&#20010;entry&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1495522499190" FOLDED="true" ID="ID_1098871003" MODIFIED="1499823257405">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.Per-vector masking and function masking</b>
    </p>
    <p>
      &#23545;&#20110;MSI&#21644;MSI-X&#26469;&#35828;&#65292;&#24403;&#19968;&#20010;vector&#34987;mask&#20043;&#21518;&#65292;
    </p>
    <p>
      function&#34987;&#31105;&#27490;&#21457;&#36865;&#30456;&#20851;&#30340;&#28040;&#24687;&#24182;&#19988;function&#38656;&#35201;
    </p>
    <p>
      &#35774;&#32622;&#30456;&#20851;&#30340;Pending&#20301;&#12290;&#24403;&#36719;&#20214;unmask&#19968;&#20010;vector&#24182;&#19988;
    </p>
    <p>
      &#36319;&#20182;&#30456;&#20851;&#30340;pending&#20301;&#36824;&#22788;&#20110;&#34987;&#32622;&#20301;&#30340;&#38454;&#27573;&#65292;&#37027;&#20040;function&#24517;&#39035;
    </p>
    <p>
      &#34987;&#35843;&#24230;&#36215;&#26469;&#21457;&#36865;&#30456;&#20851;&#30340;&#28040;&#24687;&#24182;&#19988;&#28165;&#38500;&#30456;&#20851;&#30340;pending&#20301;&#12290;&#28165;&#38500;
    </p>
    <p>
      msi-x function mask&#20301;&#21487;&#33021;&#20250;&#23548;&#33268;&#24456;&#22810;&#30340;&#28040;&#24687;&#38656;&#35201;&#34987;&#21457;&#36865;&#12290;
    </p>
    <p>
      
    </p>
    <p>
      If a masked vector has its Pending bit set, and the associated underlying interrupt events are
    </p>
    <p>
      somehow satisfied (usually by software though the exact manner is function-specific), the
    </p>
    <p>
      function must clear the Pending bit, to avoid sending a spurious interrupt message later
    </p>
    <p>
      when software unmasks the vector. However, if a subsequent interrupt event occurs while
    </p>
    <p>
      the vector is still masked, the function must again set the Pending bit.
    </p>
    <p>
      &#19978;&#38754;&#36825;&#27573;&#35805;&#30340;&#24847;&#24605;&#26159;&#35828;&#65292;&#24403;&#26576;&#20010;vector&#24050;&#32463;&#34987;mask&#24182;&#19988;pending&#20301;&#24050;&#32463;&#34987;&#32622;&#20301;&#30340;&#26102;&#20505;&#65292;&#22914;&#26524;&#36825;&#20010;&#26102;&#20505;&#24213;&#23618;&#30340;&#20013;&#26029;&#21457;&#29983;&#20102;&#65292;&#37027;&#20040;
    </p>
    <p>
      function&#24212;&#35813;&#21435;clear&#30456;&#24212;&#30340;pending&#20301;&#65292;&#36825;&#26679;&#21487;&#20197;&#36991;&#20813;&#21518;&#38754;unmask&#30340;&#26102;&#20505;&#21457;&#36865;&#20266;&#20013;&#26029;&#28040;&#24687;&#12290;&#22914;&#26524;&#21518;&#38754;&#36824;&#26377;&#20013;&#26029;
    </p>
    <p>
      &#21457;&#29983;&#65292;&#37027;&#20040;&#35813;pending&#20301;&#24212;&#35813;&#34987;&#37325;&#26032;&#32622;&#20301;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1495525192083" ID="ID_1171505862" MODIFIED="1495525451763">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#36719;&#20214;&#21487;&#20197;&#20801;&#35768;&#27704;&#20037;&#22320;mask&#19968;&#20010;&#25110;&#32773;&#26356;&#22810;&#20010;&#30340;vector,
    </p>
    <p>
      &#24182;&#19988;&#20005;&#26684;&#22320;&#22522;&#20110;polling&#23427;&#20204;&#23545;&#24212;&#30340;pending&#27604;&#29305;&#20301;&#26469;&#26381;&#21153;&#23427;&#20204;&#23545;&#24212;&#30340;
    </p>
    <p>
      &#20013;&#26029;&#20107;&#20214;&#12290;function&#24517;&#39035;&#25903;&#25345;&#36825;&#31181;clear&#21644;set pending&#27604;&#29305;&#30340;&#24418;&#24335;&#26469;
    </p>
    <p>
      &#25903;&#25345;&quot;polling&quot;&#27169;&#24335;&#12290;&#23545;&#20110;msi-x&#65292; function&#34987;&#20801;&#35768;&#32531;&#23384;msi-x table entry
    </p>
    <p>
      &#25152;&#23545;&#24212;&#30340;address&#21644;data value&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1495532007059" FOLDED="true" ID="ID_283497554" MODIFIED="1499823267583" TEXT="msi, me, pmic&#x4e4b;&#x95f4;&#x7684;&#x5173;&#x7cfb;&#xff1f;">
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1495532047035" ID="ID_1319582696" MODIFIED="1495532087606">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Beginning in 2005, Intel began including Active Management Technology in Ethernet controllers.
    </p>
    <p>
      This system is effectively a firewall and a tool used for provisioning laptops and desktops in a corporate environment.
    </p>
    <p>
      In 2008, a new coprocessor &#8212; the Management Engine &#8212; was added.
    </p>
    <p>
      This management engine is a processor connected to every peripheral in a system.
    </p>
    <p>
      The ME has complete access to all of a computer&#8217;s memory, network connections,
    </p>
    <p>
      and every peripheral connected to a computer.
    </p>
    <p>
      The ME runs when the computer is hibernating and can intercept TCP/IP traffic.
    </p>
    <p>
      Management Engine can be used to boot a computer over a network, install a new OS,
    </p>
    <p>
      and can disable a PC if it fails to check into a server at some predetermined interval.
    </p>
    <p>
      From a security standpoint, if you own the Management Engine,
    </p>
    <p>
      you own the computer and all data contained within.
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1495035769598" FOLDED="true" ID="ID_1112106546" MODIFIED="1495532043484">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e21919"><b><i>PCI Bus Power Management Interface Specification</i></b></font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1495036577063" ID="ID_588981932" MODIFIED="1495036600532" TEXT="&#x7b2c;&#x4e8c;&#x7ae0; PCI &#x7535;&#x6e90;&#x7ba1;&#x7406;&#x6982;&#x89c8;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1495036603670" FOLDED="true" ID="ID_969591285" MODIFIED="1495071768819">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pci&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;
    </p>
    <p>
      &#30005;&#28304;&#31649;&#29702;&#30340;&#29366;&#24577;&#34987;&#23450;&#20041;&#25104;&#20102;&#21508;&#31181;&#19981;&#21516;&#30340;&#30465;&#30005;&#23618;&#27425;&#12290;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#26159;
    </p>
    <p>
      &#30001;&#19968;&#20010;&#29366;&#24577;&#21495;&#26469;&#34920;&#31034;&#30340;&#12290;&#22312;&#26412;&#25991;&#26723;&#20013;pci bus&#21644;pci function&#30340;&#30005;&#28304;&#31649;&#29702;
    </p>
    <p>
      &#29366;&#24577;&#23558;&#20250;&#34987;&#23450;&#20041;&#65292;&#35828;&#26126;&#21644;&#35752;&#35770;&#12290;&#23545;&#20110;pci bus&#30340;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#65292;&#20250;&#24102;&#26377;
    </p>
    <p>
      &#19968;&#20010;B&#30340;&#21069;&#32512;&#65292;&#23545;&#20110;pci function&#30340;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#65292;&#20250;&#24102;&#26377;&#19968;&#20010;D&#30340;&#21069;&#32512;&#12290;
    </p>
    <p>
      &#38543;&#30528;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#21495;&#30340;&#25552;&#21319;&#65292;&#30005;&#28304;&#33410;&#30465;&#30340;&#24133;&#24230;&#23601;&#36234;&#22823;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1495037089332" ID="ID_1219463230" MODIFIED="1495037131328">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.pci function &#30005;&#28304;&#29366;&#24577;
    </p>
    <p>
      pci function&#26377;&#22235;&#20010;&#30005;&#28304;&#29366;&#24577;&#65292;&#20998;&#21035;&#26159;D0-D3
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1495037140575" ID="ID_1262549390" MODIFIED="1495037433086">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.bus&#30005;&#28304;&#29366;&#24577;
    </p>
    <p>
      bus&#30340;&#30005;&#28304;&#29366;&#24577;&#21487;&#20197;&#36890;&#36807;&#26576;&#20010;&#26102;&#38388;&#28857;&#35813;bus&#30340;&#26576;&#20123;&#23646;&#24615;&#26469;&#30830;&#23450;&#65292;
    </p>
    <p>
      &#36825;&#20123;&#23646;&#24615;&#21253;&#25324;&#26159;&#21542;&#20379;&#30005;&#65292;&#26102;&#38047;&#30340;&#36895;&#24230;&#20197;&#21450;&#21738;&#20123;bus&#30340;&#27963;&#21160;&#26159;&#34987;&#20801;&#35768;&#30340;&#12290;
    </p>
    <p>
      &#23450;&#20041;&#20102;B0-B3&#22235;&#20010;&#29366;&#24577;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1495037439175" ID="ID_1411888674" MODIFIED="1495037539183">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      pci express link&#30005;&#28304;&#29366;&#24577;
    </p>
    <p>
      &#23450;&#20041;&#22312;PCI Express Base Specification&#25991;&#26723;&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1495037558325" ID="ID_877500997" MODIFIED="1495039007869">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e40f0f">Device-Class Specification</font>
    </p>
    <p>
      &#35813;specification&#20026;pci bus&#21644;pci component&#26631;&#20934;&#21270;&#20102;&#30005;&#28304;&#31649;&#29702;&#30340;&#30828;&#20214;&#25509;&#21475;&#12290;
    </p>
    <p>
      &#28982;&#32780;&#65292;&#22312;&#30456;&#21516;&#30340;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#20043;&#19979;&#65292;&#38582;&#23646;&#20110;&#19981;&#21516;&#30340;device class&#19979;&#38754;&#30340;pci function
    </p>
    <p>
      &#30340;&#34892;&#20026;&#34920;&#29616;&#22823;&#19981;&#30456;&#21516;&#12290;&#36825;&#23601;&#26159;Device-Class&#20855;&#20307;&#30340;&#30005;&#28304;&#31649;&#29702;&#31574;&#30053;&#30340;&#27010;&#24565;&#12290;&#20363;&#22914;&#65292;
    </p>
    <p>
      &#22312;&#19968;&#20010;&#32473;&#23450;&#30340;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#19979;&#38754;&#65292;audio subsystem&#25903;&#25345;&#30340;capabilities&#21015;&#34920;&#36319;&#22312;&#30456;&#21516;&#30005;&#28304;
    </p>
    <p>
      &#31649;&#29702;&#29366;&#24577;&#19979;&#24037;&#20316;&#30340;&#26174;&#21345;&#25511;&#21046;&#22120;&#30340;capabilities&#21015;&#34920;&#23601;&#26159;&#19981;&#21516;&#30340;&#12290;
    </p>
    <p>
      &#34429;&#28982;Device-Class&#30005;&#28304;&#31649;&#29702;&#25991;&#26723;&#19981;&#22312;&#26412;&#25991;&#26723;&#30340;&#35828;&#26126;&#33539;&#22260;&#20043;&#20869;&#65292;&#20294;&#26159;&#20026;&#20102;&#21521;&#35835;&#32773;&#35828;&#26126;&#20182;&#20204;&#36319;
    </p>
    <p>
      &#26412;&#25991;&#26723;&#24403;&#20013;&#35828;&#26126;&#30340;&#25509;&#21475;&#30340;&#37325;&#35201;&#20851;&#31995;&#65292;&#26412;&#25991;&#26723;&#20173;&#28982;&#22312;&#36825;&#20010;&#22320;&#26041;&#20171;&#32461;&#23427;&#20204;&#12290;
    </p>
    <p>
      &#27599;&#19968;&#31867;&#35774;&#22791;&#24517;&#39035;&#25317;&#26377;&#23427;&#20204;&#33258;&#24049;&#30340;&#19968;&#31867;&#20855;&#20307;&#30340;&#30005;&#28304;&#31649;&#29702;&#31574;&#30053;&#38598;&#21512;&#26469;&#23450;&#20041;&#23427;&#20204;&#33258;&#24049;&#30340;&#34892;&#20026;&#12290;&#20026;&#20102;
    </p>
    <p>
      &#23436;&#20840;&#34701;&#21512;&#36827;&#20837;&#30005;&#28304;&#31649;&#29702;&#31995;&#32479;&#24403;&#20013;&#65292;&#36825;&#20123;class-specific&#30005;&#28304;&#31649;&#29702;&#31574;&#30053;&#24517;&#39035;&#34987;&#26631;&#20934;&#21270;&#12290;
    </p>
    <p>
      &#27599;&#19968;&#20010;&#22823;&#31867;&#30340;&#35774;&#22791;&#31867;&#22411;&#24517;&#39035;&#26377;&#19968;&#20010;&#23545;&#24212;&#30340;Device-Class&#30005;&#28304;&#31649;&#29702;&#25991;&#26723;&#26469;&#26080;&#32541;&#22320;&#23558;&#35774;&#22791;&#34701;&#21512;&#21040;
    </p>
    <p>
      &#30005;&#28304;&#31995;&#32479;&#24403;&#20013;&#12290;
    </p>
    <p>
      Device-Class&#30005;&#28304;&#31649;&#29702;&#25991;&#26723;&#23558;&#20250;&#36890;&#24120;&#22320;&#35206;&#30422;&#19979;&#38754;&#30340;&#20960;&#20010;&#39046;&#22495;&#65306;
    </p>
    <p>
      1.&#27599;&#19968;&#20010;class&#19979;&#38754;&#30340;function&#24212;&#35813;&#20026;&#27599;&#19968;&#20010;&#30005;&#28304;&#31649;&#29702;&#29366;&#24577;&#26377;&#19968;&#20010;&#23450;&#20041;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1495071773061" FOLDED="true" ID="ID_1373757780" MODIFIED="1495532042603">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#31532;&#19977;&#31456; PCI&#30005;&#28304;&#31649;&#29702;&#25509;&#21475;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1495071921165" ID="ID_1558182725" MODIFIED="1495073783569">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#27010;&#36848;
    </p>
    <p>
      &#22235;&#20010;&#22522;&#26412;&#30340;&#34987;&#23450;&#20041;&#30340;&#30005;&#28304;&#31649;&#29702;&#30340;&#25805;&#20316;&#26159;:
    </p>
    <p>
      Capabilities Reporting, Power Status Reporting, Setting Power State, System Wakeup
    </p>
    <p>
      &#26412;&#31456;&#25551;&#36848;&#29992;&#20110;&#29992;&#20110;&#36825;&#20123;&#25805;&#20316;&#30340;&#20301;&#20110;pci&#37197;&#32622;&#31354;&#38388;&#24403;&#20013;&#30340;&#23492;&#23384;&#22120;&#30340;&#26684;&#24335;&#12290;
    </p>
    <p>
      &#20301;&#20110;pci&#37197;&#32622;&#31354;&#38388;&#24403;&#20013;&#30340;&quot;&#29366;&#24577;&#21644;&#33021;&#21147;&#25351;&#38024;&#22495;&quot;(Status and Capabilities Pointer (Cap_ptr))
    </p>
    <p>
      &#29992;&#20110;&#25351;&#31034;&#22312;&#26631;&#20934;&#30340;&#37197;&#32622;&#31354;&#38388;&#22836;&#37096;&#24403;&#20013;pci&#30005;&#28304;&#31649;&#29702;&#30340;feature&#20986;&#29616;&#30340;&#20301;&#32622;&#12290;
    </p>
    <p>
      &#36719;&#20214;&#24517;&#39035;&#35201;&#26377;&#19968;&#20010;&#26631;&#20934;&#30340;&#26041;&#27861;&#26469;&#30830;&#23450;&#26159;&#21542;&#19968;&#20010;&#20855;&#20307;&#30340;&#21151;&#33021;&#25353;&#29031;&#31526;&#21512;&#26412;&#25991;&#26723;&#35268;&#23450;&#30340;&#26041;&#24335;&#34987;&#35774;&#35745;&#20986;&#26469;&#12290;
    </p>
    <p>
      PCI Status register&#24403;&#20013;&#26377;&#19968;&#20010;bit&#21487;&#20197;&#29992;&#20110;&#30830;&#23450;Capabilities List&#26159;&#21542;&#23384;&#22312;&#20197;&#21450;&#20301;&#20110;&#26631;&#20934;&#30340;PCI
    </p>
    <p>
      &#37197;&#32622;&#31354;&#38388;&#22836;&#37096;&#24403;&#20013;&#30340;&#19968;&#20010;&#23383;&#33410;&#26469;&#25351;&#21521;&#39069;&#22806;&#23450;&#20041;&#30340;capabilities&#38142;&#34920;&#12290;&#36719;&#20214;&#21487;&#20197;&#36941;&#21382;&#35813;&#38142;&#34920;&#26469;&#20026;pci
    </p>
    <p>
      &#30005;&#28304;&#31649;&#29702;&#23547;&#25214;&#21512;&#36866;&#30340;ID(Cap_ID=01h), &#22914;&#26524;Capabilities List&#19981;&#23384;&#22312;&#65288;Capabilities bit in the Status register = 0&#65289;
    </p>
    <p>
      &#25110;&#32773;&#21015;&#34920;&#24403;&#20013;&#19981;&#23384;&#22312;&#21512;&#36866;&#30340;ID&#30340;&#39033;&#65292;&#37027;&#20040;&#35813;device&#30340;funciton&#23601;&#19981;&#25903;&#25345;&#26412;&#25991;&#26723;&#25152;&#25551;&#36848;&#30340;
    </p>
    <p>
      PCI power management interface&#12290;&#37027;&#20040;&#25805;&#20316;&#31995;&#32479;&#23601;&#20250;&#20551;&#35774;&#35774;&#22791;&#21482;&#25903;&#25345;D0&#21644;D3cold&#29366;&#24577;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1495073012754" ID="ID_1748768152" MODIFIED="1495073021976">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/pci&#x7535;&#x6e90;&#x7ba1;&#x7406;&#x914d;&#x7f6e;&#x7a7a;&#x95f4;400-300.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1495073790250" ID="ID_1742238010" MODIFIED="1495074202552">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Capabilities List Data Structure
    </p>
    <p>
      pci&#29366;&#24577;&#23492;&#23384;&#22120;(&#20559;&#31227;&#37327;06h)&#24403;&#20013;&#30340;Capabilities&#20301;&#29992;&#26469;&#25351;&#31034;
    </p>
    <p>
      &#26159;&#21542;subject function&#23454;&#29616;&#20102;&#25193;&#23637;&#21151;&#33021;&#30340;&#38142;&#34920;&#12290;&#20855;&#20307;&#26469;&#35828;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#35813;&#23492;&#23384;&#22120;&#24403;&#20013;&#30340;bit4&#34987;&#32622;&#20301;&#65292;&#37027;&#20040;Cap_Ptr&#23601;&#20250;&#25351;&#21521;
    </p>
    <p>
      &#25193;&#23637;&#38142;&#34920;&#30340;&#31532;&#19968;&#20010;item&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1495074209210" ID="ID_1594488447" MODIFIED="1495074251773">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/pci-status-register-400-300.png" />
  </body>
</html></richcontent>
</node>
<node CREATED="1495074878827" ID="ID_1914205489" MODIFIED="1495074885250">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/capabilities-linked-list-400-300.png" />
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1476668428013" FOLDED="true" ID="ID_791715704" MODIFIED="1493693179182" POSITION="right" TEXT="HDMI&#x8bbe;&#x5907;&#x9a71;&#x52a8;">
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1476668469784" ID="ID_960888638" MODIFIED="1476858086791">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.&#36319;HDMI&#30340;&#27010;&#24565;&#30456;&#20851;&#30340;&#20960;&#20010;&#26415;&#35821;</b>
    </p>
    <p>
      <b>HDCP</b>: HDCP&#30340;&#20840;&#31216;&#26159;High-bandwidthDigital Content Protection
    </p>
    <p>
      <b>DDC</b>: DDC&#26159;HDMI&#30340;&#20004;&#20010;IIC&#24341;&#33050;&#65292;&#23454;&#38469;&#19978;&#22312;&#20869;&#26680;&#24403;&#20013;&#26159;&#23454;&#29616;&#25104;&#20004;&#20010;i2c&#30340;&#39537;&#21160;&#65292;
    </p>
    <p>
      &#35813;&#39537;&#21160;&#30340;&#20316;&#29992;&#26159;&#23454;&#29616;HDCP&#22312;CPU&#21644;&#29616;&#23454;&#35774;&#22791;&#20043;&#38388;&#30340;&#20132;&#25442;&#65292;&#20197;&#21450;&#23454;&#29616;EDID(&#21253;&#21547;&#26174;&#31034;&#35774;&#22791;&#30340;
    </p>
    <p>
      &#30456;&#20851;&#21442;&#25968;)
    </p>
    <p>
      <b>HPD</b>: hot plugdetection,&#20026;&#28909;&#25554;&#25300;&#32780;&#23454;&#29616;&#65292;&#24403;&#21457;&#36865;&#31471;&#25554;&#20837;&#25509;&#25910;&#31471;&#30340;&#26102;&#20505;&#65292;&#25509;&#25910;&#31471;&#20250;&#22238;&#24212;HPD
    </p>
    <p>
      &#20449;&#21495;&#32473;&#21457;&#36865;&#31471;&#65292;&#21457;&#36865;&#31471;&#25509;&#30528;&#21551;&#21160;DDC&#36890;&#36947;&#65292;&#35835;&#21462;&#25509;&#25910;&#31471;&#30340;EDID&#20449;&#24687;&#65292;&#28982;&#21518;&#36827;&#34892;HDCP&#30340;&#20132;&#20114;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#21452;&#26041;&#39564;&#35777;&#36890;&#36807;&#65292;&#21017;&#35270;&#39057;&#65292;&#38899;&#39057;&#20250;&#27491;&#24120;&#24037;&#20316;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1476672214427" ID="ID_1858032503" MODIFIED="1476672224167">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="hdmi/hdmi-whole.jpeg" />
  </body>
</html></richcontent>
</node>
<node CREATED="1476672392539" ID="ID_670259868" MODIFIED="1476673591883">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26631;&#20934;&#30340;type A HDMI&#25509;&#21475;&#26377;19&#20010;&#24341;&#33050;&#65292;&#21478;&#22806;&#26377;&#19968;&#31181;Type B&#31867;&#22411;&#30340;&#25509;&#21475;&#34987;&#23450;&#20041;&#20986;&#26469;&#65292;&#20294;&#26159;&#24182;&#27809;&#26377;&#34987;
    </p>
    <p>
      &#24191;&#27867;&#22320;&#25903;&#25345;&#12290;
    </p>
    <p>
      TMDS Data2+ TMDS Data2 Shield TMDS Data2&#8211;
    </p>
    <p>
      TMDS Data1+ TMDS Data1 Shield TMDS Data1&#8211;
    </p>
    <p>
      TMDS Data0+ TMDS Data0 Shield TMDS Data0&#8211;
    </p>
    <p>
      TMDS Clock+&#160; TMDS Clock Shield&#160;&#160;TMDS Clock&#8211;
    </p>
    <p>
      TMDS Data5+ TMDS Data5 Shield TMDS Data5-
    </p>
    <p>
      TMDS Data4+ TMDS Data4 Shield TMDS Data4-
    </p>
    <p>
      TMDS Data3+ TMDS Data3 Shield TMDS Data3-
    </p>
    <p>
      CEC
    </p>
    <p>
      SCL SDA
    </p>
    <p>
      DDC/CEC Ground
    </p>
    <p>
      +5V Power
    </p>
    <p>
      Hot Plug Detect
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476858086792" ID="ID_1304078752" MODIFIED="1476858192085">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#26681;&#25454;&#24403;&#21069;&#23545;8890&#30340;spec&#30340;&#35299;&#35835;&#65292;8890&#37324;&#38754;&#24182;&#27809;&#26377;
    </p>
    <p>
      DDC&#35774;&#22791;&#65292;&#20294;&#26159;&#22312;AP&#20391;&#20445;&#30041;&#26377;&#19968;&#20010;DDC&#19987;&#29992;&#30340;I2C
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1476671594978" ID="ID_962028331" MODIFIED="1476672209329">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2. s5pv210&#30340;hdmi&#39537;&#21160;&#30340;&#22823;&#27010;&#30340;&#26694;&#26550;
    </p>
    <p>
      &#22312;linux 3.0.8&#24403;&#20013;hdmi&#26159;&#20316;&#20026;TV_OUT&#30340;&#19968;&#20010;&#23376;&#31995;&#32479;
    </p>
    <p>
      &#24403;TV_OUT&#34987;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#65292;hdmi&#30340;&#21021;&#22987;&#21270;&#20989;&#25968;&#20250;&#34987;
    </p>
    <p>
      &#35843;&#29992;&#30340;&#24182;&#19988;&#29983;&#25104;&#19968;&#20010;&#31526;&#21512;V4L2&#35268;&#33539;&#30340;&#35774;&#22791;&#12290;
    </p>
    <p>
      &#32780;CEC HDCP DDC HPD&#20316;&#20026;HDMI&#30340;&#32452;&#20214;&#65292;&#20182;&#20204;&#30340;&#39537;&#21160;&#23454;&#29616;&#21363;&#20026;HDMI&#39537;&#21160;&#30340;&#23454;&#29616;&#25552;&#20379;&#20989;&#25968;&#25509;&#21475;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476675499214" ID="ID_1767615288" MODIFIED="1476944116031">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.8890 spec&#35299;&#35835;</b>
    </p>
    <p>
      HDMI PHY generates the pixel and TMDS clocks and HDMI 2.0 Tx link uses both these clocks. For a
    </p>
    <p>
      synchronous operation with DECON0 display interface 3, use the pixel clock from HDMI PHY
    </p>
    <p>
      as VCLK3 of DECON0
    </p>
    <p>
      &#22312;&#36816;&#34892;DECON&#21644;HDMI 2.0 TX link&#20043;&#21069;&#65292;&#38656;&#35201;&#37197;&#32622;HDMI PHY&#30340;pixel clock&#20026;&#21512;&#36866;&#30340;&#20540;
    </p>
  </body>
</html></richcontent>
<node CREATED="1476690424027" ID="ID_438387669" MODIFIED="1476692019619">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SFR&#30340;&#35774;&#32622;:
    </p>
    <p>
      &#22312;&#20256;&#36755;audio&#25110;&#32773;video&#30340;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;&#38656;&#35201;&#25105;&#20204;&#35774;&#32622;&#22909;
    </p>
    <p>
      timing-related SFR&#12290;&#27599;&#20010;SFR set&#38656;&#35201;&#21508;&#33258;&#30340;clock domain,
    </p>
    <p>
      &#30001;&#20110;&#21508;&#33258;&#30340;clock domain&#30340;&#19981;&#21516;&#65292;&#25152;&#20197;&#22312;&#35775;&#38382;SFR set&#30340;&#26102;&#20505;
    </p>
    <p>
      &#20250;&#26377;&#19968;&#20123;&#19981;&#21516;&#30340;&#38480;&#21046;&#12290;&#19979;&#38754;&#26159;&#19968;&#20123;&#38480;&#21046;:
    </p>
    <p>
      1.&#19981;&#31649;phy_ready&#30340;&#29366;&#24577;&#26159;&#22914;&#20309;&#65292;HDMI 2.0 Tx Link Core&#21644;HDCP 2.2
    </p>
    <p>
      &#30340;&#23492;&#23384;&#22120;&#26159;&#21487;&#20197;&#35775;&#38382;&#30340;&#12290;
    </p>
    <p>
      2.&#22312;phy_ready&#34987;&#35774;&#32622;&#20043;&#21069;&#65292;HDCP 1.4&#30340;&#23492;&#23384;&#22120;&#26159;&#19981;&#33021;&#35775;&#38382;&#30340;&#12290;
    </p>
    <p>
      3.&#35775;&#38382;audio&#23492;&#23384;&#22120;&#20381;&#36182;&#20110;i_audio_clk
    </p>
    <p>
      4.&#35775;&#38382;CEC&#23492;&#23384;&#22120;&#20381;&#36182;&#20110;i_cec_clk
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476692023701" ID="ID_396483176" MODIFIED="1476692443821">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HDMI 2.0 Tx Link&#25509;&#25910;CEA 861(&#26410;&#21387;&#32553;&#25968;&#23383;&#35270;&#39057;&#26631;&#20934;)&#35270;&#39057;&#26102;&#24207;(video timing)
    </p>
    <p>
      HDMI 2.0 Tx Link&#22312;&#27599;&#20010;pixel clock&#21608;&#26399;&#37324;&#38754;&#21487;&#20197;&#25509;&#25910;&#21040;2&#20010;pixel
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476692447804" ID="ID_20467124" MODIFIED="1476693302444">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HDMI 2.0 Tx Link&#20250;&#20174;video generating IP (DECON)&#37324;&#38754;
    </p>
    <p>
      &#25509;&#25910;&#21040;&#21253;&#20351;&#33021;&#20449;&#21495;&#65292;&#24403;&#23427;&#26816;&#27979;&#21040;&#20351;&#33021;&#20449;&#21495;&#30340;&#26102;&#20505;&#65292;&#23601;&#20250;&#24320;&#22987;&#23545;
    </p>
    <p>
      &#36755;&#20837;&#30340;video data&#36827;&#34892;packeting&#25805;&#20316;&#12290;&#27880;&#24847;&#20351;&#33021;&#20449;&#21495;&#20250;&#22312;&#35270;&#39057;
    </p>
    <p>
      &#25968;&#25454;&#30495;&#27491;&#20256;&#36755;&#20043;&#21069;&#30340;32&#20010;pixel clock&#36827;&#34892;&#35302;&#21457;&#21160;&#20316;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476693318949" ID="ID_1323432844" MODIFIED="1476704375928">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      HDMI 2.0 Tx Link&#20250;&#20174;&#31995;&#32479;PDMA(&#21487;&#32534;&#31243;DMA)&#24403;&#20013;&#35831;&#27714;
    </p>
    <p>
      &#21644;&#33719;&#21462;audio&#25968;&#25454;&#12290;&#20026;&#20102;&#33719;&#21462;audio&#25968;&#25454;&#21253;&#30340;&#21457;&#36865;&#26102;&#24207;&#65292;
    </p>
    <p>
      CMU in DISP0&#20250;&#25552;&#20379;audio&#30340;&#37319;&#26679;&#39057;&#29575;&#32473;HDMI 2.0 Tx Link
    </p>
    <p>
      HDMI 2.0 Link&#26377;2&#20010;&#22806;&#37096;&#30340;&#20449;&#21495;&#28304;&#65292;&#29992;&#20197;&#33719;&#21462;audio&#30340;&#37319;&#26679;&#39057;&#29575;
    </p>
    <p>
      &#21644;audio&#30340;&#37319;&#26679;&#25968;&#25454;&#12290;
    </p>
    <p>
      BLK_DISP0 CMU&#20250;&#20135;&#29983;audio&#30340;&#37319;&#26679;&#39057;&#29575;&#65292;&#26681;&#25454;&#37319;&#26679;&#29575;&#26469;&#35774;&#32622;&#20869;&#37096;&#30340;
    </p>
    <p>
      SFR&#30340;M&#21644;N&#30340;&#20540;&#65292;&#21516;&#26102;&#22312;HDMI_LINK&#20391;&#30340;SFR&#24403;&#20013;&#25105;&#20204;&#20063;&#38656;&#35201;&#35774;&#32622;
    </p>
    <p>
      ACR_CTS&#21644;ACR_N&#30340;&#20540;&#12290;
    </p>
    <p>
      &#20351;&#29992;audio_req/ack&#25509;&#21475;&#26469;&#21521;HDMI_LINK&#21457;&#36865;audio&#25968;&#25454;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476786800378" ID="ID_511529828" MODIFIED="1476842979181">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>DECON: Display and Enhancement Controller 0 </b>
    </p>
    <p>
      &#21151;&#33021;:
    </p>
    <p>
      1.&#23558;&#36755;&#20837;&#30340;&#22270;&#29255;&#36827;&#34892;&#34701;&#21512;
    </p>
    <p>
      2.&#22686;&#24378;&#20197;&#21450;&#21387;&#32553;&#34701;&#21512;&#30340;&#22270;&#29255;
    </p>
    <p>
      3.&#20135;&#29983;video&#26102;&#35768;
    </p>
    <p>
      <i><font color="#e80a0a">&#26681;&#25454;spec4310&#39029;&#30340;&#25551;&#36848;&#65292;DISPLAY&#30340;&#36755;&#20986;&#19968;&#20849;&#26377;&#19977;&#20010;&#25509;&#21475;&#65292; </font></i>
    </p>
    <p>
      <i><font color="#e80a0a">&#20998;&#21035;&#26159;DECON_F, DECON_S, DECON_T </font></i>
    </p>
    <p>
      <i><font color="#e80a0a">&#32780;DECON_T&#26159;&#36127;&#36131;&#36755;&#20986;&#21040;HDMI&#24403;&#20013;&#30340;</font></i>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476944116036" FOLDED="true" ID="ID_32484619" MODIFIED="1486555599175">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Display Subsystem</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1476944142528" FOLDED="true" ID="ID_1445919811" MODIFIED="1486555598847">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#26174;&#31034;&#22120;&#20998;&#36776;&#29575;&#30340;&#26415;&#35821;&#31216;&#21628;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1476945174540" ID="ID_845492868" MODIFIED="1477027258667">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>High-Definition 16:9</i></b>
    </p>
    <p>
      nHD(640*360)
    </p>
    <p>
      qHD(960*540)
    </p>
    <p>
      HD(1280*720) &#35813;&#20998;&#36776;&#29575;&#32463;&#24120;&#34987;&#31216;&#20026;720p,&#23383;&#27597;p&#20854;&#23454;&#20195;&#34920;&#30340;&#26159;
    </p>
    <p>
      &quot;progressive scan&quot;&#65288;&#36880;&#34892;&#25195;&#25551;&#65289;&#20063;&#34987;&#31216;&#20026;&quot;noninterlaced scanning&quot;
    </p>
    <p>
      &#35813;&#26415;&#35821;&#23545;&#20110;&#26684;&#24335;&#30340;&#20256;&#36755;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#12290;
    </p>
    <p>
      FHD(1920*1080)
    </p>
    <p>
      QHD/WQHD(2569*1440
    </p>
    <p>
      UWQHD (3440x1440))
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1476949848838" ID="ID_1545204517" MODIFIED="1476949852042">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1477535464680" FOLDED="true" ID="ID_1619933124" MODIFIED="1494857712531" POSITION="left">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>I2C&#24635;&#32447;&#39537;&#21160;&#26694;&#26550;</b>
    </p>
  </body>
</html></richcontent>
<font NAME="SansSerif" SIZE="14"/>
<node CREATED="1477535558438" FOLDED="true" ID="ID_756977671" MODIFIED="1494857711219">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="i2c/i2c&#x603b;&#x7ebf;&#x9a71;&#x52a8;&#x6846;&#x67b6;.jpg" />
  </body>
</html></richcontent>
<node CREATED="1477539857560" FOLDED="true" ID="ID_1947968621" MODIFIED="1494857709611">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      linux&#30340;i2c&#30340;&#39537;&#21160;&#26694;&#26550;&#26032;&#26087;&#26041;&#24335;&#26159;&#24182;&#23384;&#30340;&#65292;
    </p>
    <p>
      &#26087;&#30340;&#26041;&#24335;&#31216;&#20026;legacy&#30340;&#26041;&#24335;&#65292;&#26159;&#22312;&#39537;&#21160;&#24403;&#20013;&#21160;&#24577;&#21019;&#24314;
    </p>
    <p>
      &#35774;&#22791;&#30340;&#26041;&#24335;&#65292;&#26032;&#30340;&#26041;&#24335;&#31216;&#20026;new-style&#30340;&#26041;&#24335;&#65292;new-style
    </p>
    <p>
      &#30340;&#26041;&#24335;&#26159;&#38745;&#24577;&#23450;&#20041;&#35774;&#22791;&#30340;&#26041;&#24335;
    </p>
  </body>
</html></richcontent>
<node CREATED="1477540091348" FOLDED="true" ID="ID_336523858" MODIFIED="1494857708667">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#38745;&#24577;&#23450;&#20041;&#35774;&#22791;&#30340;&#26041;&#24335;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1477548903106" ID="ID_60979335" LINK="#ID_1052998927" MODIFIED="1478759318318">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>i2c&#24635;&#32447;&#30340;&#27880;&#20876;:</b></i>
    </p>
    <p>
      &#20197;&#19977;&#26143;&#20195;&#30721;&#20026;&#20363;&#23376;&#65292;&#24635;&#32447;&#27880;&#20876;&#30340;&#26041;&#24335;&#26159;&#36890;&#36807;device tree&#30340;&#26041;&#24335;&#65292;&#22312;&#24179;&#21488;&#39537;&#21160;
    </p>
    <p>
      &#24403;&#20013;&#27880;&#20876;i2c&#30340;&#36866;&#37197;&#22120;
    </p>
    <p>
      &#28982;&#21518;&#22312;driver/i2c/busses&#30446;&#24405;&#19979;&#38754;&#26377;&#23545;&#24212;&#30340;&#24635;&#32447;&#39537;&#21160;&#21021;&#22987;&#21270;&#20989;&#25968;&#65292;
    </p>
    <p>
      &#35813;&#21021;&#22987;&#21270;&#20989;&#25968;&#36890;&#36807;&#23439;subsys_initcall&#34987;&#23450;&#20041;&#35843;&#29992;&#12290;
    </p>
    <p>
      <b>ret = i2c_add_numbered_adapter(&amp;i2c-&gt;adap)</b>
    </p>
  </body>
</html></richcontent>
<arrowlink COLOR="#b40101" DESTINATION="ID_1052998927" ENDARROW="Default" ENDINCLINATION="628;0;" ID="Arrow_ID_1164440357" STARTARROW="None" STARTINCLINATION="628;0;"/>
</node>
<node CREATED="1477639196881" ID="ID_26021854" MODIFIED="1477639220528">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i>struct resource { </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;resource_size_t start; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;resource_size_t end; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;const char *name; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;unsigned long flags; </i>
    </p>
    <p>
      <i>&#160;&#160;&#160;&#160;struct resource *parent, *sibling, *child; </i>
    </p>
    <p>
      <i>}</i>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1477535683384" ID="ID_696959423" MODIFIED="1477535789157">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>I2C&#26680;&#24515;</b>
    </p>
    <p>
      &#20026;i2c&#35774;&#22791;&#21644;i2c&#30340;&#36866;&#37197;&#22120;&#25552;&#20379;&#27880;&#20876;&#21644;&#27880;&#38144;&#30340;&#26041;&#27861;&#65292;&#25552;&#20379;&#20102;algorithm&#30340;&#19978;&#23618;&#23454;&#29616;&#65292;
    </p>
    <p>
      &#25506;&#27979;&#35774;&#22791;&#65292;&#26816;&#27979;&#35774;&#22791;&#30340;&#20195;&#30721;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1477535857422" FOLDED="true" ID="ID_412001047" MODIFIED="1494857706819">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>I2C&#24635;&#32447;&#39537;&#21160;(i2c&#36866;&#37197;&#22120;)</b>
    </p>
    <p>
      &#24635;&#32447;&#39537;&#21160;&#24403;&#20013;&#21253;&#21547;&#36866;&#37197;&#22120;i2c_adapter
    </p>
    <p>
      i2c&#36866;&#37197;&#22120;&#30340;algorithm&#25968;&#25454;i2c_algorithm
    </p>
    <p>
      &#25511;&#21046;I2c&#36866;&#37197;&#22120;&#20135;&#29983;&#36890;&#20449;&#20449;&#21495;&#30340;&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1478506581239" ID="ID_1126092277" MODIFIED="1478507649079">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#33324;&#23558;i2c_adapter&#32467;&#26500;&#20307;&#25918;&#32622;&#21040;&#19968;&#20010;&#26356;&#22823;&#30340;&#32467;&#26500;&#20307;&#24403;&#20013;&#65292;
    </p>
    <p>
      &#26356;&#22823;&#30340;&#32467;&#26500;&#20307;&#37324;&#38754;&#24448;&#24448;&#21253;&#21547;&#35813;&#36866;&#37197;&#22120;&#30340;&#26144;&#23556;&#22320;&#22336;&#65292;&#26102;&#38047;&#65292;&#20013;&#26029;&#21495;
    </p>
    <p>
      &#31561;&#31561;&#20449;&#24687;&#12290;
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992;platform_set_drvdata&#20989;&#25968;&#65292;&#23558;&#35813;&#26356;&#22823;&#30340;&#32467;&#26500;&#20307;&#25918;&#21040;
    </p>
    <p>
      platform_dev-&gt;dev-&gt;drv_data&#25351;&#38024;&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1478507869697" FOLDED="true" ID="ID_1052998927" MODIFIED="1494857705315">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><b>int i2c_add_numbered_adapter(struct i2c_adapter *adap)</b></i>
    </p>
    <p>
      &#27880;&#20876;I2c&#36866;&#37197;&#22120;
    </p>
    <p>
      &#35813;&#20989;&#25968;&#26681;&#25454;adap-&gt;nr&#30340;&#25968;&#20540;&#26469;&#21028;&#26029;&#26159;&#21542;&#38656;&#35201;&#21160;&#24577;&#20998;&#37197;adap-&gt;nr
    </p>
    <p>
      &#24635;&#20043;&#65292;&#35813;&#20989;&#25968;&#26368;&#21518;&#37117;&#20250;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      static int <font color="#f31515">i2c_register_adapter</font>(struct i2c_adapter *adap)
    </p>
    <p>
      <i><b>adap-&gt;dev.bus = &amp;i2c_bus_type; </b></i>
    </p>
    <p>
      <i><b>adap-&gt;dev.type = &amp;i2c_adapter_type; </b></i>
    </p>
    <p>
      <i><b>res = device_register(&amp;adap-&gt;dev);</b></i>
    </p>
    <p>
      &#35813;&#20989;&#25968;&#27880;&#20876;adapter&#23545;&#24212;&#30340;&#35774;&#22791;&#65292;&#24182;&#19988;&#23558;i2c&#30340;&#24635;&#32447;&#25805;&#20316;&#32467;&#26500;&#20307;&#36171;&#20540;&#32473;&#35813;adapter
    </p>
    <p>
      &#22312;i2c_register_adapter&#20989;&#25968;&#30340;&#26411;&#23614;&#38454;&#27573;&#65292;&#20250;&#20570;&#20986;&#22914;&#19979;&#30340;&#21160;&#20316;&#26469;
    </p>
    <p>
      <font color="#ea0909">of_i2c_register_devices(adap);</font>------&gt;&#26681;&#25454;device tree&#21160;&#24577;&#29983;&#25104;i2c_client
    </p>
    <p>
      acpi_i2c_register_devices(adap);
    </p>
    <p>
      acpi_i2c_install_space_handler(adap);
    </p>
    <p>
      if (adap-&gt;nr &lt; __i2c_first_dynamic_bus_num) -----&gt;&#21028;&#26029;adap-&gt;nr&#26159;&#21542;&#26159;&#23454;&#29616;&#36171;&#20540;&#22909;&#30340;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;i2c_scan_static_board_info(adap);----&gt;&#25195;&#25551;&#20840;&#23616;&#30340;dev info&#38142;&#34920;,&#26681;&#25454;
    </p>
    <p>
      devinfo-&gt;busnum == adapter-&gt;nr&#21305;&#37197;&#28982;&#21518;&#35843;&#29992;i2c_new_device&#20989;&#25968;&#29983;&#25104;i2c_client&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#b40101" DESTINATION="ID_1052998927" ENDARROW="Default" ENDINCLINATION="628;0;" ID="Arrow_ID_1164440357" SOURCE="ID_60979335" STARTARROW="None" STARTINCLINATION="628;0;"/>
<node CREATED="1478756809063" ID="ID_62046011" MODIFIED="1478756951377">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      i2c_new_device&#20989;&#25968;
    </p>
    <p>
      &#22312;&#35813;&#20989;&#25968;&#24403;&#20013;&#21160;&#24577;&#29983;&#25104;struct i2c_client&#160;&#160;&#160;*client&#65292;
    </p>
    <p>
      &#28982;&#21518;
    </p>
    <p>
      client-&gt;dev.parent = &amp;client-&gt;adapter-&gt;dev;
    </p>
    <p>
      client-&gt;dev.bus = &amp;i2c_bus_type;
    </p>
    <p>
      client-&gt;dev.type = &amp;i2c_client_type;
    </p>
    <p>
      client-&gt;dev.of_node = info-&gt;of_node;
    </p>
    <p>
      &#26368;&#21518;&#27880;&#20876;&#35774;&#22791;
    </p>
    <p>
      status = device_register(&amp;client-&gt;dev);
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1477536290853" FOLDED="true" ID="ID_813056693" MODIFIED="1494857701580">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>i2c&#35774;&#22791;&#39537;&#21160;</b>
    </p>
    <p>
      &#36825;&#26159;&#23545;I2c&#30828;&#20214;&#20307;&#31995;&#32467;&#26500;&#24403;&#20013;&#35774;&#22791;&#31471;&#30340;&#23454;&#29616;&#65292;
    </p>
    <p>
      &#35774;&#22791;&#39537;&#21160;&#20027;&#35201;&#20250;&#23454;&#29616;ic_driver&#21644;i2c_client&#25968;&#25454;&#32467;&#26500;
    </p>
    <p>
      &#20855;&#20307;&#30340;i2c&#35774;&#22791;&#36890;&#36807;&#35843;&#29992;&#20301;&#20110;i2c_dev.c&#25991;&#20214;&#24403;&#20013;&#30340;
    </p>
    <p>
      &#25509;&#21475;&#21521;&#29992;&#25143;&#23618;&#26292;&#38706;&#33258;&#24049;&#30340;&#35774;&#22791;&#33410;&#28857;&#12290;
    </p>
  </body>
</html></richcontent>
<node CREATED="1477538329716" ID="ID_1150932034" MODIFIED="1477539236410">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      i2c_client&#20195;&#34920;&#25346;&#25509;&#21040;I2c&#24635;&#32447;&#19978;&#30340;&#19968;&#20010;I2c&#35774;&#22791;
    </p>
    <p>
      struct i2c_client {
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned short flags;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* div., see below&#160;&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned short addr;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* chip address - NOTE: 7bit&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* addresses are stored in the&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* _LOWER_ 7 bits&#160;&#160;&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;char name[I2C_NAME_SIZE];
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct i2c_adapter *adapter;&#160;&#160;&#160;&#160;/* the adapter we sit on&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct device dev;&#160;&#160;&#160;&#160;&#160;&#160;/* the device structure&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;int irq;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/* irq issued by device&#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct list_head detected; /*&#29992;&#20110;&#25346;&#25509;&#21040;i2c&#30340;&#39537;&#21160;&#24403;&#20013;*/
    </p>
    <p>
      #if IS_ENABLED(CONFIG_I2C_SLAVE)
    </p>
    <p>
      &#160;&#160;&#160;&#160;i2c_slave_cb_t slave_cb;&#160;&#160;&#160;&#160;/* callback for slave mode&#160;&#160;*/
    </p>
    <p>
      #endif
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1477539724769" ID="ID_1278084141" MODIFIED="1477539757560">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct i2c_algorithm {
    </p>
    <p>
      &#160;&#160;&#160;&#160;/* If an adapter algorithm can't do I2C-level access, set master_xfer
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;to NULL. If an adapter algorithm can do SMBus access, set
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;smbus_xfer. If set to NULL, the SMBus protocol is simulated
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;using common I2C messages */
    </p>
    <p>
      &#160;&#160;&#160;&#160;/* master_xfer should return the number of messages successfully
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;processed, or a negative value on error */
    </p>
    <p>
      &#160;&#160;&#160;&#160;int (*master_xfer)(struct i2c_adapter *adap, struct i2c_msg *msgs,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;int num);
    </p>
    <p>
      &#160;&#160;&#160;&#160;int (*smbus_xfer) (struct i2c_adapter *adap, u16 addr,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned short flags, char read_write,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;u8 command, int size, union i2c_smbus_data *data);
    </p>
    <p>
      
    </p>
    <p>
      &#160;&#160;&#160;&#160;/* To determine what the adapter supports */
    </p>
    <p>
      &#160;&#160;&#160;&#160;u32 (*functionality) (struct i2c_adapter *);
    </p>
    <p>
      
    </p>
    <p>
      #if IS_ENABLED(CONFIG_I2C_SLAVE)
    </p>
    <p>
      &#160;&#160;&#160;&#160;int (*reg_slave)(struct i2c_client *client);
    </p>
    <p>
      &#160;&#160;&#160;&#160;int (*unreg_slave)(struct i2c_client *client);
    </p>
    <p>
      #endif
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1478510896716" FOLDED="true" ID="ID_1531819648" MODIFIED="1494857700380">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#37319;&#29992;&#38745;&#24577;&#30340;&#26041;&#24335;&#23450;&#20041;I2c&#30340;&#35774;&#22791;
    </p>
  </body>
</html></richcontent>
<node CREATED="1478511216179" ID="ID_78075323" MODIFIED="1478512057371">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      int&#160;&#160;__init&#160;&#160;&#160;i2c_register_board_info(int busnum,struct i2c_board_info const *info, unsigned len)
    </p>
    <p>
      &#35813;&#20989;&#25968;&#21160;&#24577;&#29983;&#25104;&#19968;&#20010;struct i2c_devinfo&#25351;&#38024;&#65292;&#28982;&#21518;&#23558;&#20989;&#25968;&#20256;&#20837;&#30340;board info&#21644;busnum&#25918;&#21040;
    </p>
    <p>
      &#35813;devinfo&#24403;&#20013;&#65292;&#28982;&#21518;&#21521;&#31995;&#32479;&#20840;&#23616;&#38142;&#34920;&#24403;&#20013;&#28155;&#21152;&#35813;devinfo
    </p>
    <p>
      list_add_tail(&amp;devinfo-&gt;list, &amp;__i2c_board_list);
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1477537328834" ID="ID_1121533482" MODIFIED="1477538324805">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      SMbus
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1490085550298" FOLDED="true" ID="ID_1395933032" MODIFIED="1504766880717" POSITION="right" TEXT="Device Tree">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1477562014348" ID="ID_737257459" MODIFIED="1502869325689">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e50a0a"><b><i>Device Tree&#20195;&#30721;&#21551;&#21160;&#20998;&#26512; </i></b></font>
    </p>
    <p>
      
    </p>
    <p>
      <font color="#110e15">https://0xax.gitbooks.io/linux-insides/content/Initialization/linux-initialization-4.html</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1477562530567" ID="ID_1185698741" MODIFIED="1477562878961">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>1.&#22312;arm&#30340;&#27719;&#32534;&#37096;&#20998;&#30340;&#21551;&#21160;&#20195;&#30721;</b>&#24403;&#20013;(arch/arm/kernel/head.S&#21644;head_common.S)
    </p>
    <p>
      machine type id &#34987;&#20445;&#23384;&#22312;&#21464;&#37327;<b>__machine_arch_type</b>&#24403;&#20013;
    </p>
    <p>
      &#25351;&#21521;DTB&#25110;&#32773;atags&#30340;&#25351;&#38024;&#34987;&#20445;&#23384;&#22312;&#20102;&#21464;&#37327; _<b>_atags_pointer</b>&#20013;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1477562929718" ID="ID_1744590774" MODIFIED="1502271600067">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.void __init setup_arch(char **cmdline_p)&#20989;&#25968;&#20998;&#26512;</b>
    </p>
    <p>
      &#35813;&#20989;&#25968;&#26159;device tree&#21021;&#22987;&#21270;&#20195;&#30721;&#30340;&#24635;&#30340;&#20837;&#21475;&#20989;&#25968;
    </p>
    <p>
      &#29992;__init&#20462;&#39280;&#30340;&#20989;&#25968;&#34920;&#26126;&#26159;&#22312;kernel&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#34987;&#35843;&#29992;&#65292;&#24403;&#21021;&#22987;&#21270;
    </p>
    <p>
      &#23436;&#25104;&#20043;&#21518;&#20869;&#26680;&#20250;&#37322;&#25918;&#25481;&#35813;&#37096;&#20998;&#30340;&#20195;&#30721;&#31354;&#38388;
    </p>
    <p>
      #define __init&#160;&#160;&#160;&#160;&#160;&#160;__section(.init.text) __cold notrace
    </p>
  </body>
</html></richcontent>
<node CREATED="1477566851078" ID="ID_788490843" MODIFIED="1490085743092">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#35843;&#29992;
    </p>
    <p>
      mdesc = <b><i>setup_machine_fdt(__atags_pointer)</i></b>
    </p>
    <p>
      &#20989;&#25968;&#65292;&#25214;&#21040;&#26368;&#21512;&#36866;&#30340;machine&#25551;&#36848;&#31526;
    </p>
  </body>
</html></richcontent>
<node CREATED="1477571268884" ID="ID_692268297" MODIFIED="1490085790289">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      mdesc = of_flat_dt_match_machine(mdesc_best, arch_get_next_mach)
    </p>
    <p>
      &#25214;&#21040;&#31995;&#32479;&#24403;&#20013;&#23450;&#20041;&#30340;&#26368;&#21305;&#37197;&#30340;machine_desc&#32467;&#26500;&#20307;&#65292;
    </p>
    <p>
      &#27880;&#24847;machine&#26159;&#25105;&#20204;&#20107;&#20808;&#38745;&#24577;&#23450;&#20041;&#30340;&#65292;&#27604;&#22914;&#23545;&#20110;&#19979;&#38754;&#30340;&#23450;&#20041;
    </p>
    <p>
      <b><i>DT_MACHINE_START</i></b>
    </p>
    <p>
      <b><i>.l2c_aux_val&#160;&#160;&#160;&#160;</i></b>
    </p>
    <p>
      <b><i>.l2c_aux_mask&#160;&#160;&#160;</i></b>
    </p>
    <p>
      <b><i>.smp&#160;</i></b>
    </p>
    <p>
      <b><i>.map_io</i></b>
    </p>
    <p>
      <b><i>.init_early</i></b>
    </p>
    <p>
      <b><i>.init_irq</i></b>
    </p>
    <p>
      <font color="#c80606"><b><i>.init_machine </i></b></font>
    </p>
    <p>
      <b><i>.init_late</i></b>
    </p>
    <p>
      <b><i>.dt_compat</i></b>
    </p>
    <p>
      <b><i>.restart</i></b>
    </p>
    <p>
      <b><i>.reserve&#160;</i></b>
    </p>
    <p>
      <b><i>.dt_fixup</i></b>
    </p>
    <p>
      <b><i>MACHINE_EN</i></b>
    </p>
  </body>
</html></richcontent>
<linktarget COLOR="#e30707" DESTINATION="ID_692268297" ENDARROW="Default" ENDINCLINATION="450;0;" ID="Arrow_ID_1021825940" SOURCE="ID_464431570" STARTARROW="None" STARTINCLINATION="450;0;"/>
<node CREATED="1477633886966" ID="ID_116811326" MODIFIED="1490085792017">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>&#20998;&#26512;init_machine&#20989;&#25968;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1477633925331" ID="ID_129454721" MODIFIED="1490085793879">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      init_machine&#20989;&#25968;&#19968;&#33324;&#37117;&#20250;&#35843;&#29992;&#21040;
    </p>
    <p>
      of_platform_populate(NULL, of_default_bus_match_table, NULL, NULL)
    </p>
    <p>
      &#20989;&#25968;
    </p>
    <p>
      &#19979;&#38754;&#20998;&#26512;<b><i>of_platform_populate</i></b>&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<node CREATED="1477634043546" ID="ID_916596600" MODIFIED="1490085797729">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#35813;&#20989;&#25968;&#20174;device tree&#30340;&#26681;&#33410;&#28857;&#24320;&#22987;&#65292;&#36880;&#20010;&#20998;&#26512;&#27599;&#20010;device_node&#65292;
    </p>
    <p>
      &#35843;&#29992;&#20989;&#25968;of_platform_bus_create&#20998;&#26512;&#36825;&#20123;node
    </p>
    <p>
      2.of_platform_bus_create&#20989;&#25968;&#39318;&#20808;&#20250;&#20998;&#26512;&#35813;&#33410;&#28857;&#26377;&#27809;&#26377;compatible&#23646;&#24615;&#65292;
    </p>
    <p>
      &#22914;&#26524;&#27809;&#26377;&#35813;&#23646;&#24615;&#65292;&#21017;&#31435;&#21051;&#36820;&#22238;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#26377;compatible&#23646;&#24615;&#65292;&#21017;&#20250;&#20998;&#26512;&#35813;&#33410;&#28857;&#30340;compatible&#23646;&#24615;&#30340;&#20540;&#26159;&#19981;&#26159;
    </p>
    <p>
      &quot;arm,primecell&quot;, &#22914;&#26524;&#26159;&#30340;&#35805;&#23601;&#35828;&#26126;&#26159;amba&#30340;&#35774;&#22791;&#65292;&#37027;&#20040;&#20250;&#21019;&#24314;amba&#35774;&#22791;&#24182;
    </p>
    <p>
      &#31435;&#21363;&#36820;&#22238;&#12290;
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992;&#20989;&#25968;of_platform_device_create_pdata&#26469;&#21019;&#24314;platform_device&#35774;&#22791;&#65292;
    </p>
    <p>
      3.&#22312;of_platform_device_create_pdata&#20989;&#25968;&#24403;&#20013;&#20250;&#35843;&#29992;
    </p>
    <p>
      of_device_alloc&#20989;&#25968;&#26469;&#20998;&#37197;platform_device&#32467;&#26500;&#20307;
    </p>
    <p>
      4.<font color="#da0808">&#22312;of_device_alloc&#20989;&#25968;&#24403;&#20013;&#65292;&#20250;&#35843;&#29992;of_address_to_resource&#21644;of_irq_count </font>
    </p>
    <p>
      <font color="#da0808">&#20989;&#25968;&#26469;&#21028;&#26029;io&#21644;irq&#30340;&#36164;&#28304;&#25968;&#30446;&#65292;&#28982;&#21518;&#35774;&#32622; </font>
    </p>
    <p>
      <font color="#da0808">dev-&gt;num_resources = num_reg + num_irq </font>
    </p>
    <p>
      <font color="#da0808">dev-&gt;resource = res</font>
    </p>
  </body>
</html></richcontent>
<node CREATED="1478504550499" ID="ID_494599611" MODIFIED="1478505672254">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><font color="#0e4d1c"><i>of_device_alloc&#20989;&#25968;&#20998;&#26512;:</i></font></b>
    </p>
    <p>
      
    </p>
    <p>
      1.while (of_address_to_resource(np, num_reg, &amp;temp_res) == 0)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;num_reg++;&#160;&#160;-----&gt; <font color="#db0707">num_reg&#20195;&#34920;reg&#23646;&#24615;&#37324;&#38754;&#26377;&#20960;&#32452;&#36164;&#28304;</font>
    </p>
    <p>
      of_address_to_resource&#20989;&#25968;&#39318;&#20808;&#20250;&#35843;&#29992;&#20989;&#25968;
    </p>
    <p>
      addrp = of_get_address(dev, index, &amp;size, &amp;flags),&#35813;&#20989;&#25968;&#26681;&#25454;&#23450;&#20041;&#30340;
    </p>
    <p>
      #address-cells = &lt;2&gt;;
    </p>
    <p>
      #size-cells = &lt;1&gt;;
    </p>
    <p>
      &#26469;&#20915;&#23450;reg&#23646;&#24615;&#37324;&#38754;&#30340;&#36215;&#22987;&#22320;&#22336;&#21644;&#22823;&#23567;&#65292;<font color="#f01717">&#27880;&#24847;address-cells&#21644;size-cells&#26159;&#30001;dev&#30340;&#29238;&#33410;&#28857; </font>
    </p>
    <p>
      <font color="#f01717">&#26469;&#20915;&#23450;&#30340;&#65292;&#32780;&#19981;&#26159;&#26681;&#25454;&#24403;&#21069;&#33410;&#28857;&#37324;&#38754;&#30340;&#23450;&#20041;&#12290;</font>
    </p>
    <p>
      &#27604;&#22914;&#22312;&#36825;&#37324;&#34920;&#31034;&#22320;&#22336;&#23383;&#27573;&#26159;&#19968;&#20010;64&#20301;&#30340;&#25968;&#25454;&#65292;&#32780;&#22320;&#22336;&#33539;&#22260;&#26159;&#30001;&#19968;&#20010;32&#20301;&#30340;&#25968;&#25454;&#34920;&#31034;&#30340;&#12290;
    </p>
    <p>
      index&#26159;&#29992;&#26469;&#21305;&#37197;reg&#23646;&#24615;&#24403;&#20013;&#30340;&#31532;&#20960;&#32452;&#30340;&#65292;&#22312;&#36825;&#37324;&#19968;&#32452;&#30340;&#25968;&#25454;&#26159;2+1=3&#20010;&#23383;&#27573;
    </p>
    <p>
      &#28982;&#21518;&#35843;&#29992; __of_address_to_resource(dev, addrp, size, flags, name, r)&#20989;&#25968;&#36820;&#22238;resource&#32467;&#26500;&#20307;
    </p>
    <p>
      
    </p>
    <p>
      2.num_irq = of_irq_count(np); &#35745;&#31639;&#26377;&#20960;&#32452;&#20013;&#26029;&#36164;&#28304;
    </p>
    <p>
      
    </p>
    <p>
      3.&#35843;&#29992;
    </p>
    <p>
      rc = of_address_to_resource(np, i, res);
    </p>
    <p>
      of_irq_to_resource_table(np, res, num_irq)
    </p>
    <p>
      &#29983;&#25104;reg&#21644;irq&#30340;&#36164;&#28304;resource&#65292;&#25918;&#32622;&#21040;dev-&gt;resource&#25351;&#38024;&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1478500026300" ID="ID_952265035" MODIFIED="1478500107403">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      struct property{
    </p>
    <p>
      char&#160;&#160;&#160;&#160;*name;
    </p>
    <p>
      int length;
    </p>
    <p>
      void&#160;&#160;&#160;&#160;*value;
    </p>
    <p>
      struct property *next;
    </p>
    <p>
      unsigned long _flags;
    </p>
    <p>
      unsigned int unique_id;
    </p>
    <p>
      struct bin_attribute attr;
    </p>
    <p>
      }
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1477571737937" ID="ID_1179490711" MODIFIED="1477571937126">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.&#35843;&#29992;&#20989;&#25968;early_init_dt_scan_nodes() </b>
    </p>
    <p>
      &#33719;&#21462;chosen node&#24403;&#20013;&#23450;&#20041;&#30340;boorargs, initrd&#31561;&#23646;&#24615;&#30340;
    </p>
    <p>
      &#20540;&#65292;&#24182;&#23558;&#20854;&#20445;&#23384;&#22312;&#20840;&#23616;&#21464;&#37327;boot_command_line,
    </p>
    <p>
      initrd_start, initrd_end&#24403;&#20013;
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1477572269455" ID="ID_34712258" MODIFIED="1477572294312">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>2.&#35843;&#29992;unflatten_device_tree() </b>
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1477572744234" ID="ID_39425452" MODIFIED="1486555598930">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.&#22914;&#20309;&#29983;&#25104;platform_device&#65311; </b>
    </p>
    <p>
      <b>asmlinkage __visible void __init start_kernel(void)</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1477573129745" ID="ID_1218217887" MODIFIED="1490085806988">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20989;&#25968;&#30340;&#26411;&#23614;&#35843;&#29992;&#20102;&#20989;&#25968;rest_init(void)
    </p>
  </body>
</html></richcontent>
<node CREATED="1477573238345" ID="ID_464431570" MODIFIED="1477573759685">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#20998;&#26512;&#19968;&#19979;&#20989;&#25968;kernel_thread(kernel_init, NULL, CLONE_FS)
    </p>
    <p>
      kernel_init&#20989;&#25968;&#35843;&#29992;&#20102;kernel_init_freeable&#20989;&#25968;,
    </p>
    <p>
      kernel_init_freeable&#20989;&#25968;&#35843;&#29992;&#20102;do_basic_setup&#20989;&#25968;&#65292;
    </p>
    <p>
      do_basic_setup&#35843;&#29992;&#20102;&#20989;&#25968;do_initcalls
    </p>
    <p>
      &#36880;&#20010;&#35843;&#29992;static initcall_t *initcall_levels[]&#20013;&#23450;&#20041;&#30340;&#20989;&#25968;,
    </p>
    <p>
      &#22312;&#36825;&#20010;&#36807;&#31243;&#24403;&#20013;&#26368;&#32456;&#35843;&#29992;&#20102;&#20989;&#25968;static int __init customize_machine(void)
    </p>
    <p>
      static int __init customize_machine(void)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;/*&#160;&#160;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;* customizes platform devices, or adds new ones
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;* On DT based machines, we fall back to populating the
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;* machine from the device tree, if no callback is provided,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;* otherwise we would always need an init_machine callback.
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;*/
    </p>
    <p>
      &#160;&#160;&#160;&#160;if (machine_desc-&gt;init_machine)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160; <b>machine_desc-&gt;init_machine();</b>
    </p>
    <p>
      #ifdef CONFIG_OF
    </p>
    <p>
      &#160;&#160;&#160;&#160;else
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;of_platform_populate(NULL, of_default_bus_match_table,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;NULL, NULL);
    </p>
    <p>
      #endif
    </p>
    <p>
      &#160;&#160;&#160;&#160;return 0;
    </p>
    <p>
      }
    </p>
    <p>
      &#26368;&#32456;&#25105;&#20204;&#36824;&#26159;&#35201;&#30475;machine&#25551;&#36848;&#31526;&#24403;&#20013;&#23450;&#20041;&#30340;init_machine&#20989;&#25968;
    </p>
  </body>
</html></richcontent>
<arrowlink COLOR="#e30707" DESTINATION="ID_692268297" ENDARROW="Default" ENDINCLINATION="450;0;" ID="Arrow_ID_1021825940" STARTARROW="None" STARTINCLINATION="450;0;"/>
</node>
</node>
</node>
</node>
<node CREATED="1477640364241" ID="ID_706701660" MODIFIED="1502940830874">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b><i>Tips&#23567;&#30693;&#35782;</i></b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1477640390721" ID="ID_335979122" MODIFIED="1477640664657">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      bases.c&#25991;&#20214;&#24403;&#20013;&#30340;&#20989;&#25968;
    </p>
    <p>
      int of_n_addr_cells(struct device_node *np)
    </p>
    <p>
      {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;const __be32 *ip;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;do {
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (np-&gt;parent)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;np = np-&gt;parent;
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;ip = of_get_property(np, &quot;#address-cells&quot;, NULL);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if (ip)
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return be32_to_cpup(ip);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;} while (np-&gt;parent);
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return OF_ROOT_NODE_ADDR_CELLS_DEFAULT;
    </p>
    <p>
      }
    </p>
    <p>
      &#21487;&#35265;&#23545;&#20110;#address-cells&#30340;&#23450;&#20041;&#26159;&#39030;&#23618;&#30340;&#33410;&#28857;&#20915;&#23450;&#30340;
    </p>
  </body>
</html></richcontent>
<node CREATED="1502940839909" ID="ID_1548033348" MODIFIED="1502940888359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      The <b>#address-cells</b>&#160;property indicate how many cells (i.e 32 bits values)
    </p>
    <p>
      are needed to form the base address part in the reg property.
    </p>
    <p>
      The <b>#size-cells</b>&#160;is the same, for the size part of the reg property.
    </p>
    <p>
      The <b>ranges</b>&#160;property can describe an address translation between the child bus and the parent bus.
    </p>
    <p>
      When simply defined as ranges;,
    </p>
    <p>
      it means that the translation is an identity translation.
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
<node CREATED="1490085626105" ID="ID_136194061" MODIFIED="1502869143497" TEXT="&#x5185;&#x6838;&#x6587;&#x6863;interrupts.txt&#x9605;&#x8bfb;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1490086793556" ID="ID_700313303" MODIFIED="1490088085359">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#20013;&#26029;&#23458;&#25143;&#33410;&#28857;
    </p>
    <p>
      &#29992;&#20110;&#25551;&#36848;&#21487;&#20197;&#20135;&#29983;&#20013;&#26029;&#30340;&#35774;&#22791;&#33410;&#28857;&#24517;&#39035;&#21253;&#21547;&#23646;&#24615;&quot;interrupts&quot;&#21644;&#23646;&#24615;&quot;interrupts-extended&quot;&#12290;
    </p>
    <p>
      &#22914;&#26524;&#19978;&#38754;&#20004;&#20010;&#23646;&#24615;&#37117;&#20986;&#29616;&#20102;&#65292;&#37027;&#20040;&#24212;&#35813;&#20248;&#20808;&#20351;&#29992;interrupts-extended&#23646;&#24615;&#65292;&#36825;&#20123;&#23646;&#24615;&#21253;&#21547;
    </p>
    <p>
      &#20102;&#19968;&#20010;&#20013;&#26029;&#35828;&#26126;&#31526;&#21015;&#34920;&#12290;&#20013;&#26029;&#35828;&#26126;&#31526;&#30340;&#26684;&#24335;&#24212;&#35813;&#26681;&#25454;&#20855;&#20307;&#30340;&#20013;&#26029;&#25511;&#21046;&#22120;&#36827;&#34892;&#30830;&#23450;&#12290;
    </p>
    <p>
      &#20030;&#20363;&#35828;&#26126;:
    </p>
    <p>
      Example:
    </p>
    <p>
      &#160;&#160;&#160;&#160;interrupt-parent = &lt;&amp;intc1&gt;;
    </p>
    <p>
      &#160;&#160;&#160;&#160;interrupts = &lt;5 0&gt;, &lt;6 0&gt;;
    </p>
    <p>
      interrupt-parent&#29992;&#20110;&#25351;&#23450;&#35813;&#20013;&#26029;&#25152;&#36335;&#30001;&#21040;&#30340;&#20013;&#26029;&#25511;&#21046;&#22120;&#65292;&#35813;&#23646;&#24615;&#21253;&#21547;&#20102;&#19968;&#20010;&#25351;&#21521;&#20013;&#26029;
    </p>
    <p>
      &#25511;&#21046;&#22120;&#30340;&#24341;&#29992;&#12290;
    </p>
    <p>
      &#24403;&#35774;&#22791;&#33410;&#28857;&#30340;&#20013;&#26029;&#38656;&#35201;&#34987;&#36335;&#30001;&#21040;&#19981;&#21516;&#30340;&#20013;&#26029;&#25511;&#21046;&#22120;&#19978;&#38754;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#20351;&#29992;&#23646;&#24615;interrupts-extended&#12290;
    </p>
    <p>
      interrupts-extended = &lt;&amp;intc1 5 1&gt;, &lt;&amp;intc2 1 0&gt;;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1490088088985" ID="ID_1548402338" MODIFIED="1502869149361">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#20013;&#26029;&#25511;&#21046;&#22120;&#33410;&#28857;
    </p>
    <p>
      &#19968;&#20010;&#35774;&#22791;&#21487;&#20197;&#36890;&#36807;&#23646;&#24615;&quot;interrupt-controller&quot;&#34987;&#25351;&#23450;&#20026;&#20013;&#26029;&#25511;&#21046;&#22120;&#65292;
    </p>
    <p>
      &#23646;&#24615;&quot;#interrupt-cells&quot;&#29992;&#20110;&#35828;&#26126;&#25351;&#23450;&#19968;&#20010;&#21333;&#29420;&#30340;&#20013;&#26029;&#25152;&#38656;&#35201;&#30340;cell&#30340;&#25968;&#37327;&#12290;
    </p>
    <p>
      &#20013;&#26029;&#25511;&#21046;&#22120;&#30340;bindings&#25991;&#26723;&#26377;&#36131;&#20219;&#35828;&#26126;&#20013;&#26029;&#25551;&#36848;&#31526;&#30340;&#38271;&#24230;&#21644;&#26684;&#24335;&#12290;
    </p>
    <p>
      &quot;#interrupt-cells&quot;&#23646;&#24615;&#65306;
    </p>
    <p>
      1.&#22914;&#26524;&#34987;&#35774;&#32622;&#25104;1,&#37027;&#20040;&#21333;&#29420;&#30340;&#19968;&#20010;cell&#20195;&#34920;&#35813;&#20013;&#26029;&#22312;&#20013;&#26029;&#25511;&#21046;&#22120;&#24403;&#20013;&#30340;&#32034;&#24341;&#21495;
    </p>
    <p>
      2.&#22914;&#26524;&#34987;&#35774;&#32622;&#25104;2,&#37027;&#20040;&#31532;&#19968;&#20010;cell&#20195;&#34920;&#20013;&#26029;&#30340;&#32034;&#24341;&#65292;&#31532;&#20108;&#20010;cell&#20195;&#34920;&#35302;&#21457;&#31867;&#22411;
    </p>
  </body>
</html></richcontent>
<node CREATED="1490090489545" ID="ID_1343084727" MODIFIED="1490093566226">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19968;&#33324;&#22320;&#23545;&#20110;&#20351;&#29992;arm gic&#20013;&#26029;&#25511;&#21046;&#22120;&#30340;&#33455;&#29255;&#65292;&#21442;&#32771;&#25991;&#26723;arm/gic.txt&#65292;
    </p>
    <p>
      GIC&#21487;&#20197;&#25552;&#20379;PPI&#65292; SPI&#65292;SGI&#19977;&#31181;&#20013;&#26029;&#32473;cpu.
    </p>
    <p>
      &#23545;&#20110;GIC&#20013;&#26029;&#25511;&#21046;&#22120;&#65292;#interrupt-cells&#36890;&#24120;&#34987;&#35774;&#32622;&#25104;3
    </p>
    <p>
      &#31532;&#19968;&#20010;cell&#20195;&#34920;&#20013;&#26029;&#31867;&#22411;&#65292;0&#20195;&#34920;SPI&#20013;&#26029;&#65292;1&#20195;&#34920;PPI&#20013;&#26029;
    </p>
    <p>
      &#31532;&#20108;&#20010;cell&#20195;&#34920;&#20013;&#26029;&#21495;&#65292;[0-987]SPI&#65292; [0-15]PPI
    </p>
    <p>
      &#31532;&#19977;&#20010;cell&#20195;&#34920;&#35302;&#21457;&#31867;&#22411;&#65292;
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1486555663162" FOLDED="true" ID="ID_217587555" MODIFIED="1491269977973" POSITION="left" TEXT="SDIO&#x9a71;&#x52a8;">
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1486555676946" ID="ID_1961085868" MODIFIED="1486555688485" TEXT="sdio&#x6574;&#x4f53;&#x67b6;&#x6784;">
<node CREATED="1486557770538" ID="ID_278806248" MODIFIED="1486557779967" TEXT="1.sdio&#x4fe1;&#x53f7;&#x5b9a;&#x4e49;">
<node CREATED="1486557814898" ID="ID_1323346593" MODIFIED="1486557958763">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      sdio&#21345;&#30340;&#31867;&#22411;
    </p>
    <p>
      1.&#20840;&#36895;&#21345;&#27169;&#24335;&#25903;&#25345;spi, 1-data, 4-data&#20256;&#36755;&#27169;&#24335;,
    </p>
    <p>
      &#20840;&#36895;&#27169;&#24335;&#30340;&#25968;&#25454;&#20256;&#36755;&#36895;&#29575;&#21487;&#20197;&#36229;&#36807;100Mb/s
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1493174169787" ID="ID_720737300" MODIFIED="1493174502890" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#157450">&#29305;&#21035;&#31456;&#33410;: Linux&#24403;&#20013;&#30340;&#21021;&#22987;&#21270;&#23439;&#23450;&#20041;</font>
    </p>
    <p>
      http://blog.chinaunix.net/uid-25445243-id-3971724.html
    </p>
  </body>
</html></richcontent>
<font BOLD="true" ITALIC="true" NAME="SansSerif" SIZE="14"/>
</node>
<node CREATED="1494669711417" FOLDED="true" ID="ID_1554517447" MODIFIED="1499823363332" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#eb1818">Linux&#26102;&#38388;&#23376;&#31995;&#32479;</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="14"/>
<node CREATED="1494667527509" FOLDED="true" ID="ID_1100995725" MODIFIED="1495432464905">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>hrtimer &#39640;&#31934;&#24230;&#23450;&#26102;&#22120; </b>
    </p>
    <p>
      &#21442;&#32771;&#32593;&#31449;: http://blog.csdn.net/droidphone/article/details/8074892
    </p>
  </body>
</html></richcontent>
<node CREATED="1494667609929" ID="ID_1521296380" MODIFIED="1494667705553">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      &#19982;&#20256;&#32479;&#23450;&#26102;&#22120;&#20351;&#29992;&#26102;&#38388;&#36718;&#31639;&#27861;&#19981;&#21516;&#65292;hrtimer&#20351;&#29992;&#20102;
    </p>
    <p>
      &#32418;&#40657;&#26641;&#31639;&#27861;&#12290;hrtimer&#21487;&#20197;&#37197;&#32622;&#25104;&#39640;&#31934;&#24230;&#21644;&#20302;&#31934;&#24230;&#20004;&#31181;&#27169;&#24335;&#65292;
    </p>
    <p>
      &#22312;&#21333;cpu&#21644;&#22810;cpu&#24403;&#20013;&#30340;&#23454;&#29616;&#20063;&#26377;&#21306;&#21035;&#12290;
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494670266219" FOLDED="true" ID="ID_8380978" MODIFIED="1495432461985">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#dd0909">1.hrtimer&#25968;&#25454;&#32467;&#26500;</font></i>
    </p>
    <p>
      <font color="#0f5bea">struct hrtimer {</font>
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct timerqueue_node&#160;&#160;&#160;&#160;&#160;&#160;node;
    </p>
    <p>
      &#160;&#160;&#160;&#160;ktime_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;_softexpires;&#29992;&#20110;&#35760;&#24405;&#19978;&#19968;&#27425;&#23450;&#26102;&#22120;&#30340;&#21040;&#26399;&#26102;&#38388;
    </p>
    <p>
      &#160;&#160;&#160;&#160;enum hrtimer_restart&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(*function)(struct hrtimer *);
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct hrtimer_clock_base&#160;&#160;&#160;*base;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;state;
    </p>
    <p>
      #ifdef CONFIG_TIMER_STATS
    </p>
    <p>
      &#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;start_pid;
    </p>
    <p>
      &#160;&#160;&#160;&#160;void&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;*start_site;
    </p>
    <p>
      &#160;&#160;&#160;&#160;char&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;start_comm[16];
    </p>
    <p>
      #endif
    </p>
    <p>
      };&#160;
    </p>
    <p>
      &#23450;&#26102;&#22120;&#19968;&#26086;&#21040;&#26399;&#65292;function&#23383;&#27573;&#25351;&#23450;&#30340;&#22238;&#35843;&#20989;&#25968;&#20250;&#34987;&#35843;&#29992;&#21040;&#12290;&#35813;&#20989;&#25968;&#30340;&#36820;&#22238;&#20540;
    </p>
    <p>
      &#26159;&#19968;&#20010;&#26522;&#20030;&#20540;&#65292;&#20915;&#23450;&#20102;&#35813;timer&#26159;&#21542;&#38656;&#35201;&#34987;&#37325;&#26032;&#21551;&#21160;&#12290;
    </p>
    <p>
      <font color="#1e37f5">enum hrtimer_restart {</font>
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_NORESTART,&#160;&#160;/* Timer is not restarted */
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_RESTART,&#160;&#160;&#160;&#160;/* Timer must be restarted */
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
<node CREATED="1494670976199" ID="ID_1827337545" MODIFIED="1494671125728">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      hrtimer&#30340;&#21040;&#26399;&#26102;&#38388;&#21487;&#20197;&#22522;&#20110;&#20197;&#19979;&#20960;&#31181;&#26102;&#38388;&#31995;&#32479;:
    </p>
    <p>
      enum&#160;&#160;hrtimer_base_type {
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_BASE_MONOTONIC,&#21333;&#35843;&#36882;&#22686;&#65292;&#19981;&#21253;&#21547;&#20241;&#30496;&#30340;&#26102;&#38388;
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_BASE_REALTIME,&#22681;&#19978;&#30495;&#23454;&#26102;&#38388;
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_BASE_BOOTTIME,&#21333;&#35843;&#36882;&#22686;&#65292;&#21253;&#21547;&#20241;&#30496;&#26102;&#38388;
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_BASE_TAI,
    </p>
    <p>
      &#160;&#160;&#160;&#160;HRTIMER_MAX_CLOCK_BASES,
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1494686743040" FOLDED="true" ID="ID_1079195272" MODIFIED="1495432458016">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#f00f0f">2.struct hrtimer_cpu_base&#25968;&#25454;&#32467;&#26500;</font></i>
    </p>
    <p>
      &#22788;&#20110;&#25928;&#29575;&#21644;&#19978;&#38145;&#30340;&#32771;&#34385;&#65292;&#27599;&#20010;cpu&#21333;&#29420;&#31649;&#29702;&#33258;&#24049;&#30340;hrtimer,
    </p>
    <p>
      &#20110;&#26159;&#19987;&#38376;&#23450;&#20041;&#20102;hrtimer_cpu_base
    </p>
    <p>
      struct hrtimer_cpu_base {
    </p>
    <p>
      &#160;&#160;&#160;&#160;raw_spinlock_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;lock;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;active_bases;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;clock_was_set;
    </p>
    <p>
      #ifdef CONFIG_HIGH_RES_TIMERS
    </p>
    <p>
      &#160;&#160;&#160;&#160;ktime_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;expires_next;
    </p>
    <p>
      &#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hres_active;
    </p>
    <p>
      &#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;hang_detected;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nr_events;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nr_retries;
    </p>
    <p>
      &#160;&#160;&#160;&#160;unsigned long&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;nr_hangs;
    </p>
    <p>
      &#160;&#160;&#160;&#160;ktime_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;max_hang_time;
    </p>
    <p>
      #endif
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct hrtimer_clock_base&#160;&#160;&#160;clock_base[HRTIMER_MAX_CLOCK_BASES];
    </p>
    <p>
      };
    </p>
    <p>
      <i><font color="#1f2ce1">clock_base&#25968;&#32452;&#20026;&#27599;&#31181;&#26102;&#38388;&#22522;&#20934;&#31995;&#32479;&#37117;&#23450;&#20041;&#20102;&#19968;&#20010;hrtimer_clock_base</font></i>
    </p>
  </body>
</html></richcontent>
<node CREATED="1494688244278" ID="ID_1909412585" MODIFIED="1494688529324">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <i><font color="#d41212">struct hrtimer_clock_base</font></i>&#160;{
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct hrtimer_cpu_base *cpu_base; &#25351;&#21521;&#35813;&#32467;&#26500;&#20307;&#25152;&#23646;&#30340;cpu
    </p>
    <p>
      &#160;&#160;&#160;&#160;int&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;index;
    </p>
    <p>
      &#160;&#160;&#160;&#160;clockid_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;clockid;
    </p>
    <p>
      &#160;&#160;&#160;&#160;struct timerqueue_head&#160;&#160;active;&#32418;&#40657;&#26641;&#65292;&#21253;&#21547;&#25152;&#26377;&#30340;&#20351;&#29992;&#35813;&#26102;&#38388;&#22522;&#20934;&#31995;&#32479;&#30340;hrtimer
    </p>
    <p>
      &#160;&#160;&#160;&#160;ktime_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;resolution;&#26102;&#38047;&#30340;&#20998;&#36776;&#29575;&#65292;&#20197;&#32435;&#31186;&#20026;&#21333;&#20301;
    </p>
    <p>
      &#160;&#160;&#160;&#160;ktime_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;(*get_time)(void);&#33719;&#21462;&#24403;&#21069;&#30340;&#26102;&#38047;&#26102;&#38388;
    </p>
    <p>
      &#160;&#160;&#160;&#160;ktime_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;softirq_time;&#36816;&#34892;hrtimer&#38431;&#21015;&#26102;&#20505;&#30340;&#26102;&#38388;
    </p>
    <p>
      &#160;&#160;&#160;&#160;ktime_t&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;offset;
    </p>
    <p>
      };
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494690405349" ID="ID_755594550" MODIFIED="1494690422382">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <img src="lddpic/cpu-hrtimer-architecture.png" />
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1494690947559" FOLDED="true" ID="ID_1347025302" MODIFIED="1495432459762">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <b>3.hrtimer&#30340;&#20351;&#29992;</b>
    </p>
  </body>
</html></richcontent>
<node CREATED="1494691046699" ID="ID_120987351" MODIFIED="1494691153882">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      1.&#28155;&#21152;&#19968;&#20010;hrtimer
    </p>
    <p>
      void hrtimer_init(struct hrtimer *timer, clockid_t clock_id,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;enum hrtimer_mode mode)
    </p>
    <p>
      &#35774;&#23450;&#19968;&#20010;&#22238;&#35843;&#20989;&#25968;
    </p>
    <p>
      timer.function = hrcallback
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494691158719" ID="ID_1402665906" MODIFIED="1494727337037">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      2.&#28608;&#27963;&#23450;&#26102;&#22120;
    </p>
    <p>
      &#22914;&#26524;&#23450;&#26102;&#22120;&#26080;&#38656;&#25351;&#23450;&#19968;&#20010;&#21040;&#26399;&#33539;&#22260;&#65292;&#21017;&#21487;&#20197;&#35843;&#29992;&#19979;&#38754;&#30340;&#20989;&#25968;
    </p>
    <p>
      int
    </p>
    <p>
      hrtimer_start(struct hrtimer *timer, ktime_t tim, const enum hrtimer_mode mode)
    </p>
    <p>
      &#25351;&#23450;&#23450;&#26102;&#22120;&#30340;&#21040;&#26399;&#33539;&#22260;
    </p>
    <p>
      int hrtimer_start_range_ns(struct hrtimer *timer, ktime_t tim,
    </p>
    <p>
      &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;unsigned long delta_ns, const enum hrtimer_mode mode)
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1494727396938" ID="ID_1227909215" MODIFIED="1494727414368">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      3.&#21462;&#28040;&#23450;&#26102;&#22120;
    </p>
    <p>
      int hrtimer_cancel(struct hrtimer *timer)
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
<node CREATED="1499823373711" ID="ID_1846276696" MODIFIED="1499823514109" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#b71717"><b>Linux&#26102;&#38047;&#31649;&#29702;&#23376;&#31995;&#32479;</b></font>
    </p>
  </body>
</html></richcontent>
</node>
<node CREATED="1504507980067" ID="ID_1280172444" MODIFIED="1504508005404" POSITION="right">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      <font color="#e40606">&#29305;&#21035;&#31456;&#33410;</font>
    </p>
  </body>
</html></richcontent>
<font BOLD="true" NAME="SansSerif" SIZE="12"/>
<node CREATED="1504508011275" ID="ID_1976280137" MODIFIED="1504508021980" TEXT="&#x7f51;&#x7edc;&#x4e0a;&#x641c;&#x96c6;&#x7684;&#x535a;&#x5ba2;">
<node CREATED="1504508026131" ID="ID_20057698" MODIFIED="1504508033181">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      http://blog.yufeng.info/archives/category/linux_kb/page/2
    </p>
  </body>
</html></richcontent>
</node>
</node>
<node CREATED="1505822974956" ID="ID_1958034353" MODIFIED="1505822985028" TEXT="&#x7f51;&#x7edc;&#x4e0a;&#x7684;&#x5f00;&#x6e90;&#x9879;&#x76ee;">
<node CREATED="1505822992572" ID="ID_165995557" MODIFIED="1505823062565">
<richcontent TYPE="NODE"><html>
  <head>
    
  </head>
  <body>
    <p>
      Linux Easy Profiling&#23435;&#23453;&#21326;&#32769;&#24072;&#25171;&#36896;&#30340;linux&#24615;&#33021;&#20998;&#26512;&#24037;&#20855;
    </p>
    <p>
      <font color="#e91212">http://www.linuxep.com</font>
    </p>
  </body>
</html></richcontent>
</node>
</node>
</node>
</node>
</map>
